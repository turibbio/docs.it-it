---
title: Riferimenti alle entità espansi e non conservati
ms.date: 03/30/2017
ms.technology: dotnet-standard
ms.assetid: ffd97806-ab43-4538-8de2-5828bfbbde57
ms.openlocfilehash: 1d26e9a35497bb0d5293e8a5b630bf4356325401
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/02/2020
ms.locfileid: "84292046"
---
# <a name="entity-references-are-expanded-and-not-preserved"></a><span data-ttu-id="e52f2-102">Riferimenti alle entità espansi e non conservati</span><span class="sxs-lookup"><span data-stu-id="e52f2-102">Entity References are Expanded and Not Preserved</span></span>
<span data-ttu-id="e52f2-103">Quando il riferimento a un'entità viene espanso e sostituito dal testo che esso rappresenta, il nodo **XmlEntityReference** non viene creato.</span><span class="sxs-lookup"><span data-stu-id="e52f2-103">When the entity reference is expanded and replaced by the text it represents, the **XmlEntityReference** node is not created.</span></span> <span data-ttu-id="e52f2-104">Invece, la dichiarazione di entità viene analizzata e i nodi creati dal contenuto della dichiarazione vengono copiati al posto di **XmlEntityReference**.</span><span class="sxs-lookup"><span data-stu-id="e52f2-104">Instead, the entity declaration is parsed, and nodes created from the content in the declaration are copied in the place of the **XmlEntityReference**.</span></span> <span data-ttu-id="e52f2-105">Nell'esempio di `&publisher;`, `&publisher;` non viene quindi salvato, ma viene creato un nodo **XmlText**.</span><span class="sxs-lookup"><span data-stu-id="e52f2-105">Therefore, in the `&publisher;` example, the `&publisher;` is not saved, but instead, an **XmlText** node is created.</span></span>  
  
 <span data-ttu-id="e52f2-106">![Struttura ad albero espansa](media/xmlentityref-expanded-nodes.gif "xmlentityref_expanded_nodes")</span><span class="sxs-lookup"><span data-stu-id="e52f2-106">![expanded tree structure](media/xmlentityref-expanded-nodes.gif "xmlentityref_expanded_nodes")</span></span>  
<span data-ttu-id="e52f2-107">Struttura ad albero per i riferimenti alle entità espansi</span><span class="sxs-lookup"><span data-stu-id="e52f2-107">Tree structure for entity references that are expanded</span></span>  
  
 <span data-ttu-id="e52f2-108">Le entità carattere, come `B` o `<`, non sono mantenute,</span><span class="sxs-lookup"><span data-stu-id="e52f2-108">Character entities such as `B` or `<` are not preserved.</span></span> <span data-ttu-id="e52f2-109">ma vengono sempre espanse e rappresentate come nodi di tipo text.</span><span class="sxs-lookup"><span data-stu-id="e52f2-109">Instead, they are always expanded and represented as text nodes.</span></span>  
  
 <span data-ttu-id="e52f2-110">Per conservare i nodi **XmlEntityReference** e i nodi figlio del riferimento all'entità associati a quest'ultima, impostare il flag **EntityHandling** su **ExpandCharEntities**.</span><span class="sxs-lookup"><span data-stu-id="e52f2-110">To preserve **XmlEntityReference** nodes and child nodes of the entity reference attached to it, set the **EntityHandling** flag to **ExpandCharEntities**.</span></span> <span data-ttu-id="e52f2-111">In caso contrario, lasciare il flag **EntityHandling** sull'impostazione predefinita, ovvero **ExpandEntities**.</span><span class="sxs-lookup"><span data-stu-id="e52f2-111">Otherwise, leave the **EntityHandling** flag at the default, which is to **ExpandEntities**.</span></span> <span data-ttu-id="e52f2-112">In questo caso nel DOM non si osserveranno nodi dei riferimenti alle entità.</span><span class="sxs-lookup"><span data-stu-id="e52f2-112">In this case, you will not see entity reference nodes in the DOM.</span></span> <span data-ttu-id="e52f2-113">I nodi saranno sostituiti da copie dei nodi figlio della dichiarazione di entità.</span><span class="sxs-lookup"><span data-stu-id="e52f2-113">The nodes are replaced by the nodes that are copies of the child nodes of the entity declaration.</span></span>  
  
 <span data-ttu-id="e52f2-114">Una conseguenza della mancata conservazione dei riferimenti alle entità è che quando il documento viene salvato e passato a un'altra applicazione, l'applicazione ricevente non è in grado di rilevare che i nodi sono stati generati da un riferimento all'entità.</span><span class="sxs-lookup"><span data-stu-id="e52f2-114">One side effect of not preserving entity references is that when the document is saved and passed on to another application, the receiving application does not know that the nodes were generated by an entity reference.</span></span> <span data-ttu-id="e52f2-115">Tuttavia, se i riferimenti alle entità vengono conservati, l'applicazione ricevente rileva un riferimento all'entità e legge i nodi figlio.</span><span class="sxs-lookup"><span data-stu-id="e52f2-115">However, when entity references are preserved, a receiving application sees an entity reference and reads the child nodes.</span></span> <span data-ttu-id="e52f2-116">È evidente che i nodi figlio rappresentano le informazioni presenti nella dichiarazione di entità.</span><span class="sxs-lookup"><span data-stu-id="e52f2-116">It is apparent that the child nodes represent the information that was in the entity declaration.</span></span> <span data-ttu-id="e52f2-117">Se i riferimenti alle entità vengono conservati, ad esempio, il DOM possiede teoricamente la struttura seguente.</span><span class="sxs-lookup"><span data-stu-id="e52f2-117">For example, the DOM theoretically has the following structure if entity references are preserved.</span></span>  
  
 <span data-ttu-id="e52f2-118">XmlElement: publisher</span><span class="sxs-lookup"><span data-stu-id="e52f2-118">XmlElement: publisher</span></span>  
  
 <span data-ttu-id="e52f2-119">XmlEntityReference: `&publisher;`</span><span class="sxs-lookup"><span data-stu-id="e52f2-119">XmlEntityReference: `&publisher;`</span></span>  
  
 <span data-ttu-id="e52f2-120">XmlText: Microsoft Press</span><span class="sxs-lookup"><span data-stu-id="e52f2-120">XmlText: Microsoft Press</span></span>  
  
 <span data-ttu-id="e52f2-121">Se i riferimenti alle entità vengono espansi nel DOM, come avviene in base al metodo predefinito, il tipo di struttura ad albero è il seguente:</span><span class="sxs-lookup"><span data-stu-id="e52f2-121">If entity references are expanded in the DOM, which is the default method, the structure has this type of tree:</span></span>  
  
 <span data-ttu-id="e52f2-122">XmlElement: publisher</span><span class="sxs-lookup"><span data-stu-id="e52f2-122">XmlElement: publisher</span></span>  
  
 <span data-ttu-id="e52f2-123">XmlText: Microsoft Press</span><span class="sxs-lookup"><span data-stu-id="e52f2-123">XmlText: Microsoft Press</span></span>  
  
 <span data-ttu-id="e52f2-124">Si noti che il nodo del riferimento all'entità è scomparso e che l'applicazione ricevente non riesce a rilevare che il nodo **XmlText** contenente "Microsoft Press" era stato creato da una dichiarazione di entità.</span><span class="sxs-lookup"><span data-stu-id="e52f2-124">Notice that the entity reference node is gone, and the receiving application cannot tell that the **XmlText** node containing "Microsoft Press" was created from an entity declaration.</span></span>  
  
 <span data-ttu-id="e52f2-125">Se si usa un lettore che non riesce a risolvere le entità, il metodo **Load** genera un'eccezione quando incontra un riferimento all'entità.</span><span class="sxs-lookup"><span data-stu-id="e52f2-125">If you use a reader that cannot resolve entities, the **Load** method throws an exception when it encounters an entity reference.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e52f2-126">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="e52f2-126">See also</span></span>

- [<span data-ttu-id="e52f2-127">XML DOM (Document Object Model)</span><span class="sxs-lookup"><span data-stu-id="e52f2-127">XML Document Object Model (DOM)</span></span>](xml-document-object-model-dom.md)
