---
title: Garbage Collection in background
description: Informazioni sulle Garbage Collection in background in .NET e su come si differenziano in workstation e Garbage Collection server.
ms.date: 04/21/2020
helpviewer_keywords:
- garbage collection, background
- background garbage collection
ms.openlocfilehash: 8134c0af55d74e57dcfce8c7174265b8c9902feb
ms.sourcegitcommit: 5280b2aef60a1ed99002dba44e4b9e7f6c830604
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/03/2020
ms.locfileid: "84307072"
---
# <a name="background-garbage-collection"></a><span data-ttu-id="00cea-103">Garbage Collection in background</span><span class="sxs-lookup"><span data-stu-id="00cea-103">Background garbage collection</span></span>

<span data-ttu-id="00cea-104">In background Garbage Collection (GC) le generazioni temporanee (0 e 1) vengono raccolte in base alle esigenze mentre è in corso la raccolta di generazione 2.</span><span class="sxs-lookup"><span data-stu-id="00cea-104">In background garbage collection (GC), ephemeral generations (0 and 1) are collected as needed while the collection of generation 2 is in progress.</span></span> <span data-ttu-id="00cea-105">Il Garbage Collection in background viene eseguito su uno o più thread dedicati, a seconda che si tratti di un GC di base o del server e si applica solo alle raccolte di generazione 2.</span><span class="sxs-lookup"><span data-stu-id="00cea-105">Background garbage collection is performed on one or more dedicated threads, depending on whether it's background or server GC, and applies only to generation 2 collections.</span></span>

<span data-ttu-id="00cea-106">Il Garbage Collection in background è abilitato per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="00cea-106">Background garbage collection is enabled by default.</span></span> <span data-ttu-id="00cea-107">Può essere abilitata o disabilitata con l'impostazione di configurazione [gcConcurrent](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) nell'impostazione .NET Framework app o [System. GC. Concurrent](../../core/run-time-config/garbage-collector.md#systemgcconcurrentcomplus_gcconcurrent) nelle app .NET Core.</span><span class="sxs-lookup"><span data-stu-id="00cea-107">It can be enabled or disabled with the [gcConcurrent](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) configuration setting in .NET Framework apps or the [System.GC.Concurrent](../../core/run-time-config/garbage-collector.md#systemgcconcurrentcomplus_gcconcurrent) setting in .NET Core apps.</span></span>

> [!NOTE]
> <span data-ttu-id="00cea-108">In background Garbage Collection sostituisce [Garbage Collection simultanei](#concurrent-garbage-collection) ed è disponibile in .NET Framework 4 e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="00cea-108">Background garbage collection replaces [concurrent garbage collection](#concurrent-garbage-collection) and is available in .NET Framework 4 and later versions.</span></span> <span data-ttu-id="00cea-109">In .NET Framework 4 è supportato solo per Garbage Collection *workstation* .</span><span class="sxs-lookup"><span data-stu-id="00cea-109">In .NET Framework 4, it's supported only for *workstation* garbage collection.</span></span> <span data-ttu-id="00cea-110">A partire da .NET Framework 4,5, Garbage Collection in background è disponibile sia per la *workstation* che per il Garbage Collection *Server* .</span><span class="sxs-lookup"><span data-stu-id="00cea-110">Starting with .NET Framework 4.5, background garbage collection is available for both *workstation* and *server* garbage collection.</span></span>

<span data-ttu-id="00cea-111">Una raccolta nelle generazioni temporanee durante Garbage Collection in background è nota come Garbage Collection in *primo piano* .</span><span class="sxs-lookup"><span data-stu-id="00cea-111">A collection on ephemeral generations during background garbage collection is known as *foreground* garbage collection.</span></span> <span data-ttu-id="00cea-112">Durante l'esecuzione di un'operazione di Garbage Collection in primo piano, tutti i thread gestiti vengono sospesi.</span><span class="sxs-lookup"><span data-stu-id="00cea-112">When foreground garbage collections occur, all managed threads are suspended.</span></span>

<span data-ttu-id="00cea-113">Quando lo sfondo Garbage Collection è in corso ed è stato allocato un numero sufficiente di oggetti nella generazione 0, CLR esegue una Garbage Collection di primo piano di generazione 0 o 1.</span><span class="sxs-lookup"><span data-stu-id="00cea-113">When background garbage collection is in progress and you've allocated enough objects in generation 0, the CLR performs a generation 0 or generation 1 foreground garbage collection.</span></span> <span data-ttu-id="00cea-114">Il thread di Garbage Collection in background dedicato esegue controlli in corrispondenza di punti sicuri frequenti per stabilire se vi sia una richiesta di Garbage Collection in primo piano.</span><span class="sxs-lookup"><span data-stu-id="00cea-114">The dedicated background garbage collection thread checks at frequent safe points to determine whether there is a request for foreground garbage collection.</span></span> <span data-ttu-id="00cea-115">In caso affermativo, la raccolta in background si autosospende in modo che possa essere eseguita l'operazione in primo piano.</span><span class="sxs-lookup"><span data-stu-id="00cea-115">If there is, the background collection suspends itself so that foreground garbage collection can occur.</span></span> <span data-ttu-id="00cea-116">Una volta completato il Garbage Collection in primo piano, lo sfondo dedicato Garbage Collection thread e thread utente riprende.</span><span class="sxs-lookup"><span data-stu-id="00cea-116">After the foreground garbage collection is completed, the dedicated background garbage collection threads and user threads resume.</span></span>

<span data-ttu-id="00cea-117">La modalità in background elimina le restrizioni di allocazione imposte dalla modalità simultanea, dal momento che durante un'operazione di Garbage Collection in background è possibile eseguire operazioni temporanee.</span><span class="sxs-lookup"><span data-stu-id="00cea-117">Background garbage collection removes allocation restrictions imposed by concurrent garbage collection, because ephemeral garbage collections can occur during background garbage collection.</span></span> <span data-ttu-id="00cea-118">In background Garbage Collection possibile rimuovere gli oggetti inattivi in generazioni effimere.</span><span class="sxs-lookup"><span data-stu-id="00cea-118">Background garbage collection can remove dead objects in ephemeral generations.</span></span> <span data-ttu-id="00cea-119">Può anche espandere l'heap, se necessario, durante un Garbage Collection di generazione 1.</span><span class="sxs-lookup"><span data-stu-id="00cea-119">It can also expand the heap if needed during a generation 1 garbage collection.</span></span>

## <a name="background-workstation-vs-server-gc"></a><span data-ttu-id="00cea-120">GC della workstation in background rispetto al server</span><span class="sxs-lookup"><span data-stu-id="00cea-120">Background workstation vs. server GC</span></span>

<span data-ttu-id="00cea-121">A partire da .NET Framework 4,5, Garbage Collection in background è disponibile per il catalogo globale del server.</span><span class="sxs-lookup"><span data-stu-id="00cea-121">Starting with .NET Framework 4.5, background garbage collection is available for server GC.</span></span> <span data-ttu-id="00cea-122">GC in background è la modalità predefinita per il server Garbage Collection.</span><span class="sxs-lookup"><span data-stu-id="00cea-122">Background GC is the default mode for server garbage collection.</span></span>

<span data-ttu-id="00cea-123">Il server in background Garbage Collection funziona in modo analogo alla Garbage Collection workstation in background, ma esistono alcune differenze:</span><span class="sxs-lookup"><span data-stu-id="00cea-123">Background server garbage collection functions similarly to background workstation garbage collection, but there are a few differences:</span></span>

- <span data-ttu-id="00cea-124">Garbage Collection workstation in background usa uno sfondo dedicato Garbage Collection thread, mentre il server in background Garbage Collection usa più thread.</span><span class="sxs-lookup"><span data-stu-id="00cea-124">Background workstation garbage collection uses one dedicated background garbage collection thread, whereas background server garbage collection uses multiple threads.</span></span> <span data-ttu-id="00cea-125">In genere è presente un thread dedicato per ogni processore logico.</span><span class="sxs-lookup"><span data-stu-id="00cea-125">Typically, there's a dedicated thread for each logical processor.</span></span>

- <span data-ttu-id="00cea-126">A differenza dello sfondo della workstation Garbage Collection thread, il timeout dei thread GC del server in background non viene eseguito.</span><span class="sxs-lookup"><span data-stu-id="00cea-126">Unlike the workstation background garbage collection thread, the background server GC threads do not time out.</span></span>

<span data-ttu-id="00cea-127">Nell'illustrazione seguente viene mostrata Garbage Collection *workstation* in background eseguita su un thread separato dedicato:</span><span class="sxs-lookup"><span data-stu-id="00cea-127">The following illustration shows background *workstation* garbage collection performed on a separate, dedicated thread:</span></span>

![Garbage Collection della workstation in background](media/fundamentals/background-workstation-garbage-collection.png)

<span data-ttu-id="00cea-129">Nella figura seguente viene illustrato il *Server* in background Garbage Collection eseguito su thread separati dedicati:</span><span class="sxs-lookup"><span data-stu-id="00cea-129">The following illustration shows background *server* garbage collection performed on separate, dedicated threads:</span></span>

![Garbage Collection del server in background](media/fundamentals/background-server-garbage-collection.png)

## <a name="concurrent-garbage-collection"></a><span data-ttu-id="00cea-131">Garbage Collection contemporanea</span><span class="sxs-lookup"><span data-stu-id="00cea-131">Concurrent garbage collection</span></span>

> [!TIP]
> <span data-ttu-id="00cea-132">Questa sezione si applica a:</span><span class="sxs-lookup"><span data-stu-id="00cea-132">This section applies to:</span></span>
>
> - <span data-ttu-id="00cea-133">.NET Framework 3,5 e versioni precedenti per la workstation Garbage Collection</span><span class="sxs-lookup"><span data-stu-id="00cea-133">.NET Framework 3.5 and earlier for workstation garbage collection</span></span>
> - <span data-ttu-id="00cea-134">.NET Framework 4 e versioni precedenti per Garbage Collection server</span><span class="sxs-lookup"><span data-stu-id="00cea-134">.NET Framework 4 and earlier for server garbage collection</span></span>
>
> <span data-ttu-id="00cea-135">Il Garbage Collector simultaneo viene sostituito da Garbage Collection in background nelle versioni successive.</span><span class="sxs-lookup"><span data-stu-id="00cea-135">Concurrent garbage is replaced by background garbage collection in later versions.</span></span>

<span data-ttu-id="00cea-136">In workstation o server Garbage Collection è possibile [abilitare la Garbage Collection simultanea](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md), che consente di eseguire i thread contemporaneamente a un thread dedicato che esegue l'Garbage Collection per la maggior parte della durata della raccolta.</span><span class="sxs-lookup"><span data-stu-id="00cea-136">In workstation or server garbage collection, you can [enable concurrent garbage collection](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md), which enables threads to run concurrently with a dedicated thread that performs the garbage collection for most of the duration of the collection.</span></span> <span data-ttu-id="00cea-137">Questa opzione ha effetto solo sulle operazioni di Garbage Collection nella generazione 2. le generazioni 0 e 1 sono sempre non simultanee perché terminano rapidamente.</span><span class="sxs-lookup"><span data-stu-id="00cea-137">This option affects only garbage collections in generation 2; generations 0 and 1 are always non-concurrent because they finish fast.</span></span>

<span data-ttu-id="00cea-138">La modalità simultanea consente alle applicazioni interattive una maggiore efficienza di risposta riducendo al minimo le pause di una raccolta.</span><span class="sxs-lookup"><span data-stu-id="00cea-138">Concurrent garbage collection enables interactive applications to be more responsive by minimizing pauses for a collection.</span></span> <span data-ttu-id="00cea-139">È possibile continuare a eseguire i thread gestiti per la maggior parte del tempo in cui viene eseguito il thread di Garbage Collection in modalità simultanea.</span><span class="sxs-lookup"><span data-stu-id="00cea-139">Managed threads can continue to run most of the time while the concurrent garbage collection thread is running.</span></span> <span data-ttu-id="00cea-140">Il risultato saranno pause più brevi durante l'esecuzione di un'operazione di Garbage Collection.</span><span class="sxs-lookup"><span data-stu-id="00cea-140">This results in shorter pauses while a garbage collection is occurring.</span></span>

<span data-ttu-id="00cea-141">La modalità simultanea di Garbage Collection viene eseguita in un thread dedicato.</span><span class="sxs-lookup"><span data-stu-id="00cea-141">Concurrent garbage collection is performed on a dedicated thread.</span></span> <span data-ttu-id="00cea-142">Per impostazione predefinita, CLR esegue Garbage Collection di workstation con Garbage Collection simultanea abilitata nei computer a processore singolo e a più processori.</span><span class="sxs-lookup"><span data-stu-id="00cea-142">By default, the CLR runs workstation garbage collection with concurrent garbage collection enabled on both single-processor and multi-processor computers.</span></span>

<span data-ttu-id="00cea-143">Nell'illustrazione riportata di seguito viene mostrata l'esecuzione simultanea di un'operazione di Garbage Collection in un thread dedicato separato.</span><span class="sxs-lookup"><span data-stu-id="00cea-143">The following illustration shows concurrent garbage collection performed on a separate dedicated thread.</span></span>

![Thread di Garbage Collection simultanei](media/gc-concurrent.png)

## <a name="see-also"></a><span data-ttu-id="00cea-145">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="00cea-145">See also</span></span>

- [<span data-ttu-id="00cea-146">Operazione di Garbage Collection per workstation e server</span><span class="sxs-lookup"><span data-stu-id="00cea-146">Workstation and server garbage collection</span></span>](workstation-server-gc.md)
- [<span data-ttu-id="00cea-147">Opzioni di configurazione in fase di esecuzione per Garbage Collection</span><span class="sxs-lookup"><span data-stu-id="00cea-147">Run-time configuration options for garbage collection</span></span>](../../core/run-time-config/garbage-collector.md)
