---
title: Garbage Collection in background
description: Informazioni sull'operazione di Garbage Collection in background in .NET e sulle differenze tra workstation e server e la procedura di Garbage Collection per workstation e server.
ms.date: 04/21/2020
helpviewer_keywords:
- garbage collection, background
- background garbage collection
ms.openlocfilehash: dcb1d348e679e07646273b8fbc4ea29b44ee4974
ms.sourcegitcommit: 73aa9653547a1cd70ee6586221f79cc29b588ebd
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/23/2020
ms.locfileid: "82103562"
---
# <a name="background-garbage-collection"></a><span data-ttu-id="8564b-103">Garbage Collection in background</span><span class="sxs-lookup"><span data-stu-id="8564b-103">Background garbage collection</span></span>

<span data-ttu-id="8564b-104">In background garbage collection (GC), le generazioni effimere (0 e 1) vengono raccolte in base alle esigenze mentre è in corso la raccolta della generazione 2.</span><span class="sxs-lookup"><span data-stu-id="8564b-104">In background garbage collection (GC), ephemeral generations (0 and 1) are collected as needed while the collection of generation 2 is in progress.</span></span> <span data-ttu-id="8564b-105">L'operazione di Garbage Collection in background viene eseguita su uno o più thread dedicati, a seconda che si tratti di GC in background o server e si applica solo alle raccolte di generazione 2.Background garbage collection is performed on one or more dedicated threads, depending on whether it's background or server GC, and applies only to generation 2 collections.</span><span class="sxs-lookup"><span data-stu-id="8564b-105">Background garbage collection is performed on one or more dedicated threads, depending on whether it's background or server GC, and applies only to generation 2 collections.</span></span>

<span data-ttu-id="8564b-106">L'operazione di Garbage Collection in background è abilitata per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="8564b-106">Background garbage collection is enabled by default.</span></span> <span data-ttu-id="8564b-107">Può essere abilitato o disabilitato con l'impostazione di configurazione [gcConcurrent](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) nelle app .NET Framework o l'impostazione [System.GC.Concurrent](../../core/run-time-config/garbage-collector.md#systemgcconcurrentcomplus_gcconcurrent) nelle app .NET Core.</span><span class="sxs-lookup"><span data-stu-id="8564b-107">It can be enabled or disabled with the [gcConcurrent](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) configuration setting in .NET Framework apps or the [System.GC.Concurrent](../../core/run-time-config/garbage-collector.md#systemgcconcurrentcomplus_gcconcurrent) setting in .NET Core apps.</span></span>

> [!NOTE]
> <span data-ttu-id="8564b-108">L'operazione di Garbage Collection in background sostituisce [l'operazione di Garbage Collection simultanea](#concurrent-garbage-collection) ed è disponibile in .NET Framework 4 e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="8564b-108">Background garbage collection replaces [concurrent garbage collection](#concurrent-garbage-collection) and is available in .NET Framework 4 and later versions.</span></span> <span data-ttu-id="8564b-109">In .NET Framework 4 è supportato solo per l'operazione di Garbage Collection per *workstation.*</span><span class="sxs-lookup"><span data-stu-id="8564b-109">In .NET Framework 4, it's supported only for *workstation* garbage collection.</span></span> <span data-ttu-id="8564b-110">A partire da .NET Framework 4.5.NET Framework 4.5, l'operazione di Garbage Collection in background è disponibile sia per le operazioni di Garbage Collection *per workstation* che per i *server.*</span><span class="sxs-lookup"><span data-stu-id="8564b-110">Starting with .NET Framework 4.5, background garbage collection is available for both *workstation* and *server* garbage collection.</span></span>

<span data-ttu-id="8564b-111">Una raccolta su generazioni effimere durante l'operazione di Garbage Collection in background è nota come Garbage Collection in *primo piano.*</span><span class="sxs-lookup"><span data-stu-id="8564b-111">A collection on ephemeral generations during background garbage collection is known as *foreground* garbage collection.</span></span> <span data-ttu-id="8564b-112">Durante l'esecuzione di un'operazione di Garbage Collection in primo piano, tutti i thread gestiti vengono sospesi.</span><span class="sxs-lookup"><span data-stu-id="8564b-112">When foreground garbage collections occur, all managed threads are suspended.</span></span>

<span data-ttu-id="8564b-113">Quando è in corso un'operazione di Garbage Collection in background e sono stati allocati un numero sufficiente di oggetti nella generazione 0, CLR esegue un'operazione di Garbage Collection in primo piano di generazione 0 o generazione 1.When background garbage collection is in progress and you've allocated enough objects in generation 0, the CLR performs a generation 0 or generation 1 foreground garbage collection.</span><span class="sxs-lookup"><span data-stu-id="8564b-113">When background garbage collection is in progress and you've allocated enough objects in generation 0, the CLR performs a generation 0 or generation 1 foreground garbage collection.</span></span> <span data-ttu-id="8564b-114">Il thread di Garbage Collection in background dedicato esegue controlli in corrispondenza di punti sicuri frequenti per stabilire se vi sia una richiesta di Garbage Collection in primo piano.</span><span class="sxs-lookup"><span data-stu-id="8564b-114">The dedicated background garbage collection thread checks at frequent safe points to determine whether there is a request for foreground garbage collection.</span></span> <span data-ttu-id="8564b-115">In caso affermativo, la raccolta in background si autosospende in modo che possa essere eseguita l'operazione in primo piano.</span><span class="sxs-lookup"><span data-stu-id="8564b-115">If there is, the background collection suspends itself so that foreground garbage collection can occur.</span></span> <span data-ttu-id="8564b-116">Al termine dell'operazione di Garbage Collection in primo piano, riprendono i thread e i thread utente dedicati di Garbage Collection in background.</span><span class="sxs-lookup"><span data-stu-id="8564b-116">After the foreground garbage collection is completed, the dedicated background garbage collection threads and user threads resume.</span></span>

<span data-ttu-id="8564b-117">La modalità in background elimina le restrizioni di allocazione imposte dalla modalità simultanea, dal momento che durante un'operazione di Garbage Collection in background è possibile eseguire operazioni temporanee.</span><span class="sxs-lookup"><span data-stu-id="8564b-117">Background garbage collection removes allocation restrictions imposed by concurrent garbage collection, because ephemeral garbage collections can occur during background garbage collection.</span></span> <span data-ttu-id="8564b-118">La procedura di Garbage Collection in background può rimuovere oggetti morti in generazioni effimere.</span><span class="sxs-lookup"><span data-stu-id="8564b-118">Background garbage collection can remove dead objects in ephemeral generations.</span></span> <span data-ttu-id="8564b-119">Può anche espandere l'heap se necessario durante un'operazione di Garbage Collection di generazione 1.It can also expand the heap if needed during a generation 1 garbage collection.</span><span class="sxs-lookup"><span data-stu-id="8564b-119">It can also expand the heap if needed during a generation 1 garbage collection.</span></span>

## <a name="background-workstation-vs-server-gc"></a><span data-ttu-id="8564b-120">Confronto tra workstation in background e catalogo globale per server</span><span class="sxs-lookup"><span data-stu-id="8564b-120">Background workstation vs. server GC</span></span>

<span data-ttu-id="8564b-121">A partire da .NET Framework 4.5.NET Framework 4.5.NET Framework 4.5.NET Framework 4.5.NET Framework 4.5,00.NET Framework 4.5, background garbage collection is available for server GC.</span><span class="sxs-lookup"><span data-stu-id="8564b-121">Starting with .NET Framework 4.5, background garbage collection is available for server GC.</span></span> <span data-ttu-id="8564b-122">Catalogo globale in background è la modalità predefinita per l'operazione di Garbage Collection per server.</span><span class="sxs-lookup"><span data-stu-id="8564b-122">Background GC is the default mode for server garbage collection.</span></span>

<span data-ttu-id="8564b-123">L'operazione di Garbage Collection per server in background funziona in modo simile all'operazione di Garbage Collection per workstation in background, ma esistono alcune differenze:Background server garbage collection functions similarly to background workstation garbage collection, but there are a few differences:</span><span class="sxs-lookup"><span data-stu-id="8564b-123">Background server garbage collection functions similarly to background workstation garbage collection, but there are a few differences:</span></span>

- <span data-ttu-id="8564b-124">L'operazione di Garbage Collection per workstation in background utilizza un thread di Garbage Collection in background dedicato, mentre l'operazione di Garbage Collection per server in background utilizza più thread.</span><span class="sxs-lookup"><span data-stu-id="8564b-124">Background workstation garbage collection uses one dedicated background garbage collection thread, whereas background server garbage collection uses multiple threads.</span></span> <span data-ttu-id="8564b-125">In genere, è presente un thread dedicato per ogni processore logico.</span><span class="sxs-lookup"><span data-stu-id="8564b-125">Typically, there's a dedicated thread for each logical processor.</span></span>

- <span data-ttu-id="8564b-126">A differenza del thread di Garbage Collection in background della workstation, non si fa eccezione ai thread GC del server in background.</span><span class="sxs-lookup"><span data-stu-id="8564b-126">Unlike the workstation background garbage collection thread, the background server GC threads do not time out.</span></span>

<span data-ttu-id="8564b-127">Nella figura seguente viene illustrata l'operazione di Garbage Collection per workstation in background eseguita in un thread dedicato separato:The following illustration shows background *workstation* garbage collection performed on a separate, dedicated thread:</span><span class="sxs-lookup"><span data-stu-id="8564b-127">The following illustration shows background *workstation* garbage collection performed on a separate, dedicated thread:</span></span>

![Garbage Collection della workstation in background](./media/fundamentals/background-workstation-garbage-collection.png)

<span data-ttu-id="8564b-129">Nella figura seguente viene illustrata l'operazione di Garbage Collection per server in background eseguita in thread dedicati separati:The following illustration shows background *server* garbage collection performed on separate, dedicated threads:</span><span class="sxs-lookup"><span data-stu-id="8564b-129">The following illustration shows background *server* garbage collection performed on separate, dedicated threads:</span></span>

![Garbage Collection del server in background](./media/fundamentals/background-server-garbage-collection.png)

## <a name="concurrent-garbage-collection"></a><span data-ttu-id="8564b-131">Garbage Collection contemporanea</span><span class="sxs-lookup"><span data-stu-id="8564b-131">Concurrent garbage collection</span></span>

> [!TIP]
> <span data-ttu-id="8564b-132">Questa sezione si applica a:</span><span class="sxs-lookup"><span data-stu-id="8564b-132">This section applies to:</span></span>
>
> - <span data-ttu-id="8564b-133">.NET Framework 3.5 e versioni precedenti per l'operazione di Garbage Collection per workstation</span><span class="sxs-lookup"><span data-stu-id="8564b-133">.NET Framework 3.5 and earlier for workstation garbage collection</span></span>
> - <span data-ttu-id="8564b-134">.NET Framework 4 e versioni precedenti per l'operazione di Garbage Collection per server</span><span class="sxs-lookup"><span data-stu-id="8564b-134">.NET Framework 4 and earlier for server garbage collection</span></span>
>
> <span data-ttu-id="8564b-135">I rifiuti simultanei vengono sostituiti da garbage collection in background nelle versioni successive.</span><span class="sxs-lookup"><span data-stu-id="8564b-135">Concurrent garbage is replaced by background garbage collection in later versions.</span></span>

<span data-ttu-id="8564b-136">Nell'operazione di Garbage Collection per workstation o server è possibile [abilitare l'operazione](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md)di Garbage Collection simultanea, che consente l'esecuzione simultanea dei thread con un thread dedicato che esegue l'operazione di Garbage Collection per la maggior parte della durata dell'operazione.</span><span class="sxs-lookup"><span data-stu-id="8564b-136">In workstation or server garbage collection, you can [enable concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md), which enables threads to run concurrently with a dedicated thread that performs the garbage collection for most of the duration of the collection.</span></span> <span data-ttu-id="8564b-137">Questa opzione ha effetto solo sulle operazioni di Garbage Collection nella generazione 2. le generazioni 0 e 1 sono sempre non simultanee perché terminano velocemente.</span><span class="sxs-lookup"><span data-stu-id="8564b-137">This option affects only garbage collections in generation 2; generations 0 and 1 are always non-concurrent because they finish fast.</span></span>

<span data-ttu-id="8564b-138">La modalità simultanea consente alle applicazioni interattive una maggiore efficienza di risposta riducendo al minimo le pause di una raccolta.</span><span class="sxs-lookup"><span data-stu-id="8564b-138">Concurrent garbage collection enables interactive applications to be more responsive by minimizing pauses for a collection.</span></span> <span data-ttu-id="8564b-139">È possibile continuare a eseguire i thread gestiti per la maggior parte del tempo in cui viene eseguito il thread di Garbage Collection in modalità simultanea.</span><span class="sxs-lookup"><span data-stu-id="8564b-139">Managed threads can continue to run most of the time while the concurrent garbage collection thread is running.</span></span> <span data-ttu-id="8564b-140">Il risultato saranno pause più brevi durante l'esecuzione di un'operazione di Garbage Collection.</span><span class="sxs-lookup"><span data-stu-id="8564b-140">This results in shorter pauses while a garbage collection is occurring.</span></span>

<span data-ttu-id="8564b-141">La modalità simultanea di Garbage Collection viene eseguita in un thread dedicato.</span><span class="sxs-lookup"><span data-stu-id="8564b-141">Concurrent garbage collection is performed on a dedicated thread.</span></span> <span data-ttu-id="8564b-142">Per impostazione predefinita, CLR esegue l'operazione di Garbage Collection per workstation con l'operazione di Garbage Collection simultanea abilitata sia in computer a processore singolo che a più processori.</span><span class="sxs-lookup"><span data-stu-id="8564b-142">By default, the CLR runs workstation garbage collection with concurrent garbage collection enabled on both single-processor and multi-processor computers.</span></span>

<span data-ttu-id="8564b-143">Nell'illustrazione riportata di seguito viene mostrata l'esecuzione simultanea di un'operazione di Garbage Collection in un thread dedicato separato.</span><span class="sxs-lookup"><span data-stu-id="8564b-143">The following illustration shows concurrent garbage collection performed on a separate dedicated thread.</span></span>

![Thread di Garbage Collection simultanei](./media/gc-concurrent.png)

## <a name="see-also"></a><span data-ttu-id="8564b-145">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="8564b-145">See also</span></span>

- [<span data-ttu-id="8564b-146">Operazione di Garbage Collection per workstation e server</span><span class="sxs-lookup"><span data-stu-id="8564b-146">Workstation and server garbage collection</span></span>](workstation-server-gc.md)
- [<span data-ttu-id="8564b-147">Opzioni di configurazione in fase di esecuzione per la procedura di Garbage CollectionRun-time configuration options for garbage collection</span><span class="sxs-lookup"><span data-stu-id="8564b-147">Run-time configuration options for garbage collection</span></span>](../../core/run-time-config/garbage-collector.md)
