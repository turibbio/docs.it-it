---
title: Raccolte indotte
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- garbage collection, forced
ms.assetid: 019008fe-4708-4e65-bebf-04fd9941e149
ms.openlocfilehash: 36dff45587c6c28ba17fd7389dc3863893ff8f61
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/02/2020
ms.locfileid: "84286041"
---
# <a name="induced-collections"></a><span data-ttu-id="705a8-102">Raccolte indotte</span><span class="sxs-lookup"><span data-stu-id="705a8-102">Induced Collections</span></span>
<span data-ttu-id="705a8-103">Nella maggior parte dei casi, tramite il Garbage Collector è possibile determinare il momento migliore per eseguire una raccolta ed è consigliabile consentire l'esecuzione in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="705a8-103">In most cases, the garbage collector can determine the best time to perform a collection, and you should let it run independently.</span></span> <span data-ttu-id="705a8-104">In rari casi una raccolta forzata può migliorare le prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="705a8-104">There are rare situations when a forced collection might improve your application's performance.</span></span> <span data-ttu-id="705a8-105">In questi casi, è possibile indurre un'operazione di Garbage Collection usando il metodo <xref:System.GC.Collect%2A?displayProperty=nameWithType> per forzarla.</span><span class="sxs-lookup"><span data-stu-id="705a8-105">In these cases, you can induce garbage collection by using the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method to force a garbage collection.</span></span>  
  
 <span data-ttu-id="705a8-106">Usare il metodo <xref:System.GC.Collect%2A?displayProperty=nameWithType> quando si verifica una riduzione significativa della quantità di memoria usata in un momento specifico nel codice dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="705a8-106">Use the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method when there is a significant reduction in the amount of memory being used at a specific point in your application's code.</span></span> <span data-ttu-id="705a8-107">Se, ad esempio, l'applicazione usa una finestra di dialogo complessa con numerosi controlli, chiamando il metodo <xref:System.GC.Collect%2A> quando la finestra di dialogo è chiusa è possibile migliorare le prestazioni, recuperando immediatamente la memoria usata dalla finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="705a8-107">For example, if your application uses a complex dialog box that has several controls, calling <xref:System.GC.Collect%2A> when the dialog box is closed could improve performance by immediately reclaiming the memory used by the dialog box.</span></span> <span data-ttu-id="705a8-108">Assicurarsi che l'applicazione non induca troppo spesso l'operazione di Garbage Collection, in quanto può causare una riduzione delle prestazioni se il Garbage Collector tenta di recuperare oggetti in momenti non ottimali.</span><span class="sxs-lookup"><span data-stu-id="705a8-108">Be sure that your application is not inducing garbage collection too frequently, because that can decrease performance if the garbage collector is trying to reclaim objects at non-optimal times.</span></span> <span data-ttu-id="705a8-109">È possibile fornire un valore di enumerazione <xref:System.GCCollectionMode.Optimized?displayProperty=nameWithType> al metodo <xref:System.GC.Collect%2A> in modo che la raccolta venga eseguita solo quando l'operazione è produttiva, come descritto nella sezione seguente.</span><span class="sxs-lookup"><span data-stu-id="705a8-109">You can supply a <xref:System.GCCollectionMode.Optimized?displayProperty=nameWithType> enumeration value to the <xref:System.GC.Collect%2A> method to collect only when collection would be productive, as discussed in the next section.</span></span>  
  
## <a name="gc-collection-mode"></a><span data-ttu-id="705a8-110">Modalità di raccolta Garbage Collection</span><span class="sxs-lookup"><span data-stu-id="705a8-110">GC collection mode</span></span>  
 <span data-ttu-id="705a8-111">È possibile usare uno degli overload del metodo <xref:System.GC.Collect%2A?displayProperty=nameWithType> che include un valore <xref:System.GCCollectionMode> per specificare il comportamento di una raccolta forzata, come indicato di seguito.</span><span class="sxs-lookup"><span data-stu-id="705a8-111">You can use one of the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method overloads that includes a <xref:System.GCCollectionMode> value to specify the behavior for a forced collection as follows.</span></span>  
  
|<span data-ttu-id="705a8-112">Valore della proprietà `GCCollectionMode`</span><span class="sxs-lookup"><span data-stu-id="705a8-112">`GCCollectionMode` value</span></span>|<span data-ttu-id="705a8-113">Descrizione</span><span class="sxs-lookup"><span data-stu-id="705a8-113">Description</span></span>|  
|------------------------------|-----------------|  
|<xref:System.GCCollectionMode.Default>|<span data-ttu-id="705a8-114">Usa l'impostazione di Garbage Collection predefinita per la versione di .NET in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="705a8-114">Uses the default garbage collection setting for the running version of .NET.</span></span>|  
|<xref:System.GCCollectionMode.Forced>|<span data-ttu-id="705a8-115">Forza l'esecuzione immediata dell'operazione di Garbage Collection.</span><span class="sxs-lookup"><span data-stu-id="705a8-115">Forces garbage collection to occur immediately.</span></span> <span data-ttu-id="705a8-116">Equivale alla chiamata dell'overload di <xref:System.GC.Collect?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="705a8-116">This is equivalent to calling the <xref:System.GC.Collect?displayProperty=nameWithType> overload.</span></span> <span data-ttu-id="705a8-117">Restituisce una raccolta di blocco completa di tutte le generazioni.</span><span class="sxs-lookup"><span data-stu-id="705a8-117">It results in a full blocking collection of all generations.</span></span><br /><br /> <span data-ttu-id="705a8-118">È anche possibile compattare l'heap di oggetti di grandi dimensioni impostando la proprietà <xref:System.Runtime.GCSettings.LargeObjectHeapCompactionMode%2A?displayProperty=nameWithType> su <xref:System.Runtime.GCLargeObjectHeapCompactionMode.CompactOnce?displayProperty=nameWithType> prima di forzare una procedura completa immediata di Garbage Collection di blocco.</span><span class="sxs-lookup"><span data-stu-id="705a8-118">You can also compact the large object heap by setting the <xref:System.Runtime.GCSettings.LargeObjectHeapCompactionMode%2A?displayProperty=nameWithType> property to <xref:System.Runtime.GCLargeObjectHeapCompactionMode.CompactOnce?displayProperty=nameWithType> before forcing an immediate full blocking garbage collection.</span></span>|  
|<xref:System.GCCollectionMode.Optimized>|<span data-ttu-id="705a8-119">Consente al Garbage Collector di determinare se il momento corrente è ottimale per recuperare oggetti.</span><span class="sxs-lookup"><span data-stu-id="705a8-119">Enables the garbage collector to determine whether the current time is optimal to reclaim objects.</span></span><br /><br /> <span data-ttu-id="705a8-120">Il Garbage Collector può determinare che una raccolta non è sufficientemente produttiva per giustificarne l'esecuzione, nel qual caso esce dalla funzione senza recuperare oggetti.</span><span class="sxs-lookup"><span data-stu-id="705a8-120">The garbage collector could determine that a collection would not be productive enough to be justified, in which case it will return without reclaiming objects.</span></span>|  
  
## <a name="background-or-blocking-collections"></a><span data-ttu-id="705a8-121">Raccolte in background o di blocco</span><span class="sxs-lookup"><span data-stu-id="705a8-121">Background or blocking collections</span></span>  
 <span data-ttu-id="705a8-122">È possibile chiamare l'overload del metodo <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29?displayProperty=nameWithType> per specificare se una raccolta indotta è di blocco o meno.</span><span class="sxs-lookup"><span data-stu-id="705a8-122">You can call the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29?displayProperty=nameWithType> method overload to specify whether an induced collection is blocking or not.</span></span> <span data-ttu-id="705a8-123">Il tipo di raccolta eseguita dipende da una combinazione dei parametri `mode` e `blocking` del metodo.</span><span class="sxs-lookup"><span data-stu-id="705a8-123">The type of collection performed depends on a combination of the method's `mode` and `blocking` parameters.</span></span> <span data-ttu-id="705a8-124">`mode` è un membro dell'enumerazione <xref:System.GCCollectionMode> e `blocking` è un valore <xref:System.Boolean>.</span><span class="sxs-lookup"><span data-stu-id="705a8-124">`mode` is a member of the <xref:System.GCCollectionMode> enumeration, and `blocking` is a <xref:System.Boolean> value.</span></span> <span data-ttu-id="705a8-125">La tabella seguente riepiloga l'interazione degli argomenti `mode` e `blocking`.</span><span class="sxs-lookup"><span data-stu-id="705a8-125">The following table summarizes the interaction of the `mode` and `blocking` arguments.</span></span>  
  
|`mode`|`blocking` = `true`|`blocking` = `false`|  
|------------|--------------------------|---------------------------|  
|<span data-ttu-id="705a8-126"><xref:System.GCCollectionMode.Forced> o <xref:System.GCCollectionMode.Default></span><span class="sxs-lookup"><span data-stu-id="705a8-126"><xref:System.GCCollectionMode.Forced> or <xref:System.GCCollectionMode.Default></span></span>|<span data-ttu-id="705a8-127">Viene eseguita una raccolta di blocco il prima possibile.</span><span class="sxs-lookup"><span data-stu-id="705a8-127">A blocking collection is performed as soon as possible.</span></span> <span data-ttu-id="705a8-128">Se è in corso una raccolta in background e il valore di generation è 0 o 1, il metodo <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> attiva immediatamente una raccolta di blocco e restituisce un risultato al termine della raccolta.</span><span class="sxs-lookup"><span data-stu-id="705a8-128">If a background collection is in progress and generation is 0 or 1, the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> method immediately triggers a blocking collection and returns when the collection is finished.</span></span> <span data-ttu-id="705a8-129">Se è in corso una raccolta in background e il parametro `generation` è 2, il metodo attende fino a quando la raccolta in background non viene completata, attiva una raccolta di blocco di generazione 2 e quindi restituisce il risultato.</span><span class="sxs-lookup"><span data-stu-id="705a8-129">If a background collection is in progress and the `generation` parameter is 2, the method waits until the background collection is finished, triggers a blocking generation 2 collection, and then returns.</span></span>|<span data-ttu-id="705a8-130">Viene eseguita una raccolta il prima possibile.</span><span class="sxs-lookup"><span data-stu-id="705a8-130">A collection is performed as soon as possible.</span></span> <span data-ttu-id="705a8-131">Il metodo <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> richiede una raccolta in background, la cui esecuzione non è comunque garantita. A seconda della situazione, può venire comunque eseguita una raccolta di blocco.</span><span class="sxs-lookup"><span data-stu-id="705a8-131">The <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> method requests a background collection, but this is not guaranteed; depending on the circumstances, a blocking collection may still be performed.</span></span> <span data-ttu-id="705a8-132">Se è già in corso una raccolta in background, il metodo viene restituito immediatamente.</span><span class="sxs-lookup"><span data-stu-id="705a8-132">If a background collection is already in progress, the method returns immediately.</span></span>|  
|<xref:System.GCCollectionMode.Optimized>|<span data-ttu-id="705a8-133">Può venire eseguita una raccolta di blocco, a seconda dello stato del Garbage Collector e del parametro `generation`.</span><span class="sxs-lookup"><span data-stu-id="705a8-133">A blocking collection may be performed, depending on the state of the garbage collector and the `generation` parameter.</span></span> <span data-ttu-id="705a8-134">Il Garbage Collector tenta di garantire prestazioni ottimali.</span><span class="sxs-lookup"><span data-stu-id="705a8-134">The garbage collector tries to provide optimal performance.</span></span>|<span data-ttu-id="705a8-135">È possibile eseguire una raccolta, a seconda dello stato del Garbage Collector.</span><span class="sxs-lookup"><span data-stu-id="705a8-135">A collection may be performed, depending on the state of the garbage collector.</span></span> <span data-ttu-id="705a8-136">Il metodo <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> richiede una raccolta in background, la cui esecuzione non è comunque garantita. A seconda della situazione, può venire comunque eseguita una raccolta di blocco.</span><span class="sxs-lookup"><span data-stu-id="705a8-136">The <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> method requests a background collection, but this is not guaranteed; depending on the circumstances, a blocking collection may still be performed.</span></span> <span data-ttu-id="705a8-137">Il Garbage Collector tenta di garantire prestazioni ottimali.</span><span class="sxs-lookup"><span data-stu-id="705a8-137">The garbage collector tries to provide optimal performance.</span></span> <span data-ttu-id="705a8-138">Se è già in corso una raccolta in background, il metodo viene restituito immediatamente.</span><span class="sxs-lookup"><span data-stu-id="705a8-138">If a background collection is already in progress, the method returns immediately.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="705a8-139">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="705a8-139">See also</span></span>

- [<span data-ttu-id="705a8-140">Modalità di latenza</span><span class="sxs-lookup"><span data-stu-id="705a8-140">Latency Modes</span></span>](latency.md)
- [<span data-ttu-id="705a8-141">Garbage Collection</span><span class="sxs-lookup"><span data-stu-id="705a8-141">Garbage Collection</span></span>](index.md)
