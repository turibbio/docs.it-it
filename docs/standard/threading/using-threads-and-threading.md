---
title: Utilizzo di thread e threading
description: Per informazioni sull'uso di thread e threading in .NET, è possibile scrivere applicazioni per eseguire contemporaneamente molte operazioni (multithreading).
ms.date: 08/08/2018
ms.technology: dotnet-standard
helpviewer_keywords:
- threading [.NET Framework], about threading
- managed threading
ms.assetid: 9b5ec2cd-121b-4d49-b075-222cf26f2344
ms.openlocfilehash: c092994818c9105a555acaf63ceba4b8e99bcada
ms.sourcegitcommit: 7137e12f54c4e83a94ae43ec320f8cf59c1772ea
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/10/2020
ms.locfileid: "84663031"
---
# <a name="using-threads-and-threading"></a><span data-ttu-id="61a72-103">Utilizzo di thread e threading</span><span class="sxs-lookup"><span data-stu-id="61a72-103">Using threads and threading</span></span>

<span data-ttu-id="61a72-104">Con .NET è possibile scrivere applicazioni in grado di eseguire più operazioni contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="61a72-104">With .NET, you can write applications that perform multiple operations at the same time.</span></span> <span data-ttu-id="61a72-105">Le operazioni potenzialmente in grado di compromettere altre operazioni possono essere eseguite su thread separati, un processo noto con il nome di *multithreading* o *threading Free*.</span><span class="sxs-lookup"><span data-stu-id="61a72-105">Operations with the potential of holding up other operations can execute on separate threads, a process known as *multithreading* or *free threading*.</span></span>  
  
<span data-ttu-id="61a72-106">Le applicazioni che usano il multithreading sono più reattive all'input dell'utente poiché l'interfaccia utente rimane attiva mentre le attività che richiedono un uso intensivo del processore vengono eseguite su thread separati.</span><span class="sxs-lookup"><span data-stu-id="61a72-106">Applications that use multithreading are more responsive to user input because the user interface stays active as processor-intensive tasks execute on separate threads.</span></span> <span data-ttu-id="61a72-107">Il multithreading è utile anche durante la creazione di applicazioni scalabili poiché consente di aggiungere thread man mano che aumenta il carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="61a72-107">Multithreading is also useful when you create scalable applications, because you can add threads as the workload increases.</span></span>

> [!NOTE]
> <span data-ttu-id="61a72-108">Nel caso sia necessario un maggiore controllo sul comportamento dei thread dell'applicazione, è possibile gestirli personalmente.</span><span class="sxs-lookup"><span data-stu-id="61a72-108">If you need more control over the behavior of the application's threads, you can manage the threads yourself.</span></span> <span data-ttu-id="61a72-109">Tuttavia, a partire da .NET Framework 4, la programmazione multithreading è notevolmente semplificata con le classi <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> e <xref:System.Threading.Tasks.Task?displayProperty=nameWithType>, [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md), le nuove classi di raccolta simultanee nello spazio dei nomi <xref:System.Collections.Concurrent?displayProperty=nameWithType> e un nuovo modello di programmazione che si basa sul concetto di attività anziché di thread.</span><span class="sxs-lookup"><span data-stu-id="61a72-109">However, starting with the .NET Framework 4, multithreaded programming is greatly simplified with the <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> classes, [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md), new concurrent collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace, and a new programming model that is based on the concept of tasks rather than threads.</span></span> <span data-ttu-id="61a72-110">Per altre informazioni, vedere [Programmazione parallela](../parallel-programming/index.md) e [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md).</span><span class="sxs-lookup"><span data-stu-id="61a72-110">For more information, see [Parallel Programming](../parallel-programming/index.md) and [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md).</span></span>

## <a name="how-to-create-and-start-a-new-thread"></a><span data-ttu-id="61a72-111">Procedura: Creare e avviare un nuovo thread</span><span class="sxs-lookup"><span data-stu-id="61a72-111">How to: Create and start a new thread</span></span>

<span data-ttu-id="61a72-112">Per creare un nuovo thread, creare una nuova istanza della classe <xref:System.Threading.Thread?displayProperty=nameWithType> e fornire al costruttore il nome del metodo che si vuole eseguire in un nuovo thread.</span><span class="sxs-lookup"><span data-stu-id="61a72-112">You create a new thread by creating a new instance of the <xref:System.Threading.Thread?displayProperty=nameWithType> class and providing the name of the method that you want to execute on a new thread to the constructor.</span></span> <span data-ttu-id="61a72-113">Per avviare un thread creato, chiamare il metodo <xref:System.Threading.Thread.Start%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="61a72-113">To start a created thread, call the <xref:System.Threading.Thread.Start%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="61a72-114">Per altre informazioni ed esempi, vedere l'articolo [Creazione di thread e passaggio di dati all'avvio](creating-threads-and-passing-data-at-start-time.md) e il riferimento API <xref:System.Threading.Thread>.</span><span class="sxs-lookup"><span data-stu-id="61a72-114">For more information and examples, see the [Creating threads and passing data at start time](creating-threads-and-passing-data-at-start-time.md) article and the <xref:System.Threading.Thread> API reference.</span></span>

## <a name="how-to-stop-a-thread"></a><span data-ttu-id="61a72-115">Procedura: Arrestare un thread</span><span class="sxs-lookup"><span data-stu-id="61a72-115">How to: Stop a thread</span></span>

<span data-ttu-id="61a72-116">Per terminare l'esecuzione di un thread, usare <xref:System.Threading.CancellationToken?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="61a72-116">To terminate the execution of a thread, use the <xref:System.Threading.CancellationToken?displayProperty=nameWithType>.</span></span> <span data-ttu-id="61a72-117">Fornisce un metodo unificato per arrestare i thread in modo cooperativo.</span><span class="sxs-lookup"><span data-stu-id="61a72-117">It provides a unified way to stop threads cooperatively.</span></span> <span data-ttu-id="61a72-118">Per altre informazioni, vedere [Annullamento in thread gestiti](cancellation-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="61a72-118">For more information, see [Cancellation in managed threads](cancellation-in-managed-threads.md).</span></span>

<span data-ttu-id="61a72-119">In alcuni casi non è possibile arrestare un thread in modo cooperativo, perché esegue codice di terze parti non progettato per l'annullamento cooperativo.</span><span class="sxs-lookup"><span data-stu-id="61a72-119">Sometimes it is not possible to stop a thread cooperatively, because it runs third-party code not designed for cooperative cancellation.</span></span> <span data-ttu-id="61a72-120">In questo caso, potrebbe essere necessario terminare la relativa esecuzione forzatamente.</span><span class="sxs-lookup"><span data-stu-id="61a72-120">In this case, you might want to terminate its execution forcibly.</span></span> <span data-ttu-id="61a72-121">Per terminare l'esecuzione di un thread forzatamente, in .NET Framework è possibile usare il <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> metodo.</span><span class="sxs-lookup"><span data-stu-id="61a72-121">To terminate the execution of a thread forcibly, in .NET Framework you can use the <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="61a72-122">Questo metodo genera un oggetto <xref:System.Threading.ThreadAbortException> nel thread in cui viene richiamato.</span><span class="sxs-lookup"><span data-stu-id="61a72-122">That method raises a <xref:System.Threading.ThreadAbortException> on the thread on which it's invoked.</span></span> <span data-ttu-id="61a72-123">Per altre informazioni, vedere [Eliminazione definitiva di thread](destroying-threads.md).</span><span class="sxs-lookup"><span data-stu-id="61a72-123">For more information, see [Destroying threads](destroying-threads.md).</span></span> <span data-ttu-id="61a72-124">Il <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> metodo non è supportato in .NET Core.</span><span class="sxs-lookup"><span data-stu-id="61a72-124">The <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> method is not supported in .NET Core.</span></span> <span data-ttu-id="61a72-125">Se è necessario terminare l'esecuzione di codice di terze parti forzatamente in .NET Core, eseguirlo nel processo separato e usare <xref:System.Diagnostics.Process.Kill%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="61a72-125">If you need to terminate the execution of third-party code forcibly in .NET Core, run it in the separate process and use <xref:System.Diagnostics.Process.Kill%2A?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="61a72-126">Il <xref:System.Threading.CancellationToken?displayProperty=nameWithType> non è disponibile prima del .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="61a72-126">The <xref:System.Threading.CancellationToken?displayProperty=nameWithType> is not available before .NET Framework 4.</span></span> <span data-ttu-id="61a72-127">Per arrestare un thread nelle versioni precedenti di .NET Framework, è necessario implementare manualmente l'annullamento cooperativo usando le tecniche di sincronizzazione dei thread.</span><span class="sxs-lookup"><span data-stu-id="61a72-127">To stop a thread in older .NET Framework versions, you should implement the cooperative cancellation manually using the thread synchronization techniques.</span></span> <span data-ttu-id="61a72-128">È ad esempio possibile creare il campo volatile booleano `shouldStop` e usarlo per richiedere l'arresto del codice eseguito dal thread.</span><span class="sxs-lookup"><span data-stu-id="61a72-128">For example, you can create the volatile boolean field `shouldStop` and use it to request the code executed by the thread to stop.</span></span> <span data-ttu-id="61a72-129">Per ulteriori informazioni, vedere la pagina relativa ai riferimenti [volatili](../../csharp/language-reference/keywords/volatile.md) in C# e <xref:System.Threading.Volatile?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="61a72-129">For more information, see [volatile](../../csharp/language-reference/keywords/volatile.md) in C# Reference and <xref:System.Threading.Volatile?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="61a72-130">Usare il <xref:System.Threading.Thread.Join%2A?displayProperty=nameWithType> metodo per fare in modo che il thread chiamante attenda la chiusura del thread arrestato.</span><span class="sxs-lookup"><span data-stu-id="61a72-130">Use the <xref:System.Threading.Thread.Join%2A?displayProperty=nameWithType> method to make the calling thread wait for the termination of the thread being stopped.</span></span>

## <a name="how-to-pause-or-interrupt-a-thread"></a><span data-ttu-id="61a72-131">Procedura: Sospendere o interrompere un thread</span><span class="sxs-lookup"><span data-stu-id="61a72-131">How to: Pause or interrupt a thread</span></span>

<span data-ttu-id="61a72-132">È possibile usare il metodo <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> per sospendere il thread corrente per un periodo di tempo specificato.</span><span class="sxs-lookup"><span data-stu-id="61a72-132">You use the <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> method to pause the current thread for a specified amount of time.</span></span> <span data-ttu-id="61a72-133">È possibile interrompere un thread bloccato chiamando il metodo <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="61a72-133">You can interrupt a blocked thread by calling the <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="61a72-134">Per altre informazioni, vedere [Sospensione e interruzione di thread](pausing-and-resuming-threads.md).</span><span class="sxs-lookup"><span data-stu-id="61a72-134">For more information, see [Pausing and interrupting threads](pausing-and-resuming-threads.md).</span></span>

## <a name="thread-properties"></a><span data-ttu-id="61a72-135">Proprietà del thread</span><span class="sxs-lookup"><span data-stu-id="61a72-135">Thread properties</span></span>

<span data-ttu-id="61a72-136">La tabella seguente illustra alcune delle proprietà dell'oggetto <xref:System.Threading.Thread>:</span><span class="sxs-lookup"><span data-stu-id="61a72-136">The following table presents some of the <xref:System.Threading.Thread> properties:</span></span>  
  
|<span data-ttu-id="61a72-137">Proprietà</span><span class="sxs-lookup"><span data-stu-id="61a72-137">Property</span></span>|<span data-ttu-id="61a72-138">Descrizione</span><span class="sxs-lookup"><span data-stu-id="61a72-138">Description</span></span>|  
|--------------|-----------|  
|<xref:System.Threading.Thread.IsAlive%2A>|<span data-ttu-id="61a72-139">Restituisce `true` se il thread è stato avviato, ma non è stato ancora terminato normalmente o è stato interrotto.</span><span class="sxs-lookup"><span data-stu-id="61a72-139">Returns `true` if a thread has been started and has not yet terminated normally or aborted.</span></span>|  
|<xref:System.Threading.Thread.IsBackground%2A>|<span data-ttu-id="61a72-140">Ottiene o imposta un valore booleano che indica se un thread è un thread in background.</span><span class="sxs-lookup"><span data-stu-id="61a72-140">Gets or sets a Boolean that indicates if a thread is a background thread.</span></span> <span data-ttu-id="61a72-141">I thread in background sono simili ai thread in primo piano, ma un thread in background non impedisce l'arresto di un processo.</span><span class="sxs-lookup"><span data-stu-id="61a72-141">Background threads are like foreground threads, but a background thread doesn't prevent a process from stopping.</span></span> <span data-ttu-id="61a72-142">Dopo l'arresto di tutti i thread in primo piano che appartengono a un processo, Common Language Runtime termina il processo chiamando il metodo <xref:System.Threading.Thread.Abort%2A> nei thread in background ancora attivi.</span><span class="sxs-lookup"><span data-stu-id="61a72-142">Once all foreground threads that belong to a process have stopped, the common language runtime ends the process by calling the <xref:System.Threading.Thread.Abort%2A> method on background threads that are still alive.</span></span> <span data-ttu-id="61a72-143">Per altre informazioni, vedere [Thread in primo piano e in background](foreground-and-background-threads.md).</span><span class="sxs-lookup"><span data-stu-id="61a72-143">For more information, see [Foreground and Background Threads](foreground-and-background-threads.md).</span></span>|  
|<xref:System.Threading.Thread.Name%2A>|<span data-ttu-id="61a72-144">Ottiene o imposta il nome del thread.</span><span class="sxs-lookup"><span data-stu-id="61a72-144">Gets or sets the name of a thread.</span></span> <span data-ttu-id="61a72-145">Usato in genere per individuare i singoli thread durante il debug.</span><span class="sxs-lookup"><span data-stu-id="61a72-145">Most frequently used to discover individual threads when you debug.</span></span>|  
|<xref:System.Threading.Thread.Priority%2A>|<span data-ttu-id="61a72-146">Ottiene o imposta un valore <xref:System.Threading.ThreadPriority> che viene usato dal sistema operativo per definire le priorità di pianificazione dei thread.</span><span class="sxs-lookup"><span data-stu-id="61a72-146">Gets or sets a <xref:System.Threading.ThreadPriority> value that is used by the operating system to prioritize thread scheduling.</span></span> <span data-ttu-id="61a72-147">Per altre informazioni, vedere [Pianificazione di thread](scheduling-threads.md) e il riferimento <xref:System.Threading.ThreadPriority>.</span><span class="sxs-lookup"><span data-stu-id="61a72-147">For more information, see [Scheduling threads](scheduling-threads.md) and the <xref:System.Threading.ThreadPriority> reference.</span></span>|  
|<xref:System.Threading.Thread.ThreadState%2A>|<span data-ttu-id="61a72-148">Ottiene un valore <xref:System.Threading.ThreadState> contenente gli stati correnti di un thread.</span><span class="sxs-lookup"><span data-stu-id="61a72-148">Gets a <xref:System.Threading.ThreadState> value containing the current states of a thread.</span></span>|  

## <a name="see-also"></a><span data-ttu-id="61a72-149">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="61a72-149">See also</span></span>

- <xref:System.Threading.Thread?displayProperty=nameWithType>
- [<span data-ttu-id="61a72-150">Thread e Threading</span><span class="sxs-lookup"><span data-stu-id="61a72-150">Threads and Threading</span></span>](threads-and-threading.md)
- [<span data-ttu-id="61a72-151">Programmazione parallela</span><span class="sxs-lookup"><span data-stu-id="61a72-151">Parallel Programming</span></span>](../parallel-programming/index.md)
