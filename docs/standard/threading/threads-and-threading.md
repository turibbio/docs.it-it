---
title: Thread e threading
ms.date: 11/08/2018
ms.technology: dotnet-standard
helpviewer_keywords:
- multiple threads
- threading [.NET]
- threading [.NET], multiple threads
ms.assetid: 5baac3aa-e603-4fa6-9f89-0f2c1084e6b1
ms.openlocfilehash: bac2a3ca3278b48b35d0372d52bcb79025ba1148
ms.sourcegitcommit: 465547886a1224a5435c3ac349c805e39ce77706
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/21/2020
ms.locfileid: "81739721"
---
# <a name="threads-and-threading"></a><span data-ttu-id="1e4f9-102">Thread e threading</span><span class="sxs-lookup"><span data-stu-id="1e4f9-102">Threads and threading</span></span>

<span data-ttu-id="1e4f9-103">Il multithreading consente di aumentare la velocità di risposta dell'applicazione e, se l'applicazione viene eseguita in un sistema multiprocessore o multicore, aumentare la velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-103">Multithreading allows you to increase the responsiveness of your application and, if your application runs on a multiprocessor or multi-core system, increase its throughput.</span></span>

## <a name="processes-and-threads"></a><span data-ttu-id="1e4f9-104">Processi e thread</span><span class="sxs-lookup"><span data-stu-id="1e4f9-104">Processes and threads</span></span>

<span data-ttu-id="1e4f9-105">Un *processo* è un programma in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-105">A *process* is an executing program.</span></span> <span data-ttu-id="1e4f9-106">Un sistema operativo usa i processi per separare le applicazioni che vengono eseguite.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-106">An operating system uses processes to separate the applications that are being executed.</span></span> <span data-ttu-id="1e4f9-107">Un *thread* è l'unità di base in cui un sistema operativo alloca il tempo del processore.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-107">A *thread* is the basic unit to which an operating system allocates processor time.</span></span> <span data-ttu-id="1e4f9-108">Ogni thread ha una [priorità di pianificazione](scheduling-threads.md) e un insieme di strutture usate dal sistema per salvare il contesto del thread quando viene sospesa l'esecuzione del thread.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-108">Each thread has a [scheduling priority](scheduling-threads.md) and maintains a set of structures the system uses to save the thread context when the thread's execution is paused.</span></span> <span data-ttu-id="1e4f9-109">Nel contesto del thread sono presenti tutte le informazioni necessarie per riprendere senza problemi l'esecuzione, incluso il set di registri della CPU del thread e lo stack.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-109">The thread context includes all the information the thread needs to seamlessly resume execution, including the thread's set of CPU registers and stack.</span></span> <span data-ttu-id="1e4f9-110">Nel contesto di un processo possono essere eseguiti più thread.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-110">Multiple threads can run in the context of a process.</span></span> <span data-ttu-id="1e4f9-111">Tutti i thread di un processo ne condividono lo spazio degli indirizzi virtuali.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-111">All threads of a process share its virtual address space.</span></span> <span data-ttu-id="1e4f9-112">Un thread può eseguire qualsiasi parte del codice del programma, comprese le parti attualmente eseguite da un altro thread.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-112">A thread can execute any part of the program code, including parts currently being executed by another thread.</span></span>

> [!NOTE]
> <span data-ttu-id="1e4f9-113">.NET Framework offre un modo per isolare le applicazioni all'interno di un processo con l'uso dei *domini dell'applicazione*.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-113">The .NET Framework provides a way to isolate applications within a process with the use of *application domains*.</span></span> <span data-ttu-id="1e4f9-114">I domini applicazione non sono disponibili in .NET Core. Per altre informazioni, vedere la sezione [Domini e thread applicazione](../../framework/app-domains/application-domains.md#application-domains-and-threads) dell'articolo Domini [applicazione.](../../framework/app-domains/application-domains.md)</span><span class="sxs-lookup"><span data-stu-id="1e4f9-114">(Application domains are not available on .NET Core.) For more information, see the [Application domains and threads](../../framework/app-domains/application-domains.md#application-domains-and-threads) section of the [Application domains](../../framework/app-domains/application-domains.md) article.</span></span>

<span data-ttu-id="1e4f9-115">Per impostazione predefinita, viene avviato un programma .NET con un thread singolo, spesso chiamato *thread primario*.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-115">By default, a .NET program is started with a single thread, often called the *primary* thread.</span></span> <span data-ttu-id="1e4f9-116">Tuttavia, è possibile creare thread aggiuntivi per eseguire il codice in parallelo o contemporaneamente al thread primario.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-116">However, it can create additional threads to execute code in parallel or concurrently with the primary thread.</span></span> <span data-ttu-id="1e4f9-117">Questi thread sono spesso chiamati thread di *lavoro.*</span><span class="sxs-lookup"><span data-stu-id="1e4f9-117">These threads are often called *worker* threads.</span></span>

## <a name="when-to-use-multiple-threads"></a><span data-ttu-id="1e4f9-118">Uso di più thread</span><span class="sxs-lookup"><span data-stu-id="1e4f9-118">When to use multiple threads</span></span>

<span data-ttu-id="1e4f9-119">L'uso di più thread consente di aumentare la velocità di risposta dell'applicazione e di usare un sistema multiprocessore o multicore per aumentare la velocità effettiva dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-119">You use multiple threads to increase the responsiveness of your application and to take advantage of a multiprocessor or multi-core system to increase the application's throughput.</span></span>

<span data-ttu-id="1e4f9-120">Si consideri un'applicazione desktop in cui il thread primario è responsabile degli elementi dell'interfaccia utente e risponde alle azioni dell'utente.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-120">Consider a desktop application, in which the primary thread is responsible for user interface elements and responds to user actions.</span></span> <span data-ttu-id="1e4f9-121">Usare i thread di lavoro per eseguire operazioni che richiedono molto tempo e che altrimenti occuperebbero il thread primario e impedirebbero all'interfaccia utente di rispondere.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-121">Use worker threads to perform time-consuming operations that, otherwise, would occupy the primary thread and make the user interface non-responsive.</span></span> <span data-ttu-id="1e4f9-122">È inoltre possibile utilizzare un thread dedicato affinché la comunicazione di rete o del dispositivo sia più reattiva ai messaggi o agli eventi in arrivo.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-122">You can also use a dedicated thread for network or device communication to be more responsive to incoming messages or events.</span></span>

<span data-ttu-id="1e4f9-123">Se il programma esegue operazioni che possono essere eseguite in parallelo, il tempo di esecuzione totale può essere ridotto eseguendo queste operazioni in thread separati ed eseguendo il programma in un sistema multiprocessore o multicore.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-123">If your program performs operations that can be done in parallel, the total execution time can be decreased by performing those operations in separate threads and running the program on a multiprocessor or multi-core system.</span></span> <span data-ttu-id="1e4f9-124">In un sistema di questo tipo, l'uso del multithreading potrebbe aumentare la velocità effettiva e la velocità di risposta.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-124">On such a system, use of multithreading might increase throughput along with the increased responsiveness.</span></span>

## <a name="how-to-use-multithreading-in-net"></a><span data-ttu-id="1e4f9-125">Come usare il multithreading in .NET</span><span class="sxs-lookup"><span data-stu-id="1e4f9-125">How to use multithreading in .NET</span></span>

<span data-ttu-id="1e4f9-126">A partire da .NET Framework 4, per il multithreading è consigliabile usare [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md) e [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md).</span><span class="sxs-lookup"><span data-stu-id="1e4f9-126">Starting with the .NET Framework 4, the recommended way to utilize multithreading is to use [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md) and [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md).</span></span> <span data-ttu-id="1e4f9-127">Per altre informazioni, vedere [Programmazione parallela](../parallel-programming/index.md).</span><span class="sxs-lookup"><span data-stu-id="1e4f9-127">For more information, see [Parallel programming](../parallel-programming/index.md).</span></span>

<span data-ttu-id="1e4f9-128">TPL e PLINQ sono entrambi basati su thread <xref:System.Threading.ThreadPool>.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-128">Both TPL and PLINQ rely on the <xref:System.Threading.ThreadPool> threads.</span></span> <span data-ttu-id="1e4f9-129">La classe <xref:System.Threading.ThreadPool?displayProperty=nameWithType> offre un'applicazione .NET con un pool di thread di lavoro.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-129">The <xref:System.Threading.ThreadPool?displayProperty=nameWithType> class provides a .NET application with a pool of worker threads.</span></span> <span data-ttu-id="1e4f9-130">È inoltre possibile utilizzare thread del pool di thread.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-130">You can also use thread pool threads.</span></span> <span data-ttu-id="1e4f9-131">Per altre informazioni, vedere [Pool di thread gestiti](the-managed-thread-pool.md).</span><span class="sxs-lookup"><span data-stu-id="1e4f9-131">For more information, see [The managed thread pool](the-managed-thread-pool.md).</span></span>

<span data-ttu-id="1e4f9-132">Infine, è possibile usare la classe <xref:System.Threading.Thread?displayProperty=nameWithType> che rappresenta un thread gestito.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-132">At last, you can use the <xref:System.Threading.Thread?displayProperty=nameWithType> class that represents a managed thread.</span></span> <span data-ttu-id="1e4f9-133">Per altre informazioni, vedere [Uso di thread e threading](using-threads-and-threading.md).</span><span class="sxs-lookup"><span data-stu-id="1e4f9-133">For more information, see [Using threads and threading](using-threads-and-threading.md).</span></span>

<span data-ttu-id="1e4f9-134">È possibile che più thread richiedano l'accesso a una risorsa condivisa.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-134">Multiple threads might need to access a shared resource.</span></span> <span data-ttu-id="1e4f9-135">Per mantenere la risorsa in uno stato non danneggiato ed evitare race condition, è necessario sincronizzare l'accesso thread a esso.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-135">To keep the resource in a uncorrupted state and avoid race conditions, you must synchronize the thread access to it.</span></span> <span data-ttu-id="1e4f9-136">È anche possibile coordinare l'interazione di più thread.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-136">You also might want to coordinate the interaction of multiple threads.</span></span> <span data-ttu-id="1e4f9-137">.NET offre una gamma di tipi che è possibile usare per sincronizzare l'accesso a una risorsa condivisa o coordinare l'interazione tra thread.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-137">.NET provides a range of types that you can use to synchronize access to a shared resource or coordinate thread interaction.</span></span> <span data-ttu-id="1e4f9-138">Per altre informazioni, vedere [Panoramica delle primitive di sincronizzazione](overview-of-synchronization-primitives.md).</span><span class="sxs-lookup"><span data-stu-id="1e4f9-138">For more information, see [Overview of synchronization primitives](overview-of-synchronization-primitives.md).</span></span>

<span data-ttu-id="1e4f9-139">Gestire le eccezioni nei thread.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-139">Do handle exceptions in threads.</span></span> <span data-ttu-id="1e4f9-140">In genere le eccezioni non gestite nei thread terminano il processo.</span><span class="sxs-lookup"><span data-stu-id="1e4f9-140">Unhandled exceptions in threads generally terminate the process.</span></span> <span data-ttu-id="1e4f9-141">Per ulteriori informazioni, vedere [Eccezioni nei thread gestiti](exceptions-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="1e4f9-141">For more information, see [Exceptions in managed threads](exceptions-in-managed-threads.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="1e4f9-142">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="1e4f9-142">See also</span></span>

- [<span data-ttu-id="1e4f9-143">Oggetti e funzionalità del threading</span><span class="sxs-lookup"><span data-stu-id="1e4f9-143">Threading objects and features</span></span>](threading-objects-and-features.md)
- [<span data-ttu-id="1e4f9-144">Suggerimenti per l'uso del threading gestito</span><span class="sxs-lookup"><span data-stu-id="1e4f9-144">Managed threading best practices</span></span>](managed-threading-best-practices.md)
- [<span data-ttu-id="1e4f9-145">Elaborazione parallela, concorrenza e programmazione asincrona in .NET</span><span class="sxs-lookup"><span data-stu-id="1e4f9-145">Parallel Processing, Concurrency, and Async Programming in .NET</span></span>](../parallel-processing-and-concurrency.md)
- [<span data-ttu-id="1e4f9-146">Informazioni su processi e thread</span><span class="sxs-lookup"><span data-stu-id="1e4f9-146">About Processes and Threads</span></span>](/windows/desktop/procthread/about-processes-and-threads)
