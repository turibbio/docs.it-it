---
title: Globalizzazione
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- globalization [.NET Framework], about globalization
- global applications, globalization
- international applications [.NET Framework], globalization
- world-ready applications, globalization
- application development [.NET Framework], globalization
- culture, globalization
ms.assetid: 4e919934-6b19-42f2-b770-275a4fae87c9
ms.openlocfilehash: c08f4309d7673d7e7fb1c6bd84307e4323411d9e
ms.sourcegitcommit: 7980a91f90ae5eca859db7e6bfa03e23e76a1a50
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/13/2020
ms.locfileid: "81242686"
---
# <a name="globalization"></a><span data-ttu-id="7bf28-102">Globalizzazione</span><span class="sxs-lookup"><span data-stu-id="7bf28-102">Globalization</span></span>

<span data-ttu-id="7bf28-103">La globalizzazione comporta la progettazione e lo sviluppo di un'app internazionalizzata che supporti interfacce localizzate e dati locali per utenti in più impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="7bf28-103">Globalization involves designing and developing a world-ready app that supports localized interfaces and regional data for users in multiple cultures.</span></span> <span data-ttu-id="7bf28-104">Prima di iniziare la fase di progettazione, è necessario determinare quali impostazioni cultura verranno supportate dall'app.</span><span class="sxs-lookup"><span data-stu-id="7bf28-104">Before beginning the design phase, you should determine which cultures your app will support.</span></span> <span data-ttu-id="7bf28-105">Sebbene un'app sia destinata per impostazione predefinita a singole impostazioni cultura o a una singola area, è possibile progettarla e scriverla in modo che possa essere facilmente estesa agli utenti di altre impostazioni cultura o aree.</span><span class="sxs-lookup"><span data-stu-id="7bf28-105">Although an app targets a single culture or region as its default, you can design and write it so that it can easily be extended to users in other cultures or regions.</span></span>

<span data-ttu-id="7bf28-106">Gli sviluppatori partono sempre da supposizione su interfacce utente e dati che sono relativi alle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="7bf28-106">As developers, we all have assumptions about user interfaces and data that are formed by our cultures.</span></span> <span data-ttu-id="7bf28-107">Ad esempio, per uno sviluppatore di lingua inglese negli Stati Uniti, la serializzazione di data e ora sotto forma di stringa nel formato `MM/dd/yyyy hh:mm:ss` sembra perfettamente ragionevole.</span><span class="sxs-lookup"><span data-stu-id="7bf28-107">For example, for an English-speaking developer in the United States, serializing date and time data as a string in the format `MM/dd/yyyy hh:mm:ss` seems perfectly reasonable.</span></span> <span data-ttu-id="7bf28-108">Tuttavia, la deserializzazione di questa stringa in un sistema con impostazioni cultura diverse potrebbe generare un'eccezione <xref:System.FormatException> o dati non accurati.</span><span class="sxs-lookup"><span data-stu-id="7bf28-108">However, deserializing that string on a system in a different culture is likely to throw a <xref:System.FormatException> exception or produce inaccurate data.</span></span> <span data-ttu-id="7bf28-109">La globalizzazione consente di identificare queste supposizioni relative alle impostazioni cultura e di garantire che non influiscano sulla progettazione o sul codice dell'app.</span><span class="sxs-lookup"><span data-stu-id="7bf28-109">Globalization enables us to identify such culture-specific assumptions and ensure that they do not affect our app's design or code.</span></span>

<span data-ttu-id="7bf28-110">Questo articolo illustra alcuni degli aspetti principali da considerare e le procedure consigliate da seguire quando si gestiscono stringhe, valori di data e ora e valori numerici in un'app globalizzata.</span><span class="sxs-lookup"><span data-stu-id="7bf28-110">This article discusses some of the major issues you should consider and the best practices you can follow when handling strings, date and time values, and numeric values in a globalized app.</span></span>

## <a name="strings"></a><span data-ttu-id="7bf28-111">Stringhe</span><span class="sxs-lookup"><span data-stu-id="7bf28-111">Strings</span></span>

<span data-ttu-id="7bf28-112">La gestione di caratteri e stringhe è un elemento cruciale nella globalizzazione, in quanto le impostazioni cultura o area possono usare caratteri e set di caratteri diversi e ordinarli in modo diverso.</span><span class="sxs-lookup"><span data-stu-id="7bf28-112">The handling of characters and strings is a central focus of globalization, because each culture or region may use different characters and character sets and sort them differently.</span></span> <span data-ttu-id="7bf28-113">Questa sezione include suggerimenti per l'uso delle stringhe nelle app globalizzate.</span><span class="sxs-lookup"><span data-stu-id="7bf28-113">This section provides recommendations for using strings in globalized apps.</span></span>

### <a name="use-unicode-internally"></a><span data-ttu-id="7bf28-114">Usare Unicode internamente</span><span class="sxs-lookup"><span data-stu-id="7bf28-114">Use Unicode internally</span></span>

<span data-ttu-id="7bf28-115">Per impostazione predefinita, .NET usa stringhe Unicode.</span><span class="sxs-lookup"><span data-stu-id="7bf28-115">By default, .NET uses Unicode strings.</span></span> <span data-ttu-id="7bf28-116">Una stringa Unicode è costituita da zero, da uno o più oggetti <xref:System.Char>, ognuno dei quali rappresenta un'unità di codice UTF-16.</span><span class="sxs-lookup"><span data-stu-id="7bf28-116">A Unicode string consists of zero, one, or more <xref:System.Char> objects, each of which represents a UTF-16 code unit.</span></span> <span data-ttu-id="7bf28-117">Esiste una rappresentazione in formato Unicode di quasi tutti i caratteri inclusi nei set di caratteri usati nel mondo.</span><span class="sxs-lookup"><span data-stu-id="7bf28-117">There is a Unicode representation for almost every character in every character set in use throughout the world.</span></span>

<span data-ttu-id="7bf28-118">In molti sistemi operativi e applicazioni, incluso il sistema operativo Windows, è possibile usare anche tabelle codici per rappresentare i set di caratteri.</span><span class="sxs-lookup"><span data-stu-id="7bf28-118">Many applications and operating systems, including the Windows operating system, can use also use code pages to represent character sets.</span></span> <span data-ttu-id="7bf28-119">Le tabelle codici in genere contengono i valori ASCII standard compresi tra 0x00 e 0x7F ed eseguono il mapping degli altri caratteri ai valori rimanenti compresi tra 0x80 e 0xFF.</span><span class="sxs-lookup"><span data-stu-id="7bf28-119">Code pages typically contain the standard ASCII values from 0x00 through 0x7F and map other characters to the remaining values from 0x80 through 0xFF.</span></span> <span data-ttu-id="7bf28-120">L'interpretazione dei valori da 0x80 a 0xFF dipende dalla tabella codici specifica.</span><span class="sxs-lookup"><span data-stu-id="7bf28-120">The interpretation of values from 0x80 through 0xFF depends on the specific code page.</span></span> <span data-ttu-id="7bf28-121">Per questo motivo, se possibile, è consigliabile evitare l'uso di tabelle codici in un'app globalizzata.</span><span class="sxs-lookup"><span data-stu-id="7bf28-121">Because of this, you should avoid using code pages in a globalized app if possible.</span></span>

<span data-ttu-id="7bf28-122">Nell'esempio seguente vengono illustrati i rischi di interpretazione dei dati della tabella codici quando la tabella codici predefinita in un sistema è diversa dalla tabella codici in cui i sono stati salvati i dati.</span><span class="sxs-lookup"><span data-stu-id="7bf28-122">The following example illustrates the dangers of interpreting code page data when the default code page on a system is different from the code page on which the data was saved.</span></span> <span data-ttu-id="7bf28-123">Per simulare questo scenario, nell'esempio vengono specificate in modo esplicito tabelle codici diverse. In primo luogo, nell'esempio viene definita una matrice costituita dai caratteri maiuscoli dell'alfabeto greco.</span><span class="sxs-lookup"><span data-stu-id="7bf28-123">(To simulate this scenario, the example explicitly specifies different code pages.) First, the example defines an array that consists of the uppercase characters of the Greek alphabet.</span></span> <span data-ttu-id="7bf28-124">I caratteri vengono codificati in una matrice di byte usando la tabella codici 737 (nota anche come Greco MS-DOS) e la matrice di byte viene salvata in un file.</span><span class="sxs-lookup"><span data-stu-id="7bf28-124">It encodes them into a byte array by using code page 737 (also known as MS-DOS Greek) and saves the byte array to a file.</span></span> <span data-ttu-id="7bf28-125">Se viene recuperato il file e viene decodificata la relativa matrice di byte tramite la tabella codici 737, vengono ripristinati i caratteri originali.</span><span class="sxs-lookup"><span data-stu-id="7bf28-125">If the file is retrieved and its byte array is decoded by using code page 737, the original characters are restored.</span></span> <span data-ttu-id="7bf28-126">Tuttavia, se viene recuperato il file e viene decodificata la relativa matrice di byte usando la tabella codici 1252 (o Windows-1252, che rappresenta i caratteri nell'alfabeto latino), i caratteri originali vengono persi.</span><span class="sxs-lookup"><span data-stu-id="7bf28-126">However, if the file is retrieved and its byte array is decoded by using code page 1252 (or Windows-1252, which represents characters in the Latin alphabet), the original characters are lost.</span></span>

[!code-csharp[Conceptual.Globalization#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/codepages1.cs#1)]
[!code-vb[Conceptual.Globalization#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/codepages1.vb#1)]

<span data-ttu-id="7bf28-127">L'uso di Unicode assicura che le stesse unità di codice eseguono sempre il mapping agli stessi caratteri e che gli stessi caratteri eseguono sempre il mapping alle stesse matrici di byte.</span><span class="sxs-lookup"><span data-stu-id="7bf28-127">The use of Unicode ensures that the same code units always map to the same characters, and that the same characters always map to the same byte arrays.</span></span>

### <a name="use-resource-files"></a><span data-ttu-id="7bf28-128">Usare file di risorse</span><span class="sxs-lookup"><span data-stu-id="7bf28-128">Use resource files</span></span>

<span data-ttu-id="7bf28-129">Anche se si sviluppa un'app destinata a singole impostazioni cultura o aree, è necessario usare file di risorse per archiviare le stringhe e altre risorse visualizzate nell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-129">Even if you are developing an app that targets a single culture or region, you should use resource files to store strings and other resources that are displayed in the user interface.</span></span> <span data-ttu-id="7bf28-130">Si raccomanda di non aggiungerli mai direttamente al codice.</span><span class="sxs-lookup"><span data-stu-id="7bf28-130">You should never add them directly to your code.</span></span> <span data-ttu-id="7bf28-131">L'uso di file di risorse presenta una serie di vantaggi:</span><span class="sxs-lookup"><span data-stu-id="7bf28-131">Using resource files has a number of advantages:</span></span>

- <span data-ttu-id="7bf28-132">Tutte le stringhe si trovano in un'unica posizione.</span><span class="sxs-lookup"><span data-stu-id="7bf28-132">All the strings are in a single location.</span></span> <span data-ttu-id="7bf28-133">Non è necessario eseguire la ricerca in tutto il codice di origine per identificare le stringhe da modificare per una lingua o impostazioni cultura specifiche.</span><span class="sxs-lookup"><span data-stu-id="7bf28-133">You don't have to search throughout your source code to identify strings to modify for a specific language or culture.</span></span>

- <span data-ttu-id="7bf28-134">Non è necessario duplicare le stringhe.</span><span class="sxs-lookup"><span data-stu-id="7bf28-134">There is no need to duplicate strings.</span></span> <span data-ttu-id="7bf28-135">Gli sviluppatori che non usano file di risorse spesso definiscono la stessa stringa in più file di codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-135">Developers who don't use resource files often define the same string in multiple source code files.</span></span> <span data-ttu-id="7bf28-136">Questa duplicazione aumenta la probabilità che una o più istanze possano essere ignorate quando viene modificata una stringa.</span><span class="sxs-lookup"><span data-stu-id="7bf28-136">This duplication increases the probability that one or more instances will be overlooked when a string is modified.</span></span>

- <span data-ttu-id="7bf28-137">È possibile includere risorse non di tipo stringa, ad esempio immagini o dati binari, nel file di risorse anziché archiviarle in un file autonomo separato, per poterle recuperare facilmente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-137">You can include non-string resources, such as images or binary data, in the resource file instead of storing them in a separate standalone file, so they can be retrieved easily.</span></span>

<span data-ttu-id="7bf28-138">L'uso di file di risorse presenta vantaggi specifici se si crea un'app localizzata.</span><span class="sxs-lookup"><span data-stu-id="7bf28-138">Using resource files has particular advantages if you are creating a localized app.</span></span> <span data-ttu-id="7bf28-139">Quando si distribuiscono le risorse in assembly satellite, Common Language Runtime seleziona automaticamente una risorsa di impostazioni cultura appropriata basata sulle impostazioni cultura dell'interfaccia utente corrente come specificato dalla proprietà <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-139">When you deploy resources in satellite assemblies, the common language runtime automatically selects a culture-appropriate resource based on the user's current UI culture as defined by the <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="7bf28-140">Purché venga definita una risorsa specifica delle impostazioni cultura adatta e si crei correttamente un'istanza di un oggetto <xref:System.Resources.ResourceManager> o si usi una classe di risorse fortemente tipizzata, il runtime gestisce i dettagli relativi al recupero delle risorse appropriate.</span><span class="sxs-lookup"><span data-stu-id="7bf28-140">As long as you provide an appropriate culture-specific resource and correctly instantiate a <xref:System.Resources.ResourceManager> object or use a strongly typed resource class, the runtime handles the details of retrieving the appropriate resources.</span></span>

<span data-ttu-id="7bf28-141">Per altre informazioni sulla creazione di file di risorse, vedere [Creazione di file di risorse](../../../docs/framework/resources/creating-resource-files-for-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="7bf28-141">For more information about creating resource files, see [Creating Resource Files](../../../docs/framework/resources/creating-resource-files-for-desktop-apps.md).</span></span> <span data-ttu-id="7bf28-142">Per informazioni sulla creazione e distribuzione di assembly satellite, vedere [Creazione di assembly satellite](../../../docs/framework/resources/creating-satellite-assemblies-for-desktop-apps.md) e [Creazione del pacchetto e distribuzione delle risorse](../../../docs/framework/resources/packaging-and-deploying-resources-in-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="7bf28-142">For information about creating and deploying satellite assemblies, see [Creating Satellite Assemblies](../../../docs/framework/resources/creating-satellite-assemblies-for-desktop-apps.md) and [Packaging and Deploying Resources](../../../docs/framework/resources/packaging-and-deploying-resources-in-desktop-apps.md).</span></span>

### <a name="search-and-compare-strings"></a><span data-ttu-id="7bf28-143">Eseguire la ricerca e il confronto di stringhe</span><span class="sxs-lookup"><span data-stu-id="7bf28-143">Search and compare strings</span></span>

<span data-ttu-id="7bf28-144">Quando possibile, si raccomanda di gestire le stringhe come unità intere, anziché come serie di caratteri singoli.</span><span class="sxs-lookup"><span data-stu-id="7bf28-144">Whenever possible, you should handle strings as entire strings instead of handling them as a series of individual characters.</span></span> <span data-ttu-id="7bf28-145">Ciò è particolarmente importante quando si ordinano o cercano le sottostringhe, per impedire problemi associati all'analisi dei caratteri combinati.</span><span class="sxs-lookup"><span data-stu-id="7bf28-145">This is especially important when you sort or search for substrings, to prevent problems associated with parsing combined characters.</span></span>

> [!TIP]
> <span data-ttu-id="7bf28-146">È possibile usare la classe <xref:System.Globalization.StringInfo> per gestire gli elementi di testo anziché i singoli caratteri in una stringa.</span><span class="sxs-lookup"><span data-stu-id="7bf28-146">You can use the <xref:System.Globalization.StringInfo> class to work with the text elements rather than the individual characters in a string.</span></span>

<span data-ttu-id="7bf28-147">Nelle ricerche e nei confronti di stringhe, un errore comune consiste nel gestire la stringa come una raccolta di caratteri, ognuno dei quali è rappresentato da un oggetto <xref:System.Char>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-147">In string searches and comparisons, a common mistake is to treat the string as a collection of characters, each of which is represented by a <xref:System.Char> object.</span></span> <span data-ttu-id="7bf28-148">Infatti, un singolo carattere può essere costituito da uno, due o più oggetti <xref:System.Char>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-148">In fact, a single character may be formed by one, two, or more <xref:System.Char> objects.</span></span> <span data-ttu-id="7bf28-149">Caratteri di questo tipo vengono trovati più frequentemente nelle stringhe delle impostazioni cultura i cui alfabeti sono costituiti da caratteri esterni all'intervallo di caratteri latini di base Unicode (da U+0021 a U+007E).</span><span class="sxs-lookup"><span data-stu-id="7bf28-149">Such characters are found most frequently in strings from cultures whose alphabets consist of characters outside the Unicode Basic Latin character range (U+0021 through U+007E).</span></span> <span data-ttu-id="7bf28-150">Nell'esempio seguente si tenta di trovare l'indice del carattere LETTERA LATINA A MAIUSCOLA CON accento GRAVE (U+00C0) in una stringa.</span><span class="sxs-lookup"><span data-stu-id="7bf28-150">The following example tries to find the index of the LATIN CAPITAL LETTER A WITH GRAVE character (U+00C0) in a string.</span></span> <span data-ttu-id="7bf28-151">Tuttavia, questo carattere può essere rappresentato in due modi diversi: come una singola unità di codice (U-00C0) o come un carattere composito (due unità di codice: U-0041 e U-0300).</span><span class="sxs-lookup"><span data-stu-id="7bf28-151">However, this character can be represented in two different ways: as a single code unit (U+00C0) or as a composite character (two code units: U+0041 and U+0300).</span></span> <span data-ttu-id="7bf28-152">In questo caso, il carattere è <xref:System.Char> rappresentato nell'istanza di stringa da due oggetti, U-0041 e U-0300.</span><span class="sxs-lookup"><span data-stu-id="7bf28-152">In this case, the character is represented in the string instance by two <xref:System.Char> objects, U+0041 and U+0300.</span></span> <span data-ttu-id="7bf28-153">Il codice di esempio chiama gli overload <xref:System.String.IndexOf%28System.Char%29?displayProperty=nameWithType> e <xref:System.String.IndexOf%28System.String%29?displayProperty=nameWithType> per trovare la posizione del carattere incluso nell'istanza della stringa, ma questi restituiscono risultati diversi.</span><span class="sxs-lookup"><span data-stu-id="7bf28-153">The example code calls the <xref:System.String.IndexOf%28System.Char%29?displayProperty=nameWithType> and <xref:System.String.IndexOf%28System.String%29?displayProperty=nameWithType> overloads to find the position of this character in the string instance, but these return different results.</span></span> <span data-ttu-id="7bf28-154">La prima chiamata al metodo dispone di un argomento <xref:System.Char>; esegue un confronto ordinale e pertanto non può trovare una corrispondenza.</span><span class="sxs-lookup"><span data-stu-id="7bf28-154">The first method call has a <xref:System.Char> argument; it performs an ordinal comparison and therefore cannot find a match.</span></span> <span data-ttu-id="7bf28-155">La seconda chiamata dispone di un argomento <xref:System.String>; esegue un confronto dipendente dalle impostazioni cultura e pertanto trova una corrispondenza.</span><span class="sxs-lookup"><span data-stu-id="7bf28-155">The second call has a <xref:System.String> argument; it performs a culture-sensitive comparison and therefore finds a match.</span></span>

[!code-csharp[Conceptual.Globalization#18](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/search1.cs#18)]
[!code-vb[Conceptual.Globalization#18](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/search1.vb#18)]

<span data-ttu-id="7bf28-156">È possibile evitare parte dell'ambiguità di questo esempio (chiamate a due overload simili di un metodo che restituisce risultati diversi) chiamando un overload che include un parametro <xref:System.StringComparison>, ad esempio il metodo <xref:System.String.IndexOf%28System.String%2CSystem.StringComparison%29?displayProperty=nameWithType> o <xref:System.String.LastIndexOf%28System.String%2CSystem.StringComparison%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-156">You can avoid some of the ambiguity of this example (calls to two similar overloads of a method returning different results) by calling an overload that includes a <xref:System.StringComparison> parameter, such as the <xref:System.String.IndexOf%28System.String%2CSystem.StringComparison%29?displayProperty=nameWithType> or <xref:System.String.LastIndexOf%28System.String%2CSystem.StringComparison%29?displayProperty=nameWithType> method.</span></span>

<span data-ttu-id="7bf28-157">Tuttavia, le ricerche non sono sempre dipendenti dalle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="7bf28-157">However, searches are not always culture-sensitive.</span></span> <span data-ttu-id="7bf28-158">Se lo scopo della ricerca è prendere una decisione relativa alla sicurezza oppure consentire o impedire l'accesso ad alcune risorse, il confronto deve essere ordinale, come descritto nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="7bf28-158">If the purpose of the search is to make a security decision or to allow or disallow access to some resource, the comparison should be ordinal, as discussed in the next section.</span></span>

### <a name="test-strings-for-equality"></a><span data-ttu-id="7bf28-159">Testare l'uguaglianza delle stringhe</span><span class="sxs-lookup"><span data-stu-id="7bf28-159">Test strings for equality</span></span>

<span data-ttu-id="7bf28-160">Se si vuole verificare l'uguaglianza tra due stringhe anziché determinarne la modalità di confronto nell'ordinamento, usare il metodo <xref:System.String.Equals%2A?displayProperty=nameWithType> anziché un metodo di confronto di stringhe come <xref:System.String.Compare%2A?displayProperty=nameWithType> o <xref:System.Globalization.CompareInfo.Compare%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-160">If you want to test two strings for equality rather than determine how they compare in the sort order, use the <xref:System.String.Equals%2A?displayProperty=nameWithType> method instead of a string comparison method such as <xref:System.String.Compare%2A?displayProperty=nameWithType> or <xref:System.Globalization.CompareInfo.Compare%2A?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="7bf28-161">I confronti di uguaglianza in genere vengono eseguiti i per accedere ad alcune risorse in modo condizionale.</span><span class="sxs-lookup"><span data-stu-id="7bf28-161">Comparisons for equality are typically performed to access some resource conditionally.</span></span> <span data-ttu-id="7bf28-162">Ad esempio, è possibile eseguire un confronto di uguaglianza per verificare una password o l'esistenza di un file.</span><span class="sxs-lookup"><span data-stu-id="7bf28-162">For example, you might perform a comparison for equality to verify a password or to confirm that a file exists.</span></span> <span data-ttu-id="7bf28-163">Confronti non linguistici di questo tipo devono essere ordinali anziché dipendenti dalle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="7bf28-163">Such non-linguistic comparisons should always be ordinal rather than culture-sensitive.</span></span> <span data-ttu-id="7bf28-164">In genere, è consigliabile chiamare il metodo <xref:System.String.Equals%28System.String%2CSystem.StringComparison%29?displayProperty=nameWithType> dell'istanza o il metodo <xref:System.String.Equals%28System.String%2CSystem.String%2CSystem.StringComparison%29?displayProperty=nameWithType> statico con un valore <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> per stringhe quali le password e un valore <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> per stringhe quali i nomi file o gli URI.</span><span class="sxs-lookup"><span data-stu-id="7bf28-164">In general, you should call the instance <xref:System.String.Equals%28System.String%2CSystem.StringComparison%29?displayProperty=nameWithType> method or the static <xref:System.String.Equals%28System.String%2CSystem.String%2CSystem.StringComparison%29?displayProperty=nameWithType> method with a value of <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> for strings such as passwords, and a value of <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> for strings such as file names or URIs.</span></span>

<span data-ttu-id="7bf28-165">I confronti di uguaglianza talvolta comportano ricerche o confronti delle sottostringhe anziché chiamate al metodo <xref:System.String.Equals%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-165">Comparisons for equality sometimes involve searches or substring comparisons rather than calls to the <xref:System.String.Equals%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="7bf28-166">In alcuni casi, si potrebbe usare la ricerca di una sottostringa per determinare se la sottostringa è uguale a un'altra stringa.</span><span class="sxs-lookup"><span data-stu-id="7bf28-166">In some cases, you may use a substring search to determine whether that substring equals another string.</span></span> <span data-ttu-id="7bf28-167">Se lo scopo di questo confronto non è linguistico, anche la ricerca deve essere ordinale anziché dipendente dalle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="7bf28-167">If the purpose of this comparison is non-linguistic, the search should also be ordinal rather than culture-sensitive.</span></span>

<span data-ttu-id="7bf28-168">Nell'esempio seguente viene illustrato il rischio di una ricerca dipendente dalle impostazioni cultura su dati non linguistici.</span><span class="sxs-lookup"><span data-stu-id="7bf28-168">The following example illustrates the danger of a culture-sensitive search on non-linguistic data.</span></span> <span data-ttu-id="7bf28-169">Il metodo `AccessesFileSystem` è progettato per impedire l'accesso al file system agli URI che iniziano con la sottostringa "FILE".</span><span class="sxs-lookup"><span data-stu-id="7bf28-169">The `AccessesFileSystem` method is designed to prohibit file system access for URIs that begin with the substring "FILE".</span></span> <span data-ttu-id="7bf28-170">A tale scopo, esegue un confronto dipendente dalle impostazioni cultura, con distinzione tra maiuscole e minuscole, dell'inizio dell'URI con la stringa "FILE".</span><span class="sxs-lookup"><span data-stu-id="7bf28-170">To do this, it performs a culture-sensitive, case-insensitive comparison of the beginning of the URI with the string "FILE".</span></span> <span data-ttu-id="7bf28-171">Poiché un URI che accede al file system può iniziare con "FILE:" o "file:", il presupposto implicito è che "i" (U+0069) sia sempre l'equivalente minuscolo di "I" (U+0049).</span><span class="sxs-lookup"><span data-stu-id="7bf28-171">Because a URI that accesses the file system can begin with either "FILE:" or "file:", the implicit assumption is that "i" (U+0069) is always the lowercase equivalent of "I" (U+0049).</span></span> <span data-ttu-id="7bf28-172">Tuttavia, in turco e in azerbaigiano, la versione in maiuscolo di "i" è "İ" (U+0130).</span><span class="sxs-lookup"><span data-stu-id="7bf28-172">However, in Turkish and Azerbaijani, the uppercase version of "i" is "İ" (U+0130).</span></span> <span data-ttu-id="7bf28-173">A causa di questa discrepanza, il confronto dipendente dalle impostazioni cultura consente l'accesso al file system anche se non dovesse essere consentito.</span><span class="sxs-lookup"><span data-stu-id="7bf28-173">Because of this discrepancy, the culture-sensitive comparison allows file system access when it should be prohibited.</span></span>

[!code-csharp[Conceptual.Globalization#12](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/equals1.cs#12)]
[!code-vb[Conceptual.Globalization#12](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/equals1.vb#12)]

<span data-ttu-id="7bf28-174">È possibile evitare questo problema eseguendo un confronto ordinale che ignora le maiuscole e minuscole, come illustrato nell'esempio di seguito.</span><span class="sxs-lookup"><span data-stu-id="7bf28-174">You can avoid this problem by performing an ordinal comparison that ignores case, as the following example shows.</span></span>

[!code-csharp[Conceptual.Globalization#13](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/equals2.cs#13)]
[!code-vb[Conceptual.Globalization#13](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/equals2.vb#13)]

### <a name="order-and-sort-strings"></a><span data-ttu-id="7bf28-175">Ordinare le stringhe</span><span class="sxs-lookup"><span data-stu-id="7bf28-175">Order and sort strings</span></span>

<span data-ttu-id="7bf28-176">In genere, le stringhe ordinate da visualizzare nell'interfaccia utente devono essere ordinate in base alle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="7bf28-176">Typically, ordered strings that are to be displayed in the user interface should be sorted based on culture.</span></span> <span data-ttu-id="7bf28-177">Nella maggior parte dei casi questi confronti di stringhe vengono gestiti in modo implicito da .NET quando si chiama un metodo di ordinamento stringhe, ad esempio <xref:System.Array.Sort%2A?displayProperty=nameWithType> o <xref:System.Collections.Generic.List%601.Sort%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-177">For the most part, such string comparisons are handled implicitly by .NET when you call a method that sorts strings, such as <xref:System.Array.Sort%2A?displayProperty=nameWithType> or <xref:System.Collections.Generic.List%601.Sort%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="7bf28-178">Per impostazione predefinita, le stringhe vengono ordinate usando le convenzioni di ordinamento delle impostazioni cultura correnti.</span><span class="sxs-lookup"><span data-stu-id="7bf28-178">By default, strings are sorted by using the sorting conventions of the current culture.</span></span> <span data-ttu-id="7bf28-179">Nell'esempio seguente viene illustrata la differenza quando viene ordinata una matrice di stringhe usando le convenzioni delle impostazioni cultura inglese (Stati Uniti) e le impostazioni cultura svedese (Svezia).</span><span class="sxs-lookup"><span data-stu-id="7bf28-179">The following example illustrates the difference when an array of strings is sorted by using the conventions of the English (United States) culture and the Swedish (Sweden) culture.</span></span>

[!code-csharp[Conceptual.Globalization#14](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/sort1.cs#14)]
[!code-vb[Conceptual.Globalization#14](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/sort1.vb#14)]

<span data-ttu-id="7bf28-180">Il confronto di stringhe dipendenti dalle impostazioni cultura viene definito dall'oggetto <xref:System.Globalization.CompareInfo>, restituito dalla proprietà <xref:System.Globalization.CultureInfo.CompareInfo%2A?displayProperty=nameWithType> delle singole impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="7bf28-180">Culture-sensitive string comparison is defined by the <xref:System.Globalization.CompareInfo> object, which is returned by each culture's <xref:System.Globalization.CultureInfo.CompareInfo%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="7bf28-181">I confronti di stringhe dipendenti dalle impostazioni cultura che usano gli overload del metodo <xref:System.String.Compare%2A?displayProperty=nameWithType> usano anche l'oggetto <xref:System.Globalization.CompareInfo>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-181">Culture-sensitive string comparisons that use the <xref:System.String.Compare%2A?displayProperty=nameWithType> method overloads also use the <xref:System.Globalization.CompareInfo> object.</span></span>

<span data-ttu-id="7bf28-182">.NET usa le tabelle per eseguire ordinamenti dipendenti dalle impostazioni cultura sui dati di tipo stringa.</span><span class="sxs-lookup"><span data-stu-id="7bf28-182">.NET uses tables to perform culture-sensitive sorts on string data.</span></span> <span data-ttu-id="7bf28-183">Il contenuto delle tabelle, che includono dati sui fattori di ordinamento e sulla normalizzazione delle stringhe, è determinato dalla versione dello standard Unicode implementata da una determinata versione di .NET.</span><span class="sxs-lookup"><span data-stu-id="7bf28-183">The content of these tables, which contain data on sort weights and string normalization, is determined by the version of the Unicode standard implemented by a particular version of .NET.</span></span> <span data-ttu-id="7bf28-184">La tabella seguente elenca le versioni di Unicode implementate dalle versioni specifiche di .NET Framework e da .NET Core.</span><span class="sxs-lookup"><span data-stu-id="7bf28-184">The following table lists the versions of Unicode implemented by the specified versions of the .NET Framework and by .NET Core.</span></span> <span data-ttu-id="7bf28-185">Si noti che l'elenco delle versioni supportate da Unicode si applica soltanto al confronto dei caratteri e all'ordinamento alfabetico; non si applica alla classificazione di caratteri Unicode in base alla categoria.</span><span class="sxs-lookup"><span data-stu-id="7bf28-185">Note that this list of supported Unicode versions applies to character comparison and sorting only; it does not apply to classification of Unicode characters by category.</span></span> <span data-ttu-id="7bf28-186">Per altre informazioni, vedere la sezione "Stringhe e standard Unicode" nell'articolo <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-186">For more information, see the "Strings and The Unicode Standard" section in the <xref:System.String> article.</span></span>

|<span data-ttu-id="7bf28-187">Versione di .NET Framework</span><span class="sxs-lookup"><span data-stu-id="7bf28-187">.NET Framework version</span></span>|<span data-ttu-id="7bf28-188">Sistema operativo</span><span class="sxs-lookup"><span data-stu-id="7bf28-188">Operating system</span></span>|<span data-ttu-id="7bf28-189">Versione Unicode</span><span class="sxs-lookup"><span data-stu-id="7bf28-189">Unicode version</span></span>|
|----------------------------|----------------------|---------------------|
|<span data-ttu-id="7bf28-190">.NET Framework 2.0</span><span class="sxs-lookup"><span data-stu-id="7bf28-190">.NET Framework 2.0</span></span>|<span data-ttu-id="7bf28-191">Tutti i sistemi operativi</span><span class="sxs-lookup"><span data-stu-id="7bf28-191">All operating systems</span></span>|<span data-ttu-id="7bf28-192">Unicode 4.1</span><span class="sxs-lookup"><span data-stu-id="7bf28-192">Unicode 4.1</span></span>|
|<span data-ttu-id="7bf28-193">.NET Framework 3.0</span><span class="sxs-lookup"><span data-stu-id="7bf28-193">.NET Framework 3.0</span></span>|<span data-ttu-id="7bf28-194">Tutti i sistemi operativi</span><span class="sxs-lookup"><span data-stu-id="7bf28-194">All operating systems</span></span>|<span data-ttu-id="7bf28-195">Unicode 4.1</span><span class="sxs-lookup"><span data-stu-id="7bf28-195">Unicode 4.1</span></span>|
|<span data-ttu-id="7bf28-196">.NET Framework 3.5</span><span class="sxs-lookup"><span data-stu-id="7bf28-196">.NET Framework 3.5</span></span>|<span data-ttu-id="7bf28-197">Tutti i sistemi operativi</span><span class="sxs-lookup"><span data-stu-id="7bf28-197">All operating systems</span></span>|<span data-ttu-id="7bf28-198">Unicode 4.1</span><span class="sxs-lookup"><span data-stu-id="7bf28-198">Unicode 4.1</span></span>|
|<span data-ttu-id="7bf28-199">.NET Framework 4</span><span class="sxs-lookup"><span data-stu-id="7bf28-199">.NET Framework 4</span></span>|<span data-ttu-id="7bf28-200">Tutti i sistemi operativi</span><span class="sxs-lookup"><span data-stu-id="7bf28-200">All operating systems</span></span>|<span data-ttu-id="7bf28-201">Unicode 5.0</span><span class="sxs-lookup"><span data-stu-id="7bf28-201">Unicode 5.0</span></span>|
|<span data-ttu-id="7bf28-202">.NET Framework 4.5 e versioni successive in Windows 7</span><span class="sxs-lookup"><span data-stu-id="7bf28-202">.NET Framework 4.5 and later on Windows 7</span></span>|<span data-ttu-id="7bf28-203">Unicode 5.0</span><span class="sxs-lookup"><span data-stu-id="7bf28-203">Unicode 5.0</span></span>|
|<span data-ttu-id="7bf28-204">.NET Framework 4.5 e versioni successive in Windows 8 e sistemi operativi successivi</span><span class="sxs-lookup"><span data-stu-id="7bf28-204">.NET Framework 4.5 and later on Windows 8 and later operating systems</span></span>|<span data-ttu-id="7bf28-205">Unicode 6.3.0</span><span class="sxs-lookup"><span data-stu-id="7bf28-205">Unicode 6.3.0</span></span>|
|<span data-ttu-id="7bf28-206">.NET Core (tutte le versioni)</span><span class="sxs-lookup"><span data-stu-id="7bf28-206">.NET Core (all versions)</span></span>|<span data-ttu-id="7bf28-207">Dipende dalla versione dello standard Unicode supportato dal sistema operativo sottostante.</span><span class="sxs-lookup"><span data-stu-id="7bf28-207">Depends on the version of the Unicode Standard supported by the underlying operating system.</span></span>|

<span data-ttu-id="7bf28-208">A partire da .NET Framework 4.5 e in tutte le versioni di .NET Core il confronto tra stringhe e l'ordinamento variano a seconda del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="7bf28-208">Starting with .NET Framework 4.5 and in all versions of .NET Core, string comparison and sorting depends on the operating system.</span></span> <span data-ttu-id="7bf28-209">.NET Framework 4.5 e versioni successive in Windows 7 recupera i dati dalle proprie tabelle che implementano il formato Unicode 5.0.</span><span class="sxs-lookup"><span data-stu-id="7bf28-209">The .NET Framework 4.5 and later running on Windows 7 retrieves data from its own tables that implement Unicode 5.0.</span></span> <span data-ttu-id="7bf28-210">.NET Framework 4.5 e versioni successive in Windows 8 e versioni successive recupera i dati dalle tabelle del sistema operativo che implementano il formato Unicode 6.3.</span><span class="sxs-lookup"><span data-stu-id="7bf28-210">The .NET Framework 4.5 and later running on Windows 8 and later retrieves data from operating system tables that implement Unicode 6.3.</span></span> <span data-ttu-id="7bf28-211">In .NET Core la versione di Unicode supportata dipende dal sistema operativo sottostante.</span><span class="sxs-lookup"><span data-stu-id="7bf28-211">On .NET Core, the supported version of Unicode depends on the underlying operating system.</span></span> <span data-ttu-id="7bf28-212">Se si serializzano i dati ordinati dipendenti dalle impostazioni cultura, è possibile usare la classe <xref:System.Globalization.SortVersion> per determinare se i dati serializzati devono essere ordinati in modo che siano coerenti con .NET e con l'ordinamento del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="7bf28-212">If you serialize culture-sensitive sorted data, you can use the <xref:System.Globalization.SortVersion> class to determine when your serialized data needs to be sorted so that it is consistent with .NET and the operating system's sort order.</span></span> <span data-ttu-id="7bf28-213">Per un esempio, vedere l'argomento relativo alla classe <xref:System.Globalization.SortVersion>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-213">For an example, see the <xref:System.Globalization.SortVersion> class topic.</span></span>

<span data-ttu-id="7bf28-214">Se l'app esegue ordinamenti estesi specifici delle impostazioni cultura di dati stringa, è possibile usare la classe <xref:System.Globalization.SortKey> per confrontare le stringhe.</span><span class="sxs-lookup"><span data-stu-id="7bf28-214">If your app performs extensive culture-specific sorts of string data, you can work with the <xref:System.Globalization.SortKey> class to compare strings.</span></span> <span data-ttu-id="7bf28-215">Una chiave di ordinamento riflette i fattori di ordinamento specifici alle impostazioni cultura, inclusi i caratteri alfabetici, i caratteri maiuscoli e minuscoli e i segni diacritici di una determinata stringa.</span><span class="sxs-lookup"><span data-stu-id="7bf28-215">A sort key reflects the culture-specific sort weights, including the alphabetic, case, and diacritic weights of a particular string.</span></span> <span data-ttu-id="7bf28-216">Poiché i confronti che usano le chiavi di ordinamento sono binari, risultano più veloci dei confronti che usano un oggetto <xref:System.Globalization.CompareInfo> in modo implicito o esplicito.</span><span class="sxs-lookup"><span data-stu-id="7bf28-216">Because comparisons using sort keys are binary, they are faster than comparisons that use a <xref:System.Globalization.CompareInfo> object either implicitly or explicitly.</span></span> <span data-ttu-id="7bf28-217">Si deve creare una chiave di ordinamento specifico delle impostazioni cultura per una determinata stringa passando la stringa al metodo <xref:System.Globalization.CompareInfo.GetSortKey%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-217">You create a culture-specific sort key for a particular string by passing the string to the <xref:System.Globalization.CompareInfo.GetSortKey%2A?displayProperty=nameWithType> method.</span></span>

<span data-ttu-id="7bf28-218">L'esempio seguente è simile all'esempio precedente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-218">The following example is similar to the previous example.</span></span> <span data-ttu-id="7bf28-219">Tuttavia, anziché chiamare il metodo <xref:System.Array.Sort%28System.Array%29?displayProperty=nameWithType>, che chiama in modo implicito il metodo <xref:System.Globalization.CompareInfo.Compare%2A?displayProperty=nameWithType>, viene definita un'implementazione <xref:System.Collections.Generic.IComparer%601?displayProperty=nameWithType> che confronta le chiavi di ordinamento di cui viene creata un'istanza e vengono passate al metodo <xref:System.Array.Sort%60%601%28%60%600%5B%5D%2CSystem.Collections.Generic.IComparer%7B%60%600%7D%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-219">However, instead of calling the <xref:System.Array.Sort%28System.Array%29?displayProperty=nameWithType> method, which implicitly calls the <xref:System.Globalization.CompareInfo.Compare%2A?displayProperty=nameWithType> method, it defines an <xref:System.Collections.Generic.IComparer%601?displayProperty=nameWithType> implementation that compares sort keys, which it instantiates and passes to the <xref:System.Array.Sort%60%601%28%60%600%5B%5D%2CSystem.Collections.Generic.IComparer%7B%60%600%7D%29?displayProperty=nameWithType> method.</span></span>

[!code-csharp[Conceptual.Globalization#15](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/sortkey1.cs#15)]
[!code-vb[Conceptual.Globalization#15](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/sortkey1.vb#15)]

### <a name="avoid-string-concatenation"></a><span data-ttu-id="7bf28-220">Evitare la concatenazione di stringhe</span><span class="sxs-lookup"><span data-stu-id="7bf28-220">Avoid string concatenation</span></span>

<span data-ttu-id="7bf28-221">Se possibile, evitare l'uso di stringhe composite che vengono compilate in fase di esecuzione da frasi concatenate.</span><span class="sxs-lookup"><span data-stu-id="7bf28-221">If at all possible, avoid using composite strings that are built at run time from concatenated phrases.</span></span> <span data-ttu-id="7bf28-222">Le stringhe composite sono difficili da localizzare, in quanto richiedono spesso un ordine grammaticale nel linguaggio originale dell'app che non è applicabile ad altre lingue localizzate.</span><span class="sxs-lookup"><span data-stu-id="7bf28-222">Composite strings are difficult to localize, because they often assume a grammatical order in the app's original language that does not apply to other localized languages.</span></span>

## <a name="handle-dates-and-times"></a><span data-ttu-id="7bf28-223">Gestire date e ore</span><span class="sxs-lookup"><span data-stu-id="7bf28-223">Handle dates and times</span></span>

<span data-ttu-id="7bf28-224">La modalità di gestione dei valori di data e ora dipende se vengono visualizzati nell'interfaccia utente o resi persistenti.</span><span class="sxs-lookup"><span data-stu-id="7bf28-224">How you handle date and time values depends on whether they are displayed in the user interface or persisted.</span></span> <span data-ttu-id="7bf28-225">In questa sezione vengono esaminati entrambi gli usi.</span><span class="sxs-lookup"><span data-stu-id="7bf28-225">This section examines both usages.</span></span> <span data-ttu-id="7bf28-226">Viene inoltre descritto come gestire le differenze di fuso orario e le operazioni aritmetiche quando si usano date e ore.</span><span class="sxs-lookup"><span data-stu-id="7bf28-226">It also discusses how you can handle time zone differences and arithmetic operations when working with dates and times.</span></span>

### <a name="display-dates-and-times"></a><span data-ttu-id="7bf28-227">Visualizzare date e ore</span><span class="sxs-lookup"><span data-stu-id="7bf28-227">Display dates and times</span></span>

<span data-ttu-id="7bf28-228">In genere, quando le date e le ore sono visualizzate nell'interfaccia utente, è consigliabile usare le convenzioni di formattazione delle impostazioni cultura dell'utente, definite dalla proprietà <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> e dall'oggetto <xref:System.Globalization.DateTimeFormatInfo> restituito dalla proprietà `CultureInfo.CurrentCulture.DateTimeFormat`.</span><span class="sxs-lookup"><span data-stu-id="7bf28-228">Typically, when dates and times are displayed in the user interface, you should use the formatting conventions of the user's culture, which is defined by the <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> property and by the <xref:System.Globalization.DateTimeFormatInfo> object returned by the `CultureInfo.CurrentCulture.DateTimeFormat` property.</span></span> <span data-ttu-id="7bf28-229">Le convenzioni di formattazione delle impostazioni cultura correnti vengono automaticamente usate quando si formatta una data tramite uno di questi metodi:</span><span class="sxs-lookup"><span data-stu-id="7bf28-229">The formatting conventions of the current culture are automatically used when you format a date by using any of these methods:</span></span>

- <span data-ttu-id="7bf28-230">Il metodo <xref:System.DateTime.ToString?displayProperty=nameWithType> senza parametri</span><span class="sxs-lookup"><span data-stu-id="7bf28-230">The parameterless <xref:System.DateTime.ToString?displayProperty=nameWithType> method</span></span>

- <span data-ttu-id="7bf28-231">Il metodo <xref:System.DateTime.ToString%28System.String%29?displayProperty=nameWithType>, che include una stringa di formato</span><span class="sxs-lookup"><span data-stu-id="7bf28-231">The <xref:System.DateTime.ToString%28System.String%29?displayProperty=nameWithType> method, which includes a format string</span></span>

- <span data-ttu-id="7bf28-232">Il metodo <xref:System.DateTimeOffset.ToString?displayProperty=nameWithType> senza parametri</span><span class="sxs-lookup"><span data-stu-id="7bf28-232">The parameterless <xref:System.DateTimeOffset.ToString?displayProperty=nameWithType> method</span></span>

- <span data-ttu-id="7bf28-233">Il metodo <xref:System.DateTimeOffset.ToString%28System.String%29?displayProperty=nameWithType>, che include una stringa di formato</span><span class="sxs-lookup"><span data-stu-id="7bf28-233">The <xref:System.DateTimeOffset.ToString%28System.String%29?displayProperty=nameWithType>, which includes a format string</span></span>

- <span data-ttu-id="7bf28-234">La funzionalità di [formattazione composita](../../../docs/standard/base-types/composite-formatting.md), quando viene usata con le date</span><span class="sxs-lookup"><span data-stu-id="7bf28-234">The [composite formatting](../../../docs/standard/base-types/composite-formatting.md) feature, when it is used with dates</span></span>

<span data-ttu-id="7bf28-235">Nell'esempio seguente vengono visualizzati due volte i dati di tramonto e di alba dell'11 ottobre 2012.</span><span class="sxs-lookup"><span data-stu-id="7bf28-235">The following example displays sunrise and sunset data twice for October 11, 2012.</span></span> <span data-ttu-id="7bf28-236">Innanzitutto vengono impostate le impostazioni cultura correnti su Croato (Croazia) e, successivamente, su Inglese (Gran Bretagna).</span><span class="sxs-lookup"><span data-stu-id="7bf28-236">It first sets the current culture to Croatian (Croatia), and then to English (Great Britain).</span></span> <span data-ttu-id="7bf28-237">In entrambi i casi, le date e le ore verranno visualizzate nel formato appropriato per le impostazioni cultura specifiche.</span><span class="sxs-lookup"><span data-stu-id="7bf28-237">In each case, the dates and times are displayed in the format that is appropriate for that culture.</span></span>

[!code-csharp[Conceptual.Globalization#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/dates1.cs#2)]
[!code-vb[Conceptual.Globalization#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/dates1.vb#2)]

### <a name="persist-dates-and-times"></a><span data-ttu-id="7bf28-238">Salvare in modo permanente date e ore</span><span class="sxs-lookup"><span data-stu-id="7bf28-238">Persist dates and times</span></span>

<span data-ttu-id="7bf28-239">È consigliabile non salvare in modo permanente i valori di data e ora in un formato che può variare in base alle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="7bf28-239">You should never persist date and time data in a format that can vary by culture.</span></span> <span data-ttu-id="7bf28-240">Si tratta di un errore di programmazione comune che restituisce dati danneggiati o eccezione di runtime.</span><span class="sxs-lookup"><span data-stu-id="7bf28-240">This is a common programming error that results in either corrupted data or a run-time exception.</span></span> <span data-ttu-id="7bf28-241">L'esempio seguente serializza due date, 9 gennaio 2013 e 18 agosto 2013, come stringhe usando le convenzioni di formattazione delle impostazioni cultura inglese (Stati Uniti).</span><span class="sxs-lookup"><span data-stu-id="7bf28-241">The following example serializes two dates, January 9, 2013 and August 18, 2013, as strings by using the formatting conventions of the English (United States) culture.</span></span> <span data-ttu-id="7bf28-242">I dati recuperati e analizzati mediante le convenzioni delle impostazioni cultura inglese (Stati Uniti) vengono ripristinati correttamente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-242">When the data is retrieved and parsed by using the conventions of the English (United States) culture, it is successfully restored.</span></span> <span data-ttu-id="7bf28-243">Tuttavia, quando viene recuperata e analizzata tramite le convenzioni delle impostazioni cultura inglese (Regno Unito), la prima data viene interpretata in modo errato come 1° settembre e la seconda non viene analizzata perché il calendario gregoriano non dispone di un diciottesimo mese.</span><span class="sxs-lookup"><span data-stu-id="7bf28-243">However, when it is retrieved and parsed by using the conventions of the English (United Kingdom) culture, the first date is wrongly interpreted as September 1, and the second fails to parse because the Gregorian calendar does not have an eighteenth month.</span></span>

[!code-csharp[Conceptual.Globalization#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/dates2.cs#3)]
[!code-vb[Conceptual.Globalization#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/dates2.vb#3)]

<span data-ttu-id="7bf28-244">È possibile evitare questo problema in tre modi:</span><span class="sxs-lookup"><span data-stu-id="7bf28-244">You can avoid this problem in any of three ways:</span></span>

- <span data-ttu-id="7bf28-245">Serializzare la data e l'ora in formato binario anziché come stringa.</span><span class="sxs-lookup"><span data-stu-id="7bf28-245">Serialize the date and time in binary format rather than as a string.</span></span>

- <span data-ttu-id="7bf28-246">Salvare e analizzare la rappresentazione della stringa di data e ora usando una stringa di formato personalizzato uguale, indipendentemente dalle impostazioni cultura dell'utente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-246">Save and parse the string representation of the date and time by using a custom format string that is the same regardless of the user's culture.</span></span>

- <span data-ttu-id="7bf28-247">Salvare la stringa usando le convenzioni di formattazione della cultura invariabile.</span><span class="sxs-lookup"><span data-stu-id="7bf28-247">Save the string by using the formatting conventions of the invariant culture.</span></span>

<span data-ttu-id="7bf28-248">L'ultimo approccio viene illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-248">The following example illustrates the last approach.</span></span> <span data-ttu-id="7bf28-249">Vengono usate le convenzioni di formattazione della cultura invariabile restituita dalla proprietà statica <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-249">It uses the formatting conventions of the invariant culture returned by the static <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span>

[!code-csharp[Conceptual.Globalization#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/dates3.cs#4)]
[!code-vb[Conceptual.Globalization#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/dates3.vb#4)]

### <a name="serialization-and-time-zone-awareness"></a><span data-ttu-id="7bf28-250">Presenza di fuso orario e serializzazione</span><span class="sxs-lookup"><span data-stu-id="7bf28-250">Serialization and time zone awareness</span></span>

<span data-ttu-id="7bf28-251">Un valore di data e ora può avere più interpretazioni, a partire da un'ora generale (Gli archivi vengono aperti il 2 gennaio 2013 alle 9:00) a un momento specifico ("Data di nascita: 2 gennaio 2013 6.32.00").</span><span class="sxs-lookup"><span data-stu-id="7bf28-251">A date and time value can have multiple interpretations, ranging from a general time ("The stores open on January 2, 2013, at 9:00 A.M.") to a specific moment in time ("Date of birth: January 2, 2013 6:32:00 A.M.").</span></span> <span data-ttu-id="7bf28-252">Quando un valore di ora rappresenta un momento specifico e si ripristina da un valore serializzato, è necessario assicurarsi che rappresenti lo stesso momento indipendentemente dalla posizione geografica o dal fuso orario dell'utente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-252">When a time value represents a specific moment in time and you restore it from a serialized value, you should ensure that it represents the same moment in time regardless of the user's geographical location or time zone.</span></span>

<span data-ttu-id="7bf28-253">L'esempio seguente illustra questo problema.</span><span class="sxs-lookup"><span data-stu-id="7bf28-253">The following example illustrates this problem.</span></span> <span data-ttu-id="7bf28-254">Viene salvato un singolo valore locale di data e ora come stringa in tre [formati standard](../../../docs/standard/base-types/standard-date-and-time-format-strings.md) ("G" per ora estesa e data generale, "S" per data/ora ordinabile e "O" per data/ora roundtrip), nonché in formato binario.</span><span class="sxs-lookup"><span data-stu-id="7bf28-254">It saves a single local date and time value as a string in three [standard formats](../../../docs/standard/base-types/standard-date-and-time-format-strings.md) ("G" for general date long time, "s" for sortable date/time, and "o" for round-trip date/time) as well as in binary format.</span></span>

[!code-csharp[Conceptual.Globalization#10](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/dates4.cs#10)]
[!code-vb[Conceptual.Globalization#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/dates4.vb#10)]

<span data-ttu-id="7bf28-255">Quando i dati vengono ripristinati in un sistema con lo stesso fuso orario del sistema su cui sono stati serializzati, i valori di data e ora deserializzati riflettono accuratamente il valore originale, come mostra l'output:</span><span class="sxs-lookup"><span data-stu-id="7bf28-255">When the data is restored on a system in the same time zone as the system on which it was serialized, the deserialized date and time values accurately reflect the original value, as the output shows:</span></span>

```console
'3/30/2013 6:00:00 PM' --> 3/30/2013 6:00:00 PM Unspecified
'2013-03-30T18:00:00' --> 3/30/2013 6:00:00 PM Unspecified
'2013-03-30T18:00:00.0000000-07:00' --> 3/30/2013 6:00:00 PM Local

3/30/2013 6:00:00 PM Local
```

<span data-ttu-id="7bf28-256">Tuttavia, se si ripristinano i dati in un sistema con un fuso orario diverso, solo il valore di data e orario formattato con la stringa di formato standard "O" (roundtrip) conserva le informazioni sul fuso orario e pertanto rappresenta lo stesso istante di tempo.</span><span class="sxs-lookup"><span data-stu-id="7bf28-256">However, if you restore the data on a system in a different time zone, only the date and time value that was formatted with the "o" (round-trip) standard format string preserves time zone information and therefore represents the same instant in time.</span></span> <span data-ttu-id="7bf28-257">Di seguito è riportato l'output quando i dati relativi a data e ora vengono ripristinati in un sistema con fuso orario standard dell'Europa occidentale:</span><span class="sxs-lookup"><span data-stu-id="7bf28-257">Here's the output when the date and time data is restored on a system in the Romance Standard Time zone:</span></span>

```console
'3/30/2013 6:00:00 PM' --> 3/30/2013 6:00:00 PM Unspecified
'2013-03-30T18:00:00' --> 3/30/2013 6:00:00 PM Unspecified
'2013-03-30T18:00:00.0000000-07:00' --> 3/31/2013 3:00:00 AM Local

3/30/2013 6:00:00 PM Local
```

<span data-ttu-id="7bf28-258">Per riflettere in modo preciso un valore di data e ora che rappresenta un singolo momento di tempo indipendentemente dal fuso orario del sistema in cui i dati sono deserializzati, è possibile eseguire una delle seguenti operazioni:</span><span class="sxs-lookup"><span data-stu-id="7bf28-258">To accurately reflect a date and time value that represents a single moment of time regardless of the time zone of the system on which the data is deserialized, you can do any of the following:</span></span>

- <span data-ttu-id="7bf28-259">Salvare il valore come stringa usando la stringa di formato standard (round trip) "O".</span><span class="sxs-lookup"><span data-stu-id="7bf28-259">Save the value as a string by using the "o" (round-trip) standard format string.</span></span> <span data-ttu-id="7bf28-260">Quindi deserializzarlo nel sistema di destinazione.</span><span class="sxs-lookup"><span data-stu-id="7bf28-260">Then deserialize it on the target system.</span></span>

- <span data-ttu-id="7bf28-261">Convertirlo in UTC e salvarlo come stringa usando la stringa di formato standard "R" (RFC1123).</span><span class="sxs-lookup"><span data-stu-id="7bf28-261">Convert it to UTC and save it as a string by using the "r" (RFC1123) standard format string.</span></span> <span data-ttu-id="7bf28-262">Quindi deserializzarlo nel sistema di destinazione e convertirlo in un'ora locale.</span><span class="sxs-lookup"><span data-stu-id="7bf28-262">Then deserialize it on the target system and convert it to local time.</span></span>

- <span data-ttu-id="7bf28-263">Convertirlo in UTC e salvarlo come stringa usando la stringa di formato standard "U" (ordinabile universale).</span><span class="sxs-lookup"><span data-stu-id="7bf28-263">Convert it to UTC and save it as a string by using the "u" (universal sortable) standard format string.</span></span> <span data-ttu-id="7bf28-264">Quindi deserializzarlo nel sistema di destinazione e convertirlo in un'ora locale.</span><span class="sxs-lookup"><span data-stu-id="7bf28-264">Then deserialize it on the target system and convert it to local time.</span></span>

- <span data-ttu-id="7bf28-265">Convertirlo in UTC e salvarlo in formato binario.</span><span class="sxs-lookup"><span data-stu-id="7bf28-265">Convert it to UTC and save it in binary format.</span></span> <span data-ttu-id="7bf28-266">Quindi deserializzarlo nel sistema di destinazione e convertirlo in un'ora locale.</span><span class="sxs-lookup"><span data-stu-id="7bf28-266">Then deserialize it on the target system and convert it to local time.</span></span>

<span data-ttu-id="7bf28-267">Ogni tecnica viene illustrata nell'esempio riportato di seguito.</span><span class="sxs-lookup"><span data-stu-id="7bf28-267">The following example illustrates each technique.</span></span>

[!code-csharp[Conceptual.Globalization#11](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/dates8.cs#11)]
[!code-vb[Conceptual.Globalization#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/dates8.vb#11)]

<span data-ttu-id="7bf28-268">Quando i dati vengono serializzati in un sistema nel fuso orario del Pacifico e deserializzati in un sistema nel fuso orario dell'Europa occidentale, l'esempio visualizza il seguente output:</span><span class="sxs-lookup"><span data-stu-id="7bf28-268">When the data is serialized on a system in the Pacific Standard Time zone and deserialized on a system in the Romance Standard Time zone, the example displays the following output:</span></span>

```console
'2013-03-30T18:00:00.0000000-07:00' --> 3/31/2013 3:00:00 AM Local
'Sun, 31 Mar 2013 01:00:00 GMT' --> 3/31/2013 3:00:00 AM Local
'2013-03-31 01:00:00Z' --> 3/31/2013 3:00:00 AM Local

3/31/2013 3:00:00 AM Local
```

<span data-ttu-id="7bf28-269">Per altre informazioni, vedere [Conversione degli orari tra fusi orari](../../../docs/standard/datetime/converting-between-time-zones.md).</span><span class="sxs-lookup"><span data-stu-id="7bf28-269">For more information, see [Converting Times Between Time Zones](../../../docs/standard/datetime/converting-between-time-zones.md).</span></span>

### <a name="perform-date-and-time-arithmetic"></a><span data-ttu-id="7bf28-270">Eseguire operazioni aritmetiche con data e ora</span><span class="sxs-lookup"><span data-stu-id="7bf28-270">Perform date and time arithmetic</span></span>

<span data-ttu-id="7bf28-271">Entrambi i tipi <xref:System.DateTime> e <xref:System.DateTimeOffset> supportano le operazioni aritmetiche.</span><span class="sxs-lookup"><span data-stu-id="7bf28-271">Both the <xref:System.DateTime> and <xref:System.DateTimeOffset> types support arithmetic operations.</span></span> <span data-ttu-id="7bf28-272">È possibile calcolare la differenza tra due valori di data, oppure aggiungere o sottrarre intervalli di tempo particolari a o da un valore di data.</span><span class="sxs-lookup"><span data-stu-id="7bf28-272">You can calculate the difference between two date values, or you can add or subtract particular time intervals to or from a date value.</span></span> <span data-ttu-id="7bf28-273">Tuttavia, nelle operazioni aritmetiche sui valori di data e ora non vengono presi in considerazione i fusi orari e le relative norme di regolazione.</span><span class="sxs-lookup"><span data-stu-id="7bf28-273">However, arithmetic operations on date and time values do not take time zones and time zone adjustment rules into account.</span></span> <span data-ttu-id="7bf28-274">Per questo motivo, le operazioni aritmetiche con date e ore sui valori che rappresentano determinati momenti possono restituire risultati imprecisi.</span><span class="sxs-lookup"><span data-stu-id="7bf28-274">Because of this, date and time arithmetic on values that represent moments in time can return inaccurate results.</span></span>

<span data-ttu-id="7bf28-275">Ad esempio, la transizione dall'ora solare Pacifico all'ora legale Pacifico si verifica la seconda domenica di marzo, cioè il 10 marzo per l'anno 2013.</span><span class="sxs-lookup"><span data-stu-id="7bf28-275">For example, the transition from Pacific Standard Time to Pacific Daylight Time occurs on the second Sunday of March, which is March 10 for the year 2013.</span></span> <span data-ttu-id="7bf28-276">Come illustrato nell'esempio seguente, se si calcola una data e un'ora di 48 ore successive al 9 marzo 2013 ore 10:30.</span><span class="sxs-lookup"><span data-stu-id="7bf28-276">As the following example shows, if you calculate the date and time that is 48 hours after March 9, 2013 at 10:30 A.M.</span></span> <span data-ttu-id="7bf28-277">in un sistema con il fuso orario impostato su Ora solare Pacifico, il risultato (11 marzo 2013 ore 10:30) non considera l'adeguamento dell'ora corrispondente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-277">on a system in the Pacific Standard Time zone, the result, March 11, 2013 at 10:30 A.M., does not take the intervening time adjustment into account.</span></span>

[!code-csharp[Conceptual.Globalization#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/dates5.cs#8)]
[!code-vb[Conceptual.Globalization#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/dates5.vb#8)]

<span data-ttu-id="7bf28-278">Per assicurarsi che un'operazione aritmetica sui valori di data e ora produca risultati accurati, attenersi alla seguente procedura:</span><span class="sxs-lookup"><span data-stu-id="7bf28-278">To ensure that an arithmetic operation on date and time values produces accurate results, follow these steps:</span></span>

1. <span data-ttu-id="7bf28-279">Convertire l'ora nel fuso orario di origine in ora UTC.</span><span class="sxs-lookup"><span data-stu-id="7bf28-279">Convert the time in the source time zone to UTC.</span></span>

2. <span data-ttu-id="7bf28-280">Eseguire l'operazione aritmetica.</span><span class="sxs-lookup"><span data-stu-id="7bf28-280">Perform the arithmetic operation.</span></span>

3. <span data-ttu-id="7bf28-281">Se il risultato è un valore di data e ora, convertirlo dall'ora UTC all'ora del fuso orario di origine.</span><span class="sxs-lookup"><span data-stu-id="7bf28-281">If the result is a date and time value, convert it from UTC to the time in the source time zone.</span></span>

<span data-ttu-id="7bf28-282">L'esempio seguente è simile a quello precedente, con la differenza che segue questi tre passaggi correttamente per aggiungere 48 ore alle 10.30 del 9 marzo 2013.</span><span class="sxs-lookup"><span data-stu-id="7bf28-282">The following example is similar to the previous example, except that it follows these three steps to correctly add 48 hours to March 9, 2013 at 10:30 A.M.</span></span>

[!code-csharp[Conceptual.Globalization#9](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/dates6.cs#9)]
[!code-vb[Conceptual.Globalization#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/dates6.vb#9)]

<span data-ttu-id="7bf28-283">Per altre informazioni, vedere [Esecuzione di operazioni aritmetiche con date e ore](../../../docs/standard/datetime/performing-arithmetic-operations.md).</span><span class="sxs-lookup"><span data-stu-id="7bf28-283">For more information, see [Performing Arithmetic Operations with Dates and Times](../../../docs/standard/datetime/performing-arithmetic-operations.md).</span></span>

### <a name="use-culture-sensitive-names-for-date-elements"></a><span data-ttu-id="7bf28-284">Usare nomi dipendenti delle impostazioni cultura per gli elementi di dati</span><span class="sxs-lookup"><span data-stu-id="7bf28-284">Use culture-sensitive names for date elements</span></span>

<span data-ttu-id="7bf28-285">È possibile che l'app debba visualizzare il nome del mese o il giorno della settimana.</span><span class="sxs-lookup"><span data-stu-id="7bf28-285">Your app may need to display the name of the month or the day of the week.</span></span> <span data-ttu-id="7bf28-286">A tale scopo, il codice come il seguente è comune.</span><span class="sxs-lookup"><span data-stu-id="7bf28-286">To do this, code such as the following is common.</span></span>

[!code-csharp[Conceptual.Globalization#19](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/monthname1.cs#19)]
[!code-vb[Conceptual.Globalization#19](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/monthname1.vb#19)]

<span data-ttu-id="7bf28-287">Tuttavia, tramite il codice vengono restituiti sempre i nomi dei giorni della settimana in inglese.</span><span class="sxs-lookup"><span data-stu-id="7bf28-287">However, this code always returns the names of the days of the week in English.</span></span> <span data-ttu-id="7bf28-288">Il codice che estrae il nome del mese è spesso più flessibile.</span><span class="sxs-lookup"><span data-stu-id="7bf28-288">Code that extracts the name of the month is often even more inflexible.</span></span> <span data-ttu-id="7bf28-289">Spesso si presuppone un calendario di dodici mesi con i nomi dei mesi in una lingua specifica.</span><span class="sxs-lookup"><span data-stu-id="7bf28-289">It frequently assumes a twelve-month calendar with names of months in a specific language.</span></span>

<span data-ttu-id="7bf28-290">Usando le [stringhe di formato di data e ora personalizzate](../../../docs/standard/base-types/custom-date-and-time-format-strings.md) o le proprietà dell'oggetto <xref:System.Globalization.DateTimeFormatInfo>, è facile estrarre le stringhe che riflettono i nomi dei giorni della settimana o dei mesi nelle impostazioni cultura dell'utente, come illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-290">By using [custom date and time format strings](../../../docs/standard/base-types/custom-date-and-time-format-strings.md) or the properties of the <xref:System.Globalization.DateTimeFormatInfo> object, it is easy to extract strings that reflect the names of days of the week or months in the user's culture, as the following example illustrates.</span></span> <span data-ttu-id="7bf28-291">Vengono impostate le impostazioni cultura correnti su Francese (Francia) e vengono visualizzati il nome del giorno della settimana e il nome del mese per il 1° luglio 2013.</span><span class="sxs-lookup"><span data-stu-id="7bf28-291">It changes the current culture to French (France) and displays the name of the day of the week and the name of the month for July 1, 2013.</span></span>

[!code-csharp[Conceptual.Globalization#20](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/monthname2.cs#20)]
[!code-vb[Conceptual.Globalization#20](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/monthname2.vb#20)]

## <a name="numeric-values"></a><span data-ttu-id="7bf28-292">Valori numerici</span><span class="sxs-lookup"><span data-stu-id="7bf28-292">Numeric values</span></span>

<span data-ttu-id="7bf28-293">La gestione di numeri dipende se vengono visualizzati nell'interfaccia utente o resi persistenti.</span><span class="sxs-lookup"><span data-stu-id="7bf28-293">The handling of numbers depends on whether they are displayed in the user interface or persisted.</span></span> <span data-ttu-id="7bf28-294">In questa sezione vengono esaminati entrambi gli usi.</span><span class="sxs-lookup"><span data-stu-id="7bf28-294">This section examines both usages.</span></span>

> [!NOTE]
> <span data-ttu-id="7bf28-295">Nelle operazioni di analisi e formattazione .NET riconosce come cifre numeriche solo i caratteri latini di base da 0 a 9 (da U+0030 a U+0039).</span><span class="sxs-lookup"><span data-stu-id="7bf28-295">In parsing and formatting operations, .NET recognizes only the Basic Latin characters 0 through 9 (U+0030 through U+0039) as numeric digits.</span></span>

### <a name="display-numeric-values"></a><span data-ttu-id="7bf28-296">Visualizzare i valori numerici</span><span class="sxs-lookup"><span data-stu-id="7bf28-296">Display numeric values</span></span>

<span data-ttu-id="7bf28-297">In genere, quando i numeri sono visualizzati nell'interfaccia utente, è consigliabile usare le convenzioni di formattazione delle impostazioni cultura dell'utente, definite nella proprietà <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> e dall'oggetto <xref:System.Globalization.NumberFormatInfo> restituito dalla proprietà `CultureInfo.CurrentCulture.NumberFormat`.</span><span class="sxs-lookup"><span data-stu-id="7bf28-297">Typically, when numbers are displayed in the user interface, you should use the formatting conventions of the user's culture, which is defined by the <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> property and by the <xref:System.Globalization.NumberFormatInfo> object returned by the `CultureInfo.CurrentCulture.NumberFormat` property.</span></span> <span data-ttu-id="7bf28-298">Le convenzioni di formattazione delle impostazioni cultura correnti vengono automaticamente usate quando si formatta una data tramite uno dei seguenti metodi:</span><span class="sxs-lookup"><span data-stu-id="7bf28-298">The formatting conventions of the current culture are automatically used when you format a date by using any of the following methods:</span></span>

- <span data-ttu-id="7bf28-299">Il metodo `ToString` senza parametri di qualsiasi tipo numerico</span><span class="sxs-lookup"><span data-stu-id="7bf28-299">The parameterless `ToString` method of any numeric type</span></span>

- <span data-ttu-id="7bf28-300">Il metodo `ToString(String)` di qualsiasi tipo numerico, che include una stringa di formato come argomento</span><span class="sxs-lookup"><span data-stu-id="7bf28-300">The `ToString(String)` method of any numeric type, which includes a format string as an argument</span></span>

- <span data-ttu-id="7bf28-301">La funzionalità di [formattazione composita](../../../docs/standard/base-types/composite-formatting.md), quando viene usata con valori numerici</span><span class="sxs-lookup"><span data-stu-id="7bf28-301">The [composite formatting](../../../docs/standard/base-types/composite-formatting.md) feature, when it is used with numeric values</span></span>

<span data-ttu-id="7bf28-302">L'esempio seguente consente di visualizzare la temperatura mensile media di Parigi, Francia.</span><span class="sxs-lookup"><span data-stu-id="7bf28-302">The following example displays the average temperature per month in Paris, France.</span></span> <span data-ttu-id="7bf28-303">Innanzitutto vengono impostate le impostazioni cultura correnti su Francese (Francia) prima di visualizzare i dati e, successivamente, vengono impostate su Inglese (Stati Uniti).</span><span class="sxs-lookup"><span data-stu-id="7bf28-303">It first sets the current culture to French (France) before displaying the data, and then sets it to English (United States).</span></span> <span data-ttu-id="7bf28-304">In ogni caso, le temperature e i nomi dei mesi verranno visualizzati nel formato appropriato per le impostazioni cultura in questione.</span><span class="sxs-lookup"><span data-stu-id="7bf28-304">In each case, the month names and temperatures are displayed in the format that is appropriate for that culture.</span></span> <span data-ttu-id="7bf28-305">Si noti che nelle due impostazioni cultura vengono usati separatori decimali diversi per il valore della temperatura.</span><span class="sxs-lookup"><span data-stu-id="7bf28-305">Note that the two cultures use different decimal separators in the temperature value.</span></span> <span data-ttu-id="7bf28-306">Si noti inoltre che in questo esempio viene usata la stringa di formato di data e ora personalizzata "MMMM" per visualizzare il nome completo dei mesi e che viene allocata la quantità di spazio appropriata per il nome del mese nella stringa di risultato determinando la lunghezza del nome del mese più lungo nella matrice <xref:System.Globalization.DateTimeFormatInfo.MonthNames%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-306">Also note that the example uses the "MMMM" custom date and time format string to display the full month name, and that it allocates the appropriate amount of space for the month name in the result string by determining the length of the longest month name in the <xref:System.Globalization.DateTimeFormatInfo.MonthNames%2A?displayProperty=nameWithType> array.</span></span>

[!code-csharp[Conceptual.Globalization#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/numbers1.cs#5)]
[!code-vb[Conceptual.Globalization#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/numbers1.vb#5)]

### <a name="persist-numeric-values"></a><span data-ttu-id="7bf28-307">Salvare in modo permanente i valori numerici</span><span class="sxs-lookup"><span data-stu-id="7bf28-307">Persist numeric values</span></span>

<span data-ttu-id="7bf28-308">È consigliabile non salvare in maniera permanente i dati numerici in un formato specifico delle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="7bf28-308">You should never persist numeric data in a culture-specific format.</span></span> <span data-ttu-id="7bf28-309">Si tratta di un errore di programmazione comune che restituisce dati danneggiati o eccezione di runtime.</span><span class="sxs-lookup"><span data-stu-id="7bf28-309">This is a common programming error that results in either corrupted data or a run-time exception.</span></span> <span data-ttu-id="7bf28-310">L'esempio seguente genera dieci numeri a virgola mobile casuali e li serializza come stringhe usando le convenzioni di formattazione delle impostazioni cultura della lingua inglese (Stati Uniti).</span><span class="sxs-lookup"><span data-stu-id="7bf28-310">The following example generates ten random floating-point numbers, and then serializes them as strings by using the formatting conventions of the English (United States) culture.</span></span> <span data-ttu-id="7bf28-311">I dati recuperati e analizzati mediante le convenzioni delle impostazioni cultura inglese (Stati Uniti) vengono ripristinati correttamente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-311">When the data is retrieved and parsed by using the conventions of the English (United States) culture, it is successfully restored.</span></span> <span data-ttu-id="7bf28-312">Tuttavia, quando vengono recuperati e analizzati usando le convenzioni delle impostazioni cultura Francese (Francia), nessuno dei numeri può essere analizzato in quanto vengono usati separatori decimali diversi nelle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="7bf28-312">However, when it is retrieved and parsed by using the conventions of the French (France) culture, none of the numbers can be parsed because the cultures use different decimal separators.</span></span>

[!code-csharp[Conceptual.Globalization#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/numbers2.cs#6)]
[!code-vb[Conceptual.Globalization#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/numbers2.vb#6)]

<span data-ttu-id="7bf28-313">Per evitare questo problema, usare una delle seguenti tecniche:</span><span class="sxs-lookup"><span data-stu-id="7bf28-313">To avoid this problem, you can use one of these techniques:</span></span>

- <span data-ttu-id="7bf28-314">Salvare e analizzare la rappresentazione di stringa del numero usando una stringa di formato personalizzata uguale indipendentemente dalle impostazioni cultura dell'utente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-314">Save and parse the string representation of the number by using a custom format string that is the same regardless of the user's culture.</span></span>

- <span data-ttu-id="7bf28-315">Salvare il numero come stringa usando le convenzioni di formattazione della lingua inglese restituita dalla proprietà <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-315">Save the number as a string by using the formatting conventions of the invariant culture, which is returned by the <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span>

- <span data-ttu-id="7bf28-316">Serializzare il numero in formato di file binario anziché in formato stringa.</span><span class="sxs-lookup"><span data-stu-id="7bf28-316">Serialize the number in binary instead of string format.</span></span>

<span data-ttu-id="7bf28-317">L'ultimo approccio viene illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-317">The following example illustrates the last approach.</span></span> <span data-ttu-id="7bf28-318">Viene serializzata la matrice di valori <xref:System.Double> e, successivamente, i valori in questione vengono deserializzati e visualizzati usando le convenzioni di formattazione delle impostazioni cultura inglese (Stati Uniti) e francese (Francia).</span><span class="sxs-lookup"><span data-stu-id="7bf28-318">It serializes the array of <xref:System.Double> values, and then deserializes and displays them by using the formatting conventions of the English (United States) and French (France) cultures.</span></span>

[!code-csharp[Conceptual.Globalization#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/numbers3.cs#7)]
[!code-vb[Conceptual.Globalization#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/numbers3.vb#7)]

<span data-ttu-id="7bf28-319">La serializzazione dei valori di valuta è un caso speciale.</span><span class="sxs-lookup"><span data-stu-id="7bf28-319">Serializing currency values is a special case.</span></span> <span data-ttu-id="7bf28-320">Poiché un valore di valuta dipende dall'unità di valuta in cui viene espresso, non è opportuno considerarlo un valore numerico indipendente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-320">Because a currency value depends on the unit of currency in which it is expressed; it makes little sense to treat it as an independent numeric value.</span></span> <span data-ttu-id="7bf28-321">Tuttavia, se si salva un valore di valuta come stringa formattata in cui è incluso un simbolo di valuta, non è possibile deserializzarlo in un sistema in cui le impostazioni cultura predefinite usano un simbolo di valuta diverso, come illustrato nell'esempio di seguito.</span><span class="sxs-lookup"><span data-stu-id="7bf28-321">However, if you save a currency value as a formatted string that includes a currency symbol, it cannot be deserialized on a system whose default culture uses a different currency symbol, as the following example shows.</span></span>

[!code-csharp[Conceptual.Globalization#16](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/currency1.cs#16)]
[!code-vb[Conceptual.Globalization#16](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/currency1.vb#16)]

<span data-ttu-id="7bf28-322">In alternativa, serializzare il valore numerico con alcune informazioni relative alle impostazioni cultura, ad esempio il nome delle impostazioni cultura, in modo che il valore e il relativo simbolo di valuta possano essere deserializzati indipendentemente dalle impostazioni cultura correnti.</span><span class="sxs-lookup"><span data-stu-id="7bf28-322">Instead, you should serialize the numeric value along with some cultural information, such as the name of the culture, so that the value and its currency symbol can be deserialized independently of the current culture.</span></span> <span data-ttu-id="7bf28-323">Nell'esempio seguente viene definita una struttura `CurrencyValue` con due membri: il valore <xref:System.Decimal> e il nome delle impostazioni cultura a cui appartiene il valore.</span><span class="sxs-lookup"><span data-stu-id="7bf28-323">The following example does that by defining a `CurrencyValue` structure with two members: the <xref:System.Decimal> value and the name of the culture to which the value belongs.</span></span>

[!code-csharp[Conceptual.Globalization#17](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.globalization/cs/currency2.cs#17)]
[!code-vb[Conceptual.Globalization#17](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.globalization/vb/currency2.vb#17)]

## <a name="work-with-culture-specific-settings"></a><span data-ttu-id="7bf28-324">Usare aspetti specifici delle impostazioni cultura</span><span class="sxs-lookup"><span data-stu-id="7bf28-324">Work with culture-specific settings</span></span>

<span data-ttu-id="7bf28-325">In .NET la classe <xref:System.Globalization.CultureInfo> rappresenta impostazioni cultura specifiche o un'area specifica.</span><span class="sxs-lookup"><span data-stu-id="7bf28-325">In .NET, the <xref:System.Globalization.CultureInfo> class represents a particular culture or region.</span></span> <span data-ttu-id="7bf28-326">Alcune proprietà restituiscono oggetti che includono informazioni specifiche su alcuni aspetti delle impostazioni cultura:</span><span class="sxs-lookup"><span data-stu-id="7bf28-326">Some of its properties return objects that provide specific information about some aspect of a culture:</span></span>

- <span data-ttu-id="7bf28-327">La proprietà <xref:System.Globalization.CultureInfo.CompareInfo%2A?displayProperty=nameWithType> restituisce un oggetto <xref:System.Globalization.CompareInfo> che contiene informazioni relative a come le impostazioni cultura confrontano e ordinano le stringhe.</span><span class="sxs-lookup"><span data-stu-id="7bf28-327">The <xref:System.Globalization.CultureInfo.CompareInfo%2A?displayProperty=nameWithType> property returns a <xref:System.Globalization.CompareInfo> object that contains information about how the culture compares and orders strings.</span></span>

- <span data-ttu-id="7bf28-328">La proprietà <xref:System.Globalization.CultureInfo.DateTimeFormat%2A?displayProperty=nameWithType> restituisce un oggetto <xref:System.Globalization.DateTimeFormatInfo> che contiene informazioni sulle impostazioni cultura specifiche usate per la formattazione dei dati di data e ora.</span><span class="sxs-lookup"><span data-stu-id="7bf28-328">The <xref:System.Globalization.CultureInfo.DateTimeFormat%2A?displayProperty=nameWithType> property returns a <xref:System.Globalization.DateTimeFormatInfo> object that provides culture-specific information used in formatting date and time data.</span></span>

- <span data-ttu-id="7bf28-329">La proprietà <xref:System.Globalization.CultureInfo.NumberFormat%2A?displayProperty=nameWithType> restituisce un oggetto <xref:System.Globalization.NumberFormatInfo> che contiene informazioni sulle impostazioni cultura specifiche usate per la formattazione dei dati numerici.</span><span class="sxs-lookup"><span data-stu-id="7bf28-329">The <xref:System.Globalization.CultureInfo.NumberFormat%2A?displayProperty=nameWithType> property returns a <xref:System.Globalization.NumberFormatInfo> object that provides culture-specific information used in formatting numeric data.</span></span>

- <span data-ttu-id="7bf28-330">La proprietà <xref:System.Globalization.CultureInfo.TextInfo%2A?displayProperty=nameWithType> restituisce un oggetto <xref:System.Globalization.TextInfo> che contiene informazioni sul sistema di scrittura di una cultura.</span><span class="sxs-lookup"><span data-stu-id="7bf28-330">The <xref:System.Globalization.CultureInfo.TextInfo%2A?displayProperty=nameWithType> property returns a <xref:System.Globalization.TextInfo> object that provides information about the culture's writing system.</span></span>

<span data-ttu-id="7bf28-331">In genere, non fare supposizioni sui valori della proprietà <xref:System.Globalization.CultureInfo> specifiche e sui relativi oggetti correlati.</span><span class="sxs-lookup"><span data-stu-id="7bf28-331">In general, do not make any assumptions about the values of specific <xref:System.Globalization.CultureInfo> properties and their related objects.</span></span> <span data-ttu-id="7bf28-332">Considerare invece i dati specifici delle impostazioni cultura come elementi soggetti a modifiche, per questi motivi:</span><span class="sxs-lookup"><span data-stu-id="7bf28-332">Instead, you should view culture-specific data as subject to change, for these reasons:</span></span>

- <span data-ttu-id="7bf28-333">I singoli valori di proprietà sono soggetti a modifiche e revisioni nel tempo, poiché i dati vengono corretti, si rendono disponibili dati migliori o si apportano modifiche di convenzioni specifiche delle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="7bf28-333">Individual property values are subject to change and revision over time, as data is corrected, better data becomes available, or culture-specific conventions change.</span></span>

- <span data-ttu-id="7bf28-334">I singoli valori di proprietà possono variare tra le diverse versioni di .NET o del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="7bf28-334">Individual property values may vary across versions of .NET or operating system versions.</span></span>

- <span data-ttu-id="7bf28-335">.NET supporta impostazioni cultura sostitutive.</span><span class="sxs-lookup"><span data-stu-id="7bf28-335">.NET supports replacement cultures.</span></span> <span data-ttu-id="7bf28-336">Ciò consente di definire nuove impostazioni cultura personalizzate che completano le impostazioni cultura standard esistenti o li sostituiscono completamente.</span><span class="sxs-lookup"><span data-stu-id="7bf28-336">This makes it possible to define a new custom culture that either supplements existing standard cultures or completely replaces an existing standard culture.</span></span>

- <span data-ttu-id="7bf28-337">Nei sistemi Windows l'utente può personalizzare aspetti specifici delle impostazioni cultura usando l'app **Paese e lingua** nel Pannello di controllo.</span><span class="sxs-lookup"><span data-stu-id="7bf28-337">On Windows systems, the user can customize culture-specific settings by using the **Region and Language** app in Control Panel.</span></span> <span data-ttu-id="7bf28-338">Quando viene creata un'istanza di un oggetto <xref:System.Globalization.CultureInfo>, è possibile determinare se rifletta le personalizzazioni dell'utente chiamando il costruttore <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29>.</span><span class="sxs-lookup"><span data-stu-id="7bf28-338">When you instantiate a <xref:System.Globalization.CultureInfo> object, you can determine whether it reflects these user customizations by calling the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29> constructor.</span></span> <span data-ttu-id="7bf28-339">In genere, per le app per l'utente finale, è necessario rispettare le preferenze dell'utente in modo che all'utente vengano presentati i dati in un formato previsto.</span><span class="sxs-lookup"><span data-stu-id="7bf28-339">Typically, for end-user apps, you should respect user preferences so that the user is presented with data in a format that they expect.</span></span>

## <a name="see-also"></a><span data-ttu-id="7bf28-340">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="7bf28-340">See also</span></span>

- [<span data-ttu-id="7bf28-341">Globalizzazione e localizzazione</span><span class="sxs-lookup"><span data-stu-id="7bf28-341">Globalization and Localization</span></span>](../../../docs/standard/globalization-localization/index.md)
- [<span data-ttu-id="7bf28-342">Procedure consigliate per l'utilizzo di stringheBest Practices for Using Strings</span><span class="sxs-lookup"><span data-stu-id="7bf28-342">Best Practices for Using Strings</span></span>](../../../docs/standard/base-types/best-practices-strings.md)
