---
title: Procedure consigliate per l'uso delle stringhe in .NET
description: Informazioni su come usare le stringhe in modo efficace in applicazioni .NET.
ms.date: 05/01/2019
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- strings [.NET Framework],searching
- best practices,string comparison and sorting
- strings [.NET Framework],best practices
- strings [.NET Framework],basic string operations
- sorting strings
- strings [.NET Framework],sorting
- string comparison [.NET Framework],best practices
- string sorting
- comparing strings
- strings [.NET Framework],comparing
ms.assetid: b9f0bf53-e2de-4116-8ce9-d4f91a1df4f7
ms.openlocfilehash: 0fb7ec8d9de8fae7a0443984511e538d38d93c7a
ms.sourcegitcommit: 7b1497c1927cb449cefd313bc5126ae37df30746
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/16/2020
ms.locfileid: "83441006"
---
# <a name="best-practices-for-using-strings-in-net"></a><span data-ttu-id="8e445-103">Procedure consigliate per l'uso delle stringhe in .NET</span><span class="sxs-lookup"><span data-stu-id="8e445-103">Best Practices for Using Strings in .NET</span></span>

<span data-ttu-id="8e445-104">.NET offre un ampio supporto per lo sviluppo di applicazioni localizzate e globalizzate e semplifica l'applicazione delle convenzioni relative alle impostazioni cultura correnti o alle impostazioni cultura specifiche quando si eseguono operazioni comuni come l'ordinamento e la visualizzazione delle stringhe.</span><span class="sxs-lookup"><span data-stu-id="8e445-104">.NET provides extensive support for developing localized and globalized applications, and makes it easy to apply the conventions of either the current culture or a specific culture when performing common operations such as sorting and displaying strings.</span></span> <span data-ttu-id="8e445-105">Tuttavia, l'ordinamento o il confronto delle stringhe non è sempre un'operazione con distinzione delle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-105">But sorting or comparing strings is not always a culture-sensitive operation.</span></span> <span data-ttu-id="8e445-106">Ad esempio, le stringhe usate internamente da un'applicazione in genere devono essere gestite in modo identico in tutte le impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-106">For example, strings that are used internally by an application typically should be handled identically across all cultures.</span></span> <span data-ttu-id="8e445-107">Quando i dati di stringa indipendenti dalle impostazioni cultura, ad esempio i tag XML, i tag HTML, i nomi utente, i percorsi di file e i nomi degli oggetti di sistema, vengono interpretati come dati con distinzione delle impostazioni cultura, nel codice dell'applicazione possono verificarsi bug complessi, riduzioni delle prestazioni e, in alcuni casi, problemi di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="8e445-107">When culturally independent string data, such as XML tags, HTML tags, user names, file paths, and the names of system objects, are interpreted as if they were culture-sensitive, application code can be subject to subtle bugs, poor performance, and, in some cases, security issues.</span></span>

<span data-ttu-id="8e445-108">Questo argomento esamina i metodi di ordinamento, confronto e uso di maiuscole e minuscole nelle stringhe in .NET, offre raccomandazioni per selezionare il metodo di gestione delle stringhe appropriato e fornisce informazioni aggiuntive sui metodi di gestione delle stringhe.</span><span class="sxs-lookup"><span data-stu-id="8e445-108">This topic examines the string sorting, comparison, and casing methods in .NET, presents recommendations for selecting an appropriate string-handling method, and provides additional information about string-handling methods.</span></span> <span data-ttu-id="8e445-109">Inoltre, esamina come vengono gestiti i file formattati, ad esempio i dati numerici e i dati relativi a data e ora, per la visualizzazione e l'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="8e445-109">It also examines how formatted data, such as numeric data and date and time data, is handled for display and for storage.</span></span>

## <a name="recommendations-for-string-usage"></a><span data-ttu-id="8e445-110">Suggerimenti per l'uso delle stringhe</span><span class="sxs-lookup"><span data-stu-id="8e445-110">Recommendations for string usage</span></span>

<span data-ttu-id="8e445-111">Quando si sviluppa con .NET, seguire queste semplici raccomandazione quando si usano le stringhe:</span><span class="sxs-lookup"><span data-stu-id="8e445-111">When you develop with .NET, follow these simple recommendations when you use strings:</span></span>

- <span data-ttu-id="8e445-112">Usare gli overload che specificano esplicitamente le regole di confronto tra stringhe per le operazioni di stringa.</span><span class="sxs-lookup"><span data-stu-id="8e445-112">Use overloads that explicitly specify the string comparison rules for string operations.</span></span> <span data-ttu-id="8e445-113">In genere, questo implica chiamare un overload del metodo con un parametro di tipo <xref:System.StringComparison>.</span><span class="sxs-lookup"><span data-stu-id="8e445-113">Typically, this involves calling a method overload that has a parameter of type <xref:System.StringComparison>.</span></span>
- <span data-ttu-id="8e445-114">Usare <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> o <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> per i confronti come impostazioni di sicurezza predefinite per la corrispondenza tra stringhe indipendente dalle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-114">Use <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> or <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> for comparisons as your safe default for culture-agnostic string matching.</span></span>
- <span data-ttu-id="8e445-115">Usare i confronti con <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> o <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> per prestazioni migliori.</span><span class="sxs-lookup"><span data-stu-id="8e445-115">Use comparisons with <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> or <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> for better performance.</span></span>
- <span data-ttu-id="8e445-116">Usare le operazioni di stringa basate su <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType> quando si visualizza l'output all'utente.</span><span class="sxs-lookup"><span data-stu-id="8e445-116">Use string operations that are based on <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType> when you display output to the user.</span></span>
- <span data-ttu-id="8e445-117">Usare i valori non linguistici <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> o <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> al posto delle operazioni di stringa basate su <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> quando il confronto non è linguisticamente rilevante (ad esempio, simbolico).</span><span class="sxs-lookup"><span data-stu-id="8e445-117">Use the non-linguistic <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> or <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> values instead of string operations based on <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> when the comparison is linguistically irrelevant (symbolic, for example).</span></span>
- <span data-ttu-id="8e445-118">Usare il metodo <xref:System.String.ToUpperInvariant%2A?displayProperty=nameWithType> invece di <xref:System.String.ToLowerInvariant%2A?displayProperty=nameWithType> quando si normalizzano le stringhe per il confronto.</span><span class="sxs-lookup"><span data-stu-id="8e445-118">Use the <xref:System.String.ToUpperInvariant%2A?displayProperty=nameWithType> method instead of the <xref:System.String.ToLowerInvariant%2A?displayProperty=nameWithType> method when you normalize strings for comparison.</span></span>
- <span data-ttu-id="8e445-119">Usare un overload del metodo <xref:System.String.Equals%2A?displayProperty=nameWithType> per controllare se due stringhe sono uguali.</span><span class="sxs-lookup"><span data-stu-id="8e445-119">Use an overload of the <xref:System.String.Equals%2A?displayProperty=nameWithType> method to test whether two strings are equal.</span></span>
- <span data-ttu-id="8e445-120">Usare i metodi <xref:System.String.Compare%2A?displayProperty=nameWithType> e <xref:System.String.CompareTo%2A?displayProperty=nameWithType> per ordinare le stringhe, non per controllare l'uguaglianza.</span><span class="sxs-lookup"><span data-stu-id="8e445-120">Use the <xref:System.String.Compare%2A?displayProperty=nameWithType> and <xref:System.String.CompareTo%2A?displayProperty=nameWithType> methods to sort strings, not to check for equality.</span></span>
- <span data-ttu-id="8e445-121">Usare la formattazione con distinzione delle impostazioni cultura per visualizzare i dati non di tipo stringa, ad esempio numeri e dati, in un'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="8e445-121">Use culture-sensitive formatting to display non-string data, such as numbers and dates, in a user interface.</span></span> <span data-ttu-id="8e445-122">Usare la formattazione con le [impostazioni cultura inglese non dipendenti da paese/area geografica](xref:System.Globalization.CultureInfo.InvariantCulture) per salvare in modo permanente i dati non di tipo stringa in formato stringa.</span><span class="sxs-lookup"><span data-stu-id="8e445-122">Use formatting with the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture) to persist non-string data in string form.</span></span>

<span data-ttu-id="8e445-123">Evitare le operazioni seguenti quando si usano le stringhe:</span><span class="sxs-lookup"><span data-stu-id="8e445-123">Avoid the following practices when you use strings:</span></span>

- <span data-ttu-id="8e445-124">Non usare overload che non specificano in modo esplicito o implicito le regole di confronto tra stringhe per le operazioni di stringa.</span><span class="sxs-lookup"><span data-stu-id="8e445-124">Do not use overloads that do not explicitly or implicitly specify the string comparison rules for string operations.</span></span>
- <span data-ttu-id="8e445-125">Non usare operazioni di stringa basate su <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> nella maggior parte dei casi.</span><span class="sxs-lookup"><span data-stu-id="8e445-125">Do not use string operations based on <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> in most cases.</span></span> <span data-ttu-id="8e445-126">Una delle poche eccezioni riguarda la conservazione di dati significativi a livello linguistico, ma indipendenti dalle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-126">One of the few exceptions is when you are persisting linguistically meaningful but culturally agnostic data.</span></span>
- <span data-ttu-id="8e445-127">Non usare un overload del metodo <xref:System.String.Compare%2A?displayProperty=nameWithType> o <xref:System.String.CompareTo%2A> ed eseguire un test per il valore restituito zero per determinare se due stringhe sono uguali.</span><span class="sxs-lookup"><span data-stu-id="8e445-127">Do not use an overload of the <xref:System.String.Compare%2A?displayProperty=nameWithType> or <xref:System.String.CompareTo%2A> method and test for a return value of zero to determine whether two strings are equal.</span></span>
- <span data-ttu-id="8e445-128">Non usare la formattazione con distinzione delle impostazioni cultura per conservare i dati numerici o di data e ora in formato stringa.</span><span class="sxs-lookup"><span data-stu-id="8e445-128">Do not use culture-sensitive formatting to persist numeric data or date and time data in string form.</span></span>

## <a name="specifying-string-comparisons-explicitly"></a><span data-ttu-id="8e445-129">Specifica esplicita per il confronto tra stringhe</span><span class="sxs-lookup"><span data-stu-id="8e445-129">Specifying string comparisons explicitly</span></span>

<span data-ttu-id="8e445-130">Molti dei metodi di modifica delle stringhe in .NET sono di tipo overload.</span><span class="sxs-lookup"><span data-stu-id="8e445-130">Most of the string manipulation methods in .NET are overloaded.</span></span> <span data-ttu-id="8e445-131">In genere, uno o più overload accettano le impostazioni predefinite, mentre altri accettano le impostazioni non predefinite, specificando invece una determinata procedura di confronto o modifica delle stringhe.</span><span class="sxs-lookup"><span data-stu-id="8e445-131">Typically, one or more overloads accept default settings, whereas others accept no defaults and instead define the precise way in which strings are to be compared or manipulated.</span></span> <span data-ttu-id="8e445-132">La maggior parte dei metodi che non si basano sulle impostazioni predefinite include un parametro di tipo <xref:System.StringComparison>, che corrisponde a un'enumerazione che specifica in modo esplicito le regole per il confronto tra stringhe in base alle impostazioni cultura e alle maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="8e445-132">Most of the methods that do not rely on defaults include a parameter of type <xref:System.StringComparison>, which is an enumeration that explicitly specifies rules for string comparison by culture and case.</span></span> <span data-ttu-id="8e445-133">La tabella seguente descrive i membri dell'enumerazione <xref:System.StringComparison> .</span><span class="sxs-lookup"><span data-stu-id="8e445-133">The following table describes the <xref:System.StringComparison> enumeration members.</span></span>

|<span data-ttu-id="8e445-134">Membro StringComparison</span><span class="sxs-lookup"><span data-stu-id="8e445-134">StringComparison member</span></span>|<span data-ttu-id="8e445-135">Description</span><span class="sxs-lookup"><span data-stu-id="8e445-135">Description</span></span>|
|-----------------------------|-----------------|
|<xref:System.StringComparison.CurrentCulture>|<span data-ttu-id="8e445-136">Esegue un confronto con distinzione tra maiuscole e minuscole usando le impostazioni cultura correnti.</span><span class="sxs-lookup"><span data-stu-id="8e445-136">Performs a case-sensitive comparison using the current culture.</span></span>|
|<xref:System.StringComparison.CurrentCultureIgnoreCase>|<span data-ttu-id="8e445-137">Esegue un confronto senza distinzione tra maiuscole e minuscole usando le impostazioni cultura correnti.</span><span class="sxs-lookup"><span data-stu-id="8e445-137">Performs a case-insensitive comparison using the current culture.</span></span>|
|<xref:System.StringComparison.InvariantCulture>|<span data-ttu-id="8e445-138">Esegue un confronto con distinzione tra maiuscole e minuscole usando la lingua inglese.</span><span class="sxs-lookup"><span data-stu-id="8e445-138">Performs a case-sensitive comparison using the invariant culture.</span></span>|
|<xref:System.StringComparison.InvariantCultureIgnoreCase>|<span data-ttu-id="8e445-139">Esegue un confronto senza distinzione tra maiuscole e minuscole usando la lingua inglese.</span><span class="sxs-lookup"><span data-stu-id="8e445-139">Performs a case-insensitive comparison using the invariant culture.</span></span>|
|<xref:System.StringComparison.Ordinal>|<span data-ttu-id="8e445-140">Esegue un confronto ordinale.</span><span class="sxs-lookup"><span data-stu-id="8e445-140">Performs an ordinal comparison.</span></span>|
|<xref:System.StringComparison.OrdinalIgnoreCase>|<span data-ttu-id="8e445-141">Esegue un confronto ordinale senza distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="8e445-141">Performs a case-insensitive ordinal comparison.</span></span>|

<span data-ttu-id="8e445-142">Ad esempio, il metodo <xref:System.String.IndexOf%2A> , che restituisce l'indice di una sottostringa in un oggetto <xref:System.String> che corrisponde a un carattere o a una stringa, ha nove overload:</span><span class="sxs-lookup"><span data-stu-id="8e445-142">For example, the <xref:System.String.IndexOf%2A> method, which returns the index of a substring in a <xref:System.String> object that matches either a character or a string, has nine overloads:</span></span>

- <span data-ttu-id="8e445-143"><xref:System.String.IndexOf%28System.Char%29>, <xref:System.String.IndexOf%28System.Char%2CSystem.Int32%29>e <xref:System.String.IndexOf%28System.Char%2CSystem.Int32%2CSystem.Int32%29>, che per impostazione predefinita eseguono una ricerca ordinale (con distinzione tra maiuscole e minuscole e senza distinzione delle impostazioni cultura) per un carattere nella stringa.</span><span class="sxs-lookup"><span data-stu-id="8e445-143"><xref:System.String.IndexOf%28System.Char%29>, <xref:System.String.IndexOf%28System.Char%2CSystem.Int32%29>, and <xref:System.String.IndexOf%28System.Char%2CSystem.Int32%2CSystem.Int32%29>, which by default perform an ordinal (case-sensitive and culture-insensitive) search for a character in the string.</span></span>
- <span data-ttu-id="8e445-144"><xref:System.String.IndexOf%28System.String%29>, <xref:System.String.IndexOf%28System.String%2CSystem.Int32%29>e <xref:System.String.IndexOf%28System.String%2CSystem.Int32%2CSystem.Int32%29>, che per impostazione predefinita eseguono una ricerca con distinzione tra maiuscole e minuscole e con distinzione delle impostazioni cultura per una sottostringa nella stringa.</span><span class="sxs-lookup"><span data-stu-id="8e445-144"><xref:System.String.IndexOf%28System.String%29>, <xref:System.String.IndexOf%28System.String%2CSystem.Int32%29>, and <xref:System.String.IndexOf%28System.String%2CSystem.Int32%2CSystem.Int32%29>, which by default perform a case-sensitive and culture-sensitive search for a substring in the string.</span></span>
- <span data-ttu-id="8e445-145"><xref:System.String.IndexOf%28System.String%2CSystem.StringComparison%29>, <xref:System.String.IndexOf%28System.String%2CSystem.Int32%2CSystem.StringComparison%29>e <xref:System.String.IndexOf%28System.String%2CSystem.Int32%2CSystem.Int32%2CSystem.StringComparison%29>, che includono in parametro di tipo <xref:System.StringComparison> che consente di specificare il formato del confronto.</span><span class="sxs-lookup"><span data-stu-id="8e445-145"><xref:System.String.IndexOf%28System.String%2CSystem.StringComparison%29>, <xref:System.String.IndexOf%28System.String%2CSystem.Int32%2CSystem.StringComparison%29>, and <xref:System.String.IndexOf%28System.String%2CSystem.Int32%2CSystem.Int32%2CSystem.StringComparison%29>, which include a parameter of type <xref:System.StringComparison> that allows the form of the comparison to be specified.</span></span>

<span data-ttu-id="8e445-146">Si consiglia di selezione un overload che non uso i valori predefiniti, per i seguenti motivi:</span><span class="sxs-lookup"><span data-stu-id="8e445-146">We recommend that you select an overload that does not use default values, for the following reasons:</span></span>

- <span data-ttu-id="8e445-147">Alcuni overload con parametri predefiniti (quelli che cercano <xref:System.Char> nell'istanza della stringa) eseguono un confronto ordinale, mentre altri (quelli che cercano una stringa nell'istanza della stringa) applicano la distinzione delle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-147">Some overloads with default parameters (those that search for a <xref:System.Char> in the string instance) perform an ordinal comparison, whereas others (those that search for a string in the string instance) are culture-sensitive.</span></span> <span data-ttu-id="8e445-148">È difficile ricordare quale valore predefinito viene usato dai diversi metodi ed è facile confondere gli overload.</span><span class="sxs-lookup"><span data-stu-id="8e445-148">It is difficult to remember which method uses which default value, and easy to confuse the overloads.</span></span>
- <span data-ttu-id="8e445-149">Lo scopo del codice basato sui valori predefiniti per le chiamate al metodo non è chiaro.</span><span class="sxs-lookup"><span data-stu-id="8e445-149">The intent of the code that relies on default values for method calls is not clear.</span></span> <span data-ttu-id="8e445-150">Nell'esempio seguente, che si basa su impostazioni predefinite, è difficile capire se lo sviluppatore intendeva eseguire un confronto ordinale o linguistico tra due stringhe o se la differenza tra maiuscole e minuscole tra `protocol` e "http" può causare la restituzione di `false`.</span><span class="sxs-lookup"><span data-stu-id="8e445-150">In the following example, which relies on defaults, it is difficult to know whether the developer actually intended an ordinal or a linguistic comparison of two strings, or whether a case difference between `protocol` and "http" might cause the test for equality to return `false`.</span></span>

     [!code-csharp[Conceptual.Strings.BestPractices#1](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/explicitargs1.cs#1)]
     [!code-vb[Conceptual.Strings.BestPractices#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/explicitargs1.vb#1)]

<span data-ttu-id="8e445-151">In generale, si consiglia di chiamare un metodo non basato sulle impostazioni predefinite perché disambigua lo scopo del codice.</span><span class="sxs-lookup"><span data-stu-id="8e445-151">In general, we recommend that you call a method that does not rely on defaults, because it makes the intent of the code unambiguous.</span></span> <span data-ttu-id="8e445-152">In questo modo, anche il codice diventa più leggibile ed è più facile eseguirne il debug e la manutenzione.</span><span class="sxs-lookup"><span data-stu-id="8e445-152">This, in turn, makes the code more readable and easier to debug and maintain.</span></span> <span data-ttu-id="8e445-153">L'esempio seguente riguarda le domande relative all'esempio precedente.</span><span class="sxs-lookup"><span data-stu-id="8e445-153">The following example addresses the questions raised about the previous example.</span></span> <span data-ttu-id="8e445-154">Viene specificato che viene utilizzato il confronto ordinale e che le differenze tra maiuscole e minuscole vengono ignorate.</span><span class="sxs-lookup"><span data-stu-id="8e445-154">It makes it clear that ordinal comparison is used and that differences in case are ignored.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#2](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/explicitargs1.cs#2)]
[!code-vb[Conceptual.Strings.BestPractices#2](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/explicitargs1.vb#2)]

## <a name="the-details-of-string-comparison"></a><span data-ttu-id="8e445-155">Dettagli sul confronto tra stringhe</span><span class="sxs-lookup"><span data-stu-id="8e445-155">The details of string comparison</span></span>

<span data-ttu-id="8e445-156">Il confronto tra stringhe è la base di molte operazioni relative alle stringhe, in particolare l'ordinamento e il test di uguaglianza.</span><span class="sxs-lookup"><span data-stu-id="8e445-156">String comparison is the heart of many string-related operations, particularly sorting and testing for equality.</span></span> <span data-ttu-id="8e445-157">L'ordinamento delle stringhe viene eseguito in un modo specifico: se "my" compare prima di "string" in un elenco ordinato di stringhe, nel confronto "my" deve essere minore o uguale a "string".</span><span class="sxs-lookup"><span data-stu-id="8e445-157">Strings sort in a determined order: If "my" appears before "string" in a sorted list of strings, "my" must compare less than or equal to "string".</span></span> <span data-ttu-id="8e445-158">Inoltre, il confronto definisce implicitamente l'uguaglianza.</span><span class="sxs-lookup"><span data-stu-id="8e445-158">Additionally, comparison implicitly defines equality.</span></span> <span data-ttu-id="8e445-159">L'operazione di confronto restituisce zero per le stringhe che considera uguali.</span><span class="sxs-lookup"><span data-stu-id="8e445-159">The comparison operation returns zero for strings it deems equal.</span></span> <span data-ttu-id="8e445-160">In altre parole, nessuna stringa viene considerata minore delle altre.</span><span class="sxs-lookup"><span data-stu-id="8e445-160">A good interpretation is that neither string is less than the other.</span></span> <span data-ttu-id="8e445-161">Le operazioni più significative relative alle stringhe includono una o più delle seguenti procedure: confronto con un'altra stringa ed esecuzione di un'operazione di ordinamento definita correttamente.</span><span class="sxs-lookup"><span data-stu-id="8e445-161">Most meaningful operations involving strings include one or both of these procedures: comparing with another string, and executing a well-defined sort operation.</span></span>

> [!NOTE]
> <span data-ttu-id="8e445-162">È possibile scaricare le [tabelle di ordinamento spessore](https://www.microsoft.com/download/details.aspx?id=10921), un set di file di testo che contengono informazioni sugli spessori dei caratteri usati nelle operazioni di ordinamento e confronto per i sistemi operativi Windows, e la [tabella degli elementi delle regole di confronto Unicode predefinite](https://www.unicode.org/Public/UCA/latest/allkeys.txt), la versione più recente della tabella di ordinamento spessore per Linux e MacOS.</span><span class="sxs-lookup"><span data-stu-id="8e445-162">You can download the [Sorting Weight Tables](https://www.microsoft.com/download/details.aspx?id=10921), a set of text files that contain information on the character weights used in sorting and comparison operations for Windows operating systems, and the [Default Unicode Collation Element Table](https://www.unicode.org/Public/UCA/latest/allkeys.txt), the latest version of the sort weight table for Linux and macOS.</span></span> <span data-ttu-id="8e445-163">La versione specifica della tabella di ordinamento spessore in Linux e macOS dipende dalla versione delle librerie [International Components for Unicode](http://site.icu-project.org/) installate nel sistema.</span><span class="sxs-lookup"><span data-stu-id="8e445-163">The specific version of the sort weight table on Linux and macOS depends on the version of the [International Components for Unicode](http://site.icu-project.org/) libraries installed on the system.</span></span> <span data-ttu-id="8e445-164">Per informazioni sulle versioni ICU e sulle versioni Unicode implementate, vedere [Downloading ICU](http://site.icu-project.org/download) (Download di ICU).</span><span class="sxs-lookup"><span data-stu-id="8e445-164">For information on ICU versions and the Unicode versions that they implement, see [Downloading ICU](http://site.icu-project.org/download).</span></span>

<span data-ttu-id="8e445-165">Tuttavia, la valutazione di due stringhe per l'uguaglianza e l'ordinamento non produce un unico risultato corretto; l'esito dipende dai criteri usati per il confronto delle stringhe.</span><span class="sxs-lookup"><span data-stu-id="8e445-165">However, evaluating two strings for equality or sort order does not yield a single, correct result; the outcome depends on the criteria used to compare the strings.</span></span> <span data-ttu-id="8e445-166">In particolare, i confronti tra stringhe ordinali o basati sulle convenzioni di uso di maiuscole e minuscole e di ordinamento delle impostazioni cultura correnti o delle [impostazioni cultura inglese non dipendenti da paese/area geografica](xref:System.Globalization.CultureInfo.InvariantCulture) possono produrre risultati diversi.</span><span class="sxs-lookup"><span data-stu-id="8e445-166">In particular, string comparisons that are ordinal or that are based on the casing and sorting conventions of the current culture or the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture) (a locale-agnostic culture based on the English language) may produce different results.</span></span>

<span data-ttu-id="8e445-167">I confronti di stringhe tramite versioni diverse di .NET oppure tramite .NET in sistemi operativi o versioni del sistema operativo diverse possono inoltre restituire risultati diversi.</span><span class="sxs-lookup"><span data-stu-id="8e445-167">In addition, string comparisons using different versions of .NET or using .NET on different operating systems or operating system versions may return different results.</span></span> <span data-ttu-id="8e445-168">Per altre informazioni, vedere [Stringhe e standard Unicode](xref:System.String#Unicode).</span><span class="sxs-lookup"><span data-stu-id="8e445-168">For more information, see [Strings and the Unicode Standard](xref:System.String#Unicode).</span></span>

### <a name="string-comparisons-that-use-the-current-culture"></a><span data-ttu-id="8e445-169">Confronti tra stringhe che usano le impostazioni cultura correnti</span><span class="sxs-lookup"><span data-stu-id="8e445-169">String comparisons that use the current culture</span></span>

<span data-ttu-id="8e445-170">Un criterio prevede l'uso delle convenzioni delle impostazioni cultura correnti quando si confrontano le stringhe.</span><span class="sxs-lookup"><span data-stu-id="8e445-170">One criterion involves using the conventions of the current culture when comparing strings.</span></span> <span data-ttu-id="8e445-171">I confronti basati sulle impostazioni cultura correnti usano le impostazioni cultura o le impostazioni locali correnti del thread.</span><span class="sxs-lookup"><span data-stu-id="8e445-171">Comparisons that are based on the current culture use the thread's current culture or locale.</span></span> <span data-ttu-id="8e445-172">Se le impostazioni cultura non vengono impostate dall'utente, vengono usate le impostazioni predefinite della finestra **Opzioni internazionali** nel Pannello di controllo.</span><span class="sxs-lookup"><span data-stu-id="8e445-172">If the culture is not set by the user, it defaults to the setting in the **Regional Options** window in Control Panel.</span></span> <span data-ttu-id="8e445-173">È necessario usare sempre i confronti basati sulle impostazioni cultura correnti quando i dati sono linguisticamente rilevanti e quando riflettono un'interazione utente con distinzione delle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-173">You should always use comparisons that are based on the current culture when data is linguistically relevant, and when it reflects culture-sensitive user interaction.</span></span>

<span data-ttu-id="8e445-174">Tuttavia, il comportamento di confronto e di utilizzo di maiuscole e minuscole in .NET cambia quando vengono modificate le impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-174">However, comparison and casing behavior in .NET changes when the culture changes.</span></span> <span data-ttu-id="8e445-175">Ciò accade quando un'applicazione viene eseguita in un computer con impostazioni cultura diverse da quelle del computer in cui è stata sviluppata oppure quando il thread di esecuzione modifica le proprie impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-175">This happens when an application executes on a computer that has a different culture than the computer on which the application was developed, or when the executing thread changes its culture.</span></span> <span data-ttu-id="8e445-176">Questo comportamento è intenzionale, tuttavia resta poco chiaro per molti sviluppatori.</span><span class="sxs-lookup"><span data-stu-id="8e445-176">This behavior is intentional, but it remains non-obvious to many developers.</span></span> <span data-ttu-id="8e445-177">L'esempio seguente illustra le differenze nell'ordinamento tra le impostazioni cultura della lingua inglese per gli Stati Uniti ("en-US") e di quella svedese ("sv-SE").</span><span class="sxs-lookup"><span data-stu-id="8e445-177">The following example illustrates differences in sort order between the U.S. English ("en-US") and Swedish ("sv-SE") cultures.</span></span> <span data-ttu-id="8e445-178">Si noti che le parole "ångström", "Windows" e "Visual Studio" vengono visualizzate in posizioni diverse nelle matrici di stringhe ordinate.</span><span class="sxs-lookup"><span data-stu-id="8e445-178">Note that the words "ångström", "Windows", and "Visual Studio" appear in different positions in the sorted string arrays.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#3](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/comparison1.cs#3)]
[!code-vb[Conceptual.Strings.BestPractices#3](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/comparison1.vb#3)]

<span data-ttu-id="8e445-179">I confronti senza distinzione tra maiuscole e minuscole che usano le impostazioni cultura correnti sono uguali a quelli con distinzione delle impostazioni cultura, ma ignorano la distinzione tra maiuscole e minuscole come indicato dalle impostazioni cultura correnti del thread.</span><span class="sxs-lookup"><span data-stu-id="8e445-179">Case-insensitive comparisons that use the current culture are the same as culture-sensitive comparisons, except that they ignore case as dictated by the thread's current culture.</span></span> <span data-ttu-id="8e445-180">Questo comportamento può manifestarsi anche negli ordinamenti.</span><span class="sxs-lookup"><span data-stu-id="8e445-180">This behavior may manifest itself in sort orders as well.</span></span>

<span data-ttu-id="8e445-181">I confronti che usano la semantica delle impostazioni cultura correnti sono i confronti predefiniti per i seguenti metodi:</span><span class="sxs-lookup"><span data-stu-id="8e445-181">Comparisons that use current culture semantics are the default for the following methods:</span></span>

- <span data-ttu-id="8e445-182">Overload<xref:System.String.Compare%2A?displayProperty=nameWithType> che non includono un parametro <xref:System.StringComparison> .</span><span class="sxs-lookup"><span data-stu-id="8e445-182"><xref:System.String.Compare%2A?displayProperty=nameWithType> overloads that do not include a <xref:System.StringComparison> parameter.</span></span>
- <span data-ttu-id="8e445-183">Overload<xref:System.String.CompareTo%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="8e445-183"><xref:System.String.CompareTo%2A?displayProperty=nameWithType> overloads.</span></span>
- <span data-ttu-id="8e445-184">Metodo <xref:System.String.StartsWith%28System.String%29?displayProperty=nameWithType> predefinito e metodo <xref:System.String.StartsWith%28System.String%2CSystem.Boolean%2CSystem.Globalization.CultureInfo%29?displayProperty=nameWithType> con un parametro `null`<xref:System.Globalization.CultureInfo> .</span><span class="sxs-lookup"><span data-stu-id="8e445-184">The default <xref:System.String.StartsWith%28System.String%29?displayProperty=nameWithType> method, and the <xref:System.String.StartsWith%28System.String%2CSystem.Boolean%2CSystem.Globalization.CultureInfo%29?displayProperty=nameWithType> method with a `null`<xref:System.Globalization.CultureInfo> parameter.</span></span>
- <span data-ttu-id="8e445-185">Metodo <xref:System.String.EndsWith%28System.String%29?displayProperty=nameWithType> predefinito e metodo <xref:System.String.EndsWith%28System.String%2CSystem.Boolean%2CSystem.Globalization.CultureInfo%29?displayProperty=nameWithType> con un parametro `null`<xref:System.Globalization.CultureInfo> .</span><span class="sxs-lookup"><span data-stu-id="8e445-185">The default <xref:System.String.EndsWith%28System.String%29?displayProperty=nameWithType> method, and the <xref:System.String.EndsWith%28System.String%2CSystem.Boolean%2CSystem.Globalization.CultureInfo%29?displayProperty=nameWithType> method with a `null`<xref:System.Globalization.CultureInfo> parameter.</span></span>
- <span data-ttu-id="8e445-186">Overload<xref:System.String.IndexOf%2A?displayProperty=nameWithType> che accettano <xref:System.String> come parametro di ricerca e che non hanno un parametro <xref:System.StringComparison> .</span><span class="sxs-lookup"><span data-stu-id="8e445-186"><xref:System.String.IndexOf%2A?displayProperty=nameWithType> overloads that accept a <xref:System.String> as a search parameter and that do not have a <xref:System.StringComparison> parameter.</span></span>
- <span data-ttu-id="8e445-187">Overload<xref:System.String.LastIndexOf%2A?displayProperty=nameWithType> che accettano <xref:System.String> come parametro di ricerca e che non hanno un parametro <xref:System.StringComparison> .</span><span class="sxs-lookup"><span data-stu-id="8e445-187"><xref:System.String.LastIndexOf%2A?displayProperty=nameWithType> overloads that accept a <xref:System.String> as a search parameter and that do not have a <xref:System.StringComparison> parameter.</span></span>

<span data-ttu-id="8e445-188">In ogni caso, si consiglia di chiamare un overload con il parametro <xref:System.StringComparison> per rendere chiaro lo scopo della chiamata al metodo.</span><span class="sxs-lookup"><span data-stu-id="8e445-188">In any case, we recommend that you call an overload that has a <xref:System.StringComparison> parameter to make the intent of the method call clear.</span></span>

<span data-ttu-id="8e445-189">È possibile che vengano generati bug complessi e meno complessi quando i dati non linguistici della stringa vengono interpretati linguisticamente oppure quando i dati della stringa di specifiche impostazioni cultura vengono interpretati usando le convenzioni di altre impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-189">Subtle and not so subtle bugs can emerge when non-linguistic string data is interpreted linguistically, or when string data from a particular culture is interpreted using the conventions of another culture.</span></span> <span data-ttu-id="8e445-190">L'esempio canonico è il problema della I turca.</span><span class="sxs-lookup"><span data-stu-id="8e445-190">The canonical example is the Turkish-I problem.</span></span>

<span data-ttu-id="8e445-191">Per quasi tutti gli alfabeti latini, incluso l'inglese (Stati Uniti), il carattere "i" (\u0069) corrisponde alla versione minuscola del carattere "I" (\u0049).</span><span class="sxs-lookup"><span data-stu-id="8e445-191">For nearly all Latin alphabets, including U.S. English, the character "i" (\u0069) is the lowercase version of the character "I" (\u0049).</span></span> <span data-ttu-id="8e445-192">Questa regola di utilizzo di maiuscole e minuscole diventa rapidamente l'impostazione predefinita per chi programma queste impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-192">This casing rule quickly becomes the default for someone programming in such a culture.</span></span> <span data-ttu-id="8e445-193">Tuttavia, l'alfabeto turco ("tr-TR") include una "I con punto", "İ" (\u0130), che è la versione maiuscola di "i".</span><span class="sxs-lookup"><span data-stu-id="8e445-193">However, the Turkish ("tr-TR") alphabet includes an "I with a dot" character "İ" (\u0130), which is the capital version of "i".</span></span> <span data-ttu-id="8e445-194">In turco esiste anche un carattere minuscolo "i senza punto", "ı" (\u0131), la cui versione maiuscola è "I".</span><span class="sxs-lookup"><span data-stu-id="8e445-194">Turkish also includes a lowercase "i without a dot" character, "ı" (\u0131), which capitalizes to "I".</span></span> <span data-ttu-id="8e445-195">Questo comportamento si verifica anche con le impostazioni cultura azerbaigiana ("az").</span><span class="sxs-lookup"><span data-stu-id="8e445-195">This behavior occurs in the Azerbaijani ("az") culture as well.</span></span>

<span data-ttu-id="8e445-196">Pertanto, i presupposti relativi all'uso della maiuscola per "i" o della minuscola per "I" non sono validi in tutte le impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-196">Therefore, assumptions made about capitalizing "i" or lowercasing "I" are not valid among all cultures.</span></span> <span data-ttu-id="8e445-197">Se si usano gli overload predefiniti per le routine di confronto tra stringhe, questi saranno soggetti a variazioni tra le diverse impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-197">If you use the default overloads for string comparison routines, they will be subject to variance between cultures.</span></span> <span data-ttu-id="8e445-198">Se i dati da confrontare sono di tipo non linguistico, l'uso degli overload predefiniti può produrre risultati indesiderati, come illustrato in questo tentativo di eseguire un confronto senza distinzione tra maiuscole e minuscole delle stringhe "file" e "FILE".</span><span class="sxs-lookup"><span data-stu-id="8e445-198">If the data to be compared is non-linguistic, using the default overloads can produce undesirable results, as the following attempt to perform a case-insensitive comparison of the strings "file" and "FILE" illustrates.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#11](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/turkish1.cs#11)]
[!code-vb[Conceptual.Strings.BestPractices#11](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/turkish1.vb#11)]

<span data-ttu-id="8e445-199">Questo confronto può causare problemi significativi se le impostazioni cultura vengono usate inavvertitamente in impostazioni relative alla sicurezza, come nel seguente esempio.</span><span class="sxs-lookup"><span data-stu-id="8e445-199">This comparison could cause significant problems if the culture is inadvertently used in security-sensitive settings, as in the following example.</span></span> <span data-ttu-id="8e445-200">Una chiamata al metodo come `IsFileURI("file:")` restituisce `true` , se le impostazioni cultura correnti sono per la lingua inglese (Stati Uniti) oppure `false` se le impostazioni cultura correnti sono per la lingua turca.</span><span class="sxs-lookup"><span data-stu-id="8e445-200">A method call such as `IsFileURI("file:")` returns `true` if the current culture is U.S. English, but `false` if the current culture is Turkish.</span></span> <span data-ttu-id="8e445-201">Quindi, nei sistemi turchi, qualcuno potrebbe aggirare le misure di sicurezza che bloccano l'accesso agli URI senza distinzione tra maiuscole e minuscole che iniziano con "FILE:".</span><span class="sxs-lookup"><span data-stu-id="8e445-201">Thus, on Turkish systems, someone could circumvent security measures that block access to case-insensitive URIs that begin with "FILE:".</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#12](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/turkish1.cs#12)]
[!code-vb[Conceptual.Strings.BestPractices#12](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/turkish1.vb#12)]

<span data-ttu-id="8e445-202">In questo caso, poiché "file:" deve essere interpretato come un identificatore non linguistico, indipendente dalle impostazioni cultura, il codice deve essere scritto come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="8e445-202">In this case, because "file:" is meant to be interpreted as a non-linguistic, culture-insensitive identifier, the code should instead be written as shown in the following example:</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#13](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/turkish1.cs#13)]
[!code-vb[Conceptual.Strings.BestPractices#13](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/turkish1.vb#13)]

### <a name="ordinal-string-operations"></a><span data-ttu-id="8e445-203">Operazioni di stringa ordinali</span><span class="sxs-lookup"><span data-stu-id="8e445-203">Ordinal string operations</span></span>

<span data-ttu-id="8e445-204">La specifica del valore <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> o <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> in una chiamata al metodo indica un confronto non linguistico in cui le funzionalità dei linguaggi naturali vengono ignorate.</span><span class="sxs-lookup"><span data-stu-id="8e445-204">Specifying the <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> or <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> value in a method call signifies a non-linguistic comparison in which the features of natural languages are ignored.</span></span> <span data-ttu-id="8e445-205">I metodi richiamati con questi valori <xref:System.StringComparison> basano le decisioni relative alle operazioni di stringa su confronti di byte semplici invece che sull'utilizzo di maiuscole e minuscole o di tabelle di equivalenza parametrizzate dalle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-205">Methods that are invoked with these <xref:System.StringComparison> values base string operation decisions on simple byte comparisons instead of casing or equivalence tables that are parameterized by culture.</span></span> <span data-ttu-id="8e445-206">In molti casi, questo approccio risulta più adatto per l'interpretazione desiderata delle stringhe e rende il codice più veloce e affidabile.</span><span class="sxs-lookup"><span data-stu-id="8e445-206">In most cases, this approach best fits the intended interpretation of strings while making code faster and more reliable.</span></span>

<span data-ttu-id="8e445-207">I confronti ordinali sono confronti tra stringhe in cui ogni byte di ogni stringa viene confrontato senza interpretazione linguistica, ad esempio "windows" non corrisponde a "Windows".</span><span class="sxs-lookup"><span data-stu-id="8e445-207">Ordinal comparisons are string comparisons in which each byte of each string is compared without linguistic interpretation; for example, "windows" does not match "Windows".</span></span> <span data-ttu-id="8e445-208">Si tratta essenzialmente di una chiamata alla funzione `strcmp` di C Runtime.</span><span class="sxs-lookup"><span data-stu-id="8e445-208">This is essentially a call to the C runtime `strcmp` function.</span></span> <span data-ttu-id="8e445-209">Usare questo confronto quando il contesto impone l'esatta corrispondenza delle stringhe o richiede un criterio di corrispondenza conservativo.</span><span class="sxs-lookup"><span data-stu-id="8e445-209">Use this comparison when the context dictates that strings should be matched exactly or demands conservative matching policy.</span></span> <span data-ttu-id="8e445-210">Inoltre, il confronto ordinale è l'operazione di confronto più rapida perché non applica regole linguistiche quando determina un risultato.</span><span class="sxs-lookup"><span data-stu-id="8e445-210">Additionally, ordinal comparison is the fastest comparison operation because it applies no linguistic rules when determining a result.</span></span>

<span data-ttu-id="8e445-211">Le stringhe in .NET possono contenere caratteri null incorporati.</span><span class="sxs-lookup"><span data-stu-id="8e445-211">Strings in .NET can contain embedded null characters.</span></span> <span data-ttu-id="8e445-212">Una delle differenze più evidenti tra il confronto ordinale e quello con distinzione delle impostazioni cultura (inclusi i confronti che usano la lingua inglese) riguarda la gestione dei caratteri null incorporati in una stringa.</span><span class="sxs-lookup"><span data-stu-id="8e445-212">One of the clearest differences between ordinal and culture-sensitive comparison (including comparisons that use the invariant culture) concerns the handling of embedded null characters in a string.</span></span> <span data-ttu-id="8e445-213">Questi caratteri vengono ignorati quando si usano i metodi <xref:System.String.Compare%2A?displayProperty=nameWithType> e <xref:System.String.Equals%2A?displayProperty=nameWithType> per eseguire confronti con distinzione delle impostazioni cultura (inclusi i confronti che usano la lingua inglese).</span><span class="sxs-lookup"><span data-stu-id="8e445-213">These characters are ignored when you use the <xref:System.String.Compare%2A?displayProperty=nameWithType> and <xref:System.String.Equals%2A?displayProperty=nameWithType> methods to perform culture-sensitive comparisons (including comparisons that use the invariant culture).</span></span> <span data-ttu-id="8e445-214">Di conseguenza, nei confronti con distinzione delle impostazioni cultura, le stringhe che contengono caratteri null incorporati e quelle che non li contengono possono essere considerate uguali.</span><span class="sxs-lookup"><span data-stu-id="8e445-214">As a result, in culture-sensitive comparisons, strings that contain embedded null characters can be considered equal to strings that do not.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8e445-215">Anche se i metodi di confronto tra stringhe ignorano i caratteri null incorporati, i metodi di ricerca di stringhe come <xref:System.String.Contains%2A?displayProperty=nameWithType>, <xref:System.String.EndsWith%2A?displayProperty=nameWithType>, <xref:System.String.IndexOf%2A?displayProperty=nameWithType>, <xref:System.String.LastIndexOf%2A?displayProperty=nameWithType>e <xref:System.String.StartsWith%2A?displayProperty=nameWithType> li prendono in considerazione.</span><span class="sxs-lookup"><span data-stu-id="8e445-215">Although string comparison methods disregard embedded null characters, string search methods such as <xref:System.String.Contains%2A?displayProperty=nameWithType>, <xref:System.String.EndsWith%2A?displayProperty=nameWithType>, <xref:System.String.IndexOf%2A?displayProperty=nameWithType>, <xref:System.String.LastIndexOf%2A?displayProperty=nameWithType>, and <xref:System.String.StartsWith%2A?displayProperty=nameWithType> do not.</span></span>

<span data-ttu-id="8e445-216">Nell'esempio seguente viene eseguito un confronto con distinzione delle impostazioni cultura della stringa "AA" con una stringa simile che contiene diversi caratteri null incorporati tra "A" e "a" e Mostra in che modo le due stringhe vengono considerate uguali:</span><span class="sxs-lookup"><span data-stu-id="8e445-216">The following example performs a culture-sensitive comparison of the string "Aa" with a similar string that contains several embedded null characters between "A" and "a", and shows how the two strings are considered equal:</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#19](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/embeddednulls1.cs#19)]
 [!code-vb[Conceptual.Strings.BestPractices#19](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/embeddednulls1.vb#19)]

<span data-ttu-id="8e445-217">Tuttavia, le stringhe non sono considerate uguali quando si usa il confronto ordinale, come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="8e445-217">However, the strings are not considered equal when you use ordinal comparison, as the following example shows:</span></span>
  
[!code-csharp[Conceptual.Strings.BestPractices#20](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/embeddednulls2.cs#20)]
[!code-vb[Conceptual.Strings.BestPractices#20](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/embeddednulls2.vb#20)]

<span data-ttu-id="8e445-218">I confronti ordinali senza distinzione tra maiuscole e minuscole rappresentano il secondo approccio più conservativo.</span><span class="sxs-lookup"><span data-stu-id="8e445-218">Case-insensitive ordinal comparisons are the next most conservative approach.</span></span> <span data-ttu-id="8e445-219">Questi confronti ignorano quasi del tutto l'utilizzo di maiuscole e minuscole, ad esempio "windows" corrisponde a "Windows".</span><span class="sxs-lookup"><span data-stu-id="8e445-219">These comparisons ignore most casing; for example, "windows" matches "Windows".</span></span> <span data-ttu-id="8e445-220">Quando si usano i caratteri ASCII, questo criterio è equivalente a <xref:System.StringComparison.Ordinal?displayProperty=nameWithType>, ma ignora il normale utilizzo di maiuscole e minuscole ASCII.</span><span class="sxs-lookup"><span data-stu-id="8e445-220">When dealing with ASCII characters, this policy is equivalent to <xref:System.StringComparison.Ordinal?displayProperty=nameWithType>, except that it ignores the usual ASCII casing.</span></span> <span data-ttu-id="8e445-221">Quindi, qualsiasi carattere in [A, Z] (\u0041-\u005A) corrisponde al carattere corrispondente in [a,z] (\u0061-\007A).</span><span class="sxs-lookup"><span data-stu-id="8e445-221">Therefore, any character in [A, Z] (\u0041-\u005A) matches the corresponding character in [a,z] (\u0061-\007A).</span></span> <span data-ttu-id="8e445-222">L'utilizzo di maiuscole e minuscole al di fuori dell'intervallo ASCII usa le tabelle in lingua inglese.</span><span class="sxs-lookup"><span data-stu-id="8e445-222">Casing outside the ASCII range uses the invariant culture's tables.</span></span> <span data-ttu-id="8e445-223">Pertanto, il confronto seguente:</span><span class="sxs-lookup"><span data-stu-id="8e445-223">Therefore, the following comparison:</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#4](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/comparison2.cs#4)]
[!code-vb[Conceptual.Strings.BestPractices#4](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/comparison2.vb#4)]

<span data-ttu-id="8e445-224">è equivalente (ma più rapido) rispetto al confronto:</span><span class="sxs-lookup"><span data-stu-id="8e445-224">is equivalent to (but faster than) this comparison:</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#5](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/comparison2.cs#5)]
[!code-vb[Conceptual.Strings.BestPractices#5](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/comparison2.vb#5)]

<span data-ttu-id="8e445-225">Questi confronti sono comunque molto rapidi.</span><span class="sxs-lookup"><span data-stu-id="8e445-225">These comparisons are still very fast.</span></span>

> [!NOTE]
> <span data-ttu-id="8e445-226">Il comportamento delle stringhe del file system, delle chiavi e dei valori del Registro di sistema e delle variabili di ambiente viene rappresentato in modo efficace da <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e445-226">The string behavior of the file system, registry keys and values, and environment variables is best represented by <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="8e445-227"><xref:System.StringComparison.Ordinal?displayProperty=nameWithType> e <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> usano direttamente i valori binari e sono i più adatti per la corrispondenza.</span><span class="sxs-lookup"><span data-stu-id="8e445-227">Both <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> and <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> use the binary values directly, and are best suited for matching.</span></span> <span data-ttu-id="8e445-228">Se non si è sicuri delle impostazioni di confronto, usare uno di questi due valori.</span><span class="sxs-lookup"><span data-stu-id="8e445-228">When you are not sure about your comparison settings, use one of these two values.</span></span> <span data-ttu-id="8e445-229">Tuttavia, poiché eseguono un confronto byte per byte, l'ordinamento non viene eseguito linguisticamente (come in un dizionario inglese), ma in modo binario.</span><span class="sxs-lookup"><span data-stu-id="8e445-229">However, because they perform a byte-by-byte comparison, they do not sort by a linguistic sort order (like an English dictionary) but by a binary sort order.</span></span> <span data-ttu-id="8e445-230">Se visualizzati dagli utenti, i risultati possono sembrare strani in molti contesti.</span><span class="sxs-lookup"><span data-stu-id="8e445-230">The results may look odd in most contexts if displayed to users.</span></span>

<span data-ttu-id="8e445-231">La semantica ordinale è l'impostazione predefinita per gli overload <xref:System.String.Equals%2A?displayProperty=nameWithType> che non includono un argomento <xref:System.StringComparison> (incluso l'operatore di uguaglianza).</span><span class="sxs-lookup"><span data-stu-id="8e445-231">Ordinal semantics are the default for <xref:System.String.Equals%2A?displayProperty=nameWithType> overloads that do not include a <xref:System.StringComparison> argument (including the equality operator).</span></span> <span data-ttu-id="8e445-232">In ogni caso, si consiglia di chiamare un overload con un parametro <xref:System.StringComparison> .</span><span class="sxs-lookup"><span data-stu-id="8e445-232">In any case, we recommend that you call an overload that has a <xref:System.StringComparison> parameter.</span></span>

### <a name="string-operations-that-use-the-invariant-culture"></a><span data-ttu-id="8e445-233">operazioni di stringa che usano la lingua inglese</span><span class="sxs-lookup"><span data-stu-id="8e445-233">string operations that use the invariant culture</span></span>

<span data-ttu-id="8e445-234">I confronti con la lingua inglese usano la proprietà <xref:System.Globalization.CultureInfo.CompareInfo%2A> restituita dalla proprietà statica <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="8e445-234">Comparisons with the invariant culture use the <xref:System.Globalization.CultureInfo.CompareInfo%2A> property returned by the static <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="8e445-235">Questo comportamento è uguale in tutti i sistemi. Converte i caratteri al di fuori dell'intervallo in quelli che considera caratteri equivalenti in lingua inglese.</span><span class="sxs-lookup"><span data-stu-id="8e445-235">This behavior is the same on all systems; it translates any characters outside its range into what it believes are equivalent invariant characters.</span></span> <span data-ttu-id="8e445-236">Questo criterio può essere utile per gestire il comportamento di un set di stringhe nelle impostazioni cultura, ma spesso produce risultati imprevisti.</span><span class="sxs-lookup"><span data-stu-id="8e445-236">This policy can be useful for maintaining one set of string behavior across cultures, but it often provides unexpected results.</span></span>

<span data-ttu-id="8e445-237">I confronti senza distinzione tra maiuscole e minuscole con la lingua inglese usano la proprietà statica <xref:System.Globalization.CultureInfo.CompareInfo%2A> restituita dalla proprietà statica <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> anche per le informazioni sul confronto.</span><span class="sxs-lookup"><span data-stu-id="8e445-237">Case-insensitive comparisons with the invariant culture use the static <xref:System.Globalization.CultureInfo.CompareInfo%2A> property returned by the static <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property for comparison information as well.</span></span> <span data-ttu-id="8e445-238">Le differenze tra maiuscole e minuscole in questi caratteri convertiti vengono ignorate.</span><span class="sxs-lookup"><span data-stu-id="8e445-238">Any case differences among these translated characters are ignored.</span></span>

<span data-ttu-id="8e445-239">I confronti che usano <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> e <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> funzionano in modo identico nelle stringhe ASCII.</span><span class="sxs-lookup"><span data-stu-id="8e445-239">Comparisons that use <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> and <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> work identically on ASCII strings.</span></span> <span data-ttu-id="8e445-240">Tuttavia, <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> prende decisioni linguistiche che potrebbero non essere appropriate per le stringhe che devono essere interpretate come set di byte.</span><span class="sxs-lookup"><span data-stu-id="8e445-240">However, <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> makes linguistic decisions that might not be appropriate for strings that have to be interpreted as a set of bytes.</span></span> <span data-ttu-id="8e445-241">L'oggetto `CultureInfo.InvariantCulture.CompareInfo` fa sì che il metodo <xref:System.String.Compare%2A> interpreti alcuni set di caratteri come equivalenti.</span><span class="sxs-lookup"><span data-stu-id="8e445-241">The `CultureInfo.InvariantCulture.CompareInfo` object makes the <xref:System.String.Compare%2A> method interpret certain sets of characters as equivalent.</span></span> <span data-ttu-id="8e445-242">Ad esempio, la seguente equivalenza è valida in lingua inglese:</span><span class="sxs-lookup"><span data-stu-id="8e445-242">For example, the following equivalence is valid under the invariant culture:</span></span>

<span data-ttu-id="8e445-243">InvariantCulture: a + ̊ = å</span><span class="sxs-lookup"><span data-stu-id="8e445-243">InvariantCulture: a + ̊ = å</span></span>

<span data-ttu-id="8e445-244">La LETTERA A MINUSCOLA LATINA "a" (\u0061), quando si trova accanto al carattere CERCHIO IN ALTO "+ " ̊" (\u030a), viene interpretata come LETTERA A MINUSCOLA LATINA CON CERCHIO IN ALTO "å" (\u00e5).</span><span class="sxs-lookup"><span data-stu-id="8e445-244">The LATIN SMALL LETTER A character "a"  (\u0061), when it is next to the COMBINING RING ABOVE character "+ " ̊" (\u030a), is interpreted as the LATIN SMALL LETTER A WITH RING ABOVE character "å" (\u00e5).</span></span> <span data-ttu-id="8e445-245">Come mostrato nell'esempio seguente, questo comportamento è diverso dal confronto ordinale.</span><span class="sxs-lookup"><span data-stu-id="8e445-245">As the following example shows, this behavior differs from ordinal comparison.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#15](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/comparison3.cs#15)]
[!code-vb[Conceptual.Strings.BestPractices#15](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/comparison3.vb#15)]

<span data-ttu-id="8e445-246">Quando si interpretano i nomi di file, i cookie o qualsiasi altro elemento che può contenere un carattere come "å", i confronti ordinali offrono il comportamento più trasparente e appropriato.</span><span class="sxs-lookup"><span data-stu-id="8e445-246">When interpreting file names, cookies, or anything else where a combination such as "å" can appear, ordinal comparisons still offer the most transparent and fitting behavior.</span></span>

<span data-ttu-id="8e445-247">In realtà la lingua inglese ha poche proprietà che la rendono utile per il confronto.</span><span class="sxs-lookup"><span data-stu-id="8e445-247">On balance, the invariant culture has very few properties that make it useful for comparison.</span></span> <span data-ttu-id="8e445-248">Esegue il confronto in un modo linguisticamente rilevante, che non assicura un'equivalenza simbolica completa, ma non rappresenta la scelta ottimale per la visualizzazione nelle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-248">It does comparison in a linguistically relevant manner, which prevents it from guaranteeing full symbolic equivalence, but it is not the choice for display in any culture.</span></span> <span data-ttu-id="8e445-249">Uno dei pochi motivi per usare <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> per il confronto riguarda la possibilità di conservare i dati ordinati per visualizzarli in modo identico nelle varie impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-249">One of the few reasons to use <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType> for comparison is to persist ordered data for a cross-culturally identical display.</span></span> <span data-ttu-id="8e445-250">Ad esempio, se un file di dati di grandi dimensioni che contiene un elenco di identificatori ordinati per la visualizzazione viene associato a un'applicazione, per aggiungere elementi all'elenco è necessario l'inserimento con un ordinamento in lingua inglese.</span><span class="sxs-lookup"><span data-stu-id="8e445-250">For example, if a large data file that contains a list of sorted identifiers for display accompanies an application, adding to this list would require an insertion with invariant-style sorting.</span></span>

## <a name="choosing-a-stringcomparison-member-for-your-method-call"></a><span data-ttu-id="8e445-251">Scelta di un membro StringComparison per la chiamata al metodo</span><span class="sxs-lookup"><span data-stu-id="8e445-251">Choosing a StringComparison member for your method call</span></span>

<span data-ttu-id="8e445-252">La tabella seguente illustra il mapping tra il contesto di stringa semantico e un <xref:System.StringComparison> membro di enumerazione:</span><span class="sxs-lookup"><span data-stu-id="8e445-252">The following table outlines the mapping from semantic string context to a <xref:System.StringComparison> enumeration member:</span></span>

|<span data-ttu-id="8e445-253">Data</span><span class="sxs-lookup"><span data-stu-id="8e445-253">Data</span></span>|<span data-ttu-id="8e445-254">Comportamento</span><span class="sxs-lookup"><span data-stu-id="8e445-254">Behavior</span></span>|<span data-ttu-id="8e445-255">System.StringComparison corrispondente</span><span class="sxs-lookup"><span data-stu-id="8e445-255">Corresponding System.StringComparison</span></span><br /><br /> <span data-ttu-id="8e445-256">Valore</span><span class="sxs-lookup"><span data-stu-id="8e445-256">value</span></span>|
|----------|--------------|-----------------------------------------------------|
|<span data-ttu-id="8e445-257">Identificatori interni con distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="8e445-257">Case-sensitive internal identifiers.</span></span><br /><br /> <span data-ttu-id="8e445-258">Identificatori con distinzione tra maiuscole e minuscole in standard come XML e HTTP.</span><span class="sxs-lookup"><span data-stu-id="8e445-258">Case-sensitive identifiers in standards such as XML and HTTP.</span></span><br /><br /> <span data-ttu-id="8e445-259">Impostazioni relative alla sicurezza con distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="8e445-259">Case-sensitive security-related settings.</span></span>|<span data-ttu-id="8e445-260">Identificatore non linguistico, con una corrispondenza esatta dei byte.</span><span class="sxs-lookup"><span data-stu-id="8e445-260">A non-linguistic identifier, where bytes match exactly.</span></span>|<xref:System.StringComparison.Ordinal>|
|<span data-ttu-id="8e445-261">Identificatori interni senza distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="8e445-261">Case-insensitive internal identifiers.</span></span><br /><br /> <span data-ttu-id="8e445-262">Identificatori senza distinzione tra maiuscole e minuscole in standard come XML e HTTP.</span><span class="sxs-lookup"><span data-stu-id="8e445-262">Case-insensitive identifiers in standards such as XML and HTTP.</span></span><br /><br /> <span data-ttu-id="8e445-263">Percorsi di file.</span><span class="sxs-lookup"><span data-stu-id="8e445-263">File paths.</span></span><br /><br /> <span data-ttu-id="8e445-264">Chiavi e valori del Registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="8e445-264">Registry keys and values.</span></span><br /><br /> <span data-ttu-id="8e445-265">Variabili di ambiente.</span><span class="sxs-lookup"><span data-stu-id="8e445-265">Environment variables.</span></span><br /><br /> <span data-ttu-id="8e445-266">Identificatori di risorse (ad esempio, nomi di handle).</span><span class="sxs-lookup"><span data-stu-id="8e445-266">Resource identifiers (for example, handle names).</span></span><br /><br /> <span data-ttu-id="8e445-267">Impostazioni relative alla sicurezza senza distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="8e445-267">Case-insensitive security-related settings.</span></span>|<span data-ttu-id="8e445-268">Identificatore non linguistico, in cui la distinzione tra maiuscole e minuscole non è rilevante. In particolare, dati archiviati nella maggior parte dei servizi di sistema Windows.</span><span class="sxs-lookup"><span data-stu-id="8e445-268">A non-linguistic identifier, where case is irrelevant; especially data stored in most Windows system services.</span></span>|<xref:System.StringComparison.OrdinalIgnoreCase>|
|<span data-ttu-id="8e445-269">Alcuni dati persistenti e linguisticamente rilevanti.</span><span class="sxs-lookup"><span data-stu-id="8e445-269">Some persisted, linguistically relevant data.</span></span><br /><br /> <span data-ttu-id="8e445-270">Visualizzazione di dati linguistici che richiedono un ordinamento fisso.</span><span class="sxs-lookup"><span data-stu-id="8e445-270">Display of linguistic data that requires a fixed sort order.</span></span>|<span data-ttu-id="8e445-271">Dati indipendenti dalle impostazioni cultura, ma ancora linguisticamente rilevanti.</span><span class="sxs-lookup"><span data-stu-id="8e445-271">Culturally agnostic data that still is linguistically relevant.</span></span>|<xref:System.StringComparison.InvariantCulture><br /><br /> <span data-ttu-id="8e445-272">-oppure-</span><span class="sxs-lookup"><span data-stu-id="8e445-272">-or-</span></span><br /><br /> <xref:System.StringComparison.InvariantCultureIgnoreCase>|
|<span data-ttu-id="8e445-273">Dati visualizzati dall'utente.</span><span class="sxs-lookup"><span data-stu-id="8e445-273">Data displayed to the user.</span></span><br /><br /> <span data-ttu-id="8e445-274">La maggior parte dell'input utente.</span><span class="sxs-lookup"><span data-stu-id="8e445-274">Most user input.</span></span>|<span data-ttu-id="8e445-275">Dati che richiedono personalizzazioni linguistiche locali.</span><span class="sxs-lookup"><span data-stu-id="8e445-275">Data that requires local linguistic customs.</span></span>|<xref:System.StringComparison.CurrentCulture><br /><br /> <span data-ttu-id="8e445-276">-oppure-</span><span class="sxs-lookup"><span data-stu-id="8e445-276">-or-</span></span><br /><br /> <xref:System.StringComparison.CurrentCultureIgnoreCase>|

## <a name="common-string-comparison-methods-in-net"></a><span data-ttu-id="8e445-277">Metodi comuni per il confronto tra stringhe in .NET</span><span class="sxs-lookup"><span data-stu-id="8e445-277">Common string comparison methods in .NET</span></span>

<span data-ttu-id="8e445-278">Le sezioni seguenti descrivono i metodi più comuni per il confronto tra stringhe.</span><span class="sxs-lookup"><span data-stu-id="8e445-278">The following sections describe the methods that are most commonly used for string comparison.</span></span>

### <a name="stringcompare"></a><span data-ttu-id="8e445-279">String.Compare</span><span class="sxs-lookup"><span data-stu-id="8e445-279">String.Compare</span></span>

<span data-ttu-id="8e445-280">Interpretazione predefinita: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e445-280">Default interpretation: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="8e445-281">Poiché si tratta dell'operazione più importante per l'interpretazione della stringa, tutte le istanze di queste chiamate al metodo devono essere esaminate per determinare se le stringhe devono essere interpretate in base alle impostazioni cultura correnti o devono essere dissociate dalle impostazioni cultura (simbolicamente).</span><span class="sxs-lookup"><span data-stu-id="8e445-281">As the operation most central to string interpretation, all instances of these method calls should be examined to determine whether strings should be interpreted according to the current culture, or dissociated from the culture (symbolically).</span></span> <span data-ttu-id="8e445-282">In genere, si tratta del secondo caso e deve pertanto essere utilizzato un confronto <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="8e445-282">Typically, it is the latter, and a <xref:System.StringComparison.Ordinal?displayProperty=nameWithType> comparison should be used instead.</span></span>

<span data-ttu-id="8e445-283">La classe <xref:System.Globalization.CompareInfo?displayProperty=nameWithType> , restituita dalla proprietà <xref:System.Globalization.CultureInfo.CompareInfo%2A?displayProperty=nameWithType> , include anche un metodo <xref:System.Globalization.CompareInfo.Compare%2A> che fornisce numerose opzioni di corrispondenza (ordinale, con esclusione degli spazi vuoti, con esclusione del tipo Kana e così via) mediante l'enumerazione flag <xref:System.Globalization.CompareOptions> .</span><span class="sxs-lookup"><span data-stu-id="8e445-283">The <xref:System.Globalization.CompareInfo?displayProperty=nameWithType> class, which is returned by the <xref:System.Globalization.CultureInfo.CompareInfo%2A?displayProperty=nameWithType> property, also includes a <xref:System.Globalization.CompareInfo.Compare%2A> method that provides a large number of matching options (ordinal, ignoring white space, ignoring kana type, and so on) by means of the <xref:System.Globalization.CompareOptions> flag enumeration.</span></span>

### <a name="stringcompareto"></a><span data-ttu-id="8e445-284">String.CompareTo</span><span class="sxs-lookup"><span data-stu-id="8e445-284">String.CompareTo</span></span>

<span data-ttu-id="8e445-285">Interpretazione predefinita: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e445-285">Default interpretation: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="8e445-286">Questo metodo attualmente non offre un overload che specifica un tipo <xref:System.StringComparison> .</span><span class="sxs-lookup"><span data-stu-id="8e445-286">This method does not currently offer an overload that specifies a <xref:System.StringComparison> type.</span></span> <span data-ttu-id="8e445-287">In genere è possibile convertire questo metodo nel formato <xref:System.String.Compare%28System.String%2CSystem.String%2CSystem.StringComparison%29?displayProperty=nameWithType> consigliato.</span><span class="sxs-lookup"><span data-stu-id="8e445-287">It is usually possible to convert this method to the recommended <xref:System.String.Compare%28System.String%2CSystem.String%2CSystem.StringComparison%29?displayProperty=nameWithType> form.</span></span>

<span data-ttu-id="8e445-288">I tipi che implementano le interfacce <xref:System.IComparable> e <xref:System.IComparable%601> implementano questo metodo.</span><span class="sxs-lookup"><span data-stu-id="8e445-288">Types that implement the <xref:System.IComparable> and <xref:System.IComparable%601> interfaces implement this method.</span></span> <span data-ttu-id="8e445-289">Poiché non offre l'opzione di un parametro <xref:System.StringComparison> , l'implementazione dei tipi spesso lascia specificare all'utente <xref:System.StringComparer> nel proprio costruttore.</span><span class="sxs-lookup"><span data-stu-id="8e445-289">Because it does not offer the option of a <xref:System.StringComparison> parameter, implementing types often let the user specify a <xref:System.StringComparer> in their constructor.</span></span> <span data-ttu-id="8e445-290">L'esempio seguente definisce una classe `FileName` il cui costruttore include un parametro <xref:System.StringComparer> .</span><span class="sxs-lookup"><span data-stu-id="8e445-290">The following example defines a `FileName` class whose class constructor includes a <xref:System.StringComparer> parameter.</span></span> <span data-ttu-id="8e445-291">L'oggetto <xref:System.StringComparer> viene quindi usato nel metodo `FileName.CompareTo` .</span><span class="sxs-lookup"><span data-stu-id="8e445-291">This <xref:System.StringComparer> object is then used in the `FileName.CompareTo` method.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#6](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/api1.cs#6)]
[!code-vb[Conceptual.Strings.BestPractices#6](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/api1.vb#6)]

### <a name="stringequals"></a><span data-ttu-id="8e445-292">String.Equals</span><span class="sxs-lookup"><span data-stu-id="8e445-292">String.Equals</span></span>

<span data-ttu-id="8e445-293">Interpretazione predefinita: <xref:System.StringComparison.Ordinal?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e445-293">Default interpretation: <xref:System.StringComparison.Ordinal?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="8e445-294">La classe <xref:System.String> consente di eseguire un test di uguaglianza chiamando gli overload del metodo <xref:System.String.Equals%2A> dell'istanza o statici oppure usando l'operatore di uguaglianza statico.</span><span class="sxs-lookup"><span data-stu-id="8e445-294">The <xref:System.String> class lets you test for equality by calling either the static or instance <xref:System.String.Equals%2A> method overloads, or by using the static equality operator.</span></span> <span data-ttu-id="8e445-295">Gli overload e l'operatore usano il confronto ordinale per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="8e445-295">The overloads and operator use ordinal comparison by default.</span></span> <span data-ttu-id="8e445-296">Tuttavia, si consiglia di chiamare comunque un overload che specifichi esplicitamente il tipo <xref:System.StringComparison> anche se si vuole eseguire un confronto ordinale; questo semplifica la ricerca di codice per una determinata interpretazione della stringa.</span><span class="sxs-lookup"><span data-stu-id="8e445-296">However, we still recommend that you call an overload that explicitly specifies the <xref:System.StringComparison> type even if you want to perform an ordinal comparison; this makes it easier to search code for a certain string interpretation.</span></span>

### <a name="stringtoupper-and-stringtolower"></a><span data-ttu-id="8e445-297">String.ToUpper e String.ToLower</span><span class="sxs-lookup"><span data-stu-id="8e445-297">String.ToUpper and String.ToLower</span></span>

<span data-ttu-id="8e445-298">Interpretazione predefinita: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e445-298">Default interpretation: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="8e445-299">Prestare attenzione quando si usano questi metodi perché l'utilizzo forzato di maiuscole o minuscole in una stringa è una procedura usata spesso come normalizzazione minore per confrontare stringhe indipendentemente dalla distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="8e445-299">You should be careful when you use these methods, because forcing a string to a uppercase or lowercase is often used as a small normalization for comparing strings regardless of case.</span></span> <span data-ttu-id="8e445-300">In questo caso, valutare l'uso di un confronto senza distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="8e445-300">If so, consider using a case-insensitive comparison.</span></span>

<span data-ttu-id="8e445-301">Sono disponibili anche i metodi <xref:System.String.ToUpperInvariant%2A?displayProperty=nameWithType> e <xref:System.String.ToLowerInvariant%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="8e445-301">The <xref:System.String.ToUpperInvariant%2A?displayProperty=nameWithType> and <xref:System.String.ToLowerInvariant%2A?displayProperty=nameWithType> methods are also available.</span></span> <span data-ttu-id="8e445-302"><xref:System.String.ToUpperInvariant%2A> è la modalità standard di normalizzazione dei caratteri maiuscoli e minuscoli.</span><span class="sxs-lookup"><span data-stu-id="8e445-302"><xref:System.String.ToUpperInvariant%2A> is the standard way to normalize case.</span></span> <span data-ttu-id="8e445-303">A livello di comportamento, i confronti eseguiti con <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> corrispondono alla composizione di due chiamate: la chiamata a <xref:System.String.ToUpperInvariant%2A> in entrambi gli argomenti di stringa e l'esecuzione di un confronto con <xref:System.StringComparison.Ordinal?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e445-303">Comparisons made using <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType> are behaviorally the composition of two calls: calling <xref:System.String.ToUpperInvariant%2A> on both string arguments, and doing a comparison using <xref:System.StringComparison.Ordinal?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="8e445-304">Sono disponibili anche overload per la conversione in maiuscole e minuscole in determinate impostazioni cultura, passando un oggetto <xref:System.Globalization.CultureInfo> che rappresenta le specifiche impostazioni cultura al metodo.</span><span class="sxs-lookup"><span data-stu-id="8e445-304">Overloads are also available for converting to uppercase and lowercase in a specific culture, by passing a <xref:System.Globalization.CultureInfo> object that represents that culture to the method.</span></span>

### <a name="chartoupper-and-chartolower"></a><span data-ttu-id="8e445-305">Char.ToUpper e Char.ToLower</span><span class="sxs-lookup"><span data-stu-id="8e445-305">Char.ToUpper and Char.ToLower</span></span>

<span data-ttu-id="8e445-306">Interpretazione predefinita: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e445-306">Default interpretation: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="8e445-307">Questi metodi funzionano in modo simile ai metodi <xref:System.String.ToUpper%2A?displayProperty=nameWithType> e <xref:System.String.ToLower%2A?displayProperty=nameWithType> descritti nella sezione precedente.</span><span class="sxs-lookup"><span data-stu-id="8e445-307">These methods work similarly to the <xref:System.String.ToUpper%2A?displayProperty=nameWithType> and <xref:System.String.ToLower%2A?displayProperty=nameWithType> methods described in the previous section.</span></span>

### <a name="stringstartswith-and-stringendswith"></a><span data-ttu-id="8e445-308">String.StartsWith e String.EndsWith</span><span class="sxs-lookup"><span data-stu-id="8e445-308">String.StartsWith and String.EndsWith</span></span>

<span data-ttu-id="8e445-309">Interpretazione predefinita: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e445-309">Default interpretation: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="8e445-310">Per impostazione predefinita, entrambi i metodi eseguono un confronto con distinzione delle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-310">By default, both of these methods perform a culture-sensitive comparison.</span></span>

### <a name="stringindexof-and-stringlastindexof"></a><span data-ttu-id="8e445-311">String.IndexOf e String.LastIndexOf</span><span class="sxs-lookup"><span data-stu-id="8e445-311">String.IndexOf and String.LastIndexOf</span></span>

<span data-ttu-id="8e445-312">Interpretazione predefinita: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e445-312">Default interpretation: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="8e445-313">La modalità di esecuzione dei confronti con gli overload predefiniti di questi metodi manca di coerenza.</span><span class="sxs-lookup"><span data-stu-id="8e445-313">There is a lack of consistency in how the default overloads of these methods perform comparisons.</span></span> <span data-ttu-id="8e445-314">Tutti i metodi <xref:System.String.IndexOf%2A?displayProperty=nameWithType> e <xref:System.String.LastIndexOf%2A?displayProperty=nameWithType> che includono un parametro <xref:System.Char> eseguono un confronto ordinale, ma i metodi predefiniti <xref:System.String.IndexOf%2A?displayProperty=nameWithType> e <xref:System.String.LastIndexOf%2A?displayProperty=nameWithType> che includono un parametro <xref:System.String> eseguono un confronto con distinzione delle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-314">All <xref:System.String.IndexOf%2A?displayProperty=nameWithType> and <xref:System.String.LastIndexOf%2A?displayProperty=nameWithType> methods that include a <xref:System.Char> parameter perform an ordinal comparison, but the default <xref:System.String.IndexOf%2A?displayProperty=nameWithType> and <xref:System.String.LastIndexOf%2A?displayProperty=nameWithType> methods that include a <xref:System.String> parameter perform a culture-sensitive comparison.</span></span>

<span data-ttu-id="8e445-315">Se si chiama il metodo <xref:System.String.IndexOf%28System.String%29?displayProperty=nameWithType> o <xref:System.String.LastIndexOf%28System.String%29?displayProperty=nameWithType> e si passa una stringa da individuare nell'istanza corrente, si consiglia di chiamare un overload che specifichi esplicitamente il tipo <xref:System.StringComparison> .</span><span class="sxs-lookup"><span data-stu-id="8e445-315">If you call the <xref:System.String.IndexOf%28System.String%29?displayProperty=nameWithType> or <xref:System.String.LastIndexOf%28System.String%29?displayProperty=nameWithType> method and pass it a string to locate in the current instance, we recommend that you call an overload that explicitly specifies the <xref:System.StringComparison> type.</span></span> <span data-ttu-id="8e445-316">Gli overload che includono un argomento <xref:System.Char> non consentono di specificare un tipo <xref:System.StringComparison> .</span><span class="sxs-lookup"><span data-stu-id="8e445-316">The overloads that include a <xref:System.Char> argument do not allow you to specify a <xref:System.StringComparison> type.</span></span>

## <a name="methods-that-perform-string-comparison-indirectly"></a><span data-ttu-id="8e445-317">Metodi che eseguono indirettamente il confronto tra stringhe</span><span class="sxs-lookup"><span data-stu-id="8e445-317">Methods that perform string comparison indirectly</span></span>

<span data-ttu-id="8e445-318">Alcuni metodi non di tipo stringa in cui il confronto tra stringhe rappresenta l'operazione più importante usano il tipo <xref:System.StringComparer> .</span><span class="sxs-lookup"><span data-stu-id="8e445-318">Some non-string methods that have string comparison as a central operation use the <xref:System.StringComparer> type.</span></span> <span data-ttu-id="8e445-319">La classe <xref:System.StringComparer> include sei proprietà statiche che restituiscono istanze <xref:System.StringComparer> i cui metodi <xref:System.StringComparer.Compare%2A?displayProperty=nameWithType> eseguono i tipi di confronto tra stringhe seguenti:</span><span class="sxs-lookup"><span data-stu-id="8e445-319">The <xref:System.StringComparer> class includes six static properties that return <xref:System.StringComparer> instances whose <xref:System.StringComparer.Compare%2A?displayProperty=nameWithType> methods perform the following types of string comparisons:</span></span>

- <span data-ttu-id="8e445-320">Confronti tra stringhe con distinzione delle impostazioni cultura usando le impostazioni cultura correnti.</span><span class="sxs-lookup"><span data-stu-id="8e445-320">Culture-sensitive string comparisons using the current culture.</span></span> <span data-ttu-id="8e445-321">L'oggetto <xref:System.StringComparer> viene restituito dalla proprietà <xref:System.StringComparer.CurrentCulture%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="8e445-321">This <xref:System.StringComparer> object is returned by the <xref:System.StringComparer.CurrentCulture%2A?displayProperty=nameWithType> property.</span></span>
- <span data-ttu-id="8e445-322">Confronti senza distinzione tra maiuscole e minuscole usando le impostazioni cultura correnti.</span><span class="sxs-lookup"><span data-stu-id="8e445-322">Case-insensitive comparisons using the current culture.</span></span> <span data-ttu-id="8e445-323">L'oggetto <xref:System.StringComparer> viene restituito dalla proprietà <xref:System.StringComparer.CurrentCultureIgnoreCase%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="8e445-323">This <xref:System.StringComparer> object is returned by the <xref:System.StringComparer.CurrentCultureIgnoreCase%2A?displayProperty=nameWithType> property.</span></span>
- <span data-ttu-id="8e445-324">Confronti tra stringhe senza distinzione delle impostazioni cultura usando le regole di confronto per parola della lingua inglese.</span><span class="sxs-lookup"><span data-stu-id="8e445-324">Culture-insensitive comparisons using the word comparison rules of the invariant culture.</span></span> <span data-ttu-id="8e445-325">L'oggetto <xref:System.StringComparer> viene restituito dalla proprietà <xref:System.StringComparer.InvariantCulture%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="8e445-325">This <xref:System.StringComparer> object is returned by the <xref:System.StringComparer.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span>
- <span data-ttu-id="8e445-326">Confronti senza distinzione tra maiuscole e minuscole e senza distinzione delle impostazioni cultura usando le regole di confronto per parola della lingua inglese.</span><span class="sxs-lookup"><span data-stu-id="8e445-326">Case-insensitive and culture-insensitive comparisons using the word comparison rules of the invariant culture.</span></span> <span data-ttu-id="8e445-327">L'oggetto <xref:System.StringComparer> viene restituito dalla proprietà <xref:System.StringComparer.InvariantCultureIgnoreCase%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="8e445-327">This <xref:System.StringComparer> object is returned by the <xref:System.StringComparer.InvariantCultureIgnoreCase%2A?displayProperty=nameWithType> property.</span></span>
- <span data-ttu-id="8e445-328">Confronto ordinale.</span><span class="sxs-lookup"><span data-stu-id="8e445-328">Ordinal comparison.</span></span> <span data-ttu-id="8e445-329">L'oggetto <xref:System.StringComparer> viene restituito dalla proprietà <xref:System.StringComparer.Ordinal%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="8e445-329">This <xref:System.StringComparer> object is returned by the <xref:System.StringComparer.Ordinal%2A?displayProperty=nameWithType> property.</span></span>
- <span data-ttu-id="8e445-330">Confronto ordinale senza distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="8e445-330">Case-insensitive ordinal comparison.</span></span> <span data-ttu-id="8e445-331">L'oggetto <xref:System.StringComparer> viene restituito dalla proprietà <xref:System.StringComparer.OrdinalIgnoreCase%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="8e445-331">This <xref:System.StringComparer> object is returned by the <xref:System.StringComparer.OrdinalIgnoreCase%2A?displayProperty=nameWithType> property.</span></span>

### <a name="arraysort-and-arraybinarysearch"></a><span data-ttu-id="8e445-332">Array.Sort e Array.BinarySearch</span><span class="sxs-lookup"><span data-stu-id="8e445-332">Array.Sort and Array.BinarySearch</span></span>

<span data-ttu-id="8e445-333">Interpretazione predefinita: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e445-333">Default interpretation: <xref:System.StringComparison.CurrentCulture?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="8e445-334">Quando si archiviano dati in una raccolta o si leggono dati persistenti da un file o da un database nella raccolta, la modifica delle impostazioni cultura correnti può invalidare le invarianti nella raccolta.</span><span class="sxs-lookup"><span data-stu-id="8e445-334">When you store any data in a collection, or read persisted data from a file or database into a collection, switching the current culture can invalidate the invariants in the collection.</span></span> <span data-ttu-id="8e445-335">Il metodo <xref:System.Array.BinarySearch%2A?displayProperty=nameWithType> presuppone che gli elementi nella matrice da cercare siano già ordinati.</span><span class="sxs-lookup"><span data-stu-id="8e445-335">The <xref:System.Array.BinarySearch%2A?displayProperty=nameWithType> method assumes that the elements in the array to be searched are already sorted.</span></span> <span data-ttu-id="8e445-336">Per ordinare qualsiasi elemento di tipo stringa nella matrice, il metodo <xref:System.Array.Sort%2A?displayProperty=nameWithType> chiama il metodo <xref:System.String.Compare%2A?displayProperty=nameWithType> per ordinare i singoli elementi.</span><span class="sxs-lookup"><span data-stu-id="8e445-336">To sort any string element in the array, the <xref:System.Array.Sort%2A?displayProperty=nameWithType> method calls the <xref:System.String.Compare%2A?displayProperty=nameWithType> method to order individual elements.</span></span> <span data-ttu-id="8e445-337">L'uso di un operatore di confronto con distinzione delle impostazioni cultura può essere pericoloso se le impostazioni cultura vengono modificate tra l'ordinamento della matrice e la ricerca dei contenuti.</span><span class="sxs-lookup"><span data-stu-id="8e445-337">Using a culture-sensitive comparer can be dangerous if the culture changes between the time that the array is sorted and its contents are searched.</span></span> <span data-ttu-id="8e445-338">Nel codice seguente, ad esempio, le operazioni di archiviazione e recupero vengono eseguite sull'operatore di confronto fornito in modo implicito dalla proprietà `Thread.CurrentThread.CurrentCulture` .</span><span class="sxs-lookup"><span data-stu-id="8e445-338">For example, in the following code, storage and retrieval operate on the comparer that is provided implicitly by the `Thread.CurrentThread.CurrentCulture` property.</span></span> <span data-ttu-id="8e445-339">Se le impostazioni cultura possono cambiare tra le chiamate a `StoreNames` e `DoesNameExist`e, in particolare, se il contenuto della matrice viene conservato tra le due chiamate al metodo, è possibile che la ricerca binaria non riesca.</span><span class="sxs-lookup"><span data-stu-id="8e445-339">If the culture can change between the calls to `StoreNames` and `DoesNameExist`, and especially if the array contents are persisted somewhere between the two method calls, the binary search may fail.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#7](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/indirect1.cs#7)]
 [!code-vb[Conceptual.Strings.BestPractices#7](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/indirect1.vb#7)]

<span data-ttu-id="8e445-340">L'esempio seguente mostra una variazione consigliata che usa lo stesso metodo di confronto ordinale (senza distinzione delle impostazioni cultura) sia per l'ordinamento che per la ricerca nella matrice.</span><span class="sxs-lookup"><span data-stu-id="8e445-340">A recommended variation appears in the following example, which uses the same ordinal (culture-insensitive) comparison method both to sort and to search the array.</span></span> <span data-ttu-id="8e445-341">Il codice modificato si riflette nelle righe identificate con `Line A` e `Line B` nei due esempi.</span><span class="sxs-lookup"><span data-stu-id="8e445-341">The change code is reflected in the lines labeled `Line A` and `Line B` in the two examples.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#8](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/indirect1.cs#8)]
[!code-vb[Conceptual.Strings.BestPractices#8](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/indirect1.vb#8)]

<span data-ttu-id="8e445-342">Se i dati vengono conservati e spostati nelle impostazioni cultura e l'ordinamento viene usato per presentare i dati all'utente, potrebbe esser opportuno usare <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType>, che garantisce un output utente migliore dal punto di vista linguistico ma non viene interessato dalle modifiche nelle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-342">If this data is persisted and moved across cultures, and sorting is used to present this data to the user, you might consider using <xref:System.StringComparison.InvariantCulture?displayProperty=nameWithType>, which operates linguistically for better user output but is unaffected by changes in culture.</span></span> <span data-ttu-id="8e445-343">L'esempio seguente modifica i due esempi precedenti per usare la lingua inglese per l'ordinamento e la ricerca della matrice.</span><span class="sxs-lookup"><span data-stu-id="8e445-343">The following example modifies the two previous examples to use the invariant culture for sorting and searching the array.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#9](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/indirect1.cs#9)]
[!code-vb[Conceptual.Strings.BestPractices#9](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/indirect1.vb#9)]

### <a name="collections-example-hashtable-constructor"></a><span data-ttu-id="8e445-344">Esempio di raccolte: Costruttore Hashtable</span><span class="sxs-lookup"><span data-stu-id="8e445-344">Collections example: Hashtable constructor</span></span>

<span data-ttu-id="8e445-345">L'esecuzione dell'hashing nelle stringhe fornisce un secondo esempio di operazione interessata dal modo in cui vengono confrontate le stringhe.</span><span class="sxs-lookup"><span data-stu-id="8e445-345">Hashing strings provides a second example of an operation that is affected by the way in which strings are compared.</span></span>

<span data-ttu-id="8e445-346">L'esempio seguente crea un'istanza di un oggetto <xref:System.Collections.Hashtable> passando l'oggetto <xref:System.StringComparer> restituito dalla proprietà <xref:System.StringComparer.OrdinalIgnoreCase%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="8e445-346">The following example instantiates a <xref:System.Collections.Hashtable> object by passing it the <xref:System.StringComparer> object that is returned by the <xref:System.StringComparer.OrdinalIgnoreCase%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="8e445-347">Poiché una classe <xref:System.StringComparer> derivata da <xref:System.StringComparer> implementa l'interfaccia <xref:System.Collections.IEqualityComparer> , il metodo <xref:System.Collections.IEqualityComparer.GetHashCode%2A> viene usato per calcolare il codice hash delle stringhe nella tabella hash.</span><span class="sxs-lookup"><span data-stu-id="8e445-347">Because a class <xref:System.StringComparer> that is derived from <xref:System.StringComparer> implements the <xref:System.Collections.IEqualityComparer> interface, its <xref:System.Collections.IEqualityComparer.GetHashCode%2A> method is used to compute the hash code of strings in the hash table.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#10](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/indirect2.cs#10)]
[!code-vb[Conceptual.Strings.BestPractices#10](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/indirect2.vb#10)]

## <a name="displaying-and-persisting-formatted-data"></a><span data-ttu-id="8e445-348">Visualizzazione e conservazione dei dati formattati</span><span class="sxs-lookup"><span data-stu-id="8e445-348">Displaying and persisting formatted data</span></span>

<span data-ttu-id="8e445-349">Quando si consente agli utenti di visualizzare dati non di tipo stringa, come numeri e date e ore, formattarli usando le impostazioni cultura dell'utente.</span><span class="sxs-lookup"><span data-stu-id="8e445-349">When you display non-string data such as numbers and dates and times to users, format them by using the user's cultural settings.</span></span> <span data-ttu-id="8e445-350">Per impostazione predefinita, nei casi seguenti si usano impostazioni cultura del thread corrente nelle operazioni di formattazione:</span><span class="sxs-lookup"><span data-stu-id="8e445-350">By default, the following all use the current thread culture in formatting operations:</span></span>

- <span data-ttu-id="8e445-351">Stringhe interpolate supportate da compilatori [C#](../../csharp/language-reference/tokens/interpolated.md) e [Visual Basic](../../visual-basic/programming-guide/language-features/strings/interpolated-strings.md).</span><span class="sxs-lookup"><span data-stu-id="8e445-351">Interpolated strings supported by the [C#](../../csharp/language-reference/tokens/interpolated.md) and [Visual Basic](../../visual-basic/programming-guide/language-features/strings/interpolated-strings.md) compilers.</span></span>
- <span data-ttu-id="8e445-352">Operazioni di concatenazione di stringhe che usano operatori di concatenazione [ C# ](../../csharp/language-reference/operators/addition-operator.md#string-concatenation) o [Visual Basic](../../visual-basic/programming-guide/language-features/operators-and-expressions/concatenation-operators.md ) o che chiamano il metodo <xref:System.String.Concat%2A?displayProperty=nameWithType> direttamente.</span><span class="sxs-lookup"><span data-stu-id="8e445-352">String concatenation operations that use the [C#](../../csharp/language-reference/operators/addition-operator.md#string-concatenation) or [Visual Basic](../../visual-basic/programming-guide/language-features/operators-and-expressions/concatenation-operators.md ) concatenation operators or that call the <xref:System.String.Concat%2A?displayProperty=nameWithType> method directly.</span></span>
- <span data-ttu-id="8e445-353">Metodo <xref:System.String.Format%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="8e445-353">The <xref:System.String.Format%2A?displayProperty=nameWithType> method.</span></span>
- <span data-ttu-id="8e445-354">Metodi `ToString` dei tipi numerici e dei tipi data e ora.</span><span class="sxs-lookup"><span data-stu-id="8e445-354">The `ToString` methods of the numeric types and the date and time types.</span></span>

<span data-ttu-id="8e445-355">Per specificare in modo esplicito che una stringa deve essere formattata usando le convenzioni delle impostazioni cultura definite o le [impostazioni cultura inglese non dipendenti da paese/area geografica](xref:System.Globalization.CultureInfo.InvariantCulture), è possibile eseguire le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="8e445-355">To explicitly specify that a string should be formatted by using the conventions of a designated culture or the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture), you can do the following:</span></span>

- <span data-ttu-id="8e445-356">Quando si usano i metodi <xref:System.String.Format%2A?displayProperty=nameWithType> e `ToString`, chiamare un overload con un parametro `provider`, ad esempio <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType> o <xref:System.DateTime.ToString%28System.IFormatProvider%29?displayProperty=nameWithType> e passarlo alla proprietà <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType>, un'istanza di <xref:System.Globalization.CultureInfo> che rappresenta il valore desiderato delle impostazioni cultura, o proprietà <xref:System.Globalization.CultureInfo.InvariantCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="8e445-356">When using the <xref:System.String.Format%2A?displayProperty=nameWithType> and `ToString` methods, call an overload that has a `provider` parameter, such as <xref:System.String.Format%28System.IFormatProvider%2CSystem.String%2CSystem.Object%5B%5D%29?displayProperty=nameWithType> or <xref:System.DateTime.ToString%28System.IFormatProvider%29?displayProperty=nameWithType>, and pass it the <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> property, a <xref:System.Globalization.CultureInfo> instance that represents the desired culture, or the <xref:System.Globalization.CultureInfo.InvariantCulture?displayProperty=nameWithType> property.</span></span>

- <span data-ttu-id="8e445-357">Per la concatenazione di stringhe, non consentire al compilatore di eseguire tutte le conversioni implicite.</span><span class="sxs-lookup"><span data-stu-id="8e445-357">For string concatenation, do not allow the compiler to perform any implicit conversions.</span></span> <span data-ttu-id="8e445-358">In alternativa, eseguire una conversione esplicita tramite la chiamata a un overload di `ToString` che abbia un parametro `provider`.</span><span class="sxs-lookup"><span data-stu-id="8e445-358">Instead, perform an explicit conversion by calling a `ToString` overload that has a `provider` parameter.</span></span> <span data-ttu-id="8e445-359">Il compilatore, ad esempio, utilizza in modo implicito le impostazioni cultura correnti durante <xref:System.Double> la conversione di un valore in una stringa nel codice seguente:</span><span class="sxs-lookup"><span data-stu-id="8e445-359">For example, the compiler implicitly uses the current culture when converting a <xref:System.Double> value to a string in the following code:</span></span>

  [!code-csharp[Implicit String Conversion](./snippets/best-practices-strings/csharp/tostring/Program.cs#1)]
  [!code-vb[Implicit String Conversion](./snippets/best-practices-strings/vb/tostring/Program.vb#1)]

  <span data-ttu-id="8e445-360">In alternativa, è possibile specificare in modo esplicito le impostazioni cultura le cui convenzioni di formattazione vengono utilizzate nella conversione chiamando il <xref:System.Double.ToString(System.IFormatProvider)?displayProperty=nameWithType> metodo, come il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="8e445-360">Instead, you can explicitly specify the culture whose formatting conventions are used in the conversion by calling the <xref:System.Double.ToString(System.IFormatProvider)?displayProperty=nameWithType> method, as the following code does:</span></span>

  [!code-csharp[Explicit String Conversion](./snippets/best-practices-strings/csharp/tostring/Program.cs#2)]
  [!code-vb[Implicit String Conversion](./snippets/best-practices-strings/vb/tostring/Program.vb#2)]

- <span data-ttu-id="8e445-361">Per l'interpolazione di stringhe, anziché assegnare una stringa interpolata a un'istanza di <xref:System.String>, assegnarla a un'istanza di <xref:System.FormattableString>.</span><span class="sxs-lookup"><span data-stu-id="8e445-361">For string interpolation, rather than assigning an interpolated string to a <xref:System.String> instance, assign it to a <xref:System.FormattableString>.</span></span> <span data-ttu-id="8e445-362">È quindi possibile chiamare il metodo <xref:System.FormattableString.ToString?displayProperty=nameWithType> per produrre una stringa di risultato che rifletta le convenzioni delle impostazioni cultura correnti, oppure è possibile chiamare il metodo <xref:System.FormattableString.ToString(System.IFormatProvider)?displayProperty=nameWithType> per produrre una stringa di risultato che rifletta le convenzioni delle impostazioni cultura specificate.</span><span class="sxs-lookup"><span data-stu-id="8e445-362">You can then call its <xref:System.FormattableString.ToString?displayProperty=nameWithType> method produce a result string that reflects the conventions of the current culture, or you can call the <xref:System.FormattableString.ToString(System.IFormatProvider)?displayProperty=nameWithType> method to produce a result string that reflects the conventions of a specified culture.</span></span> <span data-ttu-id="8e445-363">È anche possibile passare la stringa formattabile al metodo statico <xref:System.FormattableString.Invariant%2A?displayProperty=nameWithType> per produrre una stringa di risultato che rifletta le convenzioni delle impostazioni cultura inglese non dipendenti da paese/area geografica.</span><span class="sxs-lookup"><span data-stu-id="8e445-363">You can also pass the formattable string to the static <xref:System.FormattableString.Invariant%2A?displayProperty=nameWithType> method to produce a result string that reflects the conventions of the invariant culture.</span></span> <span data-ttu-id="8e445-364">Questo approccio viene illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="8e445-364">The following example illustrates this approach.</span></span> <span data-ttu-id="8e445-365">L'output dell'esempio riflette le impostazioni cultura correnti en-US.</span><span class="sxs-lookup"><span data-stu-id="8e445-365">(The output from the example reflects a current culture of en-US.)</span></span>

  [!code-csharp[String interpolation](./snippets/best-practices-strings/csharp/formattable/Program.cs)]
  [!code-vb[String interpolation](./snippets/best-practices-strings/vb/formattable/Program.vb)]

<span data-ttu-id="8e445-366">È possibile conservare i dati non di tipo stringa come dati binari o formattati.</span><span class="sxs-lookup"><span data-stu-id="8e445-366">You can persist non-string data either as binary data or as formatted data.</span></span> <span data-ttu-id="8e445-367">Se si sceglie di salvarli come dati formattati, è necessario chiamare un overload del metodo di formattazione che include un parametro `provider` e passare la proprietà <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="8e445-367">If you choose to save it as formatted data, you should call a formatting method overload that includes a `provider` parameter and pass it the <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="8e445-368">La lingua inglese fornisce un formato coerente per i dati formattati, indipendente dalle impostazioni cultura e dal computer.</span><span class="sxs-lookup"><span data-stu-id="8e445-368">The invariant culture provides a consistent format for formatted data that is independent of culture and machine.</span></span> <span data-ttu-id="8e445-369">Al contrario, conservare i dati formattati con impostazioni cultura diverse dalla lingua inglese presenta diverse limitazioni:</span><span class="sxs-lookup"><span data-stu-id="8e445-369">In contrast, persisting data that is formatted by using cultures other than the invariant culture has a number of limitations:</span></span>

- <span data-ttu-id="8e445-370">È probabile che i dati non saranno utilizzabili se vengono recuperati in un sistema con impostazioni cultura diverse oppure se l'utente del sistema corrente modifica le impostazioni cultura correnti e prova a recuperare i dati.</span><span class="sxs-lookup"><span data-stu-id="8e445-370">The data is likely to be unusable if it is retrieved on a system that has a different culture, or if the user of the current system changes the current culture and tries to retrieve the data.</span></span>
- <span data-ttu-id="8e445-371">Le proprietà delle impostazioni cultura in uno specifico computer possono essere diverse rispetto ai valori standard.</span><span class="sxs-lookup"><span data-stu-id="8e445-371">The properties of a culture on a specific computer can differ from standard values.</span></span> <span data-ttu-id="8e445-372">Un utente può personalizzare in qualsiasi momento le impostazioni di visualizzazione con distinzione delle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-372">At any time, a user can customize culture-sensitive display settings.</span></span> <span data-ttu-id="8e445-373">Per questo motivo, i dati formattati salvati in un sistema potrebbero non essere leggibili dopo che un utente personalizza le impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="8e445-373">Because of this, formatted data that is saved on a system may not be readable after the user customizes cultural settings.</span></span> <span data-ttu-id="8e445-374">La portabilità dei dati formattati tra i vari computer potrebbe risultare ancora più limitata.</span><span class="sxs-lookup"><span data-stu-id="8e445-374">The portability of formatted data across computers is likely to be even more limited.</span></span>
- <span data-ttu-id="8e445-375">Gli standard internazionali, regionali o nazionali che regolano la formattazione dei numeri o delle date e delle ore cambiano nel tempo e queste modifiche vengono incorporate negli aggiornamenti del sistema operativo Windows.</span><span class="sxs-lookup"><span data-stu-id="8e445-375">International, regional, or national standards that govern the formatting of numbers or dates and times change over time, and these changes are incorporated into Windows operating system updates.</span></span> <span data-ttu-id="8e445-376">Quando le convenzioni di formattazione vengono modificate, i dati formattati con le convenzioni precedenti possono diventare illeggibili.</span><span class="sxs-lookup"><span data-stu-id="8e445-376">When formatting conventions change, data that was formatted by using the previous conventions may become unreadable.</span></span>

<span data-ttu-id="8e445-377">L'esempio seguente illustra la limitazione della portabilità causata dall'uso della formattazione con distinzione delle impostazioni cultura per la persistenza dei dati.</span><span class="sxs-lookup"><span data-stu-id="8e445-377">The following example illustrates the limited portability that results from using culture-sensitive formatting to persist data.</span></span> <span data-ttu-id="8e445-378">L'esempio salva una matrice di valori di data e ora in un file.</span><span class="sxs-lookup"><span data-stu-id="8e445-378">The example saves an array of date and time values to a file.</span></span> <span data-ttu-id="8e445-379">Questi vengono formattati usando le convenzioni delle impostazioni cultura per la lingua inglese (Stati Uniti) .</span><span class="sxs-lookup"><span data-stu-id="8e445-379">These are formatted by using the conventions of the English (United States) culture.</span></span> <span data-ttu-id="8e445-380">Quando l'applicazione modifica le impostazioni cultura del thread corrente in francese (Svizzera), tenta di leggere i valori salvati usando le convenzioni di formattazione delle impostazioni cultura correnti.</span><span class="sxs-lookup"><span data-stu-id="8e445-380">After the application changes the current thread culture to French (Switzerland), it tries to read the saved values by using the formatting conventions of the current culture.</span></span> <span data-ttu-id="8e445-381">Il tentativo di lettura di due elementi di dati genera un'eccezione <xref:System.FormatException> , quindi la matrice di date conterrà due elementi non corretti uguali a <xref:System.DateTime.MinValue>.</span><span class="sxs-lookup"><span data-stu-id="8e445-381">The attempt to read two of the data items throws a <xref:System.FormatException> exception, and the array of dates now contains two incorrect elements that are equal to <xref:System.DateTime.MinValue>.</span></span>

[!code-csharp[Conceptual.Strings.BestPractices#21](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.strings.bestpractices/cs/persistence.cs#21)]
[!code-vb[Conceptual.Strings.BestPractices#21](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.strings.bestpractices/vb/persistence.vb#21)]

<span data-ttu-id="8e445-382">Tuttavia, se si sostituisce la <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> proprietà con <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> nelle chiamate a <xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> e <xref:System.DateTime.Parse%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> , i dati di data e ora salvati vengono ripristinati correttamente, come illustrato nell'output seguente:</span><span class="sxs-lookup"><span data-stu-id="8e445-382">However, if you replace the <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> property with <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType> in the calls to <xref:System.DateTime.ToString%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType> and <xref:System.DateTime.Parse%28System.String%2CSystem.IFormatProvider%29?displayProperty=nameWithType>,   the persisted date and time data is successfully restored, as the following output shows:</span></span>

```console
06.05.1758 21:26
05.05.1818 07:19
22.04.1870 23:54
08.09.1890 06:47
18.02.1905 15:12
```
