---
title: Programmazione asincrona basata su attività - .NET
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- parallelism, task
ms.assetid: 458b5e69-5210-45e5-bc44-3888f86abd6f
ms.openlocfilehash: 188a80459fec021dc934597ea2f77ac7b4471b2d
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/02/2020
ms.locfileid: "84285287"
---
# <a name="task-based-asynchronous-programming"></a><span data-ttu-id="72f0b-102">Programmazione asincrona basata su attività</span><span class="sxs-lookup"><span data-stu-id="72f0b-102">Task-based asynchronous programming</span></span>

<span data-ttu-id="72f0b-103">La libreria Task Parallel Library (TPL) si basa sul concetto di *attività*, che rappresenta un'operazione asincrona.</span><span class="sxs-lookup"><span data-stu-id="72f0b-103">The Task Parallel Library (TPL) is based on the concept of a *task*, which represents an asynchronous operation.</span></span> <span data-ttu-id="72f0b-104">Per certi versi, un'attività è analoga a un thread o a un elemento di lavoro <xref:System.Threading.ThreadPool>, ma a un livello più generale di astrazione.</span><span class="sxs-lookup"><span data-stu-id="72f0b-104">In some ways, a task resembles a thread or <xref:System.Threading.ThreadPool> work item, but at a higher level of abstraction.</span></span> <span data-ttu-id="72f0b-105">L'espressione *parallelismo delle attività* fa riferimento a una o più attività indipendenti eseguite contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="72f0b-105">The term *task parallelism* refers to one or more independent tasks running concurrently.</span></span> <span data-ttu-id="72f0b-106">Le attività forniscono due vantaggi principali:</span><span class="sxs-lookup"><span data-stu-id="72f0b-106">Tasks provide two primary benefits:</span></span>

- <span data-ttu-id="72f0b-107">Utilizzo più efficiente e scalabile delle risorse di sistema.</span><span class="sxs-lookup"><span data-stu-id="72f0b-107">More efficient and more scalable use of system resources.</span></span>

     <span data-ttu-id="72f0b-108">Ai fini del funzionamento, le attività vengono accodate a <xref:System.Threading.ThreadPool>, che è stato migliorato con algoritmi che determinano e modificano il numero di thread e che ottimizzano la velocità effettiva grazie al bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="72f0b-108">Behind the scenes, tasks are queued to the <xref:System.Threading.ThreadPool>, which has been enhanced with algorithms  that determine and adjust to the number of threads and that provide load balancing to maximize throughput.</span></span> <span data-ttu-id="72f0b-109">In questo modo le attività diventano relativamente leggere ed è possibile crearne molte in modo da ottenere un parallelismo accurato.</span><span class="sxs-lookup"><span data-stu-id="72f0b-109">This makes tasks relatively lightweight, and you can create many of them to enable fine-grained parallelism.</span></span>

- <span data-ttu-id="72f0b-110">Maggior controllo a livello di codice rispetto a quello ottenibile usando un thread o un elemento di lavoro.</span><span class="sxs-lookup"><span data-stu-id="72f0b-110">More programmatic control than is possible with a thread or work item.</span></span>

     <span data-ttu-id="72f0b-111">Le attività e il framework in cui esse sono inserite forniscono un ampio set di API che supportano varie funzionalità tra cui attesa, annullamento, continuazioni, gestione affidabile delle eccezioni, stato dettagliato e pianificazione personalizzata.</span><span class="sxs-lookup"><span data-stu-id="72f0b-111">Tasks and the framework built around them provide a rich set of APIs that support waiting, cancellation, continuations, robust exception handling, detailed status, custom scheduling, and more.</span></span>

<span data-ttu-id="72f0b-112">Per entrambi questi motivi, in .NET Framework TPL rappresenta l'API preferita per la scrittura di codice multithreading, asincrono e parallelo.</span><span class="sxs-lookup"><span data-stu-id="72f0b-112">For both of these reasons, in the .NET Framework, TPL is the preferred API for writing multi-threaded, asynchronous, and parallel code.</span></span>

## <a name="creating-and-running-tasks-implicitly"></a><span data-ttu-id="72f0b-113">Creazione ed esecuzione implicite di attività</span><span class="sxs-lookup"><span data-stu-id="72f0b-113">Creating and running tasks implicitly</span></span>

<span data-ttu-id="72f0b-114">Il metodo <xref:System.Threading.Tasks.Parallel.Invoke%2A?displayProperty=nameWithType> rappresenta un modo pratico per eseguire simultaneamente un numero qualsiasi di istruzioni arbitrarie.</span><span class="sxs-lookup"><span data-stu-id="72f0b-114">The <xref:System.Threading.Tasks.Parallel.Invoke%2A?displayProperty=nameWithType> method provides a convenient way to run any number of arbitrary statements concurrently.</span></span> <span data-ttu-id="72f0b-115">Basta passare un delegato <xref:System.Action> per ogni elemento di lavoro.</span><span class="sxs-lookup"><span data-stu-id="72f0b-115">Just pass in an <xref:System.Action> delegate for each item of work.</span></span> <span data-ttu-id="72f0b-116">Il modo più semplice per creare questi delegati è usare le espressioni lambda.</span><span class="sxs-lookup"><span data-stu-id="72f0b-116">The easiest way to create these delegates is to use lambda expressions.</span></span> <span data-ttu-id="72f0b-117">L'espressione lambda può chiamare un metodo denominato o fornire il codice inline.</span><span class="sxs-lookup"><span data-stu-id="72f0b-117">The lambda expression can either call a named method or provide the code inline.</span></span> <span data-ttu-id="72f0b-118">Nell'esempio seguente viene mostrata una chiamata a <xref:System.Threading.Tasks.Parallel.Invoke%2A> di base che crea e avvia due attività in esecuzione simultanea.</span><span class="sxs-lookup"><span data-stu-id="72f0b-118">The following example shows a basic <xref:System.Threading.Tasks.Parallel.Invoke%2A> call that creates and starts two tasks that run concurrently.</span></span> <span data-ttu-id="72f0b-119">La prima attività è rappresentata da un'espressione lambda che chiama un metodo denominato `DoSomeWork` e la seconda attività è rappresentata da un'espressione lambda che chiama un metodo denominato `DoSomeOtherWork`.</span><span class="sxs-lookup"><span data-stu-id="72f0b-119">The first task is represented by a lambda expression that calls a method named `DoSomeWork`, and the second task is represented by a lambda expression that calls a method named `DoSomeOtherWork`.</span></span>

> [!NOTE]
> <span data-ttu-id="72f0b-120">Questa documentazione usa espressioni lambda per definire delegati in TPL.</span><span class="sxs-lookup"><span data-stu-id="72f0b-120">This documentation uses lambda expressions to define delegates in TPL.</span></span> <span data-ttu-id="72f0b-121">Se non si ha familiarità con le espressioni lambda in C# o Visual Basic, vedere [espressioni lambda in PLINQ e TPL](lambda-expressions-in-plinq-and-tpl.md).</span><span class="sxs-lookup"><span data-stu-id="72f0b-121">If you are not familiar with lambda expressions in C# or Visual Basic, see [Lambda Expressions in PLINQ and TPL](lambda-expressions-in-plinq-and-tpl.md).</span></span>

[!code-csharp[TPL#21](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl/cs/tpl.cs#21)]
[!code-vb[TPL#21](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl/vb/tpl_vb.vb#21)]

> [!NOTE]
> <span data-ttu-id="72f0b-122">Il numero di istanze <xref:System.Threading.Tasks.Task> create automaticamente da <xref:System.Threading.Tasks.Parallel.Invoke%2A> non è necessariamente uguale al numero dei delegati forniti.</span><span class="sxs-lookup"><span data-stu-id="72f0b-122">The number of <xref:System.Threading.Tasks.Task> instances that are created behind the scenes by <xref:System.Threading.Tasks.Parallel.Invoke%2A> is not necessarily equal to the number of delegates that are provided.</span></span> <span data-ttu-id="72f0b-123">La libreria TPL può applicare varie ottimizzazioni, specialmente nel caso di un numero elevato di delegati.</span><span class="sxs-lookup"><span data-stu-id="72f0b-123">The TPL may employ various optimizations, especially with large numbers of delegates.</span></span>

<span data-ttu-id="72f0b-124">Per altre informazioni, vedere [Procedura: utilizzare Parallel.Invoke per eseguire operazioni in parallelo](how-to-use-parallel-invoke-to-execute-parallel-operations.md).</span><span class="sxs-lookup"><span data-stu-id="72f0b-124">For more information, see [How to: Use Parallel.Invoke to Execute Parallel Operations](how-to-use-parallel-invoke-to-execute-parallel-operations.md).</span></span>

<span data-ttu-id="72f0b-125">Per ottenere un controllo maggiore sull'esecuzione delle attività o per restituire un valore dall'attività, è necessario utilizzare in modo più esplicito gli oggetti <xref:System.Threading.Tasks.Task>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-125">For greater control over task execution or to return a value from the task, you have to work with <xref:System.Threading.Tasks.Task> objects more explicitly.</span></span>

## <a name="creating-and-running-tasks-explicitly"></a><span data-ttu-id="72f0b-126">Creazione ed esecuzione esplicite di attività</span><span class="sxs-lookup"><span data-stu-id="72f0b-126">Creating and running tasks explicitly</span></span>

<span data-ttu-id="72f0b-127">Un'attività che non restituisce un valore è rappresentata dalla classe <xref:System.Threading.Tasks.Task?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-127">A task that does not return a value is represented by the <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="72f0b-128">Un'attività che restituisce un valore viene rappresentata dalla classe <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType> che eredita da <xref:System.Threading.Tasks.Task>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-128">A task that returns a value is represented by the <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType> class, which inherits from <xref:System.Threading.Tasks.Task>.</span></span> <span data-ttu-id="72f0b-129">L'oggetto attività gestisce i dettagli dell'infrastruttura e fornisce metodi e proprietà accessibili dal thread chiamante per tutta la durata dell'attività.</span><span class="sxs-lookup"><span data-stu-id="72f0b-129">The task object handles the infrastructure details and provides methods and properties that are accessible from the calling thread throughout the lifetime of the task.</span></span> <span data-ttu-id="72f0b-130">Ad esempio, è possibile accedere in qualsiasi momento alla proprietà <xref:System.Threading.Tasks.Task.Status%2A> di un'attività per determinare se è stata avviata, eseguita fino al completamento o annullata oppure se ha generato un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="72f0b-130">For example, you can access the <xref:System.Threading.Tasks.Task.Status%2A> property of a task at any time to determine whether it has started running, ran to completion, was canceled, or has thrown an exception.</span></span> <span data-ttu-id="72f0b-131">Lo stato è rappresentato da un'enumerazione <xref:System.Threading.Tasks.TaskStatus>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-131">The status is represented by a <xref:System.Threading.Tasks.TaskStatus> enumeration.</span></span>

<span data-ttu-id="72f0b-132">Quando si crea un'attività si assegna ad essa un delegato dell'utente che incapsula il codice che verrà eseguito dall'attività.</span><span class="sxs-lookup"><span data-stu-id="72f0b-132">When you create a task, you give it a user delegate that encapsulates the code that the task will execute.</span></span> <span data-ttu-id="72f0b-133">Il delegato può essere espresso come un delegato denominato, un metodo anonimo o un'espressione lambda.</span><span class="sxs-lookup"><span data-stu-id="72f0b-133">The delegate can be expressed as a named delegate, an anonymous method, or a lambda expression.</span></span> <span data-ttu-id="72f0b-134">Le espressioni lambda possono contenere una chiamata a un metodo denominato, come mostrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="72f0b-134">Lambda expressions can contain a call to a named method, as shown in the following example.</span></span> <span data-ttu-id="72f0b-135">Si noti che l'esempio include una chiamata al metodo <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> per garantire che l'attività venga completata prima che termini l'applicazione in modalità console.</span><span class="sxs-lookup"><span data-stu-id="72f0b-135">Note that the example includes a call to the <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> method to ensure that the task completes execution before the console mode application ends.</span></span>

[!code-csharp[TPL_TaskIntro#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/lambda1.cs#1)]
[!code-vb[TPL_TaskIntro#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/lambda1.vb#1)]

<span data-ttu-id="72f0b-136">È anche possibile usare i metodi <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> per creare e avviare un'attività in un'unica operazione.</span><span class="sxs-lookup"><span data-stu-id="72f0b-136">You can also use the <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> methods to create and start a task in one operation.</span></span> <span data-ttu-id="72f0b-137">Per gestire l'attività, i metodi <xref:System.Threading.Tasks.Task.Run%2A> utilizzano l'utilità di pianificazione delle attività predefinita, indipendentemente dall'utilità di pianificazione associata al thread corrente.</span><span class="sxs-lookup"><span data-stu-id="72f0b-137">To manage the task, the <xref:System.Threading.Tasks.Task.Run%2A> methods use the default  task scheduler, regardless of which task scheduler is associated with the current thread.</span></span> <span data-ttu-id="72f0b-138">I metodi <xref:System.Threading.Tasks.Task.Run%2A> rappresentano il modo preferito per creare e avviare le attività nei casi in cui non occorre un maggiore controllo sulla creazione e la pianificazione di attività.</span><span class="sxs-lookup"><span data-stu-id="72f0b-138">The <xref:System.Threading.Tasks.Task.Run%2A> methods are the preferred way to create and start tasks when more control over the creation and scheduling of the task is not needed.</span></span>

[!code-csharp[TPL_TaskIntro#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/run1.cs#2)]
[!code-vb[TPL_TaskIntro#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/run1.vb#2)]

<span data-ttu-id="72f0b-139">È anche possibile usare il metodo <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> per creare e avviare un'attività in un'unica operazione.</span><span class="sxs-lookup"><span data-stu-id="72f0b-139">You can also use the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> method to create and start a task in one operation.</span></span> <span data-ttu-id="72f0b-140">Usare questo metodo quando non occorre separare la creazione e la pianificazione ed è necessario avvalersi di opzioni aggiuntive di creazione delle attività o usare un'utilità di pianificazione specifica oppure quando si deve passare uno stato aggiuntivo all'attività che è possibile recuperare tramite la proprietà <xref:System.Threading.Tasks.Task.AsyncState%2A?displayProperty=nameWithType>, come illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="72f0b-140">Use this method when creation and scheduling do not have to be separated and you require additional task creation options or the use of a specific scheduler, or when you need to pass additional state into the task that you can retrieve through its <xref:System.Threading.Tasks.Task.AsyncState%2A?displayProperty=nameWithType> property, as shown in the following example.</span></span>

[!code-csharp[TPL_TaskIntro#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/asyncstate.cs#23)]
[!code-vb[TPL_TaskIntro#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/asyncstate.vb#23)]

<span data-ttu-id="72f0b-141"><xref:System.Threading.Tasks.Task> e <xref:System.Threading.Tasks.Task%601> espongono ciascuna una proprietà statica <xref:System.Threading.Tasks.Task.Factory%2A> che restituisce un'istanza predefinita per <xref:System.Threading.Tasks.TaskFactory>, in modo che si possa chiamare il metodo come `Task.Factory.StartNew()`.</span><span class="sxs-lookup"><span data-stu-id="72f0b-141"><xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> each expose a static <xref:System.Threading.Tasks.Task.Factory%2A> property that returns a default instance of <xref:System.Threading.Tasks.TaskFactory>, so that you can call the method as `Task.Factory.StartNew()`.</span></span> <span data-ttu-id="72f0b-142">Nell'esempio seguente, inoltre, poiché le attività sono di tipo <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType>, ognuna di esse presenta una proprietà <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> pubblica che contiene il risultato del calcolo.</span><span class="sxs-lookup"><span data-stu-id="72f0b-142">Also, in the following example, because the tasks are of type <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType>, they each have a public <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property that contains the result of the computation.</span></span> <span data-ttu-id="72f0b-143">Le attività vengono eseguite in modo asincrono e possono essere completate in qualsiasi ordine.</span><span class="sxs-lookup"><span data-stu-id="72f0b-143">The tasks run asynchronously and may complete in any order.</span></span> <span data-ttu-id="72f0b-144">Se si accede alla proprietà <xref:System.Threading.Tasks.Task%601.Result%2A> prima che il calcolo venga completato, la proprietà blocca il thread chiamante finché il valore non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="72f0b-144">If the <xref:System.Threading.Tasks.Task%601.Result%2A> property is accessed before the computation finishes, the property blocks the calling thread until the value is available.</span></span>

[!code-csharp[TPL_TaskIntro#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/result1.cs#4)]
[!code-vb[TPL_TaskIntro#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/result1.vb#4)]

<span data-ttu-id="72f0b-145">Per altre informazioni, vedere [Procedura: Restituire un valore da un'attività](how-to-return-a-value-from-a-task.md).</span><span class="sxs-lookup"><span data-stu-id="72f0b-145">For more information, see [How to: Return a Value from a Task](how-to-return-a-value-from-a-task.md).</span></span>

<span data-ttu-id="72f0b-146">Quando si usa un'espressione lambda per creare un delegato, si avrà accesso a tutte le variabili visibili in quel punto del codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="72f0b-146">When you use a lambda expression to create a delegate, you have access to all the variables that are visible at that point in your source code.</span></span> <span data-ttu-id="72f0b-147">Tuttavia, in alcuni casi, in particolare all'interno dei cicli, un'espressione lambda non acquisisce la variabile come previsto.</span><span class="sxs-lookup"><span data-stu-id="72f0b-147">However, in some cases, most notably within loops, a lambda doesn't capture the variable as expected.</span></span> <span data-ttu-id="72f0b-148">Acquisisce solo il valore finale, non il valore mentre viene modificato dopo ogni iterazione.</span><span class="sxs-lookup"><span data-stu-id="72f0b-148">It only captures the final value, not the value as it mutates after each iteration.</span></span> <span data-ttu-id="72f0b-149">Nell'esempio che segue viene illustrato il problema.</span><span class="sxs-lookup"><span data-stu-id="72f0b-149">The following example illustrates the problem.</span></span> <span data-ttu-id="72f0b-150">Passa un contatore di cicli a un'espressione lambda che crea un'istanza di un oggetto `CustomData` e usa il contatore di cicli come identificatore dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="72f0b-150">It passes a loop counter to a lambda expression that instantiates a `CustomData` object and uses the loop counter as the object's identifier.</span></span> <span data-ttu-id="72f0b-151">Come indica l'output dell'esempio, ogni oggetto `CustomData` dispone di un identificatore identico.</span><span class="sxs-lookup"><span data-stu-id="72f0b-151">As the output from the example shows, each `CustomData` object has an identical identifier.</span></span>

[!code-csharp[TPL_TaskIntro#22](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/iteration1b.cs#22)]
[!code-vb[TPL_TaskIntro#22](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/iteration1b.vb#22)]

<span data-ttu-id="72f0b-152">È possibile accedere al valore in ogni iterazione fornendo un oggetto stato a un'attività mediante il relativo costruttore.</span><span class="sxs-lookup"><span data-stu-id="72f0b-152">You can access the value on each iteration by providing a state object to a task through its constructor.</span></span> <span data-ttu-id="72f0b-153">Nell'esempio seguente viene modificato l'esempio precedente usando il contatore di cicli durante la creazione dell'oggetto `CustomData`, che, a sua volta, viene passato all'espressione lambda.</span><span class="sxs-lookup"><span data-stu-id="72f0b-153">The following example modifies the previous example by using the loop counter when creating the `CustomData` object, which, in turn, is passed to the lambda expression.</span></span>  <span data-ttu-id="72f0b-154">Come indicato dall'output dell'esempio, ogni oggetto `CustomData` dispone ora di un identificatore univoco in base al valore del contatore di cicli al momento della creazione di un'istanza dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="72f0b-154">As the output from the example shows, each `CustomData` object now has a unique identifier based on the value of the loop counter at the time the object was instantiated.</span></span>

[!code-csharp[TPL_TaskIntro#21](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/iteration1a.cs#21)]
[!code-vb[TPL_TaskIntro#21](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/iteration1a.vb#21)]

<span data-ttu-id="72f0b-155">Questo stato viene passato come argomento al delegato dell'attività ed è accessibile dall'oggetto attività tramite la proprietà <xref:System.Threading.Tasks.Task.AsyncState%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-155">This state is passed as an argument to the task delegate, and it can be accessed from the task object by using the <xref:System.Threading.Tasks.Task.AsyncState%2A?displayProperty=nameWithType> property.</span></span>  <span data-ttu-id="72f0b-156">L'esempio seguente è una variante dell'esempio precedente</span><span class="sxs-lookup"><span data-stu-id="72f0b-156">The following example is a variation on the previous example.</span></span> <span data-ttu-id="72f0b-157">Usa la proprietà <xref:System.Threading.Tasks.Task.AsyncState%2A> per visualizzare informazioni sugli oggetti `CustomData` passati all'espressione lambda.</span><span class="sxs-lookup"><span data-stu-id="72f0b-157">It uses the <xref:System.Threading.Tasks.Task.AsyncState%2A> property to display information about the `CustomData` objects passed to the lambda expression.</span></span>

[!code-csharp[TPL_TaskIntro#23](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/asyncstate.cs#23)]
[!code-vb[TPL_TaskIntro#23](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/asyncstate.vb#23)]

## <a name="task-id"></a><span data-ttu-id="72f0b-158">ID attività</span><span class="sxs-lookup"><span data-stu-id="72f0b-158">Task ID</span></span>

<span data-ttu-id="72f0b-159">Ogni attività riceve un ID di tipo Integer con cui viene identificata in modo univoco in un dominio applicazione e a cui è possibile accedere tramite la proprietà <xref:System.Threading.Tasks.Task.Id%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-159">Every task receives an integer ID that uniquely identifies it in an application domain and can be accessed by using the <xref:System.Threading.Tasks.Task.Id%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="72f0b-160">Questo ID è utile per visualizzare informazioni sull'attività nelle finestre **Stack in parallelo** e **Attività in parallelo** del debugger di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="72f0b-160">The ID is useful for viewing task information in the Visual Studio debugger **Parallel Stacks** and **Tasks** windows.</span></span> <span data-ttu-id="72f0b-161">L'ID viene creato in modo differito, ovvero solo quando viene richiesto. Pertanto, un'attività può presentare un ID diverso ogni volta che viene eseguito il programma.</span><span class="sxs-lookup"><span data-stu-id="72f0b-161">The ID is lazily created, which means that it isn't created until it is requested; therefore, a task may have a different ID every time the program is run.</span></span> <span data-ttu-id="72f0b-162">Per altre informazioni su come visualizzare gli ID attività nel debugger, vedere [Uso della finestra Attività](/visualstudio/debugger/using-the-tasks-window) e [Utilizzo della finestra Stack in parallelo](/visualstudio/debugger/using-the-parallel-stacks-window).</span><span class="sxs-lookup"><span data-stu-id="72f0b-162">For more information about how to view task IDs in the debugger, see [Using the Tasks Window](/visualstudio/debugger/using-the-tasks-window) and [Using the Parallel Stacks Window](/visualstudio/debugger/using-the-parallel-stacks-window).</span></span>

## <a name="task-creation-options"></a><span data-ttu-id="72f0b-163">Opzioni di creazione delle attività</span><span class="sxs-lookup"><span data-stu-id="72f0b-163">Task creation options</span></span>

<span data-ttu-id="72f0b-164">La maggior parte delle API che creano attività genera overload che accettano un parametro <xref:System.Threading.Tasks.TaskCreationOptions>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-164">Most APIs that create tasks provide overloads that accept a <xref:System.Threading.Tasks.TaskCreationOptions> parameter.</span></span> <span data-ttu-id="72f0b-165">Quando si specifica una di queste opzioni si indica all'utilità di pianificazione il modo in cui pianificare l'attività nel pool di thread.</span><span class="sxs-lookup"><span data-stu-id="72f0b-165">By specifying one of these options, you tell the task scheduler how to schedule the task on the thread pool.</span></span> <span data-ttu-id="72f0b-166">Nella tabella seguente sono elencate le varie opzioni di creazione delle attività.</span><span class="sxs-lookup"><span data-stu-id="72f0b-166">The following table lists the various task creation options.</span></span>

|<span data-ttu-id="72f0b-167">Valore del parametro <xref:System.Threading.Tasks.TaskCreationOptions></span><span class="sxs-lookup"><span data-stu-id="72f0b-167"><xref:System.Threading.Tasks.TaskCreationOptions> parameter value</span></span>|<span data-ttu-id="72f0b-168">Descrizione</span><span class="sxs-lookup"><span data-stu-id="72f0b-168">Description</span></span>|
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
|<xref:System.Threading.Tasks.TaskCreationOptions.None>|<span data-ttu-id="72f0b-169">Valore predefinito quando non si specificano opzioni.</span><span class="sxs-lookup"><span data-stu-id="72f0b-169">The default when no option is specified.</span></span> <span data-ttu-id="72f0b-170">L'utilità di pianificazione usa le proprie regole euristiche predefinite per pianificare l'attività.</span><span class="sxs-lookup"><span data-stu-id="72f0b-170">The scheduler uses its default heuristics to schedule the task.</span></span>|
|<xref:System.Threading.Tasks.TaskCreationOptions.PreferFairness>|<span data-ttu-id="72f0b-171">Specifica che l'attività deve essere pianificata in modo che le attività create prima abbiano più possibilità di essere eseguite prima delle attività create in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="72f0b-171">Specifies that the task should be scheduled so that tasks created sooner will be more likely to be executed sooner, and tasks created later will be more likely to execute later.</span></span>|
|<xref:System.Threading.Tasks.TaskCreationOptions.LongRunning>|<span data-ttu-id="72f0b-172">Specifica che l'attività rappresenta un'operazione di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="72f0b-172">Specifies that the task represents a long-running operation.</span></span>|
|<xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent>|<span data-ttu-id="72f0b-173">Specifica che un'attività deve essere creata come figlio collegato dell'attività corrente, se esistente.</span><span class="sxs-lookup"><span data-stu-id="72f0b-173">Specifies that a task should be created as an attached child of the current task, if one exists.</span></span> <span data-ttu-id="72f0b-174">Per altre informazioni, vedere [Attività figlio connesse e disconnesse](attached-and-detached-child-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="72f0b-174">For more information, see [Attached and Detached Child Tasks](attached-and-detached-child-tasks.md).</span></span>|
|<xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach>|<span data-ttu-id="72f0b-175">Specifica che se per un'attività interna è specificata l'opzione `AttachedToParent`, tale attività non diventerà un'attività figlio collegata.</span><span class="sxs-lookup"><span data-stu-id="72f0b-175">Specifies that if an inner task specifies the `AttachedToParent` option, that task will not become an attached child task.</span></span>|
|<xref:System.Threading.Tasks.TaskCreationOptions.HideScheduler>|<span data-ttu-id="72f0b-176">Specifica che l'utilità di pianificazione delle attività create chiamando metodi come <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> o <xref:System.Threading.Tasks.Task%601.ContinueWith%2A?displayProperty=nameWithType> dall'interno di una particolare attività è l'utilità di pianificazione predefinita anziché l'utilità di pianificazione in cui questa attività è in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="72f0b-176">Specifies that the task scheduler for tasks created by calling methods like <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> or <xref:System.Threading.Tasks.Task%601.ContinueWith%2A?displayProperty=nameWithType> from within a particular task is the default scheduler instead of the scheduler on which this task is running.</span></span>|

<span data-ttu-id="72f0b-177">Le opzioni possono essere combinate usando un'operazione **OR** bit per bit.</span><span class="sxs-lookup"><span data-stu-id="72f0b-177">The options may be combined by using a bitwise **OR** operation.</span></span> <span data-ttu-id="72f0b-178">Nell'esempio seguente viene illustrata un'attività che presenta le opzioni <xref:System.Threading.Tasks.TaskCreationOptions.LongRunning> e <xref:System.Threading.Tasks.TaskContinuationOptions.PreferFairness>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-178">The following example shows a task that has the <xref:System.Threading.Tasks.TaskCreationOptions.LongRunning> and <xref:System.Threading.Tasks.TaskContinuationOptions.PreferFairness> option.</span></span>

[!code-csharp[TPL_TaskIntro#03](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/taskintro.cs#03)]
[!code-vb[TPL_TaskIntro#03](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/tpl_intro.vb#03)]

## <a name="tasks-threads-and-culture"></a><span data-ttu-id="72f0b-179">Attività, thread e impostazioni cultura</span><span class="sxs-lookup"><span data-stu-id="72f0b-179">Tasks, threads, and culture</span></span>

<span data-ttu-id="72f0b-180">Ogni thread dispone di impostazioni cultura nonché di impostazioni cultura dell'interfaccia utente associate e definite rispettivamente dalle proprietà <xref:System.Threading.Thread.CurrentCulture%2A?displayProperty=nameWithType> e <xref:System.Threading.Thread.CurrentUICulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-180">Each thread has an associated culture and UI culture, which is defined by the <xref:System.Threading.Thread.CurrentCulture%2A?displayProperty=nameWithType> and <xref:System.Threading.Thread.CurrentUICulture%2A?displayProperty=nameWithType> properties, respectively.</span></span> <span data-ttu-id="72f0b-181">Le impostazioni cultura di un thread vengono usate in operazioni quali formattazione, analisi, ordinamento e confronto di stringhe.</span><span class="sxs-lookup"><span data-stu-id="72f0b-181">A thread's culture is used in such operations as formatting, parsing, sorting, and string comparison.</span></span> <span data-ttu-id="72f0b-182">Le impostazioni cultura dell'interfaccia utente di un thread vengono usate per la ricerca delle risorse.</span><span class="sxs-lookup"><span data-stu-id="72f0b-182">A thread's UI culture is used in resource lookup.</span></span> <span data-ttu-id="72f0b-183">In genere, a meno che non sia possibile specificare delle impostazioni cultura predefinite per tutti i thread in un dominio applicazione usando le proprietà <xref:System.Globalization.CultureInfo.DefaultThreadCurrentCulture%2A?displayProperty=nameWithType> e <xref:System.Globalization.CultureInfo.DefaultThreadCurrentUICulture%2A?displayProperty=nameWithType>, le impostazioni cultura e le impostazioni cultura dell'interfaccia utente predefinite per un thread vengono definite dalle impostazioni cultura del sistema.</span><span class="sxs-lookup"><span data-stu-id="72f0b-183">Ordinarily, unless you specify a default culture for all the threads in an application domain by using the <xref:System.Globalization.CultureInfo.DefaultThreadCurrentCulture%2A?displayProperty=nameWithType> and <xref:System.Globalization.CultureInfo.DefaultThreadCurrentUICulture%2A?displayProperty=nameWithType> properties, the default culture and UI culture of a thread is defined by the system culture.</span></span> <span data-ttu-id="72f0b-184">Se si impostano le impostazioni cultura di un thread in modo esplicito e si avvia un nuovo thread, quest'ultimo non eredita le impostazioni cultura del thread chiamante, al contrario, le relative impostazioni cultura vengono definite da quelle del sistema.</span><span class="sxs-lookup"><span data-stu-id="72f0b-184">If you explicitly set a thread's culture and launch a new thread, the new thread does not inherit the culture of the calling thread; instead, its culture is the default system culture.</span></span> <span data-ttu-id="72f0b-185">Il modello di programmazione basato su attività per le applicazioni destinate alle versioni di .NET Framework precedenti a .NET Framework 4.6 è conforme a questa prassi.</span><span class="sxs-lookup"><span data-stu-id="72f0b-185">The task-based programming model for apps that target versions of the .NET Framework prior to .NET Framework 4.6 adhere to this practice.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="72f0b-186">Si noti che le impostazioni cultura del thread chiamante come parte del contesto di un'attività si applicano alle applicazioni che hanno come *destinazione* .NET Framework 4.6, non applicazioni che vengono *eseguite* in .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="72f0b-186">Note that the calling thread's culture as part of a task's context applies to apps that *target* the .NET Framework 4.6, not apps that *run under* the .NET Framework 4.6.</span></span> <span data-ttu-id="72f0b-187">È possibile usare una versione specifica di .NET Framework come destinazione quando si crea il progetto in Visual Studio selezionando la versione nell'elenco a discesa nella parte superiore della finestra di dialogo **Nuovo progetto** oppure, esternamente a Visual Studio, è possibile usare l'attributo <xref:System.Runtime.Versioning.TargetFrameworkAttribute>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-187">You can target a particular version of the .NET Framework when you create your project in Visual Studio by selecting that version from the dropdown list at the top of the **New Project** dialog box, or outside of Visual Studio you can use the <xref:System.Runtime.Versioning.TargetFrameworkAttribute> attribute.</span></span> <span data-ttu-id="72f0b-188">Per applicazioni destinate a versioni di .NET Framework precedenti a .NET Framework 4.6, o non destinate a una versione specifica di .NET Framework, le impostazioni cultura di un'attività continuano a essere determinate dalle impostazioni cultura del thread in cui sono in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="72f0b-188">For apps that target versions of the .NET Framework prior to the .NET Framework 4.6, or that do not target a specific version of the .NET Framework, a task's culture continues to be determined by the culture of the thread on which it runs.</span></span>

<span data-ttu-id="72f0b-189">A partire dalle applicazioni destinate a .NET Framework 4.6, le impostazioni cultura del thread chiamante vengono ereditate da ogni attività, anche se l'attività viene eseguita in modo asincrono in un pool di thread.</span><span class="sxs-lookup"><span data-stu-id="72f0b-189">Starting with apps that target the .NET Framework 4.6, the calling thread's culture is inherited by each task, even if the task runs asynchronously on a thread pool thread.</span></span>

<span data-ttu-id="72f0b-190">Nell'esempio seguente viene illustrato questo concetto.</span><span class="sxs-lookup"><span data-stu-id="72f0b-190">The following example provides a simple illustration.</span></span> <span data-ttu-id="72f0b-191">Viene usato l'attributo <xref:System.Runtime.Versioning.TargetFrameworkAttribute> per indicare .NET Framework 4.6 come destinazione e vengono modificate le impostazioni cultura correnti dell'applicazione in francese (Francia) o, se francese (Francia) corrisponde già alle impostazioni cultura correnti, inglese (Stati Uniti).</span><span class="sxs-lookup"><span data-stu-id="72f0b-191">It uses the <xref:System.Runtime.Versioning.TargetFrameworkAttribute> attribute to target the .NET Framework 4.6 and changes the app's current culture to either French (France) or, if French (France) is already the current culture, English (United States).</span></span> <span data-ttu-id="72f0b-192">Viene quindi richiamato un delegato denominato `formatDelegate` che restituisce alcuni numeri formattati come valori di valuta nelle nuove impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="72f0b-192">It then invokes a delegate named `formatDelegate` that returns some numbers formatted as currency values in the new culture.</span></span> <span data-ttu-id="72f0b-193">Si noti che, sia che il delegato venga eseguito come attività in modo sincrono o asincrono, esso restituirà il risultato previsto perché le impostazioni cultura del thread chiamante vengono ereditate dall'attività asincrona.</span><span class="sxs-lookup"><span data-stu-id="72f0b-193">Note that whether the delegate as a task either synchronously or asynchronously, it returns the expected result because the culture of the calling thread is inherited by the asynchronous task.</span></span>

[!code-csharp[System.Globalization.CultureInfo.Class.Async#5](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.globalization.cultureinfo.class.async/cs/asyncculture1.cs#5)]
[!code-vb[System.Globalization.CultureInfo.Class.Async#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.globalization.cultureinfo.class.async/vb/asyncculture1.vb#5)]

<span data-ttu-id="72f0b-194">Se si usa Visual Studio, è possibile omettere l'attributo <xref:System.Runtime.Versioning.TargetFrameworkAttribute> e selezionare invece .NET Framework 4.6 come destinazione quando si crea il progetto nella finestra di dialogo **Nuovo progetto**.</span><span class="sxs-lookup"><span data-stu-id="72f0b-194">If you are using Visual Studio, you can omit the <xref:System.Runtime.Versioning.TargetFrameworkAttribute> attribute and instead select the .NET Framework 4.6 as the target when you create the project in the **New Project** dialog.</span></span>

<span data-ttu-id="72f0b-195">Per ottenere un output che rifletta il comportamento delle app che hanno come destinazione versioni di .NET Framework precedenti a .NET Framework 4.6, rimuovere l'attributo <xref:System.Runtime.Versioning.TargetFrameworkAttribute> dal codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="72f0b-195">For output that reflects the behavior of apps the target versions of the .NET Framework prior to .NET Framework 4.6, remove the <xref:System.Runtime.Versioning.TargetFrameworkAttribute> attribute from the source code.</span></span> <span data-ttu-id="72f0b-196">L'output rifletterà le convenzioni di formattazione delle impostazioni cultura di sistema predefinite e non di quelle del thread chiamante.</span><span class="sxs-lookup"><span data-stu-id="72f0b-196">The output will reflect the formatting conventions of the default system culture, not the culture of the calling thread.</span></span>

<span data-ttu-id="72f0b-197">Per altre informazioni sulle attività asincrone e sulle impostazioni cultura, vedere la sezione dedicata alle impostazioni cultura e alle operazioni asincrone basate sulle attività nell'argomento dedicato alla classe <xref:System.Globalization.CultureInfo>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-197">For more information on asynchronous tasks and culture, see the "Culture and asynchronous task-based operations" section in the <xref:System.Globalization.CultureInfo> topic.</span></span>

## <a name="creating-task-continuations"></a><span data-ttu-id="72f0b-198">Creazione delle continuazioni di attività</span><span class="sxs-lookup"><span data-stu-id="72f0b-198">Creating task continuations</span></span>

<span data-ttu-id="72f0b-199">I metodi <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> e <xref:System.Threading.Tasks.Task%601.ContinueWith%2A?displayProperty=nameWithType> consentono di specificare un'attività da avviare al termine dell'*attività precedente*.</span><span class="sxs-lookup"><span data-stu-id="72f0b-199">The <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task%601.ContinueWith%2A?displayProperty=nameWithType> methods let you specify a task to start when the *antecedent task* finishes.</span></span> <span data-ttu-id="72f0b-200">Al delegato dell'attività di continuazione viene passato un riferimento all'attività precedente in modo da poter esaminare lo stato dell'attività precedente e, recuperando il valore della proprietà <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType>, usare l'output dell'attività precedente come input per la continuazione.</span><span class="sxs-lookup"><span data-stu-id="72f0b-200">The delegate of the continuation task is passed a reference to the antecedent task so that it can examine the antecedent task's status and, by retrieving the value of the <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property, can use the output of the antecedent as input for the continuation.</span></span>

<span data-ttu-id="72f0b-201">Nell'esempio seguente l'attività `getData` viene avviata da una chiamata al metodo <xref:System.Threading.Tasks.TaskFactory.StartNew%60%601%28System.Func%7B%60%600%7D%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-201">In the following example, the `getData` task is started by a call to the <xref:System.Threading.Tasks.TaskFactory.StartNew%60%601%28System.Func%7B%60%600%7D%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="72f0b-202">L'attività `processData` viene avviata automaticamente quando termina `getData` e `displayData` viene avviata quando termina `processData`.</span><span class="sxs-lookup"><span data-stu-id="72f0b-202">The `processData` task is started automatically when `getData` finishes, and `displayData` is started when `processData` finishes.</span></span> <span data-ttu-id="72f0b-203">`getData` produce una matrice di tipo Integer accessibile da parte dell'attività `processData` tramite la proprietà `getData` dell'attività <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-203">`getData` produces an integer array, which is accessible to the `processData` task through the `getData` task's <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="72f0b-204">L'attività `processData` elabora la matrice e restituisce un risultato il cui tipo è dedotto dal tipo restituito dell'espressione lambda passata al metodo <xref:System.Threading.Tasks.Task%601.ContinueWith%60%601%28System.Func%7BSystem.Threading.Tasks.Task%7B%600%7D%2C%60%600%7D%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-204">The `processData` task processes that array and returns a result whose type is inferred from the return type of the lambda expression passed to the <xref:System.Threading.Tasks.Task%601.ContinueWith%60%601%28System.Func%7BSystem.Threading.Tasks.Task%7B%600%7D%2C%60%600%7D%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="72f0b-205">L'attività `displayData` viene eseguita automaticamente quando termina `processData` e l'oggetto <xref:System.Tuple%603> restituito dall'espressione lambda `processData` è accessibile da parte dell'attività `displayData` tramite la proprietà `processData` dell'attività <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-205">The `displayData` task executes automatically when `processData` finishes, and the <xref:System.Tuple%603> object returned by the `processData` lambda expression is accessible to the `displayData` task through the `processData` task's <xref:System.Threading.Tasks.Task%601.Result%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="72f0b-206">L'attività `displayData` accetta i risultati dell'attività `processData` e produce un risultato il cui tipo viene dedotto in modo simile e che viene reso disponibile al programma nella proprietà <xref:System.Threading.Tasks.Task%601.Result%2A>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-206">The `displayData` task takes the result of the `processData` task and produces a result whose type is inferred in a similar manner and which is made available to the program in the <xref:System.Threading.Tasks.Task%601.Result%2A> property.</span></span>

[!code-csharp[TPL_TaskIntro#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/continuations1.cs#5)]
[!code-vb[TPL_TaskIntro#5](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/continuations1.vb#5)]

<span data-ttu-id="72f0b-207">Poiché <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> è un metodo di istanza, è possibile concatenare le chiamate al metodo anziché creare un'istanza di un oggetto <xref:System.Threading.Tasks.Task%601> per ogni attività precedente.</span><span class="sxs-lookup"><span data-stu-id="72f0b-207">Because <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> is an instance method, you can chain method calls together instead of instantiating a <xref:System.Threading.Tasks.Task%601> object for each antecedent task.</span></span> <span data-ttu-id="72f0b-208">Dal punto di vista funzionale, il seguente esempio è identico al precedente, eccetto per il fatto che unisce in una catena le chiamate al metodo <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-208">The following example is functionally identical to the previous example, except that it chains together calls to the <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="72f0b-209">Si noti che l'oggetto <xref:System.Threading.Tasks.Task%601> restituito dalla catena di chiamate al metodo è l'attività di continuazione finale.</span><span class="sxs-lookup"><span data-stu-id="72f0b-209">Note that the <xref:System.Threading.Tasks.Task%601> object returned by the chain of method calls is the final continuation task.</span></span>

[!code-csharp[TPL_TaskIntro#24](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/continuations2.cs#24)]
[!code-vb[TPL_TaskIntro#24](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/continuations2.vb#24)]

<span data-ttu-id="72f0b-210">I metodi <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A> e <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAny%2A> consentono di continuare da più attività.</span><span class="sxs-lookup"><span data-stu-id="72f0b-210">The <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A> and <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAny%2A> methods enable you to continue from multiple tasks.</span></span>

<span data-ttu-id="72f0b-211">Per altre informazioni, vedere [Concatenamento di attività tramite attività di continuazione](chaining-tasks-by-using-continuation-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="72f0b-211">For more information, see [Chaining Tasks by Using Continuation Tasks](chaining-tasks-by-using-continuation-tasks.md).</span></span>

## <a name="creating-detached-child-tasks"></a><span data-ttu-id="72f0b-212">Creazione di attività figlio scollegate</span><span class="sxs-lookup"><span data-stu-id="72f0b-212">Creating detached child tasks</span></span>

<span data-ttu-id="72f0b-213">Quando il codice utente in esecuzione in un'attività crea una nuova attività e non specifica l'opzione <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent>, la nuova attività non viene sincronizzata con l'attività padre in alcun modo particolare.</span><span class="sxs-lookup"><span data-stu-id="72f0b-213">When user code that is running in a task creates a new task and does not specify the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent> option, the new task is not synchronized with the parent task in any special way.</span></span> <span data-ttu-id="72f0b-214">Questo tipo di attività non sincronizzata è definito *attività annidata scollegata* o *attività figlio scollegata*.</span><span class="sxs-lookup"><span data-stu-id="72f0b-214">This type of non-synchronized task is called a *detached nested task* or *detached child task*.</span></span> <span data-ttu-id="72f0b-215">Nell'esempio seguente viene mostrata un'attività che crea un'unica attività figlio scollegata.</span><span class="sxs-lookup"><span data-stu-id="72f0b-215">The following example shows a task that creates one detached child task.</span></span>

[!code-csharp[TPL_TaskIntro#07](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/taskintro.cs#07)]
[!code-vb[TPL_TaskIntro#07](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/tpl_intro.vb#07)]

<span data-ttu-id="72f0b-216">Si noti che l'attività padre non attende il completamento dell'attività figlio scollegata.</span><span class="sxs-lookup"><span data-stu-id="72f0b-216">Note that the parent task does not wait for the detached child task to finish.</span></span>

## <a name="creating-child-tasks"></a><span data-ttu-id="72f0b-217">Creazione di attività figlio</span><span class="sxs-lookup"><span data-stu-id="72f0b-217">Creating child tasks</span></span>

<span data-ttu-id="72f0b-218">Quando il codice utente in esecuzione in un'attività crea un'attività con l'opzione <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent>, la nuova attività è detta *attività figlio collegata* dell'attività padre.</span><span class="sxs-lookup"><span data-stu-id="72f0b-218">When user code that is running in a task creates a task with the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent> option, the new task is known as a *attached child task* of the parent task.</span></span> <span data-ttu-id="72f0b-219">È possibile usare l'opzione <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent> per esprimere il parallelismo fra attività strutturato, poiché l'attività padre attende in modo implicito il completamento di tutte le attività figlio collegate.</span><span class="sxs-lookup"><span data-stu-id="72f0b-219">You can use the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent> option to express structured task parallelism, because the parent task implicitly waits for all attached child tasks to finish.</span></span> <span data-ttu-id="72f0b-220">Nell'esempio seguente viene mostrata un'attività padre che crea dieci attività figlio collegate.</span><span class="sxs-lookup"><span data-stu-id="72f0b-220">The following example shows a parent task that creates ten attached child tasks.</span></span> <span data-ttu-id="72f0b-221">Si noti che anche se nell'esempio viene chiamato il metodo <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> per attendere il completamento dell'attività padre, non si deve esplicitamente attendere il completamento delle attività figlio collegate.</span><span class="sxs-lookup"><span data-stu-id="72f0b-221">Note that although the example calls the <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> method to wait for the parent task to finish, it does not have to explicitly wait for the attached child tasks to complete.</span></span>

[!code-csharp[TPL_TaskIntro#8](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/child1.cs#8)]
[!code-vb[TPL_TaskIntro#8](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/child1.vb#8)]

<span data-ttu-id="72f0b-222">Un'attività padre può usare l'opzione <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> per impedire che altre attività vengano collegate all'attività padre.</span><span class="sxs-lookup"><span data-stu-id="72f0b-222">A parent task can use the <xref:System.Threading.Tasks.TaskCreationOptions.DenyChildAttach?displayProperty=nameWithType> option to prevent other tasks from attaching to the parent task.</span></span> <span data-ttu-id="72f0b-223">Per altre informazioni, vedere [Attività figlio connesse e disconnesse](attached-and-detached-child-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="72f0b-223">For more information, see [Attached and Detached Child Tasks](attached-and-detached-child-tasks.md).</span></span>

## <a name="waiting-for-tasks-to-finish"></a><span data-ttu-id="72f0b-224">Attesa del completamento delle attività</span><span class="sxs-lookup"><span data-stu-id="72f0b-224">Waiting for tasks to finish</span></span>

<span data-ttu-id="72f0b-225">I tipi <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> e <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType> forniscono vari overload dei metodi <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> che consentono di attendere il completamento di un'attività.</span><span class="sxs-lookup"><span data-stu-id="72f0b-225">The <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType> types provide several overloads of the <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> methods that enable you to wait for a task to finish.</span></span> <span data-ttu-id="72f0b-226">Sono inoltre disponibili overload dei metodi statici <xref:System.Threading.Tasks.Task.WaitAll%2A?displayProperty=nameWithType> e <xref:System.Threading.Tasks.Task.WaitAny%2A?displayProperty=nameWithType> che consentono di attendere il completamento di alcune o di tutte le attività di una matrice.</span><span class="sxs-lookup"><span data-stu-id="72f0b-226">In addition, overloads of the static <xref:System.Threading.Tasks.Task.WaitAll%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task.WaitAny%2A?displayProperty=nameWithType> methods let you wait for any or all of an array of tasks to finish.</span></span>

<span data-ttu-id="72f0b-227">L'attesa del completamento di un'attività è in genere dovuta a uno dei motivi seguenti:</span><span class="sxs-lookup"><span data-stu-id="72f0b-227">Typically, you would wait for a task for one of these reasons:</span></span>

- <span data-ttu-id="72f0b-228">Il thread principale dipende dal risultato finale calcolato da un'attività.</span><span class="sxs-lookup"><span data-stu-id="72f0b-228">The main thread depends on the final result computed by a task.</span></span>

- <span data-ttu-id="72f0b-229">È necessario gestire le eccezioni eventualmente generate dall'attività.</span><span class="sxs-lookup"><span data-stu-id="72f0b-229">You have to handle exceptions that might be thrown from the task.</span></span>

- <span data-ttu-id="72f0b-230">L'applicazione può terminare prima del completamento di tutte le attività.</span><span class="sxs-lookup"><span data-stu-id="72f0b-230">The application may terminate before all tasks have completed execution.</span></span> <span data-ttu-id="72f0b-231">Ad esempio, le applicazioni di console termineranno dopo l'esecuzione di tutto il codice sincrono in `Main` (il punto di ingresso dell'applicazione).</span><span class="sxs-lookup"><span data-stu-id="72f0b-231">For example, console applications will terminate as soon as all synchronous code in `Main` (the application entry point) has executed.</span></span>

<span data-ttu-id="72f0b-232">Nell'esempio seguente viene mostrato il modello di base che non prevede la gestione delle eccezioni.</span><span class="sxs-lookup"><span data-stu-id="72f0b-232">The following example shows the basic pattern that does not involve exception handling.</span></span>

[!code-csharp[TPL_TaskIntro#06](../../../samples/snippets/csharp/VS_Snippets_Misc/tpl_taskintro/cs/taskintro.cs#06)]
[!code-vb[TPL_TaskIntro#06](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpl_taskintro/vb/tpl_intro.vb#06)]

<span data-ttu-id="72f0b-233">Per un esempio che illustra la gestione delle eccezioni, vedere [Gestione delle eccezioni](exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="72f0b-233">For an example that shows exception handling, see [Exception Handling](exception-handling-task-parallel-library.md).</span></span>

<span data-ttu-id="72f0b-234">Alcuni overload consentono di specificare un timeout mentre altri accettano un oggetto <xref:System.Threading.CancellationToken> aggiuntivo come parametro di input, in modo che l'attesa stessa possa essere annullata a livello di codice o in risposta a un input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="72f0b-234">Some overloads let you specify a time-out, and others take an additional <xref:System.Threading.CancellationToken> as an input parameter, so that the wait itself can be canceled either programmatically or in response to user input.</span></span>

<span data-ttu-id="72f0b-235">Quando si resta in attesa di un'attività, si attendono in modo implicito tutti i figli di tale attività creati tramite l'opzione <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-235">When you wait for a task, you implicitly wait for all children of that task that were created by using the <xref:System.Threading.Tasks.TaskCreationOptions.AttachedToParent?displayProperty=nameWithType> option.</span></span> <span data-ttu-id="72f0b-236">L'oggetto <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> restituisce immediatamente un valore se l'attività è già stata completata.</span><span class="sxs-lookup"><span data-stu-id="72f0b-236"><xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> returns immediately if the task has already completed.</span></span> <span data-ttu-id="72f0b-237">Qualsiasi eccezione generata da un'attività verrà generata da un metodo <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType>, anche se il metodo <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> è stato chiamato dopo il completamento dell'attività.</span><span class="sxs-lookup"><span data-stu-id="72f0b-237">Any exceptions raised by a task will be thrown by a <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> method, even if the <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> method was called after the task completed.</span></span>

## <a name="composing-tasks"></a><span data-ttu-id="72f0b-238">Composizione di attività</span><span class="sxs-lookup"><span data-stu-id="72f0b-238">Composing tasks</span></span>

<span data-ttu-id="72f0b-239">Le classi <xref:System.Threading.Tasks.Task> e <xref:System.Threading.Tasks.Task%601> forniscono numerosi metodi che possono agevolare la composizione di più attività per l'implementazione di modelli comuni e usare meglio le funzionalità di linguaggio asincrone fornite da C#, Visual Basic e F#.</span><span class="sxs-lookup"><span data-stu-id="72f0b-239">The <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> classes provide several methods that can help you compose multiple tasks to implement common patterns and to better use the asynchronous language features that are provided by C#, Visual Basic, and F#.</span></span> <span data-ttu-id="72f0b-240">In questa sezione vengono descritti i metodi <xref:System.Threading.Tasks.Task.WhenAll%2A>, <xref:System.Threading.Tasks.Task.WhenAny%2A>, <xref:System.Threading.Tasks.Task.Delay%2A> e <xref:System.Threading.Tasks.Task.FromResult%2A>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-240">This section describes the <xref:System.Threading.Tasks.Task.WhenAll%2A>, <xref:System.Threading.Tasks.Task.WhenAny%2A>, <xref:System.Threading.Tasks.Task.Delay%2A>, and <xref:System.Threading.Tasks.Task.FromResult%2A> methods.</span></span>

### <a name="taskwhenall"></a><span data-ttu-id="72f0b-241">Task.WhenAll</span><span class="sxs-lookup"><span data-stu-id="72f0b-241">Task.WhenAll</span></span>

<span data-ttu-id="72f0b-242">Il metodo <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> attende in modo asincrono che terminino più oggetti <xref:System.Threading.Tasks.Task> o <xref:System.Threading.Tasks.Task%601>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-242">The <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> method asynchronously waits for multiple <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> objects to finish.</span></span> <span data-ttu-id="72f0b-243">Fornisce le versioni di overload che consentono di attendere i set di attività non uniformi.</span><span class="sxs-lookup"><span data-stu-id="72f0b-243">It provides overloaded versions that enable you to wait for non-uniform sets of tasks.</span></span> <span data-ttu-id="72f0b-244">Ad esempio, è possibile attendere il completamento di più oggetti <xref:System.Threading.Tasks.Task> e <xref:System.Threading.Tasks.Task%601> da una chiamata al metodo.</span><span class="sxs-lookup"><span data-stu-id="72f0b-244">For example, you can wait for multiple <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> objects to complete from one method call.</span></span>

### <a name="taskwhenany"></a><span data-ttu-id="72f0b-245">Task.WhenAny</span><span class="sxs-lookup"><span data-stu-id="72f0b-245">Task.WhenAny</span></span>

<span data-ttu-id="72f0b-246">Il metodo <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> attende in modo asincrono che termini uno degli oggetti <xref:System.Threading.Tasks.Task> o <xref:System.Threading.Tasks.Task%601>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-246">The <xref:System.Threading.Tasks.Task.WhenAny%2A?displayProperty=nameWithType> method asynchronously waits for one of multiple <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> objects to finish.</span></span> <span data-ttu-id="72f0b-247">Come nel metodo <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType>, questo metodo fornisce le versioni di overload che consentono di attendere i set di attività non uniformi.</span><span class="sxs-lookup"><span data-stu-id="72f0b-247">As in the <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> method, this method provides overloaded versions that enable you to wait for non-uniform sets of tasks.</span></span> <span data-ttu-id="72f0b-248">Il metodo <xref:System.Threading.Tasks.Task.WhenAny%2A> è particolarmente utile nei seguenti scenari.</span><span class="sxs-lookup"><span data-stu-id="72f0b-248">The <xref:System.Threading.Tasks.Task.WhenAny%2A> method is especially useful in the following scenarios.</span></span>

- <span data-ttu-id="72f0b-249">Operazioni ridondanti.</span><span class="sxs-lookup"><span data-stu-id="72f0b-249">Redundant operations.</span></span> <span data-ttu-id="72f0b-250">Si consideri un algoritmo o un'operazione eseguibile in molti modi.</span><span class="sxs-lookup"><span data-stu-id="72f0b-250">Consider an algorithm or operation that can be performed in many ways.</span></span> <span data-ttu-id="72f0b-251">È possibile usare il metodo <xref:System.Threading.Tasks.Task.WhenAny%2A> per selezionare l'operazione che termina per prima e quindi annullare le operazioni rimanenti.</span><span class="sxs-lookup"><span data-stu-id="72f0b-251">You can use the <xref:System.Threading.Tasks.Task.WhenAny%2A> method to select the operation that finishes first and then cancel the remaining operations.</span></span>

- <span data-ttu-id="72f0b-252">Operazioni interfogliate.</span><span class="sxs-lookup"><span data-stu-id="72f0b-252">Interleaved operations.</span></span> <span data-ttu-id="72f0b-253">È possibile avviare più operazioni, le quali devono tutte essere completate e usare il metodo <xref:System.Threading.Tasks.Task.WhenAny%2A> per elaborare i risultati al termine di ogni operazione.</span><span class="sxs-lookup"><span data-stu-id="72f0b-253">You can start multiple operations that must all finish and use the <xref:System.Threading.Tasks.Task.WhenAny%2A> method to process results as each operation finishes.</span></span> <span data-ttu-id="72f0b-254">Al termine di un'operazione, è possibile avviare una o più attività aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="72f0b-254">After one operation finishes, you can start one or more additional tasks.</span></span>

- <span data-ttu-id="72f0b-255">Operazioni con limitazione.</span><span class="sxs-lookup"><span data-stu-id="72f0b-255">Throttled operations.</span></span> <span data-ttu-id="72f0b-256">È possibile usare il metodo <xref:System.Threading.Tasks.Task.WhenAny%2A> per estendere lo scenario precedente limitando il numero di operazioni simultanee.</span><span class="sxs-lookup"><span data-stu-id="72f0b-256">You can use the <xref:System.Threading.Tasks.Task.WhenAny%2A> method to extend the previous scenario by limiting the number of concurrent operations.</span></span>

- <span data-ttu-id="72f0b-257">Operazioni scadute.</span><span class="sxs-lookup"><span data-stu-id="72f0b-257">Expired operations.</span></span> <span data-ttu-id="72f0b-258">È possibile usare il metodo <xref:System.Threading.Tasks.Task.WhenAny%2A> per scegliere tra una o più attività e un'attività che termina dopo un periodo specifico, ad esempio un'attività restituita dal metodo <xref:System.Threading.Tasks.Task.Delay%2A>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-258">You can use the <xref:System.Threading.Tasks.Task.WhenAny%2A> method to select between one or more tasks and a task that finishes after a specific time, such as a task that is returned by the <xref:System.Threading.Tasks.Task.Delay%2A> method.</span></span> <span data-ttu-id="72f0b-259">Il metodo <xref:System.Threading.Tasks.Task.Delay%2A> è descritto nella sezione che segue.</span><span class="sxs-lookup"><span data-stu-id="72f0b-259">The <xref:System.Threading.Tasks.Task.Delay%2A> method is described in the following section.</span></span>

### <a name="taskdelay"></a><span data-ttu-id="72f0b-260">Task.Delay</span><span class="sxs-lookup"><span data-stu-id="72f0b-260">Task.Delay</span></span>

<span data-ttu-id="72f0b-261">Il metodo <xref:System.Threading.Tasks.Task.Delay%2A?displayProperty=nameWithType> produce un oggetto <xref:System.Threading.Tasks.Task> che viene completato allo scadere del tempo specificato.</span><span class="sxs-lookup"><span data-stu-id="72f0b-261">The <xref:System.Threading.Tasks.Task.Delay%2A?displayProperty=nameWithType> method produces a <xref:System.Threading.Tasks.Task> object that finishes after the specified time.</span></span> <span data-ttu-id="72f0b-262">È possibile usare questo metodo per creare cicli che occasionalmente eseguono il polling dei dati, introducono timeout, ritardano la gestione dell'input utente per un tempo predeterminato e così via.</span><span class="sxs-lookup"><span data-stu-id="72f0b-262">You can use this method to build loops that occasionally poll for data, introduce time-outs, delay the handling of user input for a predetermined time, and so on.</span></span>

### <a name="tasktfromresult"></a><span data-ttu-id="72f0b-263">Task(T).FromResult</span><span class="sxs-lookup"><span data-stu-id="72f0b-263">Task(T).FromResult</span></span>

<span data-ttu-id="72f0b-264">Tramite il metodo <xref:System.Threading.Tasks.Task.FromResult%2A?displayProperty=nameWithType>, è possibile creare un oggetto <xref:System.Threading.Tasks.Task%601> contenente un risultato precedentemente calcolato.</span><span class="sxs-lookup"><span data-stu-id="72f0b-264">By using the <xref:System.Threading.Tasks.Task.FromResult%2A?displayProperty=nameWithType> method, you can create a <xref:System.Threading.Tasks.Task%601> object that holds a pre-computed result.</span></span> <span data-ttu-id="72f0b-265">Questo metodo è utile quando si esegue un'operazione asincrona che restituisce un oggetto <xref:System.Threading.Tasks.Task%601> e il risultato di tale oggetto <xref:System.Threading.Tasks.Task%601> è già calcolato.</span><span class="sxs-lookup"><span data-stu-id="72f0b-265">This method is useful when you perform an asynchronous operation that returns a <xref:System.Threading.Tasks.Task%601> object, and the result of that <xref:System.Threading.Tasks.Task%601> object is already computed.</span></span> <span data-ttu-id="72f0b-266">Per un esempio che usa <xref:System.Threading.Tasks.Task.FromResult%2A> per recuperare i risultati delle operazioni di download asincrone contenuti in una cache, vedere [Procedura: Creare attività precalcolate](how-to-create-pre-computed-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="72f0b-266">For an example that uses <xref:System.Threading.Tasks.Task.FromResult%2A> to retrieve the results of asynchronous download operations that are held in a cache, see [How to: Create Pre-Computed Tasks](how-to-create-pre-computed-tasks.md).</span></span>

## <a name="handling-exceptions-in-tasks"></a><span data-ttu-id="72f0b-267">Gestione delle eccezioni nelle attività</span><span class="sxs-lookup"><span data-stu-id="72f0b-267">Handling exceptions in tasks</span></span>

<span data-ttu-id="72f0b-268">Quando un'attività genera una o più eccezioni, il sistema esegue il wrapping di queste ultime in un'eccezione <xref:System.AggregateException>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-268">When a task throws one or more exceptions, the exceptions are wrapped in an <xref:System.AggregateException> exception.</span></span> <span data-ttu-id="72f0b-269">Tale eccezione viene ripropagata al thread che si unisce all'attività, ovvero in genere il thread che resta in attesa del completamento dell'attività o che accede alla proprietà <xref:System.Threading.Tasks.Task%601.Result%2A>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-269">That exception is propagated back to the thread that joins with the task, which is typically the thread that is waiting for the task to finish or the thread that accesses the <xref:System.Threading.Tasks.Task%601.Result%2A> property.</span></span> <span data-ttu-id="72f0b-270">Questo comportamento serve a imporre i criteri di .NET Framework secondo cui tutte le eccezioni non gestite devono comportare per impostazione predefinita la terminazione del processo.</span><span class="sxs-lookup"><span data-stu-id="72f0b-270">This behavior serves to enforce the .NET Framework policy that all unhandled exceptions by default should terminate the process.</span></span> <span data-ttu-id="72f0b-271">Il codice che effettua la chiamata può gestire le eccezioni usando uno qualsiasi degli elementi seguenti in un blocco `try`/`catch`:</span><span class="sxs-lookup"><span data-stu-id="72f0b-271">The calling code can handle the exceptions by using any of the following in a `try`/`catch` block:</span></span>

- <span data-ttu-id="72f0b-272">Metodo <xref:System.Threading.Tasks.Task.Wait%2A></span><span class="sxs-lookup"><span data-stu-id="72f0b-272">The <xref:System.Threading.Tasks.Task.Wait%2A> method</span></span>

- <span data-ttu-id="72f0b-273">Metodo <xref:System.Threading.Tasks.Task.WaitAll%2A></span><span class="sxs-lookup"><span data-stu-id="72f0b-273">The <xref:System.Threading.Tasks.Task.WaitAll%2A> method</span></span>

- <span data-ttu-id="72f0b-274">Metodo <xref:System.Threading.Tasks.Task.WaitAny%2A></span><span class="sxs-lookup"><span data-stu-id="72f0b-274">The <xref:System.Threading.Tasks.Task.WaitAny%2A> method</span></span>

- <span data-ttu-id="72f0b-275">Proprietà <xref:System.Threading.Tasks.Task%601.Result%2A></span><span class="sxs-lookup"><span data-stu-id="72f0b-275">The <xref:System.Threading.Tasks.Task%601.Result%2A> property</span></span>

<span data-ttu-id="72f0b-276">Anche il thread di unione può gestire le eccezioni. A tale scopo, deve accedere alla proprietà <xref:System.Threading.Tasks.Task.Exception%2A> prima che l'attività venga raccolta nel Garbage Collector.</span><span class="sxs-lookup"><span data-stu-id="72f0b-276">The joining thread can also handle exceptions by accessing the <xref:System.Threading.Tasks.Task.Exception%2A> property before the task is garbage-collected.</span></span> <span data-ttu-id="72f0b-277">L'accesso a questa proprietà impedisce all'eccezione non gestita di attivare il comportamento di propagazione delle eccezioni che termina il processo quando l'oggetto viene finalizzato.</span><span class="sxs-lookup"><span data-stu-id="72f0b-277">By accessing this property, you prevent the unhandled exception from triggering the exception propagation behavior that terminates the process when the object is finalized.</span></span>

<span data-ttu-id="72f0b-278">Per ulteriori informazioni sulle eccezioni e sulle attività, vedere [Gestione delle eccezioni](exception-handling-task-parallel-library.md).</span><span class="sxs-lookup"><span data-stu-id="72f0b-278">For more information about exceptions and tasks, see [Exception Handling](exception-handling-task-parallel-library.md).</span></span>

## <a name="canceling-tasks"></a><span data-ttu-id="72f0b-279">Annullamento delle attività</span><span class="sxs-lookup"><span data-stu-id="72f0b-279">Canceling tasks</span></span>

<span data-ttu-id="72f0b-280">La classe <xref:System.Threading.Tasks.Task> supporta l'annullamento cooperativo ed è completamente integrata con le classi <xref:System.Threading.CancellationTokenSource?displayProperty=nameWithType> e <xref:System.Threading.CancellationToken?displayProperty=nameWithType>, che sono state introdotte in .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="72f0b-280">The <xref:System.Threading.Tasks.Task> class supports cooperative cancellation and is fully integrated with the <xref:System.Threading.CancellationTokenSource?displayProperty=nameWithType> and <xref:System.Threading.CancellationToken?displayProperty=nameWithType> classes, which were introduced in the .NET Framework 4.</span></span> <span data-ttu-id="72f0b-281">Molti dei costruttori nella classe <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> accettano un oggetto <xref:System.Threading.CancellationToken> come parametro di input.</span><span class="sxs-lookup"><span data-stu-id="72f0b-281">Many of the constructors in the <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> class take a <xref:System.Threading.CancellationToken> object as an input parameter.</span></span> <span data-ttu-id="72f0b-282">Molti degli overload <xref:System.Threading.Tasks.TaskFactory.StartNew%2A> e <xref:System.Threading.Tasks.Task.Run%2A> includono anche un parametro <xref:System.Threading.CancellationToken>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-282">Many of the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A> and <xref:System.Threading.Tasks.Task.Run%2A> overloads also include a <xref:System.Threading.CancellationToken> parameter.</span></span>

<span data-ttu-id="72f0b-283">È possibile creare il token e inviare la richiesta di annullamento in un secondo momento tramite la classe <xref:System.Threading.CancellationTokenSource>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-283">You can create the token, and issue the cancellation request at some later time, by using the <xref:System.Threading.CancellationTokenSource> class.</span></span> <span data-ttu-id="72f0b-284">Passare il token a <xref:System.Threading.Tasks.Task> come argomento. Inoltre, fare riferimento allo stesso token nel delegato dell'utente, che esegue le operazioni necessarie per rispondere a una richiesta di annullamento.</span><span class="sxs-lookup"><span data-stu-id="72f0b-284">Pass the token to the <xref:System.Threading.Tasks.Task> as an argument, and also reference the same token in your user delegate, which does the work of responding to a cancellation request.</span></span>

<span data-ttu-id="72f0b-285">Per altre informazioni, vedere [Annullamento delle attività](task-cancellation.md) e [Procedura: Annullare un'attività e i relativi figli](how-to-cancel-a-task-and-its-children.md).</span><span class="sxs-lookup"><span data-stu-id="72f0b-285">For more information, see [Task Cancellation](task-cancellation.md) and [How to: Cancel a Task and Its Children](how-to-cancel-a-task-and-its-children.md).</span></span>

## <a name="the-taskfactory-class"></a><span data-ttu-id="72f0b-286">Classe TaskFactory</span><span class="sxs-lookup"><span data-stu-id="72f0b-286">The TaskFactory class</span></span>

<span data-ttu-id="72f0b-287">La classe <xref:System.Threading.Tasks.TaskFactory> fornisce metodi statici che incapsulano alcuni modelli comuni per la creazione e l'avvio di attività e di attività di continuazione.</span><span class="sxs-lookup"><span data-stu-id="72f0b-287">The <xref:System.Threading.Tasks.TaskFactory> class provides static methods that encapsulate some common patterns for creating and starting tasks and continuation tasks.</span></span>

- <span data-ttu-id="72f0b-288">Il modello più comune è <xref:System.Threading.Tasks.TaskFactory.StartNew%2A>, che crea e avvia un'attività in un'unica istruzione.</span><span class="sxs-lookup"><span data-stu-id="72f0b-288">The most common pattern is <xref:System.Threading.Tasks.TaskFactory.StartNew%2A>, which creates and starts a task in one statement.</span></span>

- <span data-ttu-id="72f0b-289">Quando si creano attività di continuazione da più attività precedenti, usare il metodo <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A> o <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAny%2A> oppure i relativi equivalenti nella classe <xref:System.Threading.Tasks.Task%601>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-289">When you create continuation tasks from multiple antecedents, use the <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAll%2A> method or <xref:System.Threading.Tasks.TaskFactory.ContinueWhenAny%2A> method or their equivalents in the <xref:System.Threading.Tasks.Task%601> class.</span></span> <span data-ttu-id="72f0b-290">Per altre informazioni, vedere [Concatenamento di attività tramite attività di continuazione](chaining-tasks-by-using-continuation-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="72f0b-290">For more information, see [Chaining Tasks by Using Continuation Tasks](chaining-tasks-by-using-continuation-tasks.md).</span></span>

- <span data-ttu-id="72f0b-291">Per incapsulare i metodi `BeginX` ed `EndX` del modello di programmazione asincrono in un'istanza di <xref:System.Threading.Tasks.Task> o <xref:System.Threading.Tasks.Task%601>, utilizzare i metodi <xref:System.Threading.Tasks.TaskFactory.FromAsync%2A>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-291">To encapsulate Asynchronous Programming Model `BeginX` and `EndX` methods in a <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> instance, use the <xref:System.Threading.Tasks.TaskFactory.FromAsync%2A> methods.</span></span> <span data-ttu-id="72f0b-292">Per altre informazioni, vedere [Task Parallel Library e programmazione asincrona .NET Framework tradizionale](tpl-and-traditional-async-programming.md).</span><span class="sxs-lookup"><span data-stu-id="72f0b-292">For more information, see [TPL and Traditional .NET Framework Asynchronous Programming](tpl-and-traditional-async-programming.md).</span></span>

<span data-ttu-id="72f0b-293">L'oggetto <xref:System.Threading.Tasks.TaskFactory> predefinito è accessibile come proprietà statica della classe <xref:System.Threading.Tasks.Task> o della classe <xref:System.Threading.Tasks.Task%601>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-293">The default <xref:System.Threading.Tasks.TaskFactory> can be accessed as a static property on the <xref:System.Threading.Tasks.Task> class or <xref:System.Threading.Tasks.Task%601> class.</span></span> <span data-ttu-id="72f0b-294">È anche possibile creare direttamente un'istanza di <xref:System.Threading.Tasks.TaskFactory> e specificare varie opzioni che includono un oggetto <xref:System.Threading.CancellationToken>, un'opzione <xref:System.Threading.Tasks.TaskCreationOptions>, un'opzione <xref:System.Threading.Tasks.TaskContinuationOptions> o un oggetto <xref:System.Threading.Tasks.TaskScheduler>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-294">You can also instantiate a <xref:System.Threading.Tasks.TaskFactory> directly and specify various options that include a <xref:System.Threading.CancellationToken>, a <xref:System.Threading.Tasks.TaskCreationOptions> option, a <xref:System.Threading.Tasks.TaskContinuationOptions> option, or a <xref:System.Threading.Tasks.TaskScheduler>.</span></span> <span data-ttu-id="72f0b-295">Tutte le opzioni specificate quando si crea la factory delle attività verranno applicate a tutte le attività create da tale factory, tranne nel caso in cui l'oggetto <xref:System.Threading.Tasks.Task> venga creato tramite l'enumerazione <xref:System.Threading.Tasks.TaskCreationOptions>. In tal caso, le opzioni dell'attività eseguono l'override di quelle della factory delle attività.</span><span class="sxs-lookup"><span data-stu-id="72f0b-295">Whatever options are specified when you create the task factory will be applied to all tasks that it creates, unless the <xref:System.Threading.Tasks.Task> is created by using the <xref:System.Threading.Tasks.TaskCreationOptions> enumeration, in which case the task's options override those of the task factory.</span></span>

## <a name="tasks-without-delegates"></a><span data-ttu-id="72f0b-296">Attività senza delegati</span><span class="sxs-lookup"><span data-stu-id="72f0b-296">Tasks without delegates</span></span>

<span data-ttu-id="72f0b-297">In alcuni casi è necessario usare un oggetto <xref:System.Threading.Tasks.Task> per incapsulare un'operazione asincrona eseguita da un componente esterno anziché dal delegato dell'utente.</span><span class="sxs-lookup"><span data-stu-id="72f0b-297">In some cases, you may want to use a <xref:System.Threading.Tasks.Task> to encapsulate some asynchronous operation that is performed by an external component instead of your own user delegate.</span></span> <span data-ttu-id="72f0b-298">Se l'operazione si basa sul modello Begin/End del modello di programmazione asincrona, è possibile usare i metodi <xref:System.Threading.Tasks.TaskFactory.FromAsync%2A>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-298">If the operation is based on the Asynchronous Programming Model Begin/End pattern, you can use the <xref:System.Threading.Tasks.TaskFactory.FromAsync%2A> methods.</span></span> <span data-ttu-id="72f0b-299">In caso contrario, è possibile usare l'oggetto <xref:System.Threading.Tasks.TaskCompletionSource%601> per eseguire il wrapping dell'operazione in un'attività e in questo modo ottenere alcuni dei vantaggi della programmabilità di <xref:System.Threading.Tasks.Task>, ad esempio il supporto per la propagazione delle eccezioni e le continuazioni.</span><span class="sxs-lookup"><span data-stu-id="72f0b-299">If that is not the case, you can use the <xref:System.Threading.Tasks.TaskCompletionSource%601> object to wrap the operation in a task and thereby gain some of the benefits of <xref:System.Threading.Tasks.Task> programmability, for example, support for exception propagation and continuations.</span></span> <span data-ttu-id="72f0b-300">Per altre informazioni, vedere <xref:System.Threading.Tasks.TaskCompletionSource%601>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-300">For more information, see <xref:System.Threading.Tasks.TaskCompletionSource%601>.</span></span>

## <a name="custom-schedulers"></a><span data-ttu-id="72f0b-301">Utilità di pianificazione personalizzate</span><span class="sxs-lookup"><span data-stu-id="72f0b-301">Custom schedulers</span></span>

<span data-ttu-id="72f0b-302">Per la maggior parte degli sviluppatori di applicazioni o librerie non occorre determinare il processore in cui è in esecuzione l'attività né come quest'ultima sincronizza il proprio lavoro con le altre attività o come viene pianificata in <xref:System.Threading.ThreadPool?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-302">Most application or library developers do not care which processor the task runs on, how it synchronizes its work with other tasks, or how it is scheduled on the <xref:System.Threading.ThreadPool?displayProperty=nameWithType>.</span></span> <span data-ttu-id="72f0b-303">Tali sviluppatori richiedono soltanto che l'attività venga eseguita con la maggiore efficienza possibile nel computer host.</span><span class="sxs-lookup"><span data-stu-id="72f0b-303">They only require that it execute as efficiently as possible on the host computer.</span></span> <span data-ttu-id="72f0b-304">Se si richiede un controllo più accurato sui dettagli di pianificazione, la libreria Task Parallel Library (TPL) consente di configurare alcune impostazioni nell'utilità di pianificazione delle attività predefinita. Inoltre, tale libreria consente persino di fornire un'utilità di pianificazione personalizzata.</span><span class="sxs-lookup"><span data-stu-id="72f0b-304">If you require more fine-grained control over the scheduling details, the Task Parallel Library lets you configure some settings on the default task scheduler, and even lets you supply a custom scheduler.</span></span> <span data-ttu-id="72f0b-305">Per altre informazioni, vedere <xref:System.Threading.Tasks.TaskScheduler>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-305">For more information, see <xref:System.Threading.Tasks.TaskScheduler>.</span></span>

## <a name="related-data-structures"></a><span data-ttu-id="72f0b-306">Strutture di dati correlate</span><span class="sxs-lookup"><span data-stu-id="72f0b-306">Related data structures</span></span>

<span data-ttu-id="72f0b-307">La libreria TPL presenta vari nuovi tipi pubblici che risultano utili sia negli scenari in parallelo sia in quelli sequenziali.</span><span class="sxs-lookup"><span data-stu-id="72f0b-307">The TPL has several new public types that are useful in both parallel and sequential scenarios.</span></span> <span data-ttu-id="72f0b-308">Fra questi sono incluse varie classi di raccolte thread-safe, veloci e scalabili nello spazio dei nomi <xref:System.Collections.Concurrent?displayProperty=nameWithType> nonché molti nuovi tipi di sincronizzazione, ad esempio <xref:System.Threading.Semaphore?displayProperty=nameWithType> e <xref:System.Threading.ManualResetEventSlim?displayProperty=nameWithType> che sono più efficienti dei relativi predecessori per tipi specifici di carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="72f0b-308">These include several thread-safe, fast and scalable collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace, and several new synchronization types, for example, <xref:System.Threading.Semaphore?displayProperty=nameWithType> and <xref:System.Threading.ManualResetEventSlim?displayProperty=nameWithType>, which are more efficient than their predecessors for specific kinds of workloads.</span></span> <span data-ttu-id="72f0b-309">Altri nuovi tipi di .NET Framework 4, ad esempio <xref:System.Threading.Barrier?displayProperty=nameWithType> e <xref:System.Threading.SpinLock?displayProperty=nameWithType>, forniscono funzionalità non disponibili nelle versioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="72f0b-309">Other new types in the .NET Framework 4, for example, <xref:System.Threading.Barrier?displayProperty=nameWithType> and <xref:System.Threading.SpinLock?displayProperty=nameWithType>, provide functionality that was not available in earlier releases.</span></span> <span data-ttu-id="72f0b-310">Per ulteriori informazioni, vedere [Strutture di dati per la programmazione in parallelo](data-structures-for-parallel-programming.md).</span><span class="sxs-lookup"><span data-stu-id="72f0b-310">For more information, see [Data Structures for Parallel Programming](data-structures-for-parallel-programming.md).</span></span>

## <a name="custom-task-types"></a><span data-ttu-id="72f0b-311">Tipi di attività personalizzati</span><span class="sxs-lookup"><span data-stu-id="72f0b-311">Custom task types</span></span>

<span data-ttu-id="72f0b-312">È consigliabile non ereditare da <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> o <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-312">We recommend that you do not inherit from <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> or <xref:System.Threading.Tasks.Task%601?displayProperty=nameWithType>.</span></span> <span data-ttu-id="72f0b-313">È invece consigliabile usare la proprietà <xref:System.Threading.Tasks.Task.AsyncState%2A> per associare i dati o lo stato aggiuntivi a un oggetto <xref:System.Threading.Tasks.Task> o <xref:System.Threading.Tasks.Task%601>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-313">Instead, we recommend that you use the <xref:System.Threading.Tasks.Task.AsyncState%2A> property to associate additional data or state with a <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601> object.</span></span> <span data-ttu-id="72f0b-314">È anche possibile usare i metodi di estensione per estendere la funzionalità delle classi <xref:System.Threading.Tasks.Task> e <xref:System.Threading.Tasks.Task%601>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-314">You can also use extension methods to extend the functionality of the <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> classes.</span></span> <span data-ttu-id="72f0b-315">Per altre informazioni sui metodi di estensione, vedere [Metodi di estensione](../../csharp/programming-guide/classes-and-structs/extension-methods.md) e [Metodi di estensione](../../visual-basic/programming-guide/language-features/procedures/extension-methods.md).</span><span class="sxs-lookup"><span data-stu-id="72f0b-315">For more information about extension methods, see [Extension Methods](../../csharp/programming-guide/classes-and-structs/extension-methods.md) and [Extension Methods](../../visual-basic/programming-guide/language-features/procedures/extension-methods.md).</span></span>

<span data-ttu-id="72f0b-316">Se è necessario ereditare da <xref:System.Threading.Tasks.Task> o <xref:System.Threading.Tasks.Task%601> , non è possibile usare o <xref:System.Threading.Tasks.Task.Run%2A> le <xref:System.Threading.Tasks.TaskFactory?displayProperty=nameWithType> classi, o <xref:System.Threading.Tasks.TaskFactory%601?displayProperty=nameWithType> <xref:System.Threading.Tasks.TaskCompletionSource%601?displayProperty=nameWithType> per creare istanze del tipo di attività personalizzato perché questi meccanismi creano solo <xref:System.Threading.Tasks.Task> <xref:System.Threading.Tasks.Task%601> oggetti e.</span><span class="sxs-lookup"><span data-stu-id="72f0b-316">If you must inherit from <xref:System.Threading.Tasks.Task> or <xref:System.Threading.Tasks.Task%601>, you cannot use <xref:System.Threading.Tasks.Task.Run%2A>, or the <xref:System.Threading.Tasks.TaskFactory?displayProperty=nameWithType>, <xref:System.Threading.Tasks.TaskFactory%601?displayProperty=nameWithType>, or <xref:System.Threading.Tasks.TaskCompletionSource%601?displayProperty=nameWithType> classes to create instances of your custom task type because these mechanisms create only <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> objects.</span></span> <span data-ttu-id="72f0b-317">Non è inoltre possibile utilizzare i meccanismi di continuazione dell'attività forniti da <xref:System.Threading.Tasks.Task>, <xref:System.Threading.Tasks.Task%601><xref:System.Threading.Tasks.TaskFactory> e <xref:System.Threading.Tasks.TaskFactory%601> per creare istanze del tipo di attività personalizzato poiché anche questi meccanismi creano solo oggetti <xref:System.Threading.Tasks.Task> e <xref:System.Threading.Tasks.Task%601>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-317">In addition, you cannot use the task continuation mechanisms that are provided by <xref:System.Threading.Tasks.Task>, <xref:System.Threading.Tasks.Task%601>, <xref:System.Threading.Tasks.TaskFactory>, and  <xref:System.Threading.Tasks.TaskFactory%601> to create instances of your custom task type because these mechanisms also create only <xref:System.Threading.Tasks.Task> and  <xref:System.Threading.Tasks.Task%601> objects.</span></span>

## <a name="related-topics"></a><span data-ttu-id="72f0b-318">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="72f0b-318">Related topics</span></span>

|<span data-ttu-id="72f0b-319">Titolo</span><span class="sxs-lookup"><span data-stu-id="72f0b-319">Title</span></span>|<span data-ttu-id="72f0b-320">Descrizione</span><span class="sxs-lookup"><span data-stu-id="72f0b-320">Description</span></span>|
|-|-|
|[<span data-ttu-id="72f0b-321">Concatenamento di attività tramite attività di continuazione</span><span class="sxs-lookup"><span data-stu-id="72f0b-321">Chaining Tasks by Using Continuation Tasks</span></span>](chaining-tasks-by-using-continuation-tasks.md)|<span data-ttu-id="72f0b-322">Viene descritto il funzionamento delle continuazioni.</span><span class="sxs-lookup"><span data-stu-id="72f0b-322">Describes how continuations work.</span></span>|
|[<span data-ttu-id="72f0b-323">Attività figlio connesse e disconnesse</span><span class="sxs-lookup"><span data-stu-id="72f0b-323">Attached and Detached Child Tasks</span></span>](attached-and-detached-child-tasks.md)|<span data-ttu-id="72f0b-324">Viene descritta la differenza tra attività figlio collegate e scollegate.</span><span class="sxs-lookup"><span data-stu-id="72f0b-324">Describes the difference between attached and detached child tasks.</span></span>|
|[<span data-ttu-id="72f0b-325">Annullamento delle attività</span><span class="sxs-lookup"><span data-stu-id="72f0b-325">Task Cancellation</span></span>](task-cancellation.md)|<span data-ttu-id="72f0b-326">Viene descritto il supporto dell'annullamento, incorporato nell'oggetto <xref:System.Threading.Tasks.Task>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-326">Describes the cancellation support that is built into the <xref:System.Threading.Tasks.Task> object.</span></span>|
|[<span data-ttu-id="72f0b-327">Gestione delle eccezioni</span><span class="sxs-lookup"><span data-stu-id="72f0b-327">Exception Handling</span></span>](exception-handling-task-parallel-library.md)|<span data-ttu-id="72f0b-328">Viene descritto come vengono gestite le eccezioni su thread simultanei.</span><span class="sxs-lookup"><span data-stu-id="72f0b-328">Describes how exceptions on concurrent threads are handled.</span></span>|
|[<span data-ttu-id="72f0b-329">Procedura: utilizzare Parallel. Invoke per eseguire operazioni in parallelo</span><span class="sxs-lookup"><span data-stu-id="72f0b-329">How to: Use Parallel.Invoke to Execute Parallel Operations</span></span>](how-to-use-parallel-invoke-to-execute-parallel-operations.md)|<span data-ttu-id="72f0b-330">Viene descritto come usare <xref:System.Threading.Tasks.Parallel.Invoke%2A>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-330">Describes how to use <xref:System.Threading.Tasks.Parallel.Invoke%2A>.</span></span>|
|[<span data-ttu-id="72f0b-331">Procedura: Restituire un valore da un'attività</span><span class="sxs-lookup"><span data-stu-id="72f0b-331">How to: Return a Value from a Task</span></span>](how-to-return-a-value-from-a-task.md)|<span data-ttu-id="72f0b-332">Viene descritto come restituire valori dalle attività.</span><span class="sxs-lookup"><span data-stu-id="72f0b-332">Describes how to return values from tasks.</span></span>|
|[<span data-ttu-id="72f0b-333">Procedura: Annullare un'attività e i relativi figli</span><span class="sxs-lookup"><span data-stu-id="72f0b-333">How to: Cancel a Task and Its Children</span></span>](how-to-cancel-a-task-and-its-children.md)|<span data-ttu-id="72f0b-334">Viene descritto come annullare le attività.</span><span class="sxs-lookup"><span data-stu-id="72f0b-334">Describes how to cancel tasks.</span></span>|
|[<span data-ttu-id="72f0b-335">Procedura: creare attività precalcolate</span><span class="sxs-lookup"><span data-stu-id="72f0b-335">How to: Create Pre-Computed Tasks</span></span>](how-to-create-pre-computed-tasks.md)|<span data-ttu-id="72f0b-336">Viene descritto come utilizzare il metodo <xref:System.Threading.Tasks.Task.FromResult%2A?displayProperty=nameWithType> per recuperare i risultati delle operazioni di download asincrone contenuti in una cache.</span><span class="sxs-lookup"><span data-stu-id="72f0b-336">Describes how to use the <xref:System.Threading.Tasks.Task.FromResult%2A?displayProperty=nameWithType> method to retrieve the results of asynchronous download operations that are held in a cache.</span></span>|
|[<span data-ttu-id="72f0b-337">Procedura: Attraversare un albero binario con attività parallele</span><span class="sxs-lookup"><span data-stu-id="72f0b-337">How to: Traverse a Binary Tree with Parallel Tasks</span></span>](how-to-traverse-a-binary-tree-with-parallel-tasks.md)|<span data-ttu-id="72f0b-338">Viene descritto come usare le attività per attraversare un albero binario.</span><span class="sxs-lookup"><span data-stu-id="72f0b-338">Describes how to use tasks to traverse a binary tree.</span></span>|
|[<span data-ttu-id="72f0b-339">Procedura: Annullare il wrapping di un'attività annidata</span><span class="sxs-lookup"><span data-stu-id="72f0b-339">How to: Unwrap a Nested Task</span></span>](how-to-unwrap-a-nested-task.md)|<span data-ttu-id="72f0b-340">Viene illustrato come usare il metodo di estensione <xref:System.Threading.Tasks.TaskExtensions.Unwrap%2A>.</span><span class="sxs-lookup"><span data-stu-id="72f0b-340">Demonstrates how to use the <xref:System.Threading.Tasks.TaskExtensions.Unwrap%2A> extension method.</span></span>|
|[<span data-ttu-id="72f0b-341">Parallelismo dei dati</span><span class="sxs-lookup"><span data-stu-id="72f0b-341">Data Parallelism</span></span>](data-parallelism-task-parallel-library.md)|<span data-ttu-id="72f0b-342">Viene descritto come utilizzare <xref:System.Threading.Tasks.Parallel.For%2A> e <xref:System.Threading.Tasks.Parallel.ForEach%2A> per creare cicli paralleli su dati.</span><span class="sxs-lookup"><span data-stu-id="72f0b-342">Describes how to use <xref:System.Threading.Tasks.Parallel.For%2A> and <xref:System.Threading.Tasks.Parallel.ForEach%2A> to create parallel loops over data.</span></span>|
|[<span data-ttu-id="72f0b-343">Programmazione parallela</span><span class="sxs-lookup"><span data-stu-id="72f0b-343">Parallel Programming</span></span>](index.md)|<span data-ttu-id="72f0b-344">Nodo di livello principale per la programmazione parallela di .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="72f0b-344">Top level node for .NET Framework parallel programming.</span></span>|

## <a name="see-also"></a><span data-ttu-id="72f0b-345">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="72f0b-345">See also</span></span>

- [<span data-ttu-id="72f0b-346">Programmazione parallela</span><span class="sxs-lookup"><span data-stu-id="72f0b-346">Parallel Programming</span></span>](index.md)
- [<span data-ttu-id="72f0b-347">Esempi per la programmazione parallela con .NET Core & .NET Standard</span><span class="sxs-lookup"><span data-stu-id="72f0b-347">Samples for Parallel Programming with the .NET Core & .NET Standard</span></span>](/samples/browse/?products=dotnet-core%2Cdotnet-standard&term=parallel)
