---
title: Modello di progettazione observer
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- IObserver(Of T) interface
- IObservable<T> interface
- IObserver<T> interface
- IObservable(Of T) interface
- observer design pattern [.NET Framework]
ms.assetid: 3680171f-f522-453c-aa4a-54f755a78f88
ms.openlocfilehash: 5794cd1ec9b63a6e151b35c28e09e29f86dcfac6
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/02/2020
ms.locfileid: "84291266"
---
# <a name="observer-design-pattern"></a><span data-ttu-id="c58e8-102">Modello di progettazione observer</span><span class="sxs-lookup"><span data-stu-id="c58e8-102">Observer Design Pattern</span></span>

<span data-ttu-id="c58e8-103">Lo schema progettuale osservatore consente a un sottoscrittore di effettuare la registrazione con e ricevere notifiche da un provider.</span><span class="sxs-lookup"><span data-stu-id="c58e8-103">The observer design pattern enables a subscriber to register with and receive notifications from a provider.</span></span> <span data-ttu-id="c58e8-104">È appropriato per qualsiasi scenario che richieda la notifica basata su push.</span><span class="sxs-lookup"><span data-stu-id="c58e8-104">It is suitable for any scenario that requires push-based notification.</span></span> <span data-ttu-id="c58e8-105">Lo schema definisce un *provider* (anche noto come *oggetto* o *osservabile*) e zero, uno o più *osservatori*.</span><span class="sxs-lookup"><span data-stu-id="c58e8-105">The pattern defines a *provider* (also known as a *subject* or an *observable*) and zero, one, or more *observers*.</span></span> <span data-ttu-id="c58e8-106">Gli osservatori effettuano la registrazione con il provider e ogni volta che si verifica una condizione, un evento o un cambiamento di stato predefinito, il provider invia automaticamente una notifica a tutti gli osservatori chiamando uno dei relativi metodi.</span><span class="sxs-lookup"><span data-stu-id="c58e8-106">Observers register with the provider, and whenever a predefined condition, event, or state change occurs, the provider automatically notifies all observers by calling one of their methods.</span></span> <span data-ttu-id="c58e8-107">In questa chiamata al metodo, il provider può anche fornire informazioni sullo stato corrente degli osservatori.</span><span class="sxs-lookup"><span data-stu-id="c58e8-107">In this method call, the provider can also provide current state information to observers.</span></span> <span data-ttu-id="c58e8-108">In .NET Framework, lo schema progettuale osservatore viene applicato implementando le interfacce generiche <xref:System.IObservable%601?displayProperty=nameWithType> e <xref:System.IObserver%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="c58e8-108">In the .NET Framework, the observer design pattern is applied by implementing the generic <xref:System.IObservable%601?displayProperty=nameWithType> and <xref:System.IObserver%601?displayProperty=nameWithType> interfaces.</span></span> <span data-ttu-id="c58e8-109">Il parametro di tipo generico rappresenta il tipo che fornisce le informazioni di notifica.</span><span class="sxs-lookup"><span data-stu-id="c58e8-109">The generic type parameter represents the type that provides notification information.</span></span>

## <a name="applying-the-pattern"></a><span data-ttu-id="c58e8-110">Applicazione dello schema</span><span class="sxs-lookup"><span data-stu-id="c58e8-110">Applying the Pattern</span></span>

<span data-ttu-id="c58e8-111">Lo schema progettuale osservatore è appropriato per le notifiche distribuite basate su push, poiché supporta una netta separazione tra due diversi componenti o livelli dell'applicazione, ad esempio un livello di origine dati (logica di business) e un livello di interfaccia utente (visualizzazione).</span><span class="sxs-lookup"><span data-stu-id="c58e8-111">The observer design pattern is suitable for distributed push-based notifications, because it supports a clean separation between two different components or application layers, such as a data source (business logic) layer and a user interface (display) layer.</span></span> <span data-ttu-id="c58e8-112">Lo schema può essere implementato ogni volta che un provider usa callback per fornire ai client informazioni aggiornate.</span><span class="sxs-lookup"><span data-stu-id="c58e8-112">The pattern can be implemented whenever a provider uses callbacks to supply its clients with current information.</span></span>

<span data-ttu-id="c58e8-113">Per implementare lo schema è necessario fornire gli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="c58e8-113">Implementing the pattern requires that you provide the following:</span></span>

- <span data-ttu-id="c58e8-114">Un provider o oggetto, che corrisponde all'oggetto che invia le notifiche agli osservatori.</span><span class="sxs-lookup"><span data-stu-id="c58e8-114">A provider or subject, which is the object that sends notifications to observers.</span></span> <span data-ttu-id="c58e8-115">Un provider è una classe o una struttura che implementa l'interfaccia <xref:System.IObservable%601>.</span><span class="sxs-lookup"><span data-stu-id="c58e8-115">A provider is a class or structure that implements the <xref:System.IObservable%601> interface.</span></span> <span data-ttu-id="c58e8-116">Il provider deve implementare un singolo metodo, <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType>, che viene chiamato dagli osservatori che desiderano ricevere notifiche dal provider.</span><span class="sxs-lookup"><span data-stu-id="c58e8-116">The provider must implement a single method, <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType>, which is called by observers that wish to receive notifications from the provider.</span></span>

- <span data-ttu-id="c58e8-117">Un osservatore, che è un oggetto che riceve le notifiche da un provider.</span><span class="sxs-lookup"><span data-stu-id="c58e8-117">An observer, which is an object that receives notifications from a provider.</span></span> <span data-ttu-id="c58e8-118">Un osservatore è una classe o una struttura che implementa l'interfaccia <xref:System.IObserver%601>.</span><span class="sxs-lookup"><span data-stu-id="c58e8-118">An observer is a class or structure that implements the <xref:System.IObserver%601> interface.</span></span> <span data-ttu-id="c58e8-119">L'osservatore deve implementare tre metodi, che vengono tutti chiamati dal provider:</span><span class="sxs-lookup"><span data-stu-id="c58e8-119">The observer must implement three methods, all of which are called by the provider:</span></span>

  - <span data-ttu-id="c58e8-120"><xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType>, che fornisce all'osservatore informazioni nuove o correnti.</span><span class="sxs-lookup"><span data-stu-id="c58e8-120"><xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType>, which supplies the observer with new or current information.</span></span>

  - <span data-ttu-id="c58e8-121"><xref:System.IObserver%601.OnError%2A?displayProperty=nameWithType>, che informa l'osservatore che si è verificato un errore.</span><span class="sxs-lookup"><span data-stu-id="c58e8-121"><xref:System.IObserver%601.OnError%2A?displayProperty=nameWithType>, which informs the observer that an error has occurred.</span></span>

  - <span data-ttu-id="c58e8-122"><xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType>, che indica che il provider ha completato l'invio di notifiche.</span><span class="sxs-lookup"><span data-stu-id="c58e8-122"><xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType>, which indicates that the provider has finished sending notifications.</span></span>

- <span data-ttu-id="c58e8-123">Un meccanismo che consenta al provider di tenere traccia degli osservatori.</span><span class="sxs-lookup"><span data-stu-id="c58e8-123">A mechanism that allows the provider to keep track of observers.</span></span> <span data-ttu-id="c58e8-124">In genere, il provider usa un oggetto contenitore, ad esempio un oggetto <xref:System.Collections.Generic.List%601?displayProperty=nameWithType>, per contenere i riferimenti alle implementazioni di <xref:System.IObserver%601> che hanno sottoscritto le notifiche.</span><span class="sxs-lookup"><span data-stu-id="c58e8-124">Typically, the provider uses a container object, such as a <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> object, to hold references to the <xref:System.IObserver%601> implementations that have subscribed to notifications.</span></span> <span data-ttu-id="c58e8-125">Usando un contenitore di archiviazione a questo scopo, si consente al provider di gestire da zero a un numero illimitato di osservatori.</span><span class="sxs-lookup"><span data-stu-id="c58e8-125">Using a storage container for this purpose enables the provider to handle zero to an unlimited number of observers.</span></span> <span data-ttu-id="c58e8-126">L'ordine in cui gli osservatori ricevono le notifiche non è definito. Il provider può usare qualsiasi metodo per determinare l'ordine.</span><span class="sxs-lookup"><span data-stu-id="c58e8-126">The order in which observers receive notifications is not defined; the provider is free to use any method to determine the order.</span></span>

- <span data-ttu-id="c58e8-127">Un'implementazione di <xref:System.IDisposable> che consenta al provider di rimuovere gli osservatori quando la notifica è completa.</span><span class="sxs-lookup"><span data-stu-id="c58e8-127">An <xref:System.IDisposable> implementation that enables the provider to remove observers when notification is complete.</span></span> <span data-ttu-id="c58e8-128">Gli osservatori ricevono un riferimento all'implementazione di <xref:System.IDisposable> dal metodo <xref:System.IObservable%601.Subscribe%2A>, pertanto possono anche chiamare il metodo <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> per annullare la sottoscrizione prima che il provider abbia completato l'invio di notifiche.</span><span class="sxs-lookup"><span data-stu-id="c58e8-128">Observers receive a reference to the <xref:System.IDisposable> implementation from the <xref:System.IObservable%601.Subscribe%2A> method, so they can also call the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> method to unsubscribe before the provider has finished sending notifications.</span></span>

- <span data-ttu-id="c58e8-129">Un oggetto contenente i dati che il provider invia agli osservatori.</span><span class="sxs-lookup"><span data-stu-id="c58e8-129">An object that contains the data that the provider sends to its observers.</span></span> <span data-ttu-id="c58e8-130">Il tipo di questo oggetto corrisponde al parametro di tipo generico delle interfacce <xref:System.IObservable%601> e <xref:System.IObserver%601>.</span><span class="sxs-lookup"><span data-stu-id="c58e8-130">The type of this object corresponds to the generic type parameter of the <xref:System.IObservable%601> and <xref:System.IObserver%601> interfaces.</span></span> <span data-ttu-id="c58e8-131">Sebbene questo oggetto possa essere lo stesso dell'implementazione di <xref:System.IObservable%601>, in genere è un tipo distinto.</span><span class="sxs-lookup"><span data-stu-id="c58e8-131">Although this object can be the same as the <xref:System.IObservable%601> implementation, most commonly it is a separate type.</span></span>

> [!NOTE]
> <span data-ttu-id="c58e8-132">Oltre all'implementazione dello schema progettuale osservatore, potrebbe risultare interessante l'esplorazione delle librerie compilate usando le interfacce <xref:System.IObservable%601> e <xref:System.IObserver%601>.</span><span class="sxs-lookup"><span data-stu-id="c58e8-132">In addition to implementing the observer design pattern, you may be interested in exploring libraries that are built using the <xref:System.IObservable%601> and <xref:System.IObserver%601> interfaces.</span></span> <span data-ttu-id="c58e8-133">Ad esempio, le [estensioni Rx (Reactive Extensions) per .NET](https://docs.microsoft.com/previous-versions/dotnet/reactive-extensions/hh242985(v=vs.103)) sono costituite da un set di metodi di estensione e da operatori di sequenza standard LINQ per supportare la programmazione asincrona.</span><span class="sxs-lookup"><span data-stu-id="c58e8-133">For example, [Reactive Extensions for .NET (Rx)](https://docs.microsoft.com/previous-versions/dotnet/reactive-extensions/hh242985(v=vs.103)) consist of a set of extension methods and LINQ standard sequence operators to support asynchronous programming.</span></span>

## <a name="implementing-the-pattern"></a><span data-ttu-id="c58e8-134">Implementazione dello schema</span><span class="sxs-lookup"><span data-stu-id="c58e8-134">Implementing the Pattern</span></span>

<span data-ttu-id="c58e8-135">Nell'esempio seguente, lo schema progettuale osservatore viene usato per implementare un sistema di informazioni per il ritiro dei bagagli in aeroporto.</span><span class="sxs-lookup"><span data-stu-id="c58e8-135">The following example uses the observer design pattern to implement an airport baggage claim information system.</span></span> <span data-ttu-id="c58e8-136">Una classe `BaggageInfo` fornisce informazioni sui voli in arrivo e sui nastri in cui possono essere ritirati i bagagli per ogni volo,</span><span class="sxs-lookup"><span data-stu-id="c58e8-136">A `BaggageInfo` class provides information about arriving flights and the carousels where baggage from each flight is available for pickup.</span></span> <span data-ttu-id="c58e8-137">come illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="c58e8-137">It is shown in the following example.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#1)]
[!code-vb[Conceptual.ObserverDesignPattern#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#1)]

<span data-ttu-id="c58e8-138">Una classe `BaggageHandler` è responsabile della ricezione di informazioni sui voli in arrivo e sui nastri per il ritiro dei bagagli.</span><span class="sxs-lookup"><span data-stu-id="c58e8-138">A `BaggageHandler` class is responsible for receiving information about arriving flights and baggage claim carousels.</span></span> <span data-ttu-id="c58e8-139">Internamente, gestisce due raccolte:</span><span class="sxs-lookup"><span data-stu-id="c58e8-139">Internally, it maintains two collections:</span></span>

- <span data-ttu-id="c58e8-140">`observers`: una raccolta di client che riceveranno informazioni aggiornate.</span><span class="sxs-lookup"><span data-stu-id="c58e8-140">`observers` - A collection of clients that will receive updated information.</span></span>

- <span data-ttu-id="c58e8-141">`flights`: una raccolta di voli e dei nastri ad essi assegnati.</span><span class="sxs-lookup"><span data-stu-id="c58e8-141">`flights` - A collection of flights and their assigned carousels.</span></span>

<span data-ttu-id="c58e8-142">Entrambe le raccolte sono rappresentate da oggetti <xref:System.Collections.Generic.List%601> generici di cui viene creata un'istanza nel costruttore della classe `BaggageHandler`.</span><span class="sxs-lookup"><span data-stu-id="c58e8-142">Both collections are represented by generic <xref:System.Collections.Generic.List%601> objects that are instantiated in the `BaggageHandler` class constructor.</span></span> <span data-ttu-id="c58e8-143">Il codice sorgente per la classe `BaggageHandler` è illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="c58e8-143">The source code for the `BaggageHandler` class is shown in the following example.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#2)]
[!code-vb[Conceptual.ObserverDesignPattern#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#2)]

<span data-ttu-id="c58e8-144">I client che desiderano ricevere informazioni aggiornate chiamano il metodo `BaggageHandler.Subscribe`.</span><span class="sxs-lookup"><span data-stu-id="c58e8-144">Clients that wish to receive updated information call the `BaggageHandler.Subscribe` method.</span></span> <span data-ttu-id="c58e8-145">Se il client in precedenza non ha sottoscritto le notifiche, un riferimento all'implementazione di <xref:System.IObserver%601> del client viene aggiunto alla raccolta `observers`.</span><span class="sxs-lookup"><span data-stu-id="c58e8-145">If the client has not previously subscribed to notifications, a reference to the client's <xref:System.IObserver%601> implementation is added to the `observers` collection.</span></span>

<span data-ttu-id="c58e8-146">Il metodo di overload `BaggageHandler.BaggageStatus` può essere chiamato per indicare che i bagagli di un volo stanno per essere scaricati o che lo scaricamento è terminato.</span><span class="sxs-lookup"><span data-stu-id="c58e8-146">The overloaded `BaggageHandler.BaggageStatus` method can be called to indicate that baggage from a flight either is being unloaded or is no longer being unloaded.</span></span> <span data-ttu-id="c58e8-147">Nel primo caso, al metodo vengono passati un numero di volo, l'aeroporto di provenienza e il nastro in cui vengono scaricati i bagagli.</span><span class="sxs-lookup"><span data-stu-id="c58e8-147">In the first case, the method is passed a flight number, the airport from which the flight originated, and the carousel where baggage is being unloaded.</span></span> <span data-ttu-id="c58e8-148">Nel secondo caso, al metodo viene passato solo un numero di volo.</span><span class="sxs-lookup"><span data-stu-id="c58e8-148">In the second case, the method is passed only a flight number.</span></span> <span data-ttu-id="c58e8-149">Per i bagagli scaricati, il metodo verifica se le informazioni di `BaggageInfo` passate al metodo sono presenti nella raccolta `flights`.</span><span class="sxs-lookup"><span data-stu-id="c58e8-149">For baggage that is being unloaded, the method checks whether the `BaggageInfo` information passed to the method exists in the `flights` collection.</span></span> <span data-ttu-id="c58e8-150">Se non lo sono, il metodo aggiunge le informazioni e chiama il metodo `OnNext` di ogni osservatore.</span><span class="sxs-lookup"><span data-stu-id="c58e8-150">If it does not, the method adds the information and calls each observer's `OnNext` method.</span></span> <span data-ttu-id="c58e8-151">Per i voli per cui è terminato lo scaricamento dei bagagli, il metodo controlla se le informazioni su tale volo sono archiviate nella raccolta `flights`.</span><span class="sxs-lookup"><span data-stu-id="c58e8-151">For flights whose baggage is no longer being unloaded, the method checks whether information on that flight is stored in the `flights` collection.</span></span> <span data-ttu-id="c58e8-152">In caso affermativo, il metodo chiama il metodo `OnNext` di ogni osservatore e rimuove l'oggetto `BaggageInfo` dalla raccolta `flights`.</span><span class="sxs-lookup"><span data-stu-id="c58e8-152">If it is, the method calls each observer's `OnNext` method and removes the `BaggageInfo` object from the `flights` collection.</span></span>

<span data-ttu-id="c58e8-153">Quando l'ultimo volo del giorno è atterrato e i relativi bagagli sono stati gestiti, viene chiamato il metodo `BaggageHandler.LastBaggageClaimed`.</span><span class="sxs-lookup"><span data-stu-id="c58e8-153">When the last flight of the day has landed and its baggage has been processed, the `BaggageHandler.LastBaggageClaimed` method is called.</span></span> <span data-ttu-id="c58e8-154">Questo metodo chiama il metodo `OnCompleted` di ogni osservatore per indicare che tutte le notifiche sono state completate, quindi cancella la raccolta `observers`.</span><span class="sxs-lookup"><span data-stu-id="c58e8-154">This method calls each observer's `OnCompleted` method to indicate that all notifications have completed, and then clears the `observers` collection.</span></span>

<span data-ttu-id="c58e8-155">Il metodo <xref:System.IObservable%601.Subscribe%2A> del provider restituisce un'implementazione di <xref:System.IDisposable> che consente agli osservatori di interrompere la ricezione delle notifiche prima che venga chiamato il metodo <xref:System.IObserver%601.OnCompleted%2A>.</span><span class="sxs-lookup"><span data-stu-id="c58e8-155">The provider's <xref:System.IObservable%601.Subscribe%2A> method returns an <xref:System.IDisposable> implementation that enables observers to stop receiving notifications before the <xref:System.IObserver%601.OnCompleted%2A> method is called.</span></span> <span data-ttu-id="c58e8-156">Il codice sorgente per la classe `Unsubscriber(Of BaggageInfo)` è illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="c58e8-156">The source code for this `Unsubscriber(Of BaggageInfo)` class is shown in the following example.</span></span> <span data-ttu-id="c58e8-157">Quando viene creata un'istanza della classe nel metodo `BaggageHandler.Subscribe`, vengono passati un riferimento alla raccolta `observers` e un riferimento all'osservatore che viene aggiunto alla raccolta.</span><span class="sxs-lookup"><span data-stu-id="c58e8-157">When the class is instantiated in the `BaggageHandler.Subscribe` method, it is passed a reference to the `observers` collection and a reference to the observer that is added to the collection.</span></span> <span data-ttu-id="c58e8-158">Questi riferimenti sono assegnati a variabili locali.</span><span class="sxs-lookup"><span data-stu-id="c58e8-158">These references are assigned to local variables.</span></span> <span data-ttu-id="c58e8-159">Quando il metodo `Dispose` dell'oggetto viene chiamato, controlla se l'osservatore è ancora presente nella raccolta `observers` e, in caso affermativo, lo rimuove.</span><span class="sxs-lookup"><span data-stu-id="c58e8-159">When the object's `Dispose` method is called, it checks whether the observer still exists in the `observers` collection, and, if it does, removes the observer.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#3)]
[!code-vb[Conceptual.ObserverDesignPattern#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#3)]

<span data-ttu-id="c58e8-160">Nell'esempio seguente viene fornita un'implementazione di <xref:System.IObserver%601> denominata `ArrivalsMonitor`, una classe base che fornisce informazioni relative al ritiro dei bagagli.</span><span class="sxs-lookup"><span data-stu-id="c58e8-160">The following example provides an <xref:System.IObserver%601> implementation named `ArrivalsMonitor`, which is a base class that displays baggage claim information.</span></span> <span data-ttu-id="c58e8-161">Le informazioni vengono visualizzate in ordine alfabetico, in base al nome della città di provenienza.</span><span class="sxs-lookup"><span data-stu-id="c58e8-161">The information is displayed alphabetically, by the name of the originating city.</span></span> <span data-ttu-id="c58e8-162">I metodi `ArrivalsMonitor` sono contrassegnati come `overridable` (in Visual Basic) o `virtual` (in C#), in modo che possano essere sottoposti a override da una classe derivata.</span><span class="sxs-lookup"><span data-stu-id="c58e8-162">The methods of `ArrivalsMonitor` are marked as `overridable` (in Visual Basic) or `virtual` (in C#), so they can all be overridden by a derived class.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/observer.cs#4)]
[!code-vb[Conceptual.ObserverDesignPattern#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/observer.vb#4)]

<span data-ttu-id="c58e8-163">La classe `ArrivalsMonitor` include i metodi `Subscribe` e `Unsubscribe`.</span><span class="sxs-lookup"><span data-stu-id="c58e8-163">The `ArrivalsMonitor` class includes the `Subscribe` and `Unsubscribe` methods.</span></span> <span data-ttu-id="c58e8-164">Il metodo `Subscribe` consente alla classe di salvare l'implementazione di <xref:System.IDisposable> restituita dalla chiamata a <xref:System.IObservable%601.Subscribe%2A> in una variabile privata.</span><span class="sxs-lookup"><span data-stu-id="c58e8-164">The `Subscribe` method enables the class to save the <xref:System.IDisposable> implementation returned by the call to <xref:System.IObservable%601.Subscribe%2A> to a private variable.</span></span> <span data-ttu-id="c58e8-165">Il metodo `Unsubscribe` consente alla classe di annullare la sottoscrizione delle notifiche chiamando l'implementazione di <xref:System.IDisposable.Dispose%2A> del provider.</span><span class="sxs-lookup"><span data-stu-id="c58e8-165">The `Unsubscribe` method enables the class to unsubscribe from notifications by calling the provider's <xref:System.IDisposable.Dispose%2A> implementation.</span></span> <span data-ttu-id="c58e8-166">`ArrivalsMonitor` fornisce anche le implementazioni dei metodi <xref:System.IObserver%601.OnNext%2A>, <xref:System.IObserver%601.OnError%2A> e <xref:System.IObserver%601.OnCompleted%2A>.</span><span class="sxs-lookup"><span data-stu-id="c58e8-166">`ArrivalsMonitor` also provides implementations of the <xref:System.IObserver%601.OnNext%2A>, <xref:System.IObserver%601.OnError%2A>, and <xref:System.IObserver%601.OnCompleted%2A> methods.</span></span> <span data-ttu-id="c58e8-167">Solo l'implementazione di <xref:System.IObserver%601.OnNext%2A> contiene una quantità significativa di codice.</span><span class="sxs-lookup"><span data-stu-id="c58e8-167">Only the <xref:System.IObserver%601.OnNext%2A> implementation contains a significant amount of code.</span></span> <span data-ttu-id="c58e8-168">Il metodo opera con un oggetto <xref:System.Collections.Generic.List%601> privato, ordinato e generico che gestisce le informazioni sugli aeroporti di origine per i voli in arrivo e sui nastri su cui sono disponibili i bagagli.</span><span class="sxs-lookup"><span data-stu-id="c58e8-168">The method works with a private, sorted, generic <xref:System.Collections.Generic.List%601> object that maintains information about the airports of origin for arriving flights and the carousels on which their baggage is available.</span></span> <span data-ttu-id="c58e8-169">Se la classe `BaggageHandler` segnala un nuovo volo in arrivo, l'implementazione del metodo <xref:System.IObserver%601.OnNext%2A> aggiunge le informazioni relative al volo all'elenco.</span><span class="sxs-lookup"><span data-stu-id="c58e8-169">If the `BaggageHandler` class reports a new flight arrival, the <xref:System.IObserver%601.OnNext%2A> method implementation adds information about that flight to the list.</span></span> <span data-ttu-id="c58e8-170">Se la classe `BaggageHandler` segnala che i bagagli del volo sono stati scaricati, il metodo <xref:System.IObserver%601.OnNext%2A> rimuove il volo dall'elenco.</span><span class="sxs-lookup"><span data-stu-id="c58e8-170">If the `BaggageHandler` class reports that the flight's baggage has been unloaded, the <xref:System.IObserver%601.OnNext%2A> method removes that flight from the list.</span></span> <span data-ttu-id="c58e8-171">Ogni volta che viene apportata una modifica, l'elenco viene ordinato e visualizzato nella console.</span><span class="sxs-lookup"><span data-stu-id="c58e8-171">Whenever a change is made, the list is sorted and displayed to the console.</span></span>

<span data-ttu-id="c58e8-172">L'esempio seguente contiene il punto di ingresso dell'applicazione che crea un'istanza della classe `BaggageHandler`, nonché due istanze della classe `ArrivalsMonitor` e usa il metodo `BaggageHandler.BaggageStatus` per aggiungere e rimuovere informazioni sui voli in arrivo.</span><span class="sxs-lookup"><span data-stu-id="c58e8-172">The following example contains the application entry point that instantiates the `BaggageHandler` class as well as two instances of the `ArrivalsMonitor` class, and uses the `BaggageHandler.BaggageStatus` method to add and remove information about arriving flights.</span></span> <span data-ttu-id="c58e8-173">In ognuno dei casi, gli osservatori ricevono gli aggiornamenti e visualizzano correttamente le informazioni relative al ritiro dei bagagli.</span><span class="sxs-lookup"><span data-stu-id="c58e8-173">In each case, the observers receive updates and correctly display baggage claim information.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/program.cs#5)]
[!code-vb[Conceptual.ObserverDesignPattern#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/module1.vb#5)]

## <a name="related-topics"></a><span data-ttu-id="c58e8-174">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="c58e8-174">Related Topics</span></span>

|<span data-ttu-id="c58e8-175">Titolo</span><span class="sxs-lookup"><span data-stu-id="c58e8-175">Title</span></span>|<span data-ttu-id="c58e8-176">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c58e8-176">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="c58e8-177">Procedure consigliate per un modello di progettazione observer</span><span class="sxs-lookup"><span data-stu-id="c58e8-177">Observer Design Pattern Best Practices</span></span>](observer-design-pattern-best-practices.md)|<span data-ttu-id="c58e8-178">Descrive le procedure consigliate per lo sviluppo di applicazioni che implementano lo schema progettuale observer.</span><span class="sxs-lookup"><span data-stu-id="c58e8-178">Describes best practices to adopt when developing applications that implement the observer design pattern.</span></span>|
|[<span data-ttu-id="c58e8-179">Procedura: implementare un provider</span><span class="sxs-lookup"><span data-stu-id="c58e8-179">How to: Implement a Provider</span></span>](how-to-implement-a-provider.md)|<span data-ttu-id="c58e8-180">Fornisce un'implementazione dettagliata di un provider per un'applicazione di monitoraggio della temperatura.</span><span class="sxs-lookup"><span data-stu-id="c58e8-180">Provides a step-by-step implementation of a provider for a temperature monitoring application.</span></span>|
|[<span data-ttu-id="c58e8-181">Procedura: implementare un Observer</span><span class="sxs-lookup"><span data-stu-id="c58e8-181">How to: Implement an Observer</span></span>](how-to-implement-an-observer.md)|<span data-ttu-id="c58e8-182">Fornisce un'implementazione dettagliata di un osservatore per un'applicazione di monitoraggio della temperatura.</span><span class="sxs-lookup"><span data-stu-id="c58e8-182">Provides a step-by-step implementation of an observer for a temperature monitoring application.</span></span>|
