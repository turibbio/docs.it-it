---
title: Concetti e modello a oggetti di .NET Compiler Platform SDK
description: Questa panoramica include le informazioni di base necessarie per utilizzare in modo efficiente l'SDK del compilatore .NET. Vengono presentati i livelli dell'API, i tipi principali coinvolti e il modello a oggetti generale.
ms.date: 10/10/2017
ms.custom: mvc
ms.openlocfilehash: 529ce6fbdef22964251c8b22abbd5d8aadab633d
ms.sourcegitcommit: fff146ba3fd1762c8c432d95c8b877825ae536fc
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/08/2020
ms.locfileid: "82975940"
---
# <a name="understand-the-net-compiler-platform-sdk-model"></a><span data-ttu-id="40ddc-104">Informazioni sul modello di .NET Compiler Platform SDK</span><span class="sxs-lookup"><span data-stu-id="40ddc-104">Understand the .NET Compiler Platform SDK model</span></span>

<span data-ttu-id="40ddc-105">I compilatori elaborano il codice scritto seguendo regole strutturate spesso diverse dal modo in cui gli essere umani leggono e interpretano il codice.</span><span class="sxs-lookup"><span data-stu-id="40ddc-105">Compilers process the code you write following structured rules that often differ from the way humans read and understand code.</span></span> <span data-ttu-id="40ddc-106">Una conoscenza di base del modello usato dai compilatori è essenziale per comprendere le API usate durante la compilazione di strumenti basati su Roslyn.</span><span class="sxs-lookup"><span data-stu-id="40ddc-106">A basic understanding of the model used by compilers is essential to understanding the APIs you use when building Roslyn-based tools.</span></span>

## <a name="compiler-pipeline-functional-areas"></a><span data-ttu-id="40ddc-107">Aree funzionali della pipeline del compilatore</span><span class="sxs-lookup"><span data-stu-id="40ddc-107">Compiler pipeline functional areas</span></span>

<span data-ttu-id="40ddc-108">.NET Compiler Platform SDK espone l'analisi del codice dei compilatori C# e Visual Basic tramite un livello API che rispecchia una pipeline del compilatore tradizionale.</span><span class="sxs-lookup"><span data-stu-id="40ddc-108">The .NET Compiler Platform SDK exposes the C# and Visual Basic compilers' code analysis to you as a consumer by providing an API layer that mirrors a traditional compiler pipeline.</span></span>

![Passaggi della pipeline del compilatore per l'elaborazione del codice sorgente come codice oggetti](media/compiler-api-model/compiler-pipeline.png)

<span data-ttu-id="40ddc-110">Ogni fase della pipeline è un componente separato.</span><span class="sxs-lookup"><span data-stu-id="40ddc-110">Each phase of this pipeline is a separate component.</span></span> <span data-ttu-id="40ddc-111">Innanzitutto, la fase di analisi suddivide in token e analizza il testo di origine convertendolo in sintassi conforme alla grammatica del linguaggio.</span><span class="sxs-lookup"><span data-stu-id="40ddc-111">First, the parse phase tokenizes and parses source text into syntax that follows the language grammar.</span></span> <span data-ttu-id="40ddc-112">In secondo luogo, la fase di dichiarazione analizza l'origine e i metadati importati per formare simboli denominati.</span><span class="sxs-lookup"><span data-stu-id="40ddc-112">Second, the declaration phase analyzes source and imported metadata to form named symbols.</span></span> <span data-ttu-id="40ddc-113">La fase di associazione abbina poi gli identificatori nel codice ai simboli.</span><span class="sxs-lookup"><span data-stu-id="40ddc-113">Next, the bind phase matches identifiers in the code to symbols.</span></span> <span data-ttu-id="40ddc-114">La fase di creazione, infine, genera un assembly con tutte le informazioni raccolte dal compilatore.</span><span class="sxs-lookup"><span data-stu-id="40ddc-114">Finally, the emit phase emits an assembly with all the information built up by the compiler.</span></span>

![L'API della pipeline del compilatore consente l'accesso a ogni passaggio incluso nella pipeline](media/compiler-api-model/compiler-pipeline-api.png)

<span data-ttu-id="40ddc-116">In modo corrispondente a ciascuna di queste fasi, .NET Compiler Platform SDK espone un modello a oggetti che consente l'accesso alle informazioni in tale fase.</span><span class="sxs-lookup"><span data-stu-id="40ddc-116">Corresponding to each of those phases, the .NET Compiler Platform SDK exposes an object model that allows access to the information at that phase.</span></span> <span data-ttu-id="40ddc-117">La fase di analisi espone un albero della sintassi, la fase di dichiarazione espone una tabella di simboli gerarchici, la fase di associazione espone il risultato dell'analisi semantica del compilatore e la fase di emit è un'API che produce codici byte IL.</span><span class="sxs-lookup"><span data-stu-id="40ddc-117">The parsing phase exposes a syntax tree, the declaration phase exposes a hierarchical symbol table, the binding phase exposes the result of the compiler’s semantic analysis, and the emit phase is an API that produces IL byte codes.</span></span>

![Servizi di linguaggio disponibili dall'API del compilatore in ogni fase della pipeline del compilatore](media/compiler-api-model/compiler-pipeline-lang-svc.png)

<span data-ttu-id="40ddc-119">Ogni compilatore combina questi componenti come singola unità completa.</span><span class="sxs-lookup"><span data-stu-id="40ddc-119">Each compiler combines these components together as a single end-to-end whole.</span></span>

<span data-ttu-id="40ddc-120">Queste API sono le stesse usate da Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="40ddc-120">These APIs are the same ones used by Visual Studio.</span></span> <span data-ttu-id="40ddc-121">Ad esempio, le funzionalità per la struttura e la formattazione del codice usano gli alberi della sintassi, le funzionalità di Visualizzatore oggetti e navigazione usano la tabella dei simboli, refactoring e Vai a definizione usano il modello semantico e Modifica e continuazione usa tutti questi elementi, inclusa l'API Emit.</span><span class="sxs-lookup"><span data-stu-id="40ddc-121">For instance, the code outlining and formatting features use the syntax trees, the Object Browser and navigation features use the symbol table, refactorings and Go to Definition use the semantic model, and Edit and Continue uses all of these, including the Emit API.</span></span>

## <a name="api-layers"></a><span data-ttu-id="40ddc-122">Livelli delle API</span><span class="sxs-lookup"><span data-stu-id="40ddc-122">API layers</span></span>

<span data-ttu-id="40ddc-123">.NET Compiler Platform SDK è costituto da due livelli principali di API: le API del compilatore e le API delle aree di lavoro.</span><span class="sxs-lookup"><span data-stu-id="40ddc-123">The .NET compiler SDK consists of two main layers of APIs: compiler APIs and workspaces APIs.</span></span>

![Livelli delle API rappresentati dalle API della pipeline del compilatore](media/compiler-api-model/api-layers.png)

### <a name="compiler-apis"></a><span data-ttu-id="40ddc-125">API del compilatore</span><span class="sxs-lookup"><span data-stu-id="40ddc-125">Compiler APIs</span></span>

<span data-ttu-id="40ddc-126">Il livello del compilatore contiene i modelli a oggetti che corrispondono alle informazioni esposte in ogni fase della pipeline del compilatore, sia semantiche che sintattiche.</span><span class="sxs-lookup"><span data-stu-id="40ddc-126">The compiler layer contains the object models that correspond to information exposed at each phase of the compiler pipeline, both syntactic and semantic.</span></span> <span data-ttu-id="40ddc-127">Il livello del compilatore contiene anche uno snapshot non modificabile di una singola chiamata di un compilatore, inclusi riferimenti ad assembly, opzioni del compilatore e file del codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="40ddc-127">The compiler layer also contains an immutable snapshot of a single invocation of a compiler, including assembly references, compiler options, and source code files.</span></span> <span data-ttu-id="40ddc-128">Esistono due API distinte che rappresentano il linguaggio C# e il linguaggio Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="40ddc-128">There are two distinct APIs that represent the C# language and the Visual Basic language.</span></span> <span data-ttu-id="40ddc-129">Queste due API sono simili nella forma ma personalizzate su misura per offrire la massima fedeltà per ogni singolo linguaggio.</span><span class="sxs-lookup"><span data-stu-id="40ddc-129">These two APIs are similar in shape but tailored for high-fidelity to each individual language.</span></span> <span data-ttu-id="40ddc-130">Questo livello non ha dipendenze da componenti di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="40ddc-130">This layer has no dependencies on Visual Studio components.</span></span>

### <a name="diagnostic-apis"></a><span data-ttu-id="40ddc-131">API di diagnostica</span><span class="sxs-lookup"><span data-stu-id="40ddc-131">Diagnostic APIs</span></span>

<span data-ttu-id="40ddc-132">Come parte dell'analisi, il compilatore può produrre un set di dati diagnostici relativi a tutti gli elementi: sintassi, semantica, precisi errori di assegnazione, vari avvisi e dati diagnostici informativi.</span><span class="sxs-lookup"><span data-stu-id="40ddc-132">As part of its analysis the compiler may produce a set of diagnostics covering everything from syntax, semantic, and definite assignment errors to various warnings and informational diagnostics.</span></span> <span data-ttu-id="40ddc-133">Il livello dell'API del compilatore espone i dati diagnostici tramite un'API estensibile che consente di integrare analizzatori definiti dall'utente nel processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="40ddc-133">The Compiler API layer exposes diagnostics through an extensible API that allows user-defined analyzers to be plugged into the compilation process.</span></span> <span data-ttu-id="40ddc-134">Consente di produrre dati diagnostici definiti dall'utente, ad esempio quelli prodotti da strumenti come StyleCop o FxCop, insieme a quelli definiti dal compilatore.</span><span class="sxs-lookup"><span data-stu-id="40ddc-134">It allows user-defined diagnostics, such as those produced by tools like StyleCop or FxCop, to be produced alongside compiler-defined diagnostics.</span></span> <span data-ttu-id="40ddc-135">Questo metodo di produzione dei dati diagnostici ha il vantaggio di essere naturalmente integrabile con strumenti come MSBuild e Visual Studio, che dipendono dalla diagnostica per esperienze come l'arresto di una compilazione in base a criteri e la visualizzazione di linee a zigzag in tempo reale nell'editor con suggerimenti per la correzioni del codice.</span><span class="sxs-lookup"><span data-stu-id="40ddc-135">Producing diagnostics in this way has the benefit of integrating naturally with tools such as MSBuild and Visual Studio which depend on diagnostics for experiences such as halting a build based on policy and showing live squiggles in the editor and suggesting code fixes.</span></span>

### <a name="scripting-apis"></a><span data-ttu-id="40ddc-136">API di scripting</span><span class="sxs-lookup"><span data-stu-id="40ddc-136">Scripting APIs</span></span>

<span data-ttu-id="40ddc-137">Le API di hosting e scripting fanno parte del livello del compilatore.</span><span class="sxs-lookup"><span data-stu-id="40ddc-137">Hosting and scripting APIs are part of the compiler layer.</span></span> <span data-ttu-id="40ddc-138">È possibile usarle per eseguire frammenti di codice e accumulare un contesto di esecuzione di runtime.</span><span class="sxs-lookup"><span data-stu-id="40ddc-138">You can use them for executing code snippets and accumulating a runtime execution context.</span></span>
<span data-ttu-id="40ddc-139">Il ciclo Read–Eval–Print (REPL) interattivo di C# usa queste API.</span><span class="sxs-lookup"><span data-stu-id="40ddc-139">The C# interactive REPL (Read-Evaluate-Print Loop) uses these APIs.</span></span> <span data-ttu-id="40ddc-140">Il ciclo REPL consente di usare C# come linguaggio di scripting, eseguendo il codice in modo interattivo mentre lo si scrive.</span><span class="sxs-lookup"><span data-stu-id="40ddc-140">The REPL enables you to use C# as a scripting language, executing the code interactively as you write it.</span></span>

### <a name="workspaces-apis"></a><span data-ttu-id="40ddc-141">API delle aree di lavoro</span><span class="sxs-lookup"><span data-stu-id="40ddc-141">Workspaces APIs</span></span>

<span data-ttu-id="40ddc-142">Il livello delle aree di lavoro contiene l'API Workspace, ovvero il punto di partenza per eseguire l'analisi del codice e il refactoring su intere soluzioni.</span><span class="sxs-lookup"><span data-stu-id="40ddc-142">The Workspaces layer contains the Workspace API, which is the starting point for doing code analysis and refactoring over entire solutions.</span></span> <span data-ttu-id="40ddc-143">Consente di organizzare tutte le informazioni sui progetti in una soluzione in un unico modello a oggetti, offrendo accesso diretto ai modelli a oggetti del livello del compilatore senza la necessità di analizzare i file, configurare le opzioni o gestire le dipendenze da progetto a progetto.</span><span class="sxs-lookup"><span data-stu-id="40ddc-143">It assists you in organizing all the information about the projects in a solution into a single object model, offering you direct access to the compiler layer object models without needing to parse files, configure options, or manage project-to-project dependencies.</span></span>

<span data-ttu-id="40ddc-144">Inoltre, il livello delle aree di lavoro espone un set di API usate durante l'implementazione di strumenti di analisi del codice e refactoring che operano all'interno di un ambiente host come l'IDE di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="40ddc-144">In addition, the Workspaces layer surfaces a set of APIs used when implementing code analysis and refactoring tools that function within a host environment like the Visual Studio IDE.</span></span> <span data-ttu-id="40ddc-145">Sono esempi le API Trova tutti i riferimenti, Formattazione e Generazione codice.</span><span class="sxs-lookup"><span data-stu-id="40ddc-145">Examples include the Find All References, Formatting, and Code Generation APIs.</span></span>

<span data-ttu-id="40ddc-146">Questo livello non ha dipendenze da componenti di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="40ddc-146">This layer has no dependencies on Visual Studio components.</span></span>
