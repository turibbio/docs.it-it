---
title: 'Attributi riservati di C: Conditional, Obsolete, AttributeUsage'
ms.date: 04/09/2020
description: Questi attributi vengono interpretati dal compilatore per influire sul codice generato dal compilatore
ms.openlocfilehash: ca3b76387de2a57380d6eb0848991d979a558662
ms.sourcegitcommit: c91110ef6ee3fedb591f3d628dc17739c4a7071e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/15/2020
ms.locfileid: "81389870"
---
# <a name="reserved-attributes-conditionalattribute-obsoleteattribute-attributeusageattribute"></a><span data-ttu-id="c124a-103">Attributi riservati: ConditionalAttribute, ObsoleteAttribute, AttributeUsageAttribute</span><span class="sxs-lookup"><span data-stu-id="c124a-103">Reserved attributes: ConditionalAttribute, ObsoleteAttribute, AttributeUsageAttribute</span></span>

<span data-ttu-id="c124a-104">Questi attributi possono essere applicati agli elementi nel codice.</span><span class="sxs-lookup"><span data-stu-id="c124a-104">These attributes can be applied to elements in your code.</span></span> <span data-ttu-id="c124a-105">Aggiungono significato semantico a tali elementi.</span><span class="sxs-lookup"><span data-stu-id="c124a-105">They add semantic meaning to those elements.</span></span> <span data-ttu-id="c124a-106">Il compilatore utilizza tali significati semantici per modificarne l'output e segnalare i possibili errori degli sviluppatori che utilizzano il codice.</span><span class="sxs-lookup"><span data-stu-id="c124a-106">The compiler uses those semantic meanings to alter its output and report possible mistakes by developers using your code.</span></span>

## <a name="conditional-attribute"></a><span data-ttu-id="c124a-107">Attributo `Conditional`</span><span class="sxs-lookup"><span data-stu-id="c124a-107">`Conditional` attribute</span></span>

<span data-ttu-id="c124a-108">L'attributo `Conditional` rende l'esecuzione di un metodo dipendente da un identificatore di pre-elaborazione.</span><span class="sxs-lookup"><span data-stu-id="c124a-108">The `Conditional` attribute makes the execution of a method dependent on a preprocessing identifier.</span></span> <span data-ttu-id="c124a-109">L'attributo `Conditional` è un alias per <xref:System.Diagnostics.ConditionalAttribute> e può essere applicato a un metodo o a una classe Attribute.</span><span class="sxs-lookup"><span data-stu-id="c124a-109">The `Conditional` attribute is an alias for <xref:System.Diagnostics.ConditionalAttribute>, and can be applied to a method or an attribute class.</span></span>

<span data-ttu-id="c124a-110">Nell'esempio seguente, `Conditional` viene applicato a un metodo per abilitare o disabilitare la visualizzazione di informazioni diagnostiche specifiche del programma:</span><span class="sxs-lookup"><span data-stu-id="c124a-110">In the following example, `Conditional` is applied to a method to enable or disable the display of program-specific diagnostic information:</span></span>

::::::code language="csharp" source="snippets/trace.cs" interactive="try-dotnet" :::

<span data-ttu-id="c124a-111">Se `TRACE_ON` l'identificatore non è definito, l'output di traccia non viene visualizzato.</span><span class="sxs-lookup"><span data-stu-id="c124a-111">If the `TRACE_ON` identifier isn't defined, the trace output isn't displayed.</span></span> <span data-ttu-id="c124a-112">Esplora tu stesso nella finestra interattiva.</span><span class="sxs-lookup"><span data-stu-id="c124a-112">Explore for yourself in the interactive window.</span></span>

<span data-ttu-id="c124a-113">L'attributo `Conditional` viene `DEBUG` spesso utilizzato con l'identificatore per abilitare le funzionalità di traccia e registrazione per le build di debug, ma non nelle build di rilascio, come illustrato nell'esempio seguente:The attribute is often used with the identifier to enable trace and logging features for debug builds but not in release builds, as shown in the following example:</span><span class="sxs-lookup"><span data-stu-id="c124a-113">The `Conditional` attribute is often used with the `DEBUG` identifier to enable trace and logging features for debug builds but not in release builds, as shown in the following example:</span></span>

::::::code language="csharp" source="snippets/ConditionalExamples.cs" id="SnippetConditional" :::

<span data-ttu-id="c124a-114">Quando viene chiamato un metodo contrassegnato come condizionale, la presenza o l'assenza del simbolo di pre-elaborazione specificato determina se la chiamata viene inclusa o omessa.</span><span class="sxs-lookup"><span data-stu-id="c124a-114">When a method marked conditional is called, the presence or absence of the specified preprocessing symbol determines whether the call is included or omitted.</span></span> <span data-ttu-id="c124a-115">Se il simbolo è definito la chiamata viene inclusa, in caso contrario viene omessa.</span><span class="sxs-lookup"><span data-stu-id="c124a-115">If the symbol is defined, the call is included; otherwise, the call is omitted.</span></span> <span data-ttu-id="c124a-116">Un metodo condizionale deve essere un metodo in una `void` dichiarazione di classe o struct e deve avere un tipo restituito.</span><span class="sxs-lookup"><span data-stu-id="c124a-116">A conditional method must be a method in a class or struct declaration and must have a `void` return type.</span></span> <span data-ttu-id="c124a-117">L'uso `Conditional` è più pulito, più elegante e meno `#if…#endif` soggetto a errori rispetto ai metodi di inclusione all'interno dei blocchi.</span><span class="sxs-lookup"><span data-stu-id="c124a-117">Using `Conditional` is cleaner, more elegant, and less error-prone than enclosing methods inside `#if…#endif` blocks.</span></span>

<span data-ttu-id="c124a-118">Se un metodo `Conditional` ha più attributi, una chiamata al metodo viene inclusa se in uno o più simboli condizionali sono definiti (i simboli sono collegati logicamente tra loro utilizzando l'operatore OR).</span><span class="sxs-lookup"><span data-stu-id="c124a-118">If a method has multiple `Conditional` attributes, a call to the method is included if at one or more conditional symbols is defined (the symbols are logically linked together by using the OR operator).</span></span> <span data-ttu-id="c124a-119">Nell'esempio seguente, la `A` presenza `B` di uno o restituisce una chiamata al metodo:In the following example, the presence of either or results in a method call:</span><span class="sxs-lookup"><span data-stu-id="c124a-119">In the following example, the presence of either `A` or `B` results in a method call:</span></span>

::::::code language="csharp" source="snippets/ConditionalExamples.cs" id="SnippetMultipleConditions" :::

### <a name="using-conditional-with-attribute-classes"></a><span data-ttu-id="c124a-120">Utilizzo `Conditional` con le classi di attributiUsing with attribute classes</span><span class="sxs-lookup"><span data-stu-id="c124a-120">Using `Conditional` with attribute classes</span></span>

<span data-ttu-id="c124a-121">L'attributo `Conditional` può essere applicato anche a una definizione di classe Attribute.</span><span class="sxs-lookup"><span data-stu-id="c124a-121">The `Conditional` attribute can also be applied to an attribute class definition.</span></span> <span data-ttu-id="c124a-122">Nell'esempio seguente, l'attributo `Documentation` personalizzato aggiungerà `DEBUG` informazioni ai metadati solo se è definito.</span><span class="sxs-lookup"><span data-stu-id="c124a-122">In the following example, the custom attribute `Documentation` will only add information to the metadata if `DEBUG` is defined.</span></span>

::::::code language="csharp" source="snippets/ConditionalExamples.cs" id="SnippetConditionalConditionalAttribute" :::

## <a name="obsolete-attribute"></a><span data-ttu-id="c124a-123">Attributo `Obsolete`</span><span class="sxs-lookup"><span data-stu-id="c124a-123">`Obsolete` attribute</span></span>

<span data-ttu-id="c124a-124">L'attributo `Obsolete` contrassegna un elemento di codice come non più consigliato per l'utilizzo.</span><span class="sxs-lookup"><span data-stu-id="c124a-124">The `Obsolete` attribute marks a code element as no longer recommended for use.</span></span> <span data-ttu-id="c124a-125">L'utilizzo di un'entità contrassegnata come obsoleta genera un avviso o un errore.</span><span class="sxs-lookup"><span data-stu-id="c124a-125">Use of an entity marked obsolete generates a warning or an error.</span></span> <span data-ttu-id="c124a-126">`Obsolete` è un attributo monouso e può essere applicato a qualsiasi entità che supporta gli attributi.</span><span class="sxs-lookup"><span data-stu-id="c124a-126">The `Obsolete` attribute is a single-use attribute and can be applied to any entity that allows attributes.</span></span> <span data-ttu-id="c124a-127">`Obsolete` è un alias per <xref:System.ObsoleteAttribute>.</span><span class="sxs-lookup"><span data-stu-id="c124a-127">`Obsolete` is an alias for <xref:System.ObsoleteAttribute>.</span></span>

<span data-ttu-id="c124a-128">Nell'esempio riportato di seguito l'attributo `Obsolete` viene applicato alla classe `A` e al metodo `B.OldMethod`.</span><span class="sxs-lookup"><span data-stu-id="c124a-128">In the following example the `Obsolete` attribute is applied to class `A` and to method `B.OldMethod`.</span></span> <span data-ttu-id="c124a-129">Poiché il secondo argomento del costruttore dell'attributo applicato a `B.OldMethod` è impostato su `true` questo metodo genererà un errore del compilatore, mentre l'uso della classe `A` produrrà semplicemente un avviso.</span><span class="sxs-lookup"><span data-stu-id="c124a-129">Because the second argument of the attribute constructor applied to `B.OldMethod` is set to `true`, this method will cause a compiler error, whereas using class `A` will just produce a warning.</span></span> <span data-ttu-id="c124a-130">Tuttavia la chiamata di `B.NewMethod` non produrrà né un avviso né un errore.</span><span class="sxs-lookup"><span data-stu-id="c124a-130">Calling `B.NewMethod`, however, produces no warning or error.</span></span> <span data-ttu-id="c124a-131">Ad esempio, se viene usato con le definizioni precedenti, il codice che segue genera due avvisi e un errore:</span><span class="sxs-lookup"><span data-stu-id="c124a-131">For example, when you use it with the previous definitions, the following code generates two warnings and one error:</span></span>

::::::code language="csharp" source="snippets/ObsoleteExample.cs" interactive="try-dotnet" :::

<span data-ttu-id="c124a-132">La stringa fornita come primo argomento per il costruttore dell'attributo verrà visualizzata come parte dell'avviso o dell'errore.</span><span class="sxs-lookup"><span data-stu-id="c124a-132">The string provided as the first argument to the attribute constructor will be displayed as part of the warning or error.</span></span> <span data-ttu-id="c124a-133">Vengono generati due avvisi per la classe `A`: uno per la dichiarazione del riferimento alla classe e uno per il costruttore della classe.</span><span class="sxs-lookup"><span data-stu-id="c124a-133">Two warnings for class `A` are generated: one for the declaration of the class reference, and one for the class constructor.</span></span> <span data-ttu-id="c124a-134">L'attributo `Obsolete` può essere utilizzato senza argomenti, ma è consigliabile includere una spiegazione di cosa usare.</span><span class="sxs-lookup"><span data-stu-id="c124a-134">The `Obsolete` attribute can be used without arguments, but including an explanation what to use instead is recommended.</span></span>

## <a name="attributeusage-attribute"></a><span data-ttu-id="c124a-135">Attributo `AttributeUsage`</span><span class="sxs-lookup"><span data-stu-id="c124a-135">`AttributeUsage` attribute</span></span>

<span data-ttu-id="c124a-136">L'attributo `AttributeUsage` determina la modalità di utilizzo di una classe di attributi personalizzati.</span><span class="sxs-lookup"><span data-stu-id="c124a-136">The `AttributeUsage` attribute determines how a custom attribute class can be used.</span></span> <span data-ttu-id="c124a-137"><xref:System.AttributeUsageAttribute> è un attributo che si applica alle definizioni di attributi personalizzati.</span><span class="sxs-lookup"><span data-stu-id="c124a-137"><xref:System.AttributeUsageAttribute> is an attribute you apply to custom attribute definitions.</span></span> <span data-ttu-id="c124a-138">L'attributo `AttributeUsage` consente di controllare:</span><span class="sxs-lookup"><span data-stu-id="c124a-138">The `AttributeUsage` attribute enables you to control:</span></span>

- <span data-ttu-id="c124a-139">Elementi del programma a cui l'attributo può essere applicato.</span><span class="sxs-lookup"><span data-stu-id="c124a-139">Which program elements attribute may be applied to.</span></span> <span data-ttu-id="c124a-140">Se non se ne limita l'utilizzo, un attributo può essere applicato a uno qualsiasi degli elementi del programma seguenti:</span><span class="sxs-lookup"><span data-stu-id="c124a-140">Unless you restrict its usage, an attribute may be applied to any of the following program elements:</span></span>
  - <span data-ttu-id="c124a-141">assembly</span><span class="sxs-lookup"><span data-stu-id="c124a-141">assembly</span></span>
  - <span data-ttu-id="c124a-142">modulo</span><span class="sxs-lookup"><span data-stu-id="c124a-142">module</span></span>
  - <span data-ttu-id="c124a-143">campo</span><span class="sxs-lookup"><span data-stu-id="c124a-143">field</span></span>
  - <span data-ttu-id="c124a-144">event</span><span class="sxs-lookup"><span data-stu-id="c124a-144">event</span></span>
  - <span data-ttu-id="c124a-145">method</span><span class="sxs-lookup"><span data-stu-id="c124a-145">method</span></span>
  - <span data-ttu-id="c124a-146">param</span><span class="sxs-lookup"><span data-stu-id="c124a-146">param</span></span>
  - <span data-ttu-id="c124a-147">proprietà</span><span class="sxs-lookup"><span data-stu-id="c124a-147">property</span></span>
  - <span data-ttu-id="c124a-148">return</span><span class="sxs-lookup"><span data-stu-id="c124a-148">return</span></span>
  - <span data-ttu-id="c124a-149">type</span><span class="sxs-lookup"><span data-stu-id="c124a-149">type</span></span>
- <span data-ttu-id="c124a-150">Se un attributo può essere applicato più volte a un singolo elemento del programma.</span><span class="sxs-lookup"><span data-stu-id="c124a-150">Whether an attribute can be applied to a single program element multiple times.</span></span>
- <span data-ttu-id="c124a-151">Se gli attributi vengono ereditati dalle classi derivate.</span><span class="sxs-lookup"><span data-stu-id="c124a-151">Whether attributes are inherited by derived classes.</span></span>

<span data-ttu-id="c124a-152">Le impostazioni predefinite sono simili all'esempio seguente quando vengono applicate in modo esplicito:</span><span class="sxs-lookup"><span data-stu-id="c124a-152">The default settings look like the following example when applied explicitly:</span></span>

:::code language="csharp" source="snippets/NewAttribute.cs" id="SnippetUsageFirst" :::

<span data-ttu-id="c124a-153">In questo esempio la classe `NewAttribute` può essere applicata a qualsiasi elemento del programma supportato,</span><span class="sxs-lookup"><span data-stu-id="c124a-153">In this example, the `NewAttribute` class can be applied to any supported program element.</span></span> <span data-ttu-id="c124a-154">ma solo una volta a ogni entità.</span><span class="sxs-lookup"><span data-stu-id="c124a-154">But it can be applied only once to each entity.</span></span> <span data-ttu-id="c124a-155">L'attributo viene ereditato dalle classi derivate se applicato a una classe base.</span><span class="sxs-lookup"><span data-stu-id="c124a-155">The attribute is inherited by derived classes when applied to a base class.</span></span>

<span data-ttu-id="c124a-156">Gli argomenti <xref:System.AttributeUsageAttribute.AllowMultiple> e <xref:System.AttributeUsageAttribute.Inherited> sono facoltativi, quindi il codice seguente ha lo stesso effetto:</span><span class="sxs-lookup"><span data-stu-id="c124a-156">The <xref:System.AttributeUsageAttribute.AllowMultiple> and <xref:System.AttributeUsageAttribute.Inherited> arguments are optional, so the following code has the same effect:</span></span>

:::code language="csharp" source="snippets/NewAttribute.cs" id="SnippetUsageSecond" :::

<span data-ttu-id="c124a-157">Il primo argomento <xref:System.AttributeUsageAttribute> deve consistere di uno o più elementi dell'enumerazione <xref:System.AttributeTargets>.</span><span class="sxs-lookup"><span data-stu-id="c124a-157">The first <xref:System.AttributeUsageAttribute> argument must be one or more elements of the <xref:System.AttributeTargets> enumeration.</span></span> <span data-ttu-id="c124a-158">Più tipi di destinazione possono essere collegati con l'operatore OR, nel modo illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="c124a-158">Multiple target types can be linked together with the OR operator, like the following example shows:</span></span>

:::code language="csharp" source="snippets/NewPropertyOrFieldAttribute.cs" id="SnippetDefinePropertyAttribute" :::

<span data-ttu-id="c124a-159">A partire da C# 7.3, gli attributi possono essere applicati alla proprietà o al campo sottostante per una proprietà implementata automaticamente.</span><span class="sxs-lookup"><span data-stu-id="c124a-159">Beginning in C# 7.3, attributes can be applied to either the property or the backing field for an auto-implemented property.</span></span> <span data-ttu-id="c124a-160">L'attributo si applica alla proprietà, a meno che non si specifichi l'identificatore `field` per l'attributo.</span><span class="sxs-lookup"><span data-stu-id="c124a-160">The attribute applies to the property, unless you specify the `field` specifier on the attribute.</span></span> <span data-ttu-id="c124a-161">Entrambe le situazioni sono illustrate nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="c124a-161">Both are shown in the following example:</span></span>

:::code language="csharp" source="snippets/NewPropertyOrFieldAttribute.cs" id="SnippetUsePropertyAttribute" :::

<span data-ttu-id="c124a-162">Se l'argomento <xref:System.AttributeUsageAttribute.AllowMultiple> è `true`, l'attributo restituito può essere applicato più volte a una singola entità, come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="c124a-162">If the <xref:System.AttributeUsageAttribute.AllowMultiple> argument is `true`, then the resulting attribute can be applied more than once to a single entity, as shown in the following example:</span></span>

:::code language="csharp" source="snippets/MultiUseAttribute.cs" id="SnippetMultiUse" :::

<span data-ttu-id="c124a-163">In questo caso, `MultiUseAttribute` può essere applicato più volte perché `AllowMultiple` è impostato su `true`.</span><span class="sxs-lookup"><span data-stu-id="c124a-163">In this case, `MultiUseAttribute` can be applied repeatedly because `AllowMultiple` is set to `true`.</span></span> <span data-ttu-id="c124a-164">Entrambi i formati illustrati per applicare più attributi sono validi.</span><span class="sxs-lookup"><span data-stu-id="c124a-164">Both formats shown for applying multiple attributes are valid.</span></span>

<span data-ttu-id="c124a-165">Se <xref:System.AttributeUsageAttribute.Inherited> è `false`, l'attributo non viene ereditato dalle classi derivate da una classe con attributi.</span><span class="sxs-lookup"><span data-stu-id="c124a-165">If <xref:System.AttributeUsageAttribute.Inherited> is `false`, then the attribute isn't inherited by classes derived from an attributed class.</span></span> <span data-ttu-id="c124a-166">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="c124a-166">For example:</span></span>

:::code language="csharp" source="snippets/NonInheritedAttribute.cs" id="SnippetNonInherited" :::

<span data-ttu-id="c124a-167">In questo caso `NonInheritedAttribute` non viene applicato a `DClass` attraverso l'ereditarietà.</span><span class="sxs-lookup"><span data-stu-id="c124a-167">In this case `NonInheritedAttribute` isn't applied to `DClass` via inheritance.</span></span>

## <a name="see-also"></a><span data-ttu-id="c124a-168">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="c124a-168">See also</span></span>

- <xref:System.Attribute>
- <xref:System.Reflection>
- [<span data-ttu-id="c124a-169">Attributi</span><span class="sxs-lookup"><span data-stu-id="c124a-169">Attributes</span></span>](../../../standard/attributes/index.md)
- [<span data-ttu-id="c124a-170">Reflection</span><span class="sxs-lookup"><span data-stu-id="c124a-170">Reflection</span></span>](../../programming-guide/concepts/reflection.md)
