---
title: Espressione switch - Riferimento in C
description: Informazioni su come usare l'espressione switch di C'è per i criteri di ricerca e altre introspezion i dati
ms.date: 03/19/2020
ms.openlocfilehash: 9e609bcea0f92f492b5f9b07840e47f75c1b71e4
ms.sourcegitcommit: 99b153b93bf94d0fecf7c7bcecb58ac424dfa47c
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/25/2020
ms.locfileid: "80249788"
---
# <a name="switch-expression-c-reference"></a><span data-ttu-id="bcf52-103">espressione switch (riferimento C</span><span class="sxs-lookup"><span data-stu-id="bcf52-103">switch expression (C# reference)</span></span>

<span data-ttu-id="bcf52-104">In questo `switch` articolo viene illustrata l'espressione, introdotta in C .</span><span class="sxs-lookup"><span data-stu-id="bcf52-104">This article covers the `switch` expression, introduced in C# 8.0.</span></span> <span data-ttu-id="bcf52-105">Per informazioni `switch` sulla dichiarazione, vedere l'articolo sulla [ `switch` dichiarazione](../keywords/switch.md) nella sezione [delle istruzioni.](../keywords/index.md)</span><span class="sxs-lookup"><span data-stu-id="bcf52-105">For information on the `switch` statement, see the article on the [`switch` statement](../keywords/switch.md) in the [statements](../keywords/index.md) section.</span></span>

## <a name="basic-example"></a><span data-ttu-id="bcf52-106">Esempio di base</span><span class="sxs-lookup"><span data-stu-id="bcf52-106">Basic example</span></span>

<span data-ttu-id="bcf52-107">L'espressione `switch` `switch`fornisce una semantica simile a questa espressione in un contesto di espressione.</span><span class="sxs-lookup"><span data-stu-id="bcf52-107">The `switch` expression provides for `switch`-like semantics in an expression context.</span></span> <span data-ttu-id="bcf52-108">Fornisce una sintassi concisa quando i bracci switch producono un valore.</span><span class="sxs-lookup"><span data-stu-id="bcf52-108">It provides a concise syntax when the switch arms produce a value.</span></span> <span data-ttu-id="bcf52-109">Nell'esempio seguente viene illustrata la struttura di un'espressione switch.</span><span class="sxs-lookup"><span data-stu-id="bcf52-109">The following example shows the structure of a switch expression.</span></span> <span data-ttu-id="bcf52-110">Converte i valori `enum` da un rappresentante direzioni visive in una mappa online nella direzione cardinale corrispondente:</span><span class="sxs-lookup"><span data-stu-id="bcf52-110">It translates values from an `enum` representing visual directions in an online map to the corresponding cardinal direction:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetBasicStructure":::

<span data-ttu-id="bcf52-111">Nell'esempio precedente vengono illustrati gli elementi di base di un'espressione switch:The preceding sample shows the basic elements of a switch expression:</span><span class="sxs-lookup"><span data-stu-id="bcf52-111">The preceding sample shows the basic elements of a switch expression:</span></span>

- <span data-ttu-id="bcf52-112">Espressione *di intervallo*: nell'esempio precedente viene utilizzata la variabile `direction` come espressione di intervallo.</span><span class="sxs-lookup"><span data-stu-id="bcf52-112">The *range expression*: The preceding example uses the variable `direction` as the range expression.</span></span>
- <span data-ttu-id="bcf52-113">Le *braccia dell'espressione switch*: Ogni braccio di espressione switch contiene un *modello*, un case *guard*facoltativo, il `=>` token e *un'espressione*.</span><span class="sxs-lookup"><span data-stu-id="bcf52-113">The *switch expression arms*: Each switch expression arm contains a *pattern*, an optional *case guard*, the `=>` token, and an *expression*.</span></span>

<span data-ttu-id="bcf52-114">Il risultato dell'espressione *switch* è il valore dell'espressione del primo *braccio dell'espressione switch* il `true`cui *modello* di espressione corrisponde *all'espressione di intervallo* e il cui nome *causa*, se presente, restituisce .</span><span class="sxs-lookup"><span data-stu-id="bcf52-114">The result of the *switch expression* is the value of the expression of the first *switch expression arm* whose *pattern* matches the *range expression* and whose *cause guard*, if present, evaluates to `true`.</span></span> <span data-ttu-id="bcf52-115">*L'espressione* a destra `=>` del token non può essere un'istruzione di espressione.</span><span class="sxs-lookup"><span data-stu-id="bcf52-115">The *expression* on the right of the `=>` token can't be an expression statement.</span></span>

<span data-ttu-id="bcf52-116">I *bracci* delle espressioni switch vengono valutati in ordine di testo.</span><span class="sxs-lookup"><span data-stu-id="bcf52-116">The *switch expression arms* are evaluated in text order.</span></span> <span data-ttu-id="bcf52-117">Il compilatore genera un errore quando non è possibile scegliere un braccio di *espressione switch* inferiore perché un braccio di espressione di *commutatore* superiore corrisponde a tutti i relativi valori.</span><span class="sxs-lookup"><span data-stu-id="bcf52-117">The compiler issues an error when a lower *switch expression arm* can't be chosen because a higher *switch expression arm* matches all its values.</span></span>

## <a name="patterns-and-case-guards"></a><span data-ttu-id="bcf52-118">Modelli e guardie dei casi</span><span class="sxs-lookup"><span data-stu-id="bcf52-118">Patterns and case guards</span></span>

<span data-ttu-id="bcf52-119">Molti modelli sono supportati nei bracci di espressione switch.</span><span class="sxs-lookup"><span data-stu-id="bcf52-119">Many patterns are supported in switch expression arms.</span></span> <span data-ttu-id="bcf52-120">Nell'esempio precedente è stato utilizzato un *pattern di valori.*</span><span class="sxs-lookup"><span data-stu-id="bcf52-120">The preceding example used a *value pattern*.</span></span> <span data-ttu-id="bcf52-121">Un criterio di *valore* confronta l'espressione di intervallo con un valore.</span><span class="sxs-lookup"><span data-stu-id="bcf52-121">A *value pattern* compares the range expression to a value.</span></span> <span data-ttu-id="bcf52-122">Tale valore deve essere una costante in fase di compilazione.</span><span class="sxs-lookup"><span data-stu-id="bcf52-122">That value must be a compile time constant.</span></span> <span data-ttu-id="bcf52-123">Il modello di *tipo* confronta l'espressione di intervallo con un tipo noto.</span><span class="sxs-lookup"><span data-stu-id="bcf52-123">The *type pattern* compares the range expression to a known type.</span></span> <span data-ttu-id="bcf52-124">Nell'esempio seguente viene recuperato il terzo elemento da una sequenza.</span><span class="sxs-lookup"><span data-stu-id="bcf52-124">The following example retrieves the third element from a sequence.</span></span> <span data-ttu-id="bcf52-125">Esso utilizza diversi metodi in base al tipo della sequenza:</span><span class="sxs-lookup"><span data-stu-id="bcf52-125">It uses different methods based on the type of the sequence:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetTypePattern":::

<span data-ttu-id="bcf52-126">I motivi possono essere ricorsivi, in cui un modello verifica un tipo e se tale tipo corrisponde, il modello corrisponde a uno o più valori di proprietà nell'espressione di intervallo.</span><span class="sxs-lookup"><span data-stu-id="bcf52-126">Patterns can be recursive, where a pattern tests a type, and if that type matches, the pattern matches one or more property values on the range expression.</span></span> <span data-ttu-id="bcf52-127">È possibile utilizzare modelli ricorsivi per estendere l'esempio precedente.</span><span class="sxs-lookup"><span data-stu-id="bcf52-127">You can use recursive patterns to extend the preceding example.</span></span> <span data-ttu-id="bcf52-128">Aggiungere i bracci di espressione switch per le matrici che hanno meno di 3 elementi.</span><span class="sxs-lookup"><span data-stu-id="bcf52-128">You add switch expression arms for arrays that have fewer than 3 elements.</span></span> <span data-ttu-id="bcf52-129">I modelli ricorsivi sono illustrati nell'esempio seguente:Recursive patterns are shown in the following example:</span><span class="sxs-lookup"><span data-stu-id="bcf52-129">Recursive patterns are shown in the following example:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetRecursivePattern":::

<span data-ttu-id="bcf52-130">I modelli ricorsivi possono esaminare le proprietà dell'espressione di intervallo, ma non possono eseguire codice arbitrario.</span><span class="sxs-lookup"><span data-stu-id="bcf52-130">Recursive patterns can examine properties of the range expression, but can't execute arbitrary code.</span></span> <span data-ttu-id="bcf52-131">È possibile utilizzare un *case* `when` guard , specificato in una clausola, per fornire controlli simili per altri tipi di sequenza:</span><span class="sxs-lookup"><span data-stu-id="bcf52-131">You can use a *case guard*, specified in a `when` clause, to provide similar checks for other sequence types:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetGuardCase":::

<span data-ttu-id="bcf52-132">Infine, è possibile `_` aggiungere `null` il modello e il modello per intercettare gli argomenti che non vengono elaborati da qualsiasi altro braccio di espressione switch.</span><span class="sxs-lookup"><span data-stu-id="bcf52-132">Finally, you can add the `_` pattern and the `null` pattern to catch arguments that aren't processed by any other switch expression arm.</span></span> <span data-ttu-id="bcf52-133">In questo modo l'espressione switch è *esaustiva,* ovvero viene gestito qualsiasi valore possibile dell'espressione di intervallo.</span><span class="sxs-lookup"><span data-stu-id="bcf52-133">That makes the switch expression *exhaustive*, meaning any possible value of the range expression is handled.</span></span> <span data-ttu-id="bcf52-134">L'esempio seguente aggiunge tali bracci di espressione:The following example adds those expression arms:</span><span class="sxs-lookup"><span data-stu-id="bcf52-134">The following example adds those expression arms:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetExhaustive":::

<span data-ttu-id="bcf52-135">L'esempio precedente `null` aggiunge un modello `IEnumerable<T>` e modifica `_` il modello di tipo in un modello.</span><span class="sxs-lookup"><span data-stu-id="bcf52-135">The preceding example adds a `null` pattern, and changes the `IEnumerable<T>` type pattern to a `_` pattern.</span></span> <span data-ttu-id="bcf52-136">Il `null` modello fornisce un controllo null come braccio di espressione switch.</span><span class="sxs-lookup"><span data-stu-id="bcf52-136">The `null` pattern provides a null check as a switch expression arm.</span></span> <span data-ttu-id="bcf52-137">L'espressione per quel <xref:System.ArgumentNullException>braccio genera un '</span><span class="sxs-lookup"><span data-stu-id="bcf52-137">The expression for that arm throws an <xref:System.ArgumentNullException>.</span></span> <span data-ttu-id="bcf52-138">Il `_` modello corrisponde a tutti gli ingressi che non sono stati abbinati da bracci precedenti.</span><span class="sxs-lookup"><span data-stu-id="bcf52-138">The `_` pattern matches all inputs that haven't been matched by previous arms.</span></span> <span data-ttu-id="bcf52-139">Deve venire dopo `null` il controllo, `null` o corrisponderebbe input.</span><span class="sxs-lookup"><span data-stu-id="bcf52-139">It must come after the `null` check, or it would match `null` inputs.</span></span>

<span data-ttu-id="bcf52-140">È possibile leggere ulteriori informazioni nella proposta di specifiche del linguaggio C 'C' per [i modelli ricorsivi](~/_csharplang/proposals/csharp-8.0/patterns.md#switch-expression).</span><span class="sxs-lookup"><span data-stu-id="bcf52-140">You can read more in the C# language spec proposal for [recursive patterns](~/_csharplang/proposals/csharp-8.0/patterns.md#switch-expression).</span></span>

## <a name="see-also"></a><span data-ttu-id="bcf52-141">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="bcf52-141">See also</span></span>

- [<span data-ttu-id="bcf52-142">Informazioni di riferimento su C#</span><span class="sxs-lookup"><span data-stu-id="bcf52-142">C# reference</span></span>](../index.md)
- [<span data-ttu-id="bcf52-143">Operatori C#</span><span class="sxs-lookup"><span data-stu-id="bcf52-143">C# operators</span></span>](index.md)
- [<span data-ttu-id="bcf52-144">Criteri</span><span class="sxs-lookup"><span data-stu-id="bcf52-144">Pattern matching</span></span>](../../pattern-matching.md)
