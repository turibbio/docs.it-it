---
title: espressione switch-riferimenti per C#
description: Informazioni su come usare l'espressione switch C# per i criteri di ricerca e altri introspezione sui dati
ms.date: 03/19/2020
ms.openlocfilehash: f53cbe873c841271f64496e4e5ff1f11750c7b8a
ms.sourcegitcommit: 839777281a281684a7e2906dccb3acd7f6a32023
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/24/2020
ms.locfileid: "82140659"
---
# <a name="switch-expression-c-reference"></a><span data-ttu-id="58730-103">espressione switch (riferimenti per C#)</span><span class="sxs-lookup"><span data-stu-id="58730-103">switch expression (C# reference)</span></span>

<span data-ttu-id="58730-104">Questo articolo illustra l' `switch` espressione introdotta in C# 8,0.</span><span class="sxs-lookup"><span data-stu-id="58730-104">This article covers the `switch` expression, introduced in C# 8.0.</span></span> <span data-ttu-id="58730-105">Per informazioni sull' `switch` istruzione, vedere l'articolo sull' [ `switch` istruzione](../keywords/switch.md) nella sezione [statements](../keywords/index.md) .</span><span class="sxs-lookup"><span data-stu-id="58730-105">For information on the `switch` statement, see the article on the [`switch` statement](../keywords/switch.md) in the [statements](../keywords/index.md) section.</span></span>

## <a name="basic-example"></a><span data-ttu-id="58730-106">Esempio di base</span><span class="sxs-lookup"><span data-stu-id="58730-106">Basic example</span></span>

<span data-ttu-id="58730-107">L' `switch` espressione fornisce `switch`la semantica like in un contesto di espressione.</span><span class="sxs-lookup"><span data-stu-id="58730-107">The `switch` expression provides for `switch`-like semantics in an expression context.</span></span> <span data-ttu-id="58730-108">Fornisce una sintassi concisa quando le braccia del commutire producono un valore.</span><span class="sxs-lookup"><span data-stu-id="58730-108">It provides a concise syntax when the switch arms produce a value.</span></span> <span data-ttu-id="58730-109">Nell'esempio seguente viene illustrata la struttura di un'espressione switch.</span><span class="sxs-lookup"><span data-stu-id="58730-109">The following example shows the structure of a switch expression.</span></span> <span data-ttu-id="58730-110">Converte i valori da un oggetto `enum` che rappresenta le direzioni visive in un mapping online alla direzione Cardinal corrispondente:</span><span class="sxs-lookup"><span data-stu-id="58730-110">It translates values from an `enum` representing visual directions in an online map to the corresponding cardinal direction:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetBasicStructure":::

<span data-ttu-id="58730-111">L'esempio precedente Mostra gli elementi di base di un'espressione switch:</span><span class="sxs-lookup"><span data-stu-id="58730-111">The preceding sample shows the basic elements of a switch expression:</span></span>

- <span data-ttu-id="58730-112">*Espressione di intervallo*: nell'esempio precedente viene utilizzata la `direction` variabile come espressione di intervallo.</span><span class="sxs-lookup"><span data-stu-id="58730-112">The *range expression*: The preceding example uses the variable `direction` as the range expression.</span></span>
- <span data-ttu-id="58730-113">L' *espressione switch Arms*: ogni espressione switch ARM contiene un *pattern*, un *case Guard*facoltativo, il `=>` token e un' *espressione*.</span><span class="sxs-lookup"><span data-stu-id="58730-113">The *switch expression arms*: Each switch expression arm contains a *pattern*, an optional *case guard*, the `=>` token, and an *expression*.</span></span>

<span data-ttu-id="58730-114">Il risultato dell' *espressione switch* è il valore dell'espressione del primo *ARM dell'espressione switch* il cui *modello* corrisponde all' *espressione di intervallo* e il cui *case Guard*, se presente, restituisce `true`.</span><span class="sxs-lookup"><span data-stu-id="58730-114">The result of the *switch expression* is the value of the expression of the first *switch expression arm* whose *pattern* matches the *range expression* and whose *case guard*, if present, evaluates to `true`.</span></span> <span data-ttu-id="58730-115">L' *espressione* a destra del `=>` token non può essere un'istruzione di espressione.</span><span class="sxs-lookup"><span data-stu-id="58730-115">The *expression* on the right of the `=>` token can't be an expression statement.</span></span>

<span data-ttu-id="58730-116">Le *armi dell'espressione switch* vengono valutate in ordine di testo.</span><span class="sxs-lookup"><span data-stu-id="58730-116">The *switch expression arms* are evaluated in text order.</span></span> <span data-ttu-id="58730-117">Il compilatore genera un errore quando non è possibile scegliere un ARM con un' *espressione di cambio* inferiore perché un ARM dell' *espressione del comcambio* superiore corrisponde a tutti i valori.</span><span class="sxs-lookup"><span data-stu-id="58730-117">The compiler issues an error when a lower *switch expression arm* can't be chosen because a higher *switch expression arm* matches all its values.</span></span>

## <a name="patterns-and-case-guards"></a><span data-ttu-id="58730-118">Modelli e protezioni tra maiuscole e minuscole</span><span class="sxs-lookup"><span data-stu-id="58730-118">Patterns and case guards</span></span>

<span data-ttu-id="58730-119">Molti modelli sono supportati nelle braccia dell'espressione switch.</span><span class="sxs-lookup"><span data-stu-id="58730-119">Many patterns are supported in switch expression arms.</span></span> <span data-ttu-id="58730-120">Nell'esempio precedente è stato usato un *modello di valore*.</span><span class="sxs-lookup"><span data-stu-id="58730-120">The preceding example used a *value pattern*.</span></span> <span data-ttu-id="58730-121">Un *criterio di valore* confronta l'espressione di intervallo con un valore.</span><span class="sxs-lookup"><span data-stu-id="58730-121">A *value pattern* compares the range expression to a value.</span></span> <span data-ttu-id="58730-122">Tale valore deve essere una costante in fase di compilazione.</span><span class="sxs-lookup"><span data-stu-id="58730-122">That value must be a compile time constant.</span></span> <span data-ttu-id="58730-123">Il *modello di tipo* confronta l'espressione di intervallo con un tipo conosciuto.</span><span class="sxs-lookup"><span data-stu-id="58730-123">The *type pattern* compares the range expression to a known type.</span></span> <span data-ttu-id="58730-124">Nell'esempio seguente viene recuperato il terzo elemento da una sequenza.</span><span class="sxs-lookup"><span data-stu-id="58730-124">The following example retrieves the third element from a sequence.</span></span> <span data-ttu-id="58730-125">Usa metodi diversi in base al tipo della sequenza:</span><span class="sxs-lookup"><span data-stu-id="58730-125">It uses different methods based on the type of the sequence:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetTypePattern":::

<span data-ttu-id="58730-126">I modelli possono essere ricorsivi, in cui un modello verifica un tipo e, se tale tipo corrisponde, il modello corrisponde a uno o più valori di proprietà nell'espressione di intervallo.</span><span class="sxs-lookup"><span data-stu-id="58730-126">Patterns can be recursive, where a pattern tests a type, and if that type matches, the pattern matches one or more property values on the range expression.</span></span> <span data-ttu-id="58730-127">Per estendere l'esempio precedente, è possibile usare modelli ricorsivi.</span><span class="sxs-lookup"><span data-stu-id="58730-127">You can use recursive patterns to extend the preceding example.</span></span> <span data-ttu-id="58730-128">Si aggiungono le braccia dell'espressione switch per le matrici che contengono meno di 3 elementi.</span><span class="sxs-lookup"><span data-stu-id="58730-128">You add switch expression arms for arrays that have fewer than 3 elements.</span></span> <span data-ttu-id="58730-129">I modelli ricorsivi sono illustrati nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="58730-129">Recursive patterns are shown in the following example:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetRecursivePattern":::

<span data-ttu-id="58730-130">I modelli ricorsivi possono esaminare le proprietà dell'espressione di intervallo, ma non possono eseguire codice arbitrario.</span><span class="sxs-lookup"><span data-stu-id="58730-130">Recursive patterns can examine properties of the range expression, but can't execute arbitrary code.</span></span> <span data-ttu-id="58730-131">È possibile usare una *protezione del case*, specificata in `when` una clausola, per fornire controlli simili per altri tipi di sequenza:</span><span class="sxs-lookup"><span data-stu-id="58730-131">You can use a *case guard*, specified in a `when` clause, to provide similar checks for other sequence types:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetGuardCase":::

<span data-ttu-id="58730-132">Infine, è possibile aggiungere il `_` modello e il `null` criterio per intercettare gli argomenti che non vengono elaborati da qualsiasi altra espressione switch ARM.</span><span class="sxs-lookup"><span data-stu-id="58730-132">Finally, you can add the `_` pattern and the `null` pattern to catch arguments that aren't processed by any other switch expression arm.</span></span> <span data-ttu-id="58730-133">In questo modo l'espressione switch è *esaustiva*, ovvero viene gestito qualsiasi valore possibile dell'espressione di intervallo.</span><span class="sxs-lookup"><span data-stu-id="58730-133">That makes the switch expression *exhaustive*, meaning any possible value of the range expression is handled.</span></span> <span data-ttu-id="58730-134">Nell'esempio seguente vengono aggiunte le espressioni Arms:</span><span class="sxs-lookup"><span data-stu-id="58730-134">The following example adds those expression arms:</span></span>

:::code language="csharp" source="snippets/SwitchExpressions.cs" id="SnippetExhaustive":::

<span data-ttu-id="58730-135">Nell'esempio precedente viene aggiunto `null` un modello e il `IEnumerable<T>` modello di tipo viene modificato `_` in un modello.</span><span class="sxs-lookup"><span data-stu-id="58730-135">The preceding example adds a `null` pattern, and changes the `IEnumerable<T>` type pattern to a `_` pattern.</span></span> <span data-ttu-id="58730-136">Il `null` modello fornisce un controllo null come ARM dell'espressione switch.</span><span class="sxs-lookup"><span data-stu-id="58730-136">The `null` pattern provides a null check as a switch expression arm.</span></span> <span data-ttu-id="58730-137">L'espressione per tale ARM genera un' <xref:System.ArgumentNullException>eccezione.</span><span class="sxs-lookup"><span data-stu-id="58730-137">The expression for that arm throws an <xref:System.ArgumentNullException>.</span></span> <span data-ttu-id="58730-138">Il `_` modello corrisponde a tutti gli input per i quali non sono state trovate corrispondenze con le armi precedenti.</span><span class="sxs-lookup"><span data-stu-id="58730-138">The `_` pattern matches all inputs that haven't been matched by previous arms.</span></span> <span data-ttu-id="58730-139">Il controllo deve essere eseguito `null` dopo il controllo oppure corrisponde `null` a input.</span><span class="sxs-lookup"><span data-stu-id="58730-139">It must come after the `null` check, or it would match `null` inputs.</span></span>

<span data-ttu-id="58730-140">Per altre informazioni, vedere la proposta specifica del linguaggio C# per i [modelli ricorsivi](~/_csharplang/proposals/csharp-8.0/patterns.md#switch-expression).</span><span class="sxs-lookup"><span data-stu-id="58730-140">You can read more in the C# language spec proposal for [recursive patterns](~/_csharplang/proposals/csharp-8.0/patterns.md#switch-expression).</span></span>

## <a name="see-also"></a><span data-ttu-id="58730-141">Vedi anche</span><span class="sxs-lookup"><span data-stu-id="58730-141">See also</span></span>

- [<span data-ttu-id="58730-142">Informazioni di riferimento su C#</span><span class="sxs-lookup"><span data-stu-id="58730-142">C# reference</span></span>](../index.md)
- [<span data-ttu-id="58730-143">Operatori C#</span><span class="sxs-lookup"><span data-stu-id="58730-143">C# operators</span></span>](index.md)
- [<span data-ttu-id="58730-144">Criteri di ricerca</span><span class="sxs-lookup"><span data-stu-id="58730-144">Pattern matching</span></span>](../../pattern-matching.md)
