---
title: Panoramica del data binding
description: Informazioni sulle diverse origini dati che è possibile aggiungere al progetto in Windows Presentation Foundation per .NET Core. Le origini dati possono essere associati a elementi XAML per creare app dinamiche.
author: thraka
ms.date: 09/19/2019
ms.author: adegeo
dev_langs:
- csharp
- vb
ms.openlocfilehash: 4f7119ab8286e80160a500481675f83dfaef7713
ms.sourcegitcommit: 7137e12f54c4e83a94ae43ec320f8cf59c1772ea
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/10/2020
ms.locfileid: "84662979"
---
# <a name="data-binding-overview-in-wpf"></a><span data-ttu-id="2bee9-104">Cenni preliminari sul data binding in WPF</span><span class="sxs-lookup"><span data-stu-id="2bee9-104">Data binding overview in WPF</span></span>

<span data-ttu-id="2bee9-105">Il data binding in Windows Presentation Foundation (WPF) offre un modo semplice e coerente per le app di presentare e interagire con i dati.</span><span class="sxs-lookup"><span data-stu-id="2bee9-105">Data binding in Windows Presentation Foundation (WPF) provides a simple and consistent way for apps to present and interact with data.</span></span> <span data-ttu-id="2bee9-106">Gli elementi possono essere associati a dati da un'ampia gamma di origini dati sotto forma di oggetti .NET e XML.</span><span class="sxs-lookup"><span data-stu-id="2bee9-106">Elements can be bound to data from a variety of data sources in the form of .NET objects and XML.</span></span> <span data-ttu-id="2bee9-107">Qualsiasi <xref:System.Windows.Controls.ContentControl> , ad esempio e <xref:System.Windows.Controls.Button> <xref:System.Windows.Controls.ItemsControl> <xref:System.Windows.Controls.ListBox> <xref:System.Windows.Controls.ListView> , dispone di funzionalità incorporate per consentire lo stile flessibile di singoli elementi di dati o raccolte di elementi di dati.</span><span class="sxs-lookup"><span data-stu-id="2bee9-107">Any <xref:System.Windows.Controls.ContentControl> such as <xref:System.Windows.Controls.Button> and any <xref:System.Windows.Controls.ItemsControl>, such as <xref:System.Windows.Controls.ListBox> and <xref:System.Windows.Controls.ListView>, have built-in functionality to enable flexible styling of single data items or collections of data items.</span></span> <span data-ttu-id="2bee9-108">In cima ai dati è possibile generare visualizzazioni di ordinamento, filtro e raggruppamento.</span><span class="sxs-lookup"><span data-stu-id="2bee9-108">Sort, filter, and group views can be generated on top of the data.</span></span>

<span data-ttu-id="2bee9-109">La funzionalità data binding di WPF presenta diversi vantaggi rispetto ai modelli tradizionali, incluso il supporto intrinseco per data binding da un'ampia gamma di proprietà, la rappresentazione flessibile dei dati e la separazione pulita della logica di business dall'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-109">The data binding functionality in WPF has several advantages over traditional models, including inherent support for data binding by a broad range of properties, flexible UI representation of data, and clean separation of business logic from UI.</span></span>

<span data-ttu-id="2bee9-110">Questo articolo illustra prima di tutto i concetti fondamentali per WPF data binding e quindi illustra l'uso della <xref:System.Windows.Data.Binding> classe e altre funzionalità di data binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-110">This article first discusses concepts fundamental to WPF data binding and then covers the usage of the <xref:System.Windows.Data.Binding> class and other features of data binding.</span></span>

[!INCLUDE [desktop guide under construction](../../../includes/desktop-guide-preview-note.md)]

## <a name="what-is-data-binding"></a><span data-ttu-id="2bee9-111">Che cos'è il data binding?</span><span class="sxs-lookup"><span data-stu-id="2bee9-111">What is data binding?</span></span>

<span data-ttu-id="2bee9-112">Il data binding è il processo che stabilisce una connessione tra l'interfaccia utente dell'app e i dati visualizzati.</span><span class="sxs-lookup"><span data-stu-id="2bee9-112">Data binding is the process that establishes a connection between the app UI and the data it displays.</span></span> <span data-ttu-id="2bee9-113">Se l'associazione è impostata correttamente e i dati forniscono le notifiche appropriate, quando il valore dei dati cambia la modifica si riflette automaticamente negli elementi associati ai dati.</span><span class="sxs-lookup"><span data-stu-id="2bee9-113">If the binding has the correct settings and the data provides the proper notifications, when the data changes its value, the elements that are bound to the data reflect changes automatically.</span></span> <span data-ttu-id="2bee9-114">Il data binding prevede anche che, se una rappresentazione esterna dei dati in un elemento viene modificata, i dati sottostanti possono essere automaticamente aggiornati in modo da riflettere la modifica.</span><span class="sxs-lookup"><span data-stu-id="2bee9-114">Data binding can also mean that if an outer representation of the data in an element changes, then the underlying data can be automatically updated to reflect the change.</span></span> <span data-ttu-id="2bee9-115">Se, ad esempio, l'utente modifica il valore in un `TextBox` elemento, il valore dei dati sottostanti verrà aggiornato automaticamente per riflettere la modifica.</span><span class="sxs-lookup"><span data-stu-id="2bee9-115">For example, if the user edits the value in a `TextBox` element, the underlying data value is automatically updated to reflect that change.</span></span>

<span data-ttu-id="2bee9-116">Un uso tipico di data binding consiste nel posizionare i dati di configurazione del server o locali in moduli o altri controlli dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-116">A typical use of data binding is to place server or local configuration data into forms or other UI controls.</span></span> <span data-ttu-id="2bee9-117">In WPF, questo concetto viene ampliato per includere un'ampia gamma di proprietà a una varietà di origini dati.</span><span class="sxs-lookup"><span data-stu-id="2bee9-117">In WPF, this concept is expanded to include binding a broad range of properties to a variety of data sources.</span></span> <span data-ttu-id="2bee9-118">In WPF, le proprietà di dipendenza degli elementi possono essere associate a oggetti .NET (inclusi gli oggetti ADO.NET o gli oggetti associati a servizi Web e proprietà Web) e i dati XML.</span><span class="sxs-lookup"><span data-stu-id="2bee9-118">In WPF, dependency properties of elements can be bound to .NET objects (including ADO.NET objects or objects associated with Web Services and Web properties) and XML data.</span></span>

<span data-ttu-id="2bee9-119">Per un esempio di data binding, vedere l'interfaccia utente dell'app seguente dalla demo di [Data Binding][data-binding-demo], che visualizza un elenco di elementi dell'asta.</span><span class="sxs-lookup"><span data-stu-id="2bee9-119">For an example of data binding, take a look at the following app UI from the [Data Binding Demo][data-binding-demo], which displays a list of auction items.</span></span>

<span data-ttu-id="2bee9-120">![Schermata di esempio di data binding](./media/data-binding-overview/demo.png "DataBinding_DataBindingDemo")</span><span class="sxs-lookup"><span data-stu-id="2bee9-120">![Data binding sample screenshot](./media/data-binding-overview/demo.png "DataBinding_DataBindingDemo")</span></span>

<span data-ttu-id="2bee9-121">L'app illustra le seguenti funzionalità di data binding:</span><span class="sxs-lookup"><span data-stu-id="2bee9-121">The app demonstrates the following features of data binding:</span></span>

- <span data-ttu-id="2bee9-122">Il contenuto della casella di riepilogo è associato a una raccolta di oggetti *AuctionItem* .</span><span class="sxs-lookup"><span data-stu-id="2bee9-122">The content of the ListBox is bound to a collection of *AuctionItem* objects.</span></span> <span data-ttu-id="2bee9-123">Un oggetto *AuctionItem* dispone di proprietà quali *Description*, *StartPrice*, *StartDate*, *Category*, *SpecialFeatures*e così via.</span><span class="sxs-lookup"><span data-stu-id="2bee9-123">An *AuctionItem* object has properties such as *Description*, *StartPrice*, *StartDate*, *Category*, *SpecialFeatures*, and so on.</span></span>

- <span data-ttu-id="2bee9-124">I dati (oggetti*AuctionItem* ) visualizzati in `ListBox` sono basati su modelli in modo da visualizzare la descrizione e il prezzo corrente per ogni elemento.</span><span class="sxs-lookup"><span data-stu-id="2bee9-124">The data (*AuctionItem* objects) displayed in the `ListBox` is templated so that the description and the current price are shown for each item.</span></span> <span data-ttu-id="2bee9-125">Il modello viene creato tramite un oggetto <xref:System.Windows.DataTemplate> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-125">The template is created by using a <xref:System.Windows.DataTemplate>.</span></span> <span data-ttu-id="2bee9-126">L'aspetto di ogni articolo dipende inoltre dal valore di *SpecialFeatures* dell'oggetto *AuctionItem* visualizzato.</span><span class="sxs-lookup"><span data-stu-id="2bee9-126">In addition, the appearance of each item depends on the *SpecialFeatures* value of the *AuctionItem* being displayed.</span></span> <span data-ttu-id="2bee9-127">Se il valore di *SpecialFeatures* dell'oggetto *AuctionItem* è *Color*, l'articolo avrà un bordo blu.</span><span class="sxs-lookup"><span data-stu-id="2bee9-127">If the *SpecialFeatures* value of the *AuctionItem* is *Color*, the item has a blue border.</span></span> <span data-ttu-id="2bee9-128">Se il valore è *Highlight*, l'articolo sarà dotato di un bordo arancione e di una stella.</span><span class="sxs-lookup"><span data-stu-id="2bee9-128">If the value is *Highlight*, the item has an orange border and a star.</span></span> <span data-ttu-id="2bee9-129">La sezione [Modelli di dati](#data-templating) include informazioni sull'applicazione di modelli ai dati.</span><span class="sxs-lookup"><span data-stu-id="2bee9-129">The [Data Templating](#data-templating) section provides information about data templating.</span></span>

- <span data-ttu-id="2bee9-130">L'utente può raggruppare, filtrare o ordinare i dati utilizzando l'oggetto `CheckBoxes` fornito.</span><span class="sxs-lookup"><span data-stu-id="2bee9-130">The user can group, filter, or sort the data using the `CheckBoxes` provided.</span></span> <span data-ttu-id="2bee9-131">Nell'immagine precedente vengono selezionate la **categoria raggruppa per** e **Ordina per categoria e data** `CheckBoxes` .</span><span class="sxs-lookup"><span data-stu-id="2bee9-131">In the image above, the **Group by category** and **Sort by category and date** `CheckBoxes` are selected.</span></span> <span data-ttu-id="2bee9-132">I dati sono raggruppati in base alla categoria del prodotto e i nomi delle categorie seguono l'ordine alfabetico.</span><span class="sxs-lookup"><span data-stu-id="2bee9-132">You may have noticed that the data is grouped based on the category of the product, and the category name is in alphabetical order.</span></span> <span data-ttu-id="2bee9-133">Benché non risulti evidente dalla figura, gli articoli sono anche ordinati in base alla data di inizio all'interno di ogni categoria.</span><span class="sxs-lookup"><span data-stu-id="2bee9-133">It is difficult to notice from the image but the items are also sorted by the start date within each category.</span></span> <span data-ttu-id="2bee9-134">L'ordinamento viene eseguito tramite una *visualizzazione di raccolta*.</span><span class="sxs-lookup"><span data-stu-id="2bee9-134">Sorting is done using a *collection view*.</span></span> <span data-ttu-id="2bee9-135">La sezione [binding alle raccolte](#binding-to-collections) illustra le visualizzazioni di raccolta.</span><span class="sxs-lookup"><span data-stu-id="2bee9-135">The [Binding to collections](#binding-to-collections) section discusses collection views.</span></span>

- <span data-ttu-id="2bee9-136">Quando l'utente seleziona un elemento, <xref:System.Windows.Controls.ContentControl> Visualizza i dettagli dell'elemento selezionato.</span><span class="sxs-lookup"><span data-stu-id="2bee9-136">When the user selects an item, the <xref:System.Windows.Controls.ContentControl> displays the details of the selected item.</span></span> <span data-ttu-id="2bee9-137">Questa esperienza è detta *scenario Master-Details*.</span><span class="sxs-lookup"><span data-stu-id="2bee9-137">This experience is called the *Master-detail scenario*.</span></span> <span data-ttu-id="2bee9-138">Nella sezione [scenario Master-Details](#master-detail-binding-scenario) sono disponibili informazioni su questo tipo di associazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-138">The [Master-detail scenario](#master-detail-binding-scenario) section provides information about this type of binding.</span></span>

- <span data-ttu-id="2bee9-139">Il tipo della proprietà *StartDate* è <xref:System.DateTime> , che restituisce una data che include l'ora del millisecondo.</span><span class="sxs-lookup"><span data-stu-id="2bee9-139">The type of the *StartDate* property is <xref:System.DateTime>, which returns a date that includes the time to the millisecond.</span></span> <span data-ttu-id="2bee9-140">In questa app è stato usato un convertitore personalizzato in modo da visualizzare una stringa di data più breve.</span><span class="sxs-lookup"><span data-stu-id="2bee9-140">In this app, a custom converter has been used so that a shorter date string is displayed.</span></span> <span data-ttu-id="2bee9-141">La sezione [conversione dei dati](#data-conversion) fornisce informazioni sui convertitori.</span><span class="sxs-lookup"><span data-stu-id="2bee9-141">The [Data conversion](#data-conversion) section provides information about converters.</span></span>

<span data-ttu-id="2bee9-142">Quando l'utente seleziona il pulsante *Aggiungi prodotto* , viene visualizzato il seguente modulo.</span><span class="sxs-lookup"><span data-stu-id="2bee9-142">When the user selects the *Add Product* button, the following form comes up.</span></span>

<span data-ttu-id="2bee9-143">![Pagina Add Product Listing](./media/data-binding-overview/demo-addproductlisting.png "DataBinding_Demo_AddProductListing")</span><span class="sxs-lookup"><span data-stu-id="2bee9-143">![Add Product Listing page](./media/data-binding-overview/demo-addproductlisting.png "DataBinding_Demo_AddProductListing")</span></span>

<span data-ttu-id="2bee9-144">L'utente può modificare i campi nel modulo, visualizzare l'anteprima del prodotto utilizzando i riquadri di anteprima brevi o dettagliati e selezionare `Submit` Questa voce per aggiungere il nuovo elenco di prodotti.</span><span class="sxs-lookup"><span data-stu-id="2bee9-144">The user can edit the fields in the form, preview the product listing using the short or detailed preview panes, and select `Submit` to add the new product listing.</span></span> <span data-ttu-id="2bee9-145">Tutte le impostazioni di raggruppamento, filtro e ordinamento esistenti verranno applicate alla nuova voce.</span><span class="sxs-lookup"><span data-stu-id="2bee9-145">Any existing grouping, filtering and sorting settings will apply to the new entry.</span></span> <span data-ttu-id="2bee9-146">In questo caso specifico, l'articolo immesso nella figura precedente verrà visualizzato come secondo articolo della categoria *Computer*.</span><span class="sxs-lookup"><span data-stu-id="2bee9-146">In this particular case, the item entered in the above image will be displayed as the second item within the *Computer* category.</span></span>

<span data-ttu-id="2bee9-147">Non mostrata in questa immagine è la logica di convalida fornita nella *Data di inizio* <xref:System.Windows.Controls.TextBox> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-147">Not shown in this image is the validation logic provided in the *Start Date* <xref:System.Windows.Controls.TextBox>.</span></span> <span data-ttu-id="2bee9-148">Se l'utente immette una data non valida (formattazione non valida o data precedente), l'utente riceverà una notifica con un <xref:System.Windows.Controls.ToolTip> e un punto esclamativo rosso accanto a <xref:System.Windows.Controls.TextBox> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-148">If the user enters an invalid date (invalid formatting or a past date), the user will be notified with a <xref:System.Windows.Controls.ToolTip> and a red exclamation point next to the <xref:System.Windows.Controls.TextBox>.</span></span> <span data-ttu-id="2bee9-149">La sezione [Convalida dei dati](#data-validation) descrive come creare la logica di convalida.</span><span class="sxs-lookup"><span data-stu-id="2bee9-149">The [Data Validation](#data-validation) section discusses how to create validation logic.</span></span>

<span data-ttu-id="2bee9-150">Prima di approfondire le diverse funzionalità di data binding descritte in precedenza, verranno illustrati i concetti fondamentali essenziali per comprendere data binding WPF.</span><span class="sxs-lookup"><span data-stu-id="2bee9-150">Before going into the different features of data binding outlined above, we will first discuss the fundamental concepts that are critical to understanding WPF data binding.</span></span>

## <a name="basic-data-binding-concepts"></a><span data-ttu-id="2bee9-151">Concetti di base di data binding</span><span class="sxs-lookup"><span data-stu-id="2bee9-151">Basic data binding concepts</span></span>

<span data-ttu-id="2bee9-152">Indipendentemente dall'elemento che si sta associando e dalla natura dell'origine dati, ogni binding segue sempre il modello illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-152">Regardless of what element you are binding and the nature of your data source, each binding always follows the model illustrated by the following figure.</span></span>

![Diagramma che mostra il modello di data binding di base.](./media/data-binding-overview/basic-data-binding-diagram.png)

<span data-ttu-id="2bee9-154">Come illustrato nella figura, data binding è essenzialmente il ponte tra la destinazione del binding e l'origine del binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-154">As the figure shows, data binding is essentially the bridge between your binding target and your binding source.</span></span> <span data-ttu-id="2bee9-155">Nella figura sono illustrati i concetti fondamentali data binding WPF seguenti:</span><span class="sxs-lookup"><span data-stu-id="2bee9-155">The figure demonstrates the following fundamental WPF data binding concepts:</span></span>

- <span data-ttu-id="2bee9-156">In genere, ogni binding è costituito da quattro componenti:</span><span class="sxs-lookup"><span data-stu-id="2bee9-156">Typically, each binding has four components:</span></span>

  - <span data-ttu-id="2bee9-157">Oggetto di destinazione del binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-157">A binding target object.</span></span>
  - <span data-ttu-id="2bee9-158">Proprietà di destinazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-158">A target property.</span></span>
  - <span data-ttu-id="2bee9-159">Un'origine di binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-159">A binding source.</span></span>
  - <span data-ttu-id="2bee9-160">Percorso del valore nell'origine di associazione da utilizzare.</span><span class="sxs-lookup"><span data-stu-id="2bee9-160">A path to the value in the binding source to use.</span></span>
  
  > <span data-ttu-id="2bee9-161">Se ad esempio si vuole associare il contenuto di un `TextBox` `Employee.Name` oggetto alla proprietà, l'oggetto di destinazione è `TextBox` , la proprietà di destinazione è la <xref:System.Windows.Controls.TextBox.Text%2A> proprietà, il valore da usare è *Name*e l'oggetto di origine è l'oggetto *Employee* .</span><span class="sxs-lookup"><span data-stu-id="2bee9-161">For example, if you want to bind the content of a `TextBox` to the `Employee.Name` property, your target object is the `TextBox`, the target property is the <xref:System.Windows.Controls.TextBox.Text%2A> property, the value to use is *Name*, and the source object is the *Employee* object.</span></span>

- <span data-ttu-id="2bee9-162">La proprietà di destinazione deve essere una proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="2bee9-162">The target property must be a dependency property.</span></span> <span data-ttu-id="2bee9-163">La maggior parte delle <xref:System.Windows.UIElement> proprietà sono proprietà di dipendenza e la maggior parte delle proprietà di dipendenza, ad eccezione di quelle di sola lettura, supportano data binding per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="2bee9-163">Most <xref:System.Windows.UIElement> properties are dependency properties, and most dependency properties, except read-only ones, support data binding by default.</span></span> <span data-ttu-id="2bee9-164">Solo i tipi derivati da <xref:System.Windows.DependencyObject> possono definire le proprietà di dipendenza e tutti i <xref:System.Windows.UIElement> tipi derivano da `DependencyObject` .</span><span class="sxs-lookup"><span data-stu-id="2bee9-164">(Only types derived from <xref:System.Windows.DependencyObject> can define dependency properties; and all <xref:System.Windows.UIElement> types derive from `DependencyObject`.)</span></span>

- <span data-ttu-id="2bee9-165">Sebbene non sia illustrato nella figura, si noti che l'oggetto di origine del binding non è limitato a essere un oggetto .NET personalizzato.</span><span class="sxs-lookup"><span data-stu-id="2bee9-165">Although not shown in the figure, it should be noted that the binding source object is not restricted to being a custom .NET object.</span></span> <span data-ttu-id="2bee9-166">WPF data binding supporta dati sotto forma di oggetti .NET e XML.</span><span class="sxs-lookup"><span data-stu-id="2bee9-166">WPF data binding supports data in the form of .NET objects and XML.</span></span> <span data-ttu-id="2bee9-167">Per fornire alcuni esempi, l'origine del binding può essere un oggetto <xref:System.Windows.UIElement> , qualsiasi oggetto elenco, un oggetto ADO.NET o un oggetto servizio Web o un XmlNode che contiene i dati XML.</span><span class="sxs-lookup"><span data-stu-id="2bee9-167">To provide some examples, your binding source may be a <xref:System.Windows.UIElement>, any list object, an ADO.NET or Web Services object, or an XmlNode that contains your XML data.</span></span> <span data-ttu-id="2bee9-168">Per altre informazioni, vedere [Cenni preliminari sulle origini di associazione](../../framework/wpf/data/binding-sources-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2bee9-168">For more information, see [Binding sources overview](../../framework/wpf/data/binding-sources-overview.md).</span></span>

<span data-ttu-id="2bee9-169">È importante ricordare che quando si stabilisce un'associazione, si associa una destinazione di binding a un'origine *di* associazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-169">It is important to remember that when you are establishing a binding, you are binding a binding target *to* a binding source.</span></span> <span data-ttu-id="2bee9-170">Se, ad esempio, si visualizzano alcuni dati XML sottostanti in un oggetto <xref:System.Windows.Controls.ListBox> utilizzando Data Binding, si associa `ListBox` ai dati XML.</span><span class="sxs-lookup"><span data-stu-id="2bee9-170">For example, if you are displaying some underlying XML data in a <xref:System.Windows.Controls.ListBox> using data binding, you are binding your `ListBox` to the XML data.</span></span>

<span data-ttu-id="2bee9-171">Per stabilire un'associazione, utilizzare l' <xref:System.Windows.Data.Binding> oggetto.</span><span class="sxs-lookup"><span data-stu-id="2bee9-171">To establish a binding, you use the <xref:System.Windows.Data.Binding> object.</span></span> <span data-ttu-id="2bee9-172">Nella parte restante di questo articolo vengono illustrati molti dei concetti associati a e alcune delle proprietà e dell'utilizzo dell' `Binding` oggetto.</span><span class="sxs-lookup"><span data-stu-id="2bee9-172">The rest of this article discusses many of the concepts associated with and some of the properties and usage of the `Binding` object.</span></span>

### <a name="direction-of-the-data-flow"></a><span data-ttu-id="2bee9-173">Direzione del flusso di dati</span><span class="sxs-lookup"><span data-stu-id="2bee9-173">Direction of the data flow</span></span>

<span data-ttu-id="2bee9-174">Come indicato dalla freccia nella figura precedente, il flusso di dati di un'associazione può passare dalla destinazione dell'associazione all'origine dell'associazione, ad esempio quando un utente modifica il valore di un oggetto `TextBox` e/o dall'origine dell'associazione alla destinazione del binding (ad esempio, il `TextBox` contenuto viene aggiornato con le modifiche nell'origine del binding) se l'origine dell'associazione fornisce le notifiche appropriate.</span><span class="sxs-lookup"><span data-stu-id="2bee9-174">As indicated by the arrow in the previous figure, the data flow of a binding can go from the binding target to the binding source (for example, the source value changes when a user edits the value of a `TextBox`) and/or from the binding source to the binding target (for example, your `TextBox` content is updated with changes in the binding source) if the binding source provides the proper notifications.</span></span>

<span data-ttu-id="2bee9-175">È possibile che l'app consenta agli utenti di modificare i dati e di propagarli nuovamente all'oggetto di origine.</span><span class="sxs-lookup"><span data-stu-id="2bee9-175">You may want your app to enable users to change the data and propagate it back to the source object.</span></span> <span data-ttu-id="2bee9-176">oppure è possibile fare in modo che gli utenti non possano aggiornare i dati di origine.</span><span class="sxs-lookup"><span data-stu-id="2bee9-176">Or you may not want to enable users to update the source data.</span></span> <span data-ttu-id="2bee9-177">È possibile controllare il flusso di dati impostando <xref:System.Windows.Data.Binding.Mode?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-177">You can control the flow of data by setting the <xref:System.Windows.Data.Binding.Mode?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="2bee9-178">In questa figura vengono illustrati i diversi tipi di flusso di dati:</span><span class="sxs-lookup"><span data-stu-id="2bee9-178">This figure illustrates the different types of data flow:</span></span>

<span data-ttu-id="2bee9-179">![Flusso di dati dell'associazione dati](./media/data-binding-overview/databinding-dataflow.png "DataBinding_DataFlow")</span><span class="sxs-lookup"><span data-stu-id="2bee9-179">![Data binding data flow](./media/data-binding-overview/databinding-dataflow.png "DataBinding_DataFlow")</span></span>

- <span data-ttu-id="2bee9-180"><xref:System.Windows.Data.BindingMode.OneWay>l'associazione determina l'aggiornamento automatico della proprietà di destinazione delle modifiche apportate alla proprietà di origine, ma le modifiche apportate alla proprietà di destinazione non vengono propagate alla proprietà di origine.</span><span class="sxs-lookup"><span data-stu-id="2bee9-180"><xref:System.Windows.Data.BindingMode.OneWay> binding causes changes to the source property to automatically update the target property, but changes to the target property are not propagated back to the source property.</span></span> <span data-ttu-id="2bee9-181">Questo tipo di binding è appropriato se il controllo da associare è implicitamente di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="2bee9-181">This type of binding is appropriate if the control being bound is implicitly read-only.</span></span> <span data-ttu-id="2bee9-182">Ad esempio, è possibile eseguire l'associazione a un'origine, ad esempio un titolo di borsa, oppure la proprietà di destinazione non dispone di un'interfaccia di controllo fornita per apportare modifiche, ad esempio un colore di sfondo associato a dati di una tabella.</span><span class="sxs-lookup"><span data-stu-id="2bee9-182">For instance, you may bind to a source such as a stock ticker, or perhaps your target property has no control interface provided for making changes, such as a data-bound background color of a table.</span></span> <span data-ttu-id="2bee9-183">Se non è necessario monitorare le modifiche delle proprietà di destinazione, l'uso della modalità di associazione <xref:System.Windows.Data.BindingMode.OneWay> consente di evitare il sovraccarico della modalità di binding <xref:System.Windows.Data.BindingMode.TwoWay>.</span><span class="sxs-lookup"><span data-stu-id="2bee9-183">If there is no need to monitor the changes of the target property, using the <xref:System.Windows.Data.BindingMode.OneWay> binding mode avoids the overhead of the <xref:System.Windows.Data.BindingMode.TwoWay> binding mode.</span></span>

- <span data-ttu-id="2bee9-184"><xref:System.Windows.Data.BindingMode.TwoWay>l'associazione causa modifiche alla proprietà di origine o alla proprietà di destinazione per aggiornare automaticamente l'altra.</span><span class="sxs-lookup"><span data-stu-id="2bee9-184"><xref:System.Windows.Data.BindingMode.TwoWay> binding causes changes to either the source property or the target property to automatically update the other.</span></span> <span data-ttu-id="2bee9-185">Questo tipo di associazione è adatto ai moduli modificabili o ad altri scenari di interfaccia utente completamente interattivi.</span><span class="sxs-lookup"><span data-stu-id="2bee9-185">This type of binding is appropriate for editable forms or other fully interactive UI scenarios.</span></span> <span data-ttu-id="2bee9-186">Per impostazione predefinita, la maggior parte delle proprietà è <xref:System.Windows.Data.BindingMode.OneWay> vincolante, ma alcune proprietà di dipendenza, in genere le proprietà dei controlli modificabili dall'utente, ad esempio <xref:System.Windows.Controls.TextBox.Text?displayProperty=nameWithType> e [CheckBox. Unchecked](xref:System.Windows.Controls.Primitives.ToggleButton.IsChecked) default to <xref:System.Windows.Data.BindingMode.TwoWay> Binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-186">Most properties default to <xref:System.Windows.Data.BindingMode.OneWay> binding, but some dependency properties (typically properties of user-editable controls such as the <xref:System.Windows.Controls.TextBox.Text?displayProperty=nameWithType> and  [CheckBox.IsChecked](xref:System.Windows.Controls.Primitives.ToggleButton.IsChecked) default to <xref:System.Windows.Data.BindingMode.TwoWay> binding.</span></span> <span data-ttu-id="2bee9-187">Un modo programmatico per determinare se una proprietà di dipendenza esegue l'associazione unidirezionale o bidirezionale per impostazione predefinita consiste nell'ottenere i metadati della proprietà con <xref:System.Windows.DependencyProperty.GetMetadata%2A?displayProperty=nameWithType> e quindi controllare il valore booleano della <xref:System.Windows.FrameworkPropertyMetadata.BindsTwoWayByDefault%2A?displayProperty=nameWithType> Proprietà.</span><span class="sxs-lookup"><span data-stu-id="2bee9-187">A programmatic way to determine whether a dependency property binds one-way or two-way by default is to get the property metadata with <xref:System.Windows.DependencyProperty.GetMetadata%2A?displayProperty=nameWithType> and then check the Boolean value of the <xref:System.Windows.FrameworkPropertyMetadata.BindsTwoWayByDefault%2A?displayProperty=nameWithType> property.</span></span>

- <span data-ttu-id="2bee9-188"><xref:System.Windows.Data.BindingMode.OneWayToSource>è il contrario dell' <xref:System.Windows.Data.BindingMode.OneWay> associazione; aggiorna la proprietà di origine quando viene modificata la proprietà di destinazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-188"><xref:System.Windows.Data.BindingMode.OneWayToSource> is the reverse of <xref:System.Windows.Data.BindingMode.OneWay> binding; it updates the source property when the target property changes.</span></span> <span data-ttu-id="2bee9-189">Uno scenario di esempio è se è necessario rivalutare solo il valore di origine dall'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-189">One example scenario is if you only need to reevaluate the source value from the UI.</span></span>

- <span data-ttu-id="2bee9-190">Non illustrato nella figura è l' <xref:System.Windows.Data.BindingMode.OneTime> associazione, che fa in modo che la proprietà di origine Inizializza la proprietà di destinazione, ma non propaga le modifiche successive.</span><span class="sxs-lookup"><span data-stu-id="2bee9-190">Not illustrated in the figure is <xref:System.Windows.Data.BindingMode.OneTime> binding, which causes the source property to initialize the target property but does not propagate subsequent changes.</span></span> <span data-ttu-id="2bee9-191">Se il contesto dei dati cambia o l'oggetto nel contesto dei dati cambia, la modifica *non* viene riflessa nella proprietà di destinazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-191">If the data context changes or the object in the data context changes, the change is *not* reflected in the target property.</span></span> <span data-ttu-id="2bee9-192">Questo tipo di binding è appropriato se uno snapshot dello stato corrente è appropriato o se i dati sono realmente statici.</span><span class="sxs-lookup"><span data-stu-id="2bee9-192">This type of binding is appropriate if either a snapshot of the current state is appropriate or the data is truly static.</span></span> <span data-ttu-id="2bee9-193">Questo tipo di binding è utile anche se si vuole inizializzare la proprietà di destinazione con un valore ricavato da una proprietà di origine e il contesto dei dati non è noto in anticipo.</span><span class="sxs-lookup"><span data-stu-id="2bee9-193">This type of binding is also useful if you want to initialize your target property with some value from a source property and the data context is not known in advance.</span></span> <span data-ttu-id="2bee9-194">Questa modalità è essenzialmente una forma più semplice di <xref:System.Windows.Data.BindingMode.OneWay> Binding che offre prestazioni migliori nei casi in cui il valore di origine non cambia.</span><span class="sxs-lookup"><span data-stu-id="2bee9-194">This mode is essentially a simpler form of <xref:System.Windows.Data.BindingMode.OneWay> binding that provides better performance in cases where the source value does not change.</span></span>

<span data-ttu-id="2bee9-195">Per rilevare le modifiche apportate all'origine (applicabili alle <xref:System.Windows.Data.BindingMode.OneWay> <xref:System.Windows.Data.BindingMode.TwoWay> associazioni e), l'origine deve implementare un meccanismo appropriato di notifica delle modifiche alle proprietà, ad esempio <xref:System.ComponentModel.INotifyPropertyChanged> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-195">To detect source changes (applicable to <xref:System.Windows.Data.BindingMode.OneWay> and <xref:System.Windows.Data.BindingMode.TwoWay> bindings), the source must implement a suitable property change notification mechanism such as <xref:System.ComponentModel.INotifyPropertyChanged>.</span></span> <span data-ttu-id="2bee9-196">Vedere [procedura: implementare una notifica di modifica delle proprietà](../../framework/wpf/data/how-to-implement-property-change-notification.md) per un esempio di <xref:System.ComponentModel.INotifyPropertyChanged> implementazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-196">See [How to: Implement property change notification](../../framework/wpf/data/how-to-implement-property-change-notification.md) for an example of an <xref:System.ComponentModel.INotifyPropertyChanged> implementation.</span></span>

<span data-ttu-id="2bee9-197">La <xref:System.Windows.Data.Binding.Mode?displayProperty=nameWithType> proprietà fornisce ulteriori informazioni sulle modalità di associazione e un esempio di come specificare la direzione di un'associazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-197">The <xref:System.Windows.Data.Binding.Mode?displayProperty=nameWithType> property provides more information about binding modes and an example of how to specify the direction of a binding.</span></span>

### <a name="what-triggers-source-updates"></a><span data-ttu-id="2bee9-198">Cosa attiva gli aggiornamenti dell'origine</span><span class="sxs-lookup"><span data-stu-id="2bee9-198">What triggers source updates</span></span>

<span data-ttu-id="2bee9-199">Binding che sono <xref:System.Windows.Data.BindingMode.TwoWay> o <xref:System.Windows.Data.BindingMode.OneWayToSource> restano in ascolto delle modifiche nella proprietà di destinazione e li propagano all'origine, noto come aggiornamento dell'origine.</span><span class="sxs-lookup"><span data-stu-id="2bee9-199">Bindings that are <xref:System.Windows.Data.BindingMode.TwoWay> or <xref:System.Windows.Data.BindingMode.OneWayToSource> listen for changes in the target property and propagate them back to the source, known as updating the source.</span></span> <span data-ttu-id="2bee9-200">Può accadere ad esempio che si modifichi il testo di un oggetto TextBox per modificare il valore di origine sottostante.</span><span class="sxs-lookup"><span data-stu-id="2bee9-200">For example, you may edit the text of a TextBox to change the underlying source value.</span></span>

<span data-ttu-id="2bee9-201">Tuttavia, il valore di origine viene aggiornato durante la modifica del testo o dopo aver completato la modifica del testo e il controllo perde lo stato attivo?</span><span class="sxs-lookup"><span data-stu-id="2bee9-201">However, is your source value updated while you are editing the text or after you finish editing the text and the control loses focus?</span></span> <span data-ttu-id="2bee9-202">La <xref:System.Windows.Data.Binding.UpdateSourceTrigger?displayProperty=nameWithType> proprietà determina che cosa attiva l'aggiornamento dell'origine.</span><span class="sxs-lookup"><span data-stu-id="2bee9-202">The <xref:System.Windows.Data.Binding.UpdateSourceTrigger?displayProperty=nameWithType> property determines what triggers the update of the source.</span></span> <span data-ttu-id="2bee9-203">I punti delle frecce a destra nella figura seguente illustrano il ruolo della <xref:System.Windows.Data.Binding.UpdateSourceTrigger?displayProperty=nameWithType> Proprietà.</span><span class="sxs-lookup"><span data-stu-id="2bee9-203">The dots of the right arrows in the following figure illustrate the role of the <xref:System.Windows.Data.Binding.UpdateSourceTrigger?displayProperty=nameWithType> property.</span></span>

![Diagramma che mostra il ruolo della proprietà UpdateSourceTrigger.](./media/data-binding-overview/data-binding-updatesource-trigger.png)

<span data-ttu-id="2bee9-205">Se il `UpdateSourceTrigger` valore è <xref:System.Windows.Data.UpdateSourceTrigger.PropertyChanged?displayProperty=nameWithType> , il valore a cui punta la freccia destra di <xref:System.Windows.Data.BindingMode.TwoWay> o i <xref:System.Windows.Data.BindingMode.OneWayToSource> binding vengono aggiornati non appena viene modificata la proprietà di destinazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-205">If the `UpdateSourceTrigger` value is <xref:System.Windows.Data.UpdateSourceTrigger.PropertyChanged?displayProperty=nameWithType>, then the value pointed to by the right arrow of <xref:System.Windows.Data.BindingMode.TwoWay> or the <xref:System.Windows.Data.BindingMode.OneWayToSource> bindings is updated as soon as the target property changes.</span></span> <span data-ttu-id="2bee9-206">Tuttavia, se il `UpdateSourceTrigger` valore è <xref:System.Windows.Data.UpdateSourceTrigger.LostFocus> , il valore viene aggiornato solo con il nuovo valore quando la proprietà di destinazione perde lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="2bee9-206">However, if the `UpdateSourceTrigger` value is <xref:System.Windows.Data.UpdateSourceTrigger.LostFocus>, then that value only is updated with the new value when the target property loses focus.</span></span>

<span data-ttu-id="2bee9-207">Analogamente alla <xref:System.Windows.Data.Binding.Mode%2A> proprietà, diverse proprietà di dipendenza hanno valori predefiniti diversi <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-207">Similar to the <xref:System.Windows.Data.Binding.Mode%2A> property, different dependency properties have different default <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> values.</span></span> <span data-ttu-id="2bee9-208">Il valore predefinito per la maggior parte delle proprietà di dipendenza è <xref:System.Windows.Data.UpdateSourceTrigger.PropertyChanged>, mentre la proprietà `TextBox.Text` ha il valore predefinito <xref:System.Windows.Data.UpdateSourceTrigger.LostFocus>.</span><span class="sxs-lookup"><span data-stu-id="2bee9-208">The default value for most dependency properties is <xref:System.Windows.Data.UpdateSourceTrigger.PropertyChanged>, while the `TextBox.Text` property has a default value of <xref:System.Windows.Data.UpdateSourceTrigger.LostFocus>.</span></span> <span data-ttu-id="2bee9-209">`PropertyChanged`indica che gli aggiornamenti di origine vengono in genere eseguiti ogni volta che la proprietà di destinazione cambia.</span><span class="sxs-lookup"><span data-stu-id="2bee9-209">`PropertyChanged` means the source updates usually happen whenever the target property changes.</span></span> <span data-ttu-id="2bee9-210">Le modifiche immediate sono belle per le caselle di controllo e altri semplici controlli.</span><span class="sxs-lookup"><span data-stu-id="2bee9-210">Instant changes are fine for CheckBoxes and other simple controls.</span></span> <span data-ttu-id="2bee9-211">Per i campi di testo, tuttavia, l'aggiornamento dopo ogni pressione di tasto può ridurre le prestazioni e nega all'utente la consueta opportunità di BACKSPACE e correggere gli errori di digitazione prima di eseguire il commit nel nuovo valore.</span><span class="sxs-lookup"><span data-stu-id="2bee9-211">However, for text fields, updating after every keystroke can diminish performance and denies the user the usual opportunity to backspace and fix typing errors before committing to the new value.</span></span>

<span data-ttu-id="2bee9-212"><xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A>Per informazioni su come trovare il valore predefinito di una proprietà di dipendenza, vedere la pagina delle proprietà.</span><span class="sxs-lookup"><span data-stu-id="2bee9-212">See the <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> property page for information about how to find the default value of a dependency property.</span></span>

<span data-ttu-id="2bee9-213">Nella tabella seguente viene fornito uno scenario di esempio per ogni <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> valore utilizzando <xref:System.Windows.Controls.TextBox> come esempio.</span><span class="sxs-lookup"><span data-stu-id="2bee9-213">The following table provides an example scenario for each <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> value using the <xref:System.Windows.Controls.TextBox> as an example.</span></span>

| <span data-ttu-id="2bee9-214">Valore di UpdateSourceTrigger</span><span class="sxs-lookup"><span data-stu-id="2bee9-214">UpdateSourceTrigger value</span></span> | <span data-ttu-id="2bee9-215">Quando viene aggiornato il valore di origine</span><span class="sxs-lookup"><span data-stu-id="2bee9-215">When the source value is updated</span></span> | <span data-ttu-id="2bee9-216">Scenario di esempio per TextBox</span><span class="sxs-lookup"><span data-stu-id="2bee9-216">Example scenario for TextBox</span></span> |
| ------------------------- | ---------------------------------- | ---------------------------- |
| <span data-ttu-id="2bee9-217">`LostFocus`(impostazione predefinita per <xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=nameWithType> )</span><span class="sxs-lookup"><span data-stu-id="2bee9-217">`LostFocus` (default for <xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=nameWithType>)</span></span> | <span data-ttu-id="2bee9-218">Quando il controllo TextBox perde lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="2bee9-218">When the TextBox control loses focus.</span></span> | <span data-ttu-id="2bee9-219">Casella di testo associata alla logica di convalida (vedere la [convalida dei dati](#data-validation) riportata di seguito).</span><span class="sxs-lookup"><span data-stu-id="2bee9-219">A TextBox that is associated with validation logic (see [Data Validation](#data-validation) below).</span></span> |
| `PropertyChanged` | <span data-ttu-id="2bee9-220">Durante la digitazione in <xref:System.Windows.Controls.TextBox> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-220">As you type into the <xref:System.Windows.Controls.TextBox>.</span></span> | <span data-ttu-id="2bee9-221">Controlli TextBox in una finestra della chat room.</span><span class="sxs-lookup"><span data-stu-id="2bee9-221">TextBox controls in a chat room window.</span></span> |
| `Explicit` | <span data-ttu-id="2bee9-222">Quando l'app chiama <xref:System.Windows.Data.BindingExpression.UpdateSource%2A> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-222">When the app calls <xref:System.Windows.Data.BindingExpression.UpdateSource%2A>.</span></span> | <span data-ttu-id="2bee9-223">Controlli TextBox in un modulo modificabile (Aggiorna i valori di origine solo quando l'utente fa clic sul pulsante Invia).</span><span class="sxs-lookup"><span data-stu-id="2bee9-223">TextBox controls in an editable form (updates the source values only when the user clicks the submit button).</span></span> |

<span data-ttu-id="2bee9-224">Per un esempio, vedere [procedura: controllare quando il testo della casella di testo aggiorna l'origine](../../framework/wpf/data/how-to-control-when-the-textbox-text-updates-the-source.md).</span><span class="sxs-lookup"><span data-stu-id="2bee9-224">For an example, see [How to: Control when the TextBox text updates the source](../../framework/wpf/data/how-to-control-when-the-textbox-text-updates-the-source.md).</span></span>

## <a name="creating-a-binding"></a><span data-ttu-id="2bee9-225">Creazione di un'associazione</span><span class="sxs-lookup"><span data-stu-id="2bee9-225">Creating a binding</span></span>

<span data-ttu-id="2bee9-226">Per ridefinire alcuni dei concetti illustrati nelle sezioni precedenti, è necessario stabilire un'associazione utilizzando l' <xref:System.Windows.Data.Binding> oggetto e ogni Binding dispone in genere di quattro componenti: una destinazione del binding, una proprietà di destinazione, un'origine di binding e un percorso del valore di origine da utilizzare.</span><span class="sxs-lookup"><span data-stu-id="2bee9-226">To restate some of the concepts discussed in the previous sections, you establish a binding using the <xref:System.Windows.Data.Binding> object, and each binding usually has four components: a binding target, a target property, a binding source, and a path to the source value to use.</span></span> <span data-ttu-id="2bee9-227">Questa sezione illustra come impostare un binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-227">This section discusses how to set up a binding.</span></span>

<span data-ttu-id="2bee9-228">Si consideri l'esempio seguente, in cui l'oggetto origine del binding è una classe denominata *MyData* definita nello spazio dei nomi *SDKSample*.</span><span class="sxs-lookup"><span data-stu-id="2bee9-228">Consider the following example, in which the binding source object is a class named *MyData* that is defined in the *SDKSample* namespace.</span></span> <span data-ttu-id="2bee9-229">A scopo dimostrativo, *i dati* hanno una proprietà stringa denominata *ColorName* il cui valore è impostato su "Red".</span><span class="sxs-lookup"><span data-stu-id="2bee9-229">For demonstration purposes, *MyData* has a string property named *ColorName* whose value is set to "Red".</span></span> <span data-ttu-id="2bee9-230">L'esempio genera quindi un pulsante con uno sfondo rosso.</span><span class="sxs-lookup"><span data-stu-id="2bee9-230">Thus, this example generates a button with a red background.</span></span>

[!code-xaml[BindNonTextProperty](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/AutoConvertPropertyToColor.xaml#BindAutoConvertColor)]

<span data-ttu-id="2bee9-231">Per ulteriori informazioni sulla sintassi di dichiarazione dell'associazione ed esempi di come configurare un'associazione nel codice, vedere [Cenni preliminari sulle dichiarazioni](../../framework/wpf/data/binding-declarations-overview.md)di associazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-231">For more information on the binding declaration syntax and examples of how to set up a binding in code, see [Binding Declarations Overview](../../framework/wpf/data/binding-declarations-overview.md).</span></span>

<span data-ttu-id="2bee9-232">Se si applica questo esempio al diagramma di base, la figura risultante sarà simile alla seguente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-232">If we apply this example to our basic diagram, the resulting figure looks like the following.</span></span> <span data-ttu-id="2bee9-233">In questa figura viene descritta un' <xref:System.Windows.Data.BindingMode.OneWay> associazione perché la proprietà background supporta l' <xref:System.Windows.Data.BindingMode.OneWay> associazione per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="2bee9-233">This figure describes a <xref:System.Windows.Data.BindingMode.OneWay> binding because the Background property supports <xref:System.Windows.Data.BindingMode.OneWay> binding by default.</span></span>

![Diagramma che mostra la proprietà data binding background.](./media/data-binding-overview/data-binding-button-background-example.png)

<span data-ttu-id="2bee9-235">Ci si potrebbe chiedere perché questa associazione funzioni anche se la proprietà *ColorName* è di tipo stringa, mentre la <xref:System.Windows.Controls.Control.Background%2A> proprietà è di tipo <xref:System.Windows.Media.Brush> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-235">You may wonder why this binding works even though the *ColorName* property is of type string while the <xref:System.Windows.Controls.Control.Background%2A> property is of type <xref:System.Windows.Media.Brush>.</span></span> <span data-ttu-id="2bee9-236">Questa associazione usa la conversione di tipi predefinita, descritta nella sezione relativa alla [conversione dei dati](#data-conversion) .</span><span class="sxs-lookup"><span data-stu-id="2bee9-236">This binding uses default type conversion, which is discussed in the [Data conversion](#data-conversion) section.</span></span>

### <a name="specifying-the-binding-source"></a><span data-ttu-id="2bee9-237">Specifica dell'origine del binding</span><span class="sxs-lookup"><span data-stu-id="2bee9-237">Specifying the binding source</span></span>

<span data-ttu-id="2bee9-238">Si noti che nell'esempio precedente, l'origine del binding viene specificata impostando la proprietà [DockPanel. DataContext](xref:System.Windows.FrameworkElement.DataContext) .</span><span class="sxs-lookup"><span data-stu-id="2bee9-238">Notice that in the previous example, the binding source is specified by setting the [DockPanel.DataContext](xref:System.Windows.FrameworkElement.DataContext) property.</span></span> <span data-ttu-id="2bee9-239"><xref:System.Windows.Controls.Button>Eredita quindi il <xref:System.Windows.FrameworkElement.DataContext%2A> valore da <xref:System.Windows.Controls.DockPanel> , che è il relativo elemento padre.</span><span class="sxs-lookup"><span data-stu-id="2bee9-239">The <xref:System.Windows.Controls.Button> then inherits the <xref:System.Windows.FrameworkElement.DataContext%2A> value from the <xref:System.Windows.Controls.DockPanel>, which is its parent element.</span></span> <span data-ttu-id="2bee9-240">Come già detto, l'oggetto origine del binding è uno dei quattro componenti necessari di un binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-240">To reiterate, the binding source object is one of the four necessary components of a binding.</span></span> <span data-ttu-id="2bee9-241">Se quindi non si specifica l'oggetto origine del binding, questa non viene creata.</span><span class="sxs-lookup"><span data-stu-id="2bee9-241">Therefore, without the binding source object being specified, the binding would do nothing.</span></span>

<span data-ttu-id="2bee9-242">Esistono diversi modi per specificare l'oggetto origine del binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-242">There are several ways to specify the binding source object.</span></span> <span data-ttu-id="2bee9-243">L'utilizzo della <xref:System.Windows.FrameworkElement.DataContext%2A> Proprietà in un elemento padre è utile quando si associano più proprietà alla stessa origine.</span><span class="sxs-lookup"><span data-stu-id="2bee9-243">Using the <xref:System.Windows.FrameworkElement.DataContext%2A> property on a parent element is useful when you are binding multiple properties to the same source.</span></span> <span data-ttu-id="2bee9-244">In alcuni casi, tuttavia, è preferibile specificare l'origine del binding in singole dichiarazioni di binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-244">However, sometimes it may be more appropriate to specify the binding source on individual binding declarations.</span></span> <span data-ttu-id="2bee9-245">Per l'esempio precedente, invece di usare la <xref:System.Windows.FrameworkElement.DataContext%2A> proprietà, è possibile specificare l'origine del binding impostando la <xref:System.Windows.Data.Binding.Source%2A?displayProperty=nameWithType> proprietà direttamente nella dichiarazione di binding del pulsante, come nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-245">For the previous example, instead of using the <xref:System.Windows.FrameworkElement.DataContext%2A> property, you can specify the binding source by setting the <xref:System.Windows.Data.Binding.Source%2A?displayProperty=nameWithType> property directly on the binding declaration of the button, as in the following example.</span></span>

[!code-xaml[BindNonTextPropertyCompactBinding](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/AutoConvertPropertyToColor.xaml#BindAutoConvertColorCompactBinding)]

<span data-ttu-id="2bee9-246">Oltre <xref:System.Windows.FrameworkElement.DataContext%2A> a impostare direttamente la proprietà su un elemento, ereditando il <xref:System.Windows.FrameworkElement.DataContext%2A> valore da un predecessore, ad esempio il pulsante nel primo esempio, e specificando in modo esplicito l'origine del binding impostando la <xref:System.Windows.Data.Binding.Source%2A?displayProperty=nameWithType> proprietà sull'associazione, ad esempio il pulsante nell'ultimo esempio, è possibile utilizzare anche la <xref:System.Windows.Data.Binding.ElementName?displayProperty=nameWithType> proprietà o la <xref:System.Windows.Data.Binding.RelativeSource?displayProperty=nameWithType> proprietà per specificare l'origine del binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-246">Other than setting the <xref:System.Windows.FrameworkElement.DataContext%2A> property on an element directly, inheriting the <xref:System.Windows.FrameworkElement.DataContext%2A> value from an ancestor (such as the button in the first example), and explicitly specifying the binding source by setting the <xref:System.Windows.Data.Binding.Source%2A?displayProperty=nameWithType> property on the binding (such as the button the last example), you can also use the <xref:System.Windows.Data.Binding.ElementName?displayProperty=nameWithType> property or the <xref:System.Windows.Data.Binding.RelativeSource?displayProperty=nameWithType> property to specify the binding source.</span></span> <span data-ttu-id="2bee9-247">La <xref:System.Windows.Data.Binding.ElementName%2A> proprietà è utile quando si esegue il binding ad altri elementi nell'app, ad esempio quando si usa un dispositivo di scorrimento per regolare la larghezza di un pulsante.</span><span class="sxs-lookup"><span data-stu-id="2bee9-247">The <xref:System.Windows.Data.Binding.ElementName%2A> property is useful when you are binding to other elements in your app, such as when you are using a slider to adjust the width of a button.</span></span> <span data-ttu-id="2bee9-248">La <xref:System.Windows.Data.Binding.RelativeSource%2A> proprietà è utile quando l'associazione viene specificata in un oggetto <xref:System.Windows.Controls.ControlTemplate> o <xref:System.Windows.Style> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-248">The <xref:System.Windows.Data.Binding.RelativeSource%2A> property is useful when the binding is specified in a <xref:System.Windows.Controls.ControlTemplate> or a <xref:System.Windows.Style>.</span></span> <span data-ttu-id="2bee9-249">Per altre informazioni, vedere [procedura: specificare l'origine del binding](../../framework/wpf/data/how-to-specify-the-binding-source.md).</span><span class="sxs-lookup"><span data-stu-id="2bee9-249">For more information, see [How to: Specify the binding source](../../framework/wpf/data/how-to-specify-the-binding-source.md).</span></span>

### <a name="specifying-the-path-to-the-value"></a><span data-ttu-id="2bee9-250">Specifica del percorso del valore</span><span class="sxs-lookup"><span data-stu-id="2bee9-250">Specifying the path to the value</span></span>

<span data-ttu-id="2bee9-251">Se l'origine del binding è un oggetto, usare la <xref:System.Windows.Data.Binding.Path?displayProperty=nameWithType> proprietà per specificare il valore da usare per l'associazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-251">If your binding source is an object, you use the <xref:System.Windows.Data.Binding.Path?displayProperty=nameWithType> property to specify the value to use for your binding.</span></span> <span data-ttu-id="2bee9-252">Se si esegue il binding ai dati XML, utilizzare la <xref:System.Windows.Data.Binding.XPath?displayProperty=nameWithType> proprietà per specificare il valore.</span><span class="sxs-lookup"><span data-stu-id="2bee9-252">If you are binding to XML data, you use the <xref:System.Windows.Data.Binding.XPath?displayProperty=nameWithType> property to specify the value.</span></span> <span data-ttu-id="2bee9-253">In alcuni casi, può essere applicabile per utilizzare la <xref:System.Windows.Data.Binding.Path%2A> proprietà anche quando i dati sono XML.</span><span class="sxs-lookup"><span data-stu-id="2bee9-253">In some cases, it may be applicable to use the <xref:System.Windows.Data.Binding.Path%2A> property even when your data is XML.</span></span> <span data-ttu-id="2bee9-254">Se ad esempio si desidera accedere alla proprietà Name di un oggetto XmlNode restituito (in seguito a una query XPath), è necessario utilizzare la <xref:System.Windows.Data.Binding.Path%2A> proprietà oltre alla <xref:System.Windows.Data.Binding.XPath%2A> Proprietà.</span><span class="sxs-lookup"><span data-stu-id="2bee9-254">For example, if you want to access the Name property of a returned XmlNode (as a result of an XPath query), you should use the <xref:System.Windows.Data.Binding.Path%2A> property in addition to the <xref:System.Windows.Data.Binding.XPath%2A> property.</span></span>

<span data-ttu-id="2bee9-255">Per ulteriori informazioni, vedere le <xref:System.Windows.Data.Binding.Path%2A> <xref:System.Windows.Data.Binding.XPath%2A> proprietà e.</span><span class="sxs-lookup"><span data-stu-id="2bee9-255">For more information, see the <xref:System.Windows.Data.Binding.Path%2A> and <xref:System.Windows.Data.Binding.XPath%2A> properties.</span></span>

<span data-ttu-id="2bee9-256">Sebbene sia stato evidenziato che il <xref:System.Windows.Data.Binding.Path%2A> valore di per utilizzare è uno dei quattro componenti necessari di un'associazione, negli scenari in cui si desidera eseguire l'associazione a un intero oggetto, il valore da utilizzare corrisponde all'oggetto di origine dell'associazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-256">Although we have emphasized that the <xref:System.Windows.Data.Binding.Path%2A> to the value to use is one of the four necessary components of a binding, in the scenarios that you want to bind to an entire object, the value to use would be the same as the binding source object.</span></span> <span data-ttu-id="2bee9-257">In questi casi, è applicabile non specificare un oggetto <xref:System.Windows.Data.Binding.Path%2A> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-257">In those cases, it is applicable to not specify a <xref:System.Windows.Data.Binding.Path%2A>.</span></span> <span data-ttu-id="2bee9-258">Si consideri l'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-258">Consider the following example.</span></span>

[!code-xaml[EmptyBinding](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/EmptyBinding.xaml#EmptyBinding)]

<span data-ttu-id="2bee9-259">L'esempio precedente usa la sintassi di binding vuota: {Binding}.</span><span class="sxs-lookup"><span data-stu-id="2bee9-259">The above example uses the empty binding syntax: {Binding}.</span></span> <span data-ttu-id="2bee9-260">In questo caso, <xref:System.Windows.Controls.ListBox> eredita l'oggetto DataContext da un elemento DockPanel padre (non illustrato in questo esempio).</span><span class="sxs-lookup"><span data-stu-id="2bee9-260">In this case, the <xref:System.Windows.Controls.ListBox> inherits the DataContext from a parent DockPanel element (not shown in this example).</span></span> <span data-ttu-id="2bee9-261">Quando il percorso non viene specificato, per impostazione predefinita si esegue un binding all'intero oggetto.</span><span class="sxs-lookup"><span data-stu-id="2bee9-261">When the path is not specified, the default is to bind to the entire object.</span></span> <span data-ttu-id="2bee9-262">In altre parole, in questo esempio il percorso è stato escluso perché è in corso il binding della <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A> proprietà all'intero oggetto.</span><span class="sxs-lookup"><span data-stu-id="2bee9-262">In other words, in this example, the path has been left out because we are binding the <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A> property to the entire object.</span></span> <span data-ttu-id="2bee9-263">Per una discussione approfondita, vedere la sezione [associazione alla raccolta](#binding-to-collections) .</span><span class="sxs-lookup"><span data-stu-id="2bee9-263">(See the [Binding to collections](#binding-to-collections) section for an in-depth discussion.)</span></span>

<span data-ttu-id="2bee9-264">Oltre al binding a una raccolta, questo scenario è utile anche in caso di binding a un intero oggetto anziché a una singola proprietà di un oggetto.</span><span class="sxs-lookup"><span data-stu-id="2bee9-264">Other than binding to a collection, this scenario is also useful when you want to bind to an entire object instead of just a single property of an object.</span></span> <span data-ttu-id="2bee9-265">Se, ad esempio, l'oggetto di origine è di tipo <xref:System.String> , è possibile eseguire l'associazione solo alla stringa stessa.</span><span class="sxs-lookup"><span data-stu-id="2bee9-265">For example, if your source object is of type <xref:System.String>, you may simply want to bind to the string itself.</span></span> <span data-ttu-id="2bee9-266">Un altro scenario comune riguarda il binding di un elemento a un oggetto con numerose proprietà.</span><span class="sxs-lookup"><span data-stu-id="2bee9-266">Another common scenario is when you want to bind an element to an object with several properties.</span></span>

<span data-ttu-id="2bee9-267">Potrebbe essere necessario applicare la logica personalizzata in modo che i dati siano significativi per la proprietà di destinazione associata.</span><span class="sxs-lookup"><span data-stu-id="2bee9-267">You may need to apply custom logic so that the data is meaningful to your bound target property.</span></span> <span data-ttu-id="2bee9-268">Se la conversione del tipo predefinito non esiste, la logica personalizzata potrebbe essere sotto forma di convertitore personalizzato.</span><span class="sxs-lookup"><span data-stu-id="2bee9-268">The custom logic may be in the form of a custom converter if default type conversion does not exist.</span></span> <span data-ttu-id="2bee9-269">Per informazioni sui convertitori, vedere [conversione dei dati](#data-conversion) .</span><span class="sxs-lookup"><span data-stu-id="2bee9-269">See [Data conversion](#data-conversion) for information about converters.</span></span>

### <a name="binding-and-bindingexpression"></a><span data-ttu-id="2bee9-270">Binding e BindingExpression</span><span class="sxs-lookup"><span data-stu-id="2bee9-270">Binding and BindingExpression</span></span>

<span data-ttu-id="2bee9-271">Prima di accedere ad altre funzionalità e utilizzi di data binding, è utile introdurre la <xref:System.Windows.Data.BindingExpression> classe.</span><span class="sxs-lookup"><span data-stu-id="2bee9-271">Before getting into other features and usages of data binding, it is useful to introduce the <xref:System.Windows.Data.BindingExpression> class.</span></span> <span data-ttu-id="2bee9-272">Come è stato illustrato nelle sezioni precedenti, la <xref:System.Windows.Data.Binding> classe è la classe di alto livello per la dichiarazione di un'associazione. fornisce molte proprietà che consentono di specificare le caratteristiche di un'associazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-272">As you have seen in previous sections, the <xref:System.Windows.Data.Binding> class is the high-level class for the declaration of a binding; it provides many properties that allow you to specify the characteristics of a binding.</span></span> <span data-ttu-id="2bee9-273">Una classe correlata, <xref:System.Windows.Data.BindingExpression> , è l'oggetto sottostante che mantiene la connessione tra l'origine e la destinazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-273">A related class, <xref:System.Windows.Data.BindingExpression>, is the underlying object that maintains the connection between the source and the target.</span></span> <span data-ttu-id="2bee9-274">Un binding contiene tutte le informazioni condivisibili tra diverse espressioni di binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-274">A binding contains all the information that can be shared across several binding expressions.</span></span> <span data-ttu-id="2bee9-275">Un oggetto <xref:System.Windows.Data.BindingExpression> è un'espressione di istanza che non può essere condivisa e contiene tutte le informazioni sull'istanza di <xref:System.Windows.Data.Binding> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-275">A <xref:System.Windows.Data.BindingExpression> is an instance expression that cannot be shared and contains all the instance information of the <xref:System.Windows.Data.Binding>.</span></span>

<span data-ttu-id="2bee9-276">Si consideri l'esempio seguente, in cui `myDataObject` è un'istanza della `MyData` classe, `myBinding` è l'oggetto di origine <xref:System.Windows.Data.Binding> e `MyData` è una classe definita che contiene una proprietà di stringa denominata `MyDataProperty` .</span><span class="sxs-lookup"><span data-stu-id="2bee9-276">Consider the following example, where `myDataObject` is an instance of the `MyData` class, `myBinding` is the source <xref:System.Windows.Data.Binding> object, and `MyData` is a defined class that contains a string property named `MyDataProperty`.</span></span> <span data-ttu-id="2bee9-277">In questo esempio viene associato il contenuto di testo di `myText` , un'istanza di <xref:System.Windows.Controls.TextBlock> a `MyDataProperty` .</span><span class="sxs-lookup"><span data-stu-id="2bee9-277">This example binds the text content of `myText`, an instance of <xref:System.Windows.Controls.TextBlock>, to `MyDataProperty`.</span></span>

[!code-csharp[CodeOnlyBinding](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/ManualBinding.cs#CodeOnlyBinding)]
[!code-vb[CodeOnlyBinding](~/samples/snippets/desktop-guide/wpf/data-binding-overview/vb/ManualBinding.vb#CodeOnlyBinding)]

<span data-ttu-id="2bee9-278">È possibile usare lo stesso oggetto *myBinding* per creare altri binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-278">You can use the same *myBinding* object to create other bindings.</span></span> <span data-ttu-id="2bee9-279">Ad esempio, è possibile usare l'oggetto *SetBinding* per associare il contenuto di testo di una casella di controllo a *MyDataProperty*.</span><span class="sxs-lookup"><span data-stu-id="2bee9-279">For example, you can use the *myBinding* object to bind the text content of a check box to *MyDataProperty*.</span></span> <span data-ttu-id="2bee9-280">In questo scenario saranno presenti due istanze di condivisione dell' <xref:System.Windows.Data.BindingExpression> oggetto di *associazione* .</span><span class="sxs-lookup"><span data-stu-id="2bee9-280">In that scenario, there will be two instances of <xref:System.Windows.Data.BindingExpression> sharing the *myBinding* object.</span></span>

<span data-ttu-id="2bee9-281">Un <xref:System.Windows.Data.BindingExpression> oggetto viene restituito chiamando <xref:System.Windows.Data.BindingOperations.GetBindingExpression%2A> su un oggetto con associazione a dati.</span><span class="sxs-lookup"><span data-stu-id="2bee9-281">A <xref:System.Windows.Data.BindingExpression> object is returned by calling <xref:System.Windows.Data.BindingOperations.GetBindingExpression%2A> on a data-bound object.</span></span> <span data-ttu-id="2bee9-282">Gli articoli seguenti illustrano alcuni degli usi della <xref:System.Windows.Data.BindingExpression> classe:</span><span class="sxs-lookup"><span data-stu-id="2bee9-282">The following articles demonstrate some of the usages of the <xref:System.Windows.Data.BindingExpression> class:</span></span>

- [<span data-ttu-id="2bee9-283">Ottenere l'oggetto di binding da una proprietà di destinazione associata</span><span class="sxs-lookup"><span data-stu-id="2bee9-283">Get the binding object from a bound target property</span></span>](../../framework/wpf/data/how-to-get-the-binding-object-from-a-bound-target-property.md)

- [<span data-ttu-id="2bee9-284">Controllare quando il testo della casella di testo aggiorna l'origine</span><span class="sxs-lookup"><span data-stu-id="2bee9-284">Control When the TextBox text updates the source</span></span>](../../framework/wpf/data/how-to-control-when-the-textbox-text-updates-the-source.md)

## <a name="data-conversion"></a><span data-ttu-id="2bee9-285">Conversione di dati</span><span class="sxs-lookup"><span data-stu-id="2bee9-285">Data conversion</span></span>

<span data-ttu-id="2bee9-286">Nella sezione [creazione di un'associazione](#creating-a-binding) il pulsante è rosso perché la relativa <xref:System.Windows.Controls.Control.Background%2A> proprietà è associata a una proprietà di stringa con il valore "Red".</span><span class="sxs-lookup"><span data-stu-id="2bee9-286">In the [Creating a binding](#creating-a-binding) section, the button is red because its <xref:System.Windows.Controls.Control.Background%2A> property is bound to a string property with the value "Red".</span></span> <span data-ttu-id="2bee9-287">Questo valore di stringa funziona perché nel tipo è presente un convertitore <xref:System.Windows.Media.Brush> di tipi per convertire il valore stringa in un oggetto <xref:System.Windows.Media.Brush> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-287">This string value works because a type converter is present on the <xref:System.Windows.Media.Brush> type to convert the string value to a <xref:System.Windows.Media.Brush>.</span></span>

<span data-ttu-id="2bee9-288">L'aggiunta di queste informazioni alla figura nella sezione [creazione di un'associazione ha un](#creating-a-binding) aspetto simile al seguente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-288">Adding this information to the figure in the [Creating a Binding](#creating-a-binding) section looks like this.</span></span>

![Diagramma che mostra il data binding proprietà predefinita.](./media/data-binding-overview/data-binding-button-default-conversion.png)

<span data-ttu-id="2bee9-290">Tuttavia, cosa accade se invece di avere una proprietà di tipo stringa l'oggetto di origine del binding ha una proprietà *color* di tipo <xref:System.Windows.Media.Color> ?</span><span class="sxs-lookup"><span data-stu-id="2bee9-290">However, what if instead of having a property of type string your binding source object has a *Color* property of type <xref:System.Windows.Media.Color>?</span></span> <span data-ttu-id="2bee9-291">In tal caso, per consentire il funzionamento dell'associazione, è necessario innanzitutto trasformare il valore della proprietà *color* in un elemento accettato dalla <xref:System.Windows.Controls.Control.Background%2A> Proprietà.</span><span class="sxs-lookup"><span data-stu-id="2bee9-291">In that case, in order for the binding to work you would need to first turn the *Color* property value into something that the <xref:System.Windows.Controls.Control.Background%2A> property accepts.</span></span> <span data-ttu-id="2bee9-292">È necessario creare un convertitore personalizzato implementando l' <xref:System.Windows.Data.IValueConverter> interfaccia, come nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-292">You would need to create a custom converter by implementing the <xref:System.Windows.Data.IValueConverter> interface, as in the following example.</span></span>

[!code-csharp[CodeOnlyBinding](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/ColorBrushConverter.cs#ColorBrushConverter)]
[!code-vb[CodeOnlyBinding](~/samples/snippets/desktop-guide/wpf/data-binding-overview/vb/ColorBrushConverter.vb#ColorBrushConverter)]

<span data-ttu-id="2bee9-293">Per altre informazioni, vedere <xref:System.Windows.Data.IValueConverter>.</span><span class="sxs-lookup"><span data-stu-id="2bee9-293">See <xref:System.Windows.Data.IValueConverter> for more information.</span></span>

<span data-ttu-id="2bee9-294">Il convertitore personalizzato viene ora usato al posto della conversione predefinita e il diagramma ha un aspetto simile al seguente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-294">Now the custom converter is used instead of default conversion, and our diagram looks like this.</span></span>

![Diagramma che mostra il convertitore data binding personalizzato.](./media/data-binding-overview/data-binding-converter-color-example.png)

<span data-ttu-id="2bee9-296">Come già detto, le conversioni predefinite possono essere disponibili o meno a seconda dei convertitori presenti nel tipo a cui si esegue il binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-296">To reiterate, default conversions may be available because of type converters that are present in the type being bound to.</span></span> <span data-ttu-id="2bee9-297">Questo comportamento dipenderà dai convertitori di tipi disponibili nella destinazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-297">This behavior will depend on which type converters are available in the target.</span></span> <span data-ttu-id="2bee9-298">In caso di dubbio, creare un convertitore personalizzato.</span><span class="sxs-lookup"><span data-stu-id="2bee9-298">If in doubt, create your own converter.</span></span>

<span data-ttu-id="2bee9-299">Di seguito sono riportati alcuni scenari tipici in cui è opportuno implementare un convertitore di dati:</span><span class="sxs-lookup"><span data-stu-id="2bee9-299">The following are some typical scenarios where it makes sense to implement a data converter:</span></span>

- <span data-ttu-id="2bee9-300">I dati devono essere visualizzati in modo diverso, a seconda delle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="2bee9-300">Your data should be displayed differently, depending on culture.</span></span> <span data-ttu-id="2bee9-301">È ad esempio possibile implementare un convertitore di valuta o un convertitore di data/ora di calendario basato sulle convenzioni utilizzate in determinate impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="2bee9-301">For instance, you might want to implement a currency converter or a calendar date/time converter based on the conventions used in a particular culture.</span></span>

- <span data-ttu-id="2bee9-302">I dati usati non devono necessariamente modificare il valore di testo di una proprietà quanto piuttosto altri valori, ad esempio l'origine di un'immagine oppure il colore o lo stile del testo visualizzato.</span><span class="sxs-lookup"><span data-stu-id="2bee9-302">The data being used is not necessarily intended to change the text value of a property, but is instead intended to change some other value, such as the source for an image, or the color or style of the display text.</span></span> <span data-ttu-id="2bee9-303">I convertitori possono essere usati in questo caso per convertire il binding di una proprietà considerata poco appropriata, ad esempio il binding di un campo di testo alla proprietà Background della cella di una tabella.</span><span class="sxs-lookup"><span data-stu-id="2bee9-303">Converters can be used in this instance by converting the binding of a property that might not seem to be appropriate, such as binding a text field to the Background property of a table cell.</span></span>

- <span data-ttu-id="2bee9-304">Più di un controllo o più proprietà dei controlli sono associati agli stessi dati.</span><span class="sxs-lookup"><span data-stu-id="2bee9-304">More than one control or multiple properties of controls are bound to the same data.</span></span> <span data-ttu-id="2bee9-305">In questo caso, il binding primario potrebbe semplicemente visualizzare il testo, mentre gli altri binding gestiscono problemi di visualizzazione specifici, usando comunque lo stesso binding come informazione di origine.</span><span class="sxs-lookup"><span data-stu-id="2bee9-305">In this case, the primary binding might just display the text, whereas other bindings handle specific display issues but still use the same binding as source information.</span></span>

- <span data-ttu-id="2bee9-306">Una proprietà di destinazione ha una raccolta di associazioni, che viene definita <xref:System.Windows.Data.MultiBinding> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-306">A target property has a collection of bindings, which is termed <xref:System.Windows.Data.MultiBinding>.</span></span> <span data-ttu-id="2bee9-307">Per <xref:System.Windows.Data.MultiBinding> , è possibile utilizzare un oggetto personalizzato <xref:System.Windows.Data.IMultiValueConverter> per produrre un valore finale dai valori dei binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-307">For <xref:System.Windows.Data.MultiBinding>, you use a custom <xref:System.Windows.Data.IMultiValueConverter> to produce a final value from the values of the bindings.</span></span> <span data-ttu-id="2bee9-308">È possibile ad esempio calcolare il colore dai valori rosso, blu e verde, ovvero valori che possono provenire da oggetti origine del binding identici o diversi.</span><span class="sxs-lookup"><span data-stu-id="2bee9-308">For example, color may be computed from red, blue, and green values, which can be values from the same or different binding source objects.</span></span> <span data-ttu-id="2bee9-309"><xref:System.Windows.Data.MultiBinding>Per esempi e informazioni, vedere.</span><span class="sxs-lookup"><span data-stu-id="2bee9-309">See  <xref:System.Windows.Data.MultiBinding> for examples and information.</span></span>

## <a name="binding-to-collections"></a><span data-ttu-id="2bee9-310">Associazione alle raccolte</span><span class="sxs-lookup"><span data-stu-id="2bee9-310">Binding to collections</span></span>

<span data-ttu-id="2bee9-311">Un oggetto di origine di associazione può essere considerato come un singolo oggetto le cui proprietà contengono dati o come raccolta di dati di oggetti polimorfici spesso raggruppati, ad esempio il risultato di una query in un database.</span><span class="sxs-lookup"><span data-stu-id="2bee9-311">A binding source object can be treated either as a single object whose properties contain data or as a data collection of polymorphic objects that are often grouped together (such as the result of a query to a database).</span></span> <span data-ttu-id="2bee9-312">Finora è stata discussa solo l'associazione a singoli oggetti.</span><span class="sxs-lookup"><span data-stu-id="2bee9-312">So far we've only discussed binding to single objects.</span></span> <span data-ttu-id="2bee9-313">Tuttavia, l'associazione a una raccolta dati è uno scenario comune.</span><span class="sxs-lookup"><span data-stu-id="2bee9-313">However, binding to a data collection is a common scenario.</span></span> <span data-ttu-id="2bee9-314">Uno scenario comune, ad esempio, consiste nell'usare un <xref:System.Windows.Controls.ItemsControl> tipo <xref:System.Windows.Controls.ListBox> , <xref:System.Windows.Controls.ListView> o <xref:System.Windows.Controls.TreeView> per visualizzare una raccolta di dati, ad esempio nell'app mostrata nella sezione [What is data binding](#what-is-data-binding) .</span><span class="sxs-lookup"><span data-stu-id="2bee9-314">For example, a common scenario is to use an <xref:System.Windows.Controls.ItemsControl> such as a <xref:System.Windows.Controls.ListBox>, <xref:System.Windows.Controls.ListView>, or <xref:System.Windows.Controls.TreeView> to display a data collection, such as in the app shown in the [What is data binding](#what-is-data-binding) section.</span></span>

<span data-ttu-id="2bee9-315">Anche in questo caso è possibile applicare il diagramma di base.</span><span class="sxs-lookup"><span data-stu-id="2bee9-315">Fortunately, our basic diagram still applies.</span></span> <span data-ttu-id="2bee9-316">Se si associa un oggetto <xref:System.Windows.Controls.ItemsControl> a una raccolta, il diagramma ha un aspetto simile al seguente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-316">If you are binding an <xref:System.Windows.Controls.ItemsControl> to a collection, the diagram looks like this.</span></span>

![Diagramma che mostra il data binding oggetto ItemsControl.](./media/data-binding-overview/data-binding-itemscontrol.png)

<span data-ttu-id="2bee9-318">Come illustrato in questo diagramma, per associare un <xref:System.Windows.Controls.ItemsControl> oggetto a un oggetto raccolta, <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A?displayProperty=nameWithType> Property è la proprietà da usare.</span><span class="sxs-lookup"><span data-stu-id="2bee9-318">As shown in this diagram, to bind an <xref:System.Windows.Controls.ItemsControl> to a collection object, <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A?displayProperty=nameWithType> property is the property to use.</span></span> <span data-ttu-id="2bee9-319">È possibile considerare `ItemsSource` come il contenuto di <xref:System.Windows.Controls.ItemsControl> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-319">You can think of `ItemsSource` as the content of the <xref:System.Windows.Controls.ItemsControl>.</span></span> <span data-ttu-id="2bee9-320">L'associazione è <xref:System.Windows.Data.BindingMode.OneWay> perché la `ItemsSource` proprietà supporta l' `OneWay` associazione per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="2bee9-320">The binding is <xref:System.Windows.Data.BindingMode.OneWay> because the `ItemsSource` property supports `OneWay` binding by default.</span></span>

### <a name="how-to-implement-collections"></a><span data-ttu-id="2bee9-321">Come implementare le raccolte</span><span class="sxs-lookup"><span data-stu-id="2bee9-321">How to implement collections</span></span>

<span data-ttu-id="2bee9-322">È possibile enumerare qualsiasi raccolta che implementi l' <xref:System.Collections.IEnumerable> interfaccia.</span><span class="sxs-lookup"><span data-stu-id="2bee9-322">You can enumerate over any collection that implements the <xref:System.Collections.IEnumerable> interface.</span></span> <span data-ttu-id="2bee9-323">Tuttavia, per configurare i binding dinamici in modo che gli inserimenti o le eliminazioni nella raccolta aggiornino automaticamente l'interfaccia utente, la raccolta deve implementare l' <xref:System.Collections.Specialized.INotifyCollectionChanged> interfaccia.</span><span class="sxs-lookup"><span data-stu-id="2bee9-323">However, to set up dynamic bindings so that insertions or deletions in the collection update the UI automatically, the collection must implement the <xref:System.Collections.Specialized.INotifyCollectionChanged> interface.</span></span> <span data-ttu-id="2bee9-324">Questa interfaccia espone un evento che deve essere generato a ogni modifica della raccolta sottostante.</span><span class="sxs-lookup"><span data-stu-id="2bee9-324">This interface exposes an event that should be raised whenever the underlying collection changes.</span></span>

<span data-ttu-id="2bee9-325">WPF fornisce la <xref:System.Collections.ObjectModel.ObservableCollection%601> classe, che è un'implementazione incorporata di una raccolta di dati che espone l' <xref:System.Collections.Specialized.INotifyCollectionChanged> interfaccia.</span><span class="sxs-lookup"><span data-stu-id="2bee9-325">WPF provides the <xref:System.Collections.ObjectModel.ObservableCollection%601> class, which is a built-in implementation of a data collection that exposes the <xref:System.Collections.Specialized.INotifyCollectionChanged> interface.</span></span> <span data-ttu-id="2bee9-326">Per supportare completamente il trasferimento dei valori di dati dagli oggetti di origine alle destinazioni, ogni oggetto della raccolta che supporta le proprietà associabili deve implementare anche l' <xref:System.ComponentModel.INotifyPropertyChanged> interfaccia.</span><span class="sxs-lookup"><span data-stu-id="2bee9-326">To fully support transferring data values from source objects to targets, each object in your collection that supports bindable properties must also implement the <xref:System.ComponentModel.INotifyPropertyChanged> interface.</span></span> <span data-ttu-id="2bee9-327">Per altre informazioni, vedere [Cenni preliminari sulle origini di associazione](../../framework/wpf/data/binding-sources-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2bee9-327">For more information, see [Binding sources overview](../../framework/wpf/data/binding-sources-overview.md).</span></span>

<span data-ttu-id="2bee9-328">Prima di implementare una raccolta personalizzata, prendere <xref:System.Collections.ObjectModel.ObservableCollection%601> in considerazione l'uso di o di una delle classi di raccolte esistenti, ad esempio <xref:System.Collections.Generic.List%601> , <xref:System.Collections.ObjectModel.Collection%601> e <xref:System.ComponentModel.BindingList%601> , tra molte altre.</span><span class="sxs-lookup"><span data-stu-id="2bee9-328">Before implementing your own collection, consider using <xref:System.Collections.ObjectModel.ObservableCollection%601> or one of the existing collection classes, such as <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ObjectModel.Collection%601>, and <xref:System.ComponentModel.BindingList%601>, among many others.</span></span> <span data-ttu-id="2bee9-329">Se si dispone di uno scenario avanzato e si desidera implementare una raccolta personalizzata, considerare <xref:System.Collections.IList> l'utilizzo di, che fornisce una raccolta non generica di oggetti a cui è possibile accedere singolarmente dall'indice e fornisce pertanto le prestazioni migliori.</span><span class="sxs-lookup"><span data-stu-id="2bee9-329">If you have an advanced scenario and want to implement your own collection, consider using <xref:System.Collections.IList>, which provides a non-generic collection of objects that can be individually accessed by the index, and thus provides the best performance.</span></span>

### <a name="collection-views"></a><span data-ttu-id="2bee9-330">Viste di raccolta</span><span class="sxs-lookup"><span data-stu-id="2bee9-330">Collection views</span></span>

<span data-ttu-id="2bee9-331">Una volta <xref:System.Windows.Controls.ItemsControl> associato a una raccolta di dati, è possibile ordinare, filtrare o raggruppare i dati.</span><span class="sxs-lookup"><span data-stu-id="2bee9-331">Once your <xref:System.Windows.Controls.ItemsControl> is bound to a data collection, you may want to sort, filter, or group the data.</span></span> <span data-ttu-id="2bee9-332">A tale scopo, usare le visualizzazioni di raccolta, che sono classi che implementano l' <xref:System.ComponentModel.ICollectionView> interfaccia.</span><span class="sxs-lookup"><span data-stu-id="2bee9-332">To do that, you use collection views, which are classes that implement the <xref:System.ComponentModel.ICollectionView> interface.</span></span>

#### <a name="what-are-collection-views"></a><span data-ttu-id="2bee9-333">Che cosa sono le visualizzazioni di raccolta?</span><span class="sxs-lookup"><span data-stu-id="2bee9-333">What Are collection views?</span></span>

<span data-ttu-id="2bee9-334">Una visualizzazione di raccolta rappresenta il livello superiore di una raccolta di origine di binding che consente di esplorare e visualizzare la raccolta di origine in base a query di ordinamento, filtro e raggruppamento, il tutto senza modificare la raccolta di origine sottostante.</span><span class="sxs-lookup"><span data-stu-id="2bee9-334">A collection view is a layer on top of a binding source collection that allows you to navigate and display the source collection based on sort, filter, and group queries, without having to change the underlying source collection itself.</span></span> <span data-ttu-id="2bee9-335">Una visualizzazione di raccolta mantiene inoltre un puntatore all'elemento corrente nella raccolta.</span><span class="sxs-lookup"><span data-stu-id="2bee9-335">A collection view also maintains a pointer to the current item in the collection.</span></span> <span data-ttu-id="2bee9-336">Se la raccolta di origine implementa l' <xref:System.Collections.Specialized.INotifyCollectionChanged> interfaccia, le modifiche generate dall' <xref:System.Collections.Specialized.INotifyCollectionChanged.CollectionChanged> evento vengono propagate alle viste.</span><span class="sxs-lookup"><span data-stu-id="2bee9-336">If the source collection implements the <xref:System.Collections.Specialized.INotifyCollectionChanged> interface, the changes raised by the <xref:System.Collections.Specialized.INotifyCollectionChanged.CollectionChanged> event are propagated to the views.</span></span>

<span data-ttu-id="2bee9-337">Poiché le visualizzazioni non modificano le raccolte di origine sottostanti, ogni raccolta di origine può avere più visualizzazioni associate.</span><span class="sxs-lookup"><span data-stu-id="2bee9-337">Because views do not change the underlying source collections, each source collection can have multiple views associated with it.</span></span> <span data-ttu-id="2bee9-338">Si consideri ad esempio una raccolta di oggetti *Task*.</span><span class="sxs-lookup"><span data-stu-id="2bee9-338">For example, you may have a collection of *Task* objects.</span></span> <span data-ttu-id="2bee9-339">Grazie alle visualizzazioni è possibile visualizzare gli stessi dati in modi diversi.</span><span class="sxs-lookup"><span data-stu-id="2bee9-339">With the use of views, you can display that same data in different ways.</span></span> <span data-ttu-id="2bee9-340">È possibile ad esempio visualizzare le attività ordinate in base alla priorità nella parte sinistra della pagina e, contemporaneamente nella parte destra, visualizzare le stesse attività raggruppate in base all'area.</span><span class="sxs-lookup"><span data-stu-id="2bee9-340">For example, on the left side of your page you may want to show tasks sorted by priority, and on the right side, grouped by area.</span></span>

#### <a name="how-to-create-a-view"></a><span data-ttu-id="2bee9-341">Come creare una visualizzazione</span><span class="sxs-lookup"><span data-stu-id="2bee9-341">How to create a view</span></span>

<span data-ttu-id="2bee9-342">Per creare e usare una visualizzazione, è possibile creare direttamente un'istanza dell'oggetto visualizzazione e usare tale istanza come origine del binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-342">One way to create and use a view is to instantiate the view object directly and then use it as the binding source.</span></span> <span data-ttu-id="2bee9-343">Si consideri, ad esempio, l'app [demo di data binding][data-binding-demo] mostrata nella sezione [What is data binding](#what-is-data-binding) .</span><span class="sxs-lookup"><span data-stu-id="2bee9-343">For example, consider the [Data binding demo][data-binding-demo] app shown in the [What is data binding](#what-is-data-binding) section.</span></span> <span data-ttu-id="2bee9-344">L'app viene implementata in modo che il <xref:System.Windows.Controls.ListBox> associ a una visualizzazione sulla raccolta dati invece che direttamente sulla raccolta di dati.</span><span class="sxs-lookup"><span data-stu-id="2bee9-344">The app is implemented such that the <xref:System.Windows.Controls.ListBox> binds to a view over the data collection instead of the data collection directly.</span></span> <span data-ttu-id="2bee9-345">L'esempio seguente viene estratto dall'app [demo di data binding][data-binding-demo] .</span><span class="sxs-lookup"><span data-stu-id="2bee9-345">The following example is extracted from the [Data binding demo][data-binding-demo] app.</span></span> <span data-ttu-id="2bee9-346">La <xref:System.Windows.Data.CollectionViewSource> classe è il proxy XAML di una classe che eredita da <xref:System.Windows.Data.CollectionView> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-346">The <xref:System.Windows.Data.CollectionViewSource> class is the XAML proxy of a class that inherits from <xref:System.Windows.Data.CollectionView>.</span></span> <span data-ttu-id="2bee9-347">In questo particolare esempio, l' <xref:System.Windows.Data.CollectionViewSource.Source%2A> oggetto della vista è associato alla raccolta *AuctionItems* (di tipo <xref:System.Collections.ObjectModel.ObservableCollection%601> ) dell'oggetto app corrente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-347">In this particular example, the <xref:System.Windows.Data.CollectionViewSource.Source%2A> of the view is bound to the *AuctionItems* collection (of type <xref:System.Collections.ObjectModel.ObservableCollection%601>) of the current app object.</span></span>

[!code-xaml[CollectionView](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml#CollectionView)]

<span data-ttu-id="2bee9-348">La risorsa *listingDataView* funge quindi da origine dell'associazione per gli elementi nell'app, ad esempio <xref:System.Windows.Controls.ListBox> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-348">The resource *listingDataView* then serves as the binding source for elements in the app, such as the <xref:System.Windows.Controls.ListBox>.</span></span>

[!code-xaml[ListBoxCollectionView](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml#ListBoxCollectionView)]

<span data-ttu-id="2bee9-349">Per creare un'altra visualizzazione per la stessa raccolta, è possibile creare un'altra <xref:System.Windows.Data.CollectionViewSource> istanza e assegnarle un `x:Key` nome diverso.</span><span class="sxs-lookup"><span data-stu-id="2bee9-349">To create another view for the same collection, you can create another <xref:System.Windows.Data.CollectionViewSource> instance and give it a different `x:Key` name.</span></span>

<span data-ttu-id="2bee9-350">Nella tabella seguente vengono illustrati i tipi di dati di visualizzazione creati come visualizzazione di raccolta predefinita o in <xref:System.Windows.Data.CollectionViewSource> base al tipo di raccolta di origine.</span><span class="sxs-lookup"><span data-stu-id="2bee9-350">The following table shows what view data types are created as the default collection view or by <xref:System.Windows.Data.CollectionViewSource> based on the source collection type.</span></span>

| <span data-ttu-id="2bee9-351">Tipo di raccolta di origine</span><span class="sxs-lookup"><span data-stu-id="2bee9-351">Source collection type</span></span>                    | <span data-ttu-id="2bee9-352">Tipo di visualizzazione di raccolta</span><span class="sxs-lookup"><span data-stu-id="2bee9-352">Collection view type</span></span> | <span data-ttu-id="2bee9-353">Note</span><span class="sxs-lookup"><span data-stu-id="2bee9-353">Notes</span></span> |
| ----------------------------------------- | -------------------- | ----- |
| <xref:System.Collections.IEnumerable>     | <span data-ttu-id="2bee9-354">Tipo interno basato su<xref:System.Windows.Data.CollectionView></span><span class="sxs-lookup"><span data-stu-id="2bee9-354">An internal type based on <xref:System.Windows.Data.CollectionView></span></span> | <span data-ttu-id="2bee9-355">Non è possibile raggruppare gli elementi.</span><span class="sxs-lookup"><span data-stu-id="2bee9-355">Cannot group items.</span></span> |
| <xref:System.Collections.IList>           | <xref:System.Windows.Data.ListCollectionView> | <span data-ttu-id="2bee9-356">Il più veloce.</span><span class="sxs-lookup"><span data-stu-id="2bee9-356">Fastest.</span></span> |
| <xref:System.ComponentModel.IBindingList> | <xref:System.Windows.Data.BindingListCollectionView> | |

#### <a name="using-a-default-view"></a><span data-ttu-id="2bee9-357">Utilizzo di una visualizzazione predefinita</span><span class="sxs-lookup"><span data-stu-id="2bee9-357">Using a default view</span></span>

<span data-ttu-id="2bee9-358">Specificare una visualizzazione di raccolta come origine di binding rappresenta un modo per creare e usare una visualizzazione di raccolta.</span><span class="sxs-lookup"><span data-stu-id="2bee9-358">Specifying a collection view as a binding source is one way to create and use a collection view.</span></span> <span data-ttu-id="2bee9-359">WPF crea inoltre una visualizzazione di raccolta predefinita per ogni raccolta usata come origine di binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-359">WPF also creates a default collection view for every collection used as a binding source.</span></span> <span data-ttu-id="2bee9-360">Se si esegue il binding direttamente a una raccolta, WPF esegue il binding alla relativa visualizzazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="2bee9-360">If you bind directly to a collection, WPF binds to its default view.</span></span> <span data-ttu-id="2bee9-361">Questa visualizzazione predefinita è condivisa da tutti i binding alla stessa raccolta, quindi una modifica apportata a una visualizzazione predefinita da un controllo o da un codice associato, ad esempio l'ordinamento o una modifica al puntatore dell'elemento corrente, descritta più avanti, viene riflessa in tutte le altre associazioni alla stessa raccolta.</span><span class="sxs-lookup"><span data-stu-id="2bee9-361">This default view is shared by all bindings to the same collection, so a change made to a default view by one bound control or code (such as sorting or a change to the current item pointer, discussed later) is reflected in all other bindings to the same collection.</span></span>

<span data-ttu-id="2bee9-362">Per ottenere la visualizzazione predefinita, usare il <xref:System.Windows.Data.CollectionViewSource.GetDefaultView%2A> metodo.</span><span class="sxs-lookup"><span data-stu-id="2bee9-362">To get the default view, you use the <xref:System.Windows.Data.CollectionViewSource.GetDefaultView%2A> method.</span></span> <span data-ttu-id="2bee9-363">Per un esempio, vedere [ottenere la visualizzazione predefinita di una raccolta di dati](../../framework/wpf/data/how-to-get-the-default-view-of-a-data-collection.md).</span><span class="sxs-lookup"><span data-stu-id="2bee9-363">For an example, see [Get the default view of a data collection](../../framework/wpf/data/how-to-get-the-default-view-of-a-data-collection.md).</span></span>

#### <a name="collection-views-with-adonet-datatables"></a><span data-ttu-id="2bee9-364">Viste di raccolta con DataTables ADO.NET</span><span class="sxs-lookup"><span data-stu-id="2bee9-364">Collection views with ADO.NET DataTables</span></span>

<span data-ttu-id="2bee9-365">Per migliorare le prestazioni, le visualizzazioni di raccolta per ADO.NET <xref:System.Data.DataTable> o <xref:System.Data.DataView> gli oggetti delegano l'ordinamento e il filtro a <xref:System.Data.DataView> , che determina la condivisione dell'ordinamento e del filtro tra tutte le visualizzazioni di raccolta dell'origine dati.</span><span class="sxs-lookup"><span data-stu-id="2bee9-365">To improve performance, collection views for ADO.NET <xref:System.Data.DataTable> or <xref:System.Data.DataView> objects delegate sorting and filtering to the <xref:System.Data.DataView>, which causes sorting and filtering to be shared across all collection views of the data source.</span></span> <span data-ttu-id="2bee9-366">Per consentire a ogni visualizzazione della raccolta di ordinare e filtrare in modo indipendente, inizializzare ogni visualizzazione di raccolta con il relativo <xref:System.Data.DataView> oggetto.</span><span class="sxs-lookup"><span data-stu-id="2bee9-366">To enable each collection view to sort and filter independently, initialize each collection view with its own <xref:System.Data.DataView> object.</span></span>

#### <a name="sorting"></a><span data-ttu-id="2bee9-367">Ordinamento</span><span class="sxs-lookup"><span data-stu-id="2bee9-367">Sorting</span></span>

<span data-ttu-id="2bee9-368">Come detto in precedenza, le visualizzazioni possono applicare un ordinamento a una raccolta.</span><span class="sxs-lookup"><span data-stu-id="2bee9-368">As mentioned before, views can apply a sort order to a collection.</span></span> <span data-ttu-id="2bee9-369">Poiché esistono nella raccolta sottostante, i dati possono avere o non avere un ordine intrinseco.</span><span class="sxs-lookup"><span data-stu-id="2bee9-369">As it exists in the underlying collection, your data may or may not have a relevant, inherent order.</span></span> <span data-ttu-id="2bee9-370">La visualizzazione della raccolta consente di imporre un ordine o di modificare l'ordine predefinito in base ai criteri di confronto che si forniscono.</span><span class="sxs-lookup"><span data-stu-id="2bee9-370">The view over the collection allows you to impose an order, or change the default order, based on comparison criteria that you supply.</span></span> <span data-ttu-id="2bee9-371">Trattandosi di una visualizzazione dei dati basata su client, uno scenario comune prevede che l'utente possa ordinare le colonne di dati tabulari in base al valore al quale corrisponde la colonna.</span><span class="sxs-lookup"><span data-stu-id="2bee9-371">Because it is a client-based view of the data, a common scenario is that the user might want to sort columns of tabular data per the value that the column corresponds to.</span></span> <span data-ttu-id="2bee9-372">Grazie alle visualizzazioni, è possibile applicare questo ordinamento gestito dall'utente senza apportare alcuna modifica alla raccolta sottostante né dover ripetere la query nel contenuto della raccolta.</span><span class="sxs-lookup"><span data-stu-id="2bee9-372">Using views, this user-driven sort can be applied, again without making any changes to the underlying collection or even having to requery for the collection content.</span></span> <span data-ttu-id="2bee9-373">Per un esempio, vedere [ordinare una colonna GridView quando si fa clic su un'intestazione](../../framework/wpf/controls/how-to-sort-a-gridview-column-when-a-header-is-clicked.md).</span><span class="sxs-lookup"><span data-stu-id="2bee9-373">For an example, see [Sort a GridView column when a header is clicked](../../framework/wpf/controls/how-to-sort-a-gridview-column-when-a-header-is-clicked.md).</span></span>

<span data-ttu-id="2bee9-374">Nell'esempio seguente viene illustrata la logica di ordinamento di "Ordina per categoria e data" <xref:System.Windows.Controls.CheckBox> dell'interfaccia utente dell'app nella sezione [What is data binding](#what-is-data-binding) .</span><span class="sxs-lookup"><span data-stu-id="2bee9-374">The following example shows the sorting logic of the "Sort by category and date" <xref:System.Windows.Controls.CheckBox> of the app UI in the [What is data binding](#what-is-data-binding) section.</span></span>

[!code-csharp[AddSortChecked](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml.cs#AddSortChecked)]
[!code-vb[AddSortChecked](~/samples/snippets/desktop-guide/wpf/data-binding-overview/vb/CollectionView.xaml.vb#AddSortChecked)]

#### <a name="filtering"></a><span data-ttu-id="2bee9-375">Filtro</span><span class="sxs-lookup"><span data-stu-id="2bee9-375">Filtering</span></span>

<span data-ttu-id="2bee9-376">Le visualizzazioni possono inoltre applicare un filtro a una raccolta, in modo che la visualizzazione mostri solo un determinato subset della raccolta completa.</span><span class="sxs-lookup"><span data-stu-id="2bee9-376">Views can also apply a filter to a collection, so that the view shows only a certain subset of the full collection.</span></span> <span data-ttu-id="2bee9-377">I dati possono essere filtrati in base a una condizione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-377">You might filter on a condition in the data.</span></span> <span data-ttu-id="2bee9-378">Ad esempio, come avviene con l'app nella sezione [che cosa è data binding](#what-is-data-binding) , la "Mostra solo le occasioni" <xref:System.Windows.Controls.CheckBox> contiene la logica per filtrare gli elementi che costano $25 o più.</span><span class="sxs-lookup"><span data-stu-id="2bee9-378">For instance, as is done by the app in the [What is data binding](#what-is-data-binding) section, the "Show only bargains" <xref:System.Windows.Controls.CheckBox> contains logic to filter out items that cost $25 or more.</span></span> <span data-ttu-id="2bee9-379">Il codice seguente viene eseguito per impostare *ShowOnlyBargainsFilter* come <xref:System.Windows.Data.CollectionViewSource.Filter> gestore eventi quando <xref:System.Windows.Controls.CheckBox> viene selezionato.</span><span class="sxs-lookup"><span data-stu-id="2bee9-379">The following code is executed to set *ShowOnlyBargainsFilter* as the <xref:System.Windows.Data.CollectionViewSource.Filter> event handler when that <xref:System.Windows.Controls.CheckBox> is selected.</span></span>

[!code-csharp[ListingViewFilter](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml.cs#ListingViewFilter)]
[!code-vb[ListingViewFilter](~/samples/snippets/desktop-guide/wpf/data-binding-overview/vb/CollectionView.xaml.vb#ListingViewFilter)]

<span data-ttu-id="2bee9-380">Il gestore dell'evento *ShowOnlyBargainsFilter* presenta l'implementazione seguente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-380">The *ShowOnlyBargainsFilter* event handler has the following implementation.</span></span>

[!code-csharp[FilterEvent](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml.cs#FilterEvent)]
[!code-vb[FilterEvent](~/samples/snippets/desktop-guide/wpf/data-binding-overview/vb/CollectionView.xaml.vb#FilterEvent)]

<span data-ttu-id="2bee9-381">Se si utilizza direttamente una delle <xref:System.Windows.Data.CollectionView> classi anziché <xref:System.Windows.Data.CollectionViewSource> , utilizzare la <xref:System.Windows.Data.CollectionView.Filter%2A> proprietà per specificare un callback.</span><span class="sxs-lookup"><span data-stu-id="2bee9-381">If you are using one of the <xref:System.Windows.Data.CollectionView> classes directly instead of <xref:System.Windows.Data.CollectionViewSource>, you would use the <xref:System.Windows.Data.CollectionView.Filter%2A> property to specify a callback.</span></span> <span data-ttu-id="2bee9-382">Per un esempio, vedere [Procedura: Filtrare i dati in una visualizzazione](../../framework/wpf/data/how-to-filter-data-in-a-view.md).</span><span class="sxs-lookup"><span data-stu-id="2bee9-382">For an example, see [Filter Data in a View](../../framework/wpf/data/how-to-filter-data-in-a-view.md).</span></span>

#### <a name="grouping"></a><span data-ttu-id="2bee9-383">Raggruppamento</span><span class="sxs-lookup"><span data-stu-id="2bee9-383">Grouping</span></span>

<span data-ttu-id="2bee9-384">Ad eccezione della classe interna che visualizza una <xref:System.Collections.IEnumerable> raccolta, tutte le visualizzazioni di raccolta supportano il *raggruppamento*, che consente all'utente di partizionare la raccolta nella visualizzazione raccolta in gruppi logici.</span><span class="sxs-lookup"><span data-stu-id="2bee9-384">Except for the internal class that views an <xref:System.Collections.IEnumerable> collection, all collection views support *grouping*, which allows the user to partition the collection in the collection view into logical groups.</span></span> <span data-ttu-id="2bee9-385">Se l'utente fornisce un elenco di gruppi, questi saranno espliciti. Se invece i gruppi vengono generati in modo dinamico in base ai dati, si avranno gruppi impliciti.</span><span class="sxs-lookup"><span data-stu-id="2bee9-385">The groups can be explicit, where the user supplies a list of groups, or implicit, where the groups are generated dynamically depending on the data.</span></span>

<span data-ttu-id="2bee9-386">Nell'esempio seguente viene illustrata la logica della categoria "Group by" <xref:System.Windows.Controls.CheckBox> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-386">The following example shows the logic of the "Group by category" <xref:System.Windows.Controls.CheckBox>.</span></span>

[!code-csharp[ListingGroupCheck](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml.cs#ListingGroupCheck)]
[!code-vb[ListingGroupCheck](~/samples/snippets/desktop-guide/wpf/data-binding-overview/vb/CollectionView.xaml.vb#ListingGroupCheck)]

<span data-ttu-id="2bee9-387">Per un altro esempio di raggruppamento, vedere [Procedura: Raggruppare gli elementi di un controllo ListView che implementa una GridView](../../framework/wpf/controls/how-to-group-items-in-a-listview-that-implements-a-gridview.md).</span><span class="sxs-lookup"><span data-stu-id="2bee9-387">For another grouping example, see [Group Items in a ListView That Implements a GridView](../../framework/wpf/controls/how-to-group-items-in-a-listview-that-implements-a-gridview.md).</span></span>

#### <a name="current-item-pointers"></a><span data-ttu-id="2bee9-388">Puntatori elemento corrente</span><span class="sxs-lookup"><span data-stu-id="2bee9-388">Current item pointers</span></span>

<span data-ttu-id="2bee9-389">Le visualizzazioni supportano anche la nozione di elemento corrente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-389">Views also support the notion of a current item.</span></span> <span data-ttu-id="2bee9-390">In una visualizzazione di raccolta è possibile spostarsi da un oggetto all'altro.</span><span class="sxs-lookup"><span data-stu-id="2bee9-390">You can navigate through the objects in a collection view.</span></span> <span data-ttu-id="2bee9-391">Durante lo spostamento viene spostato un puntatore dell'elemento che consente di recuperare l'oggetto presente in un percorso specifico nella raccolta.</span><span class="sxs-lookup"><span data-stu-id="2bee9-391">As you navigate, you are moving an item pointer that allows you to retrieve the object that exists at that particular location in the collection.</span></span> <span data-ttu-id="2bee9-392">Per un esempio, vedere [spostarsi tra gli oggetti in una data CollectionView](../../framework/wpf/data/how-to-navigate-through-the-objects-in-a-data-collectionview.md).</span><span class="sxs-lookup"><span data-stu-id="2bee9-392">For an example, see [Navigate through the objects in a data CollectionView](../../framework/wpf/data/how-to-navigate-through-the-objects-in-a-data-collectionview.md).</span></span>

<span data-ttu-id="2bee9-393">Poiché WPF esegue il binding a una raccolta solo tramite una visualizzazione, che può essere sia una visualizzazione specificata dall'utente che la visualizzazione predefinita della raccolta, tutti i binding alle raccolte contengono un puntatore dell'elemento corrente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-393">Because WPF binds to a collection only by using a view (either a view you specify, or the collection's default view), all bindings to collections have a current item pointer.</span></span> <span data-ttu-id="2bee9-394">Quando si esegue il binding a una visualizzazione, il carattere barra ("/") in un valore di `Path` definisce l'elemento corrente della visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-394">When binding to a view, the slash ("/") character in a `Path` value designates the current item of the view.</span></span> <span data-ttu-id="2bee9-395">Nell'esempio seguente il contesto di dati è una visualizzazione di raccolta.</span><span class="sxs-lookup"><span data-stu-id="2bee9-395">In the following example, the data context is a collection view.</span></span> <span data-ttu-id="2bee9-396">La prima riga viene associata alla raccolta.</span><span class="sxs-lookup"><span data-stu-id="2bee9-396">The first line binds to the collection.</span></span> <span data-ttu-id="2bee9-397">La seconda riga viene associata all'elemento corrente della raccolta.</span><span class="sxs-lookup"><span data-stu-id="2bee9-397">The second line binds to the current item in the collection.</span></span> <span data-ttu-id="2bee9-398">La terza riga viene associata alla proprietà `Description` dell'elemento corrente nella raccolta.</span><span class="sxs-lookup"><span data-stu-id="2bee9-398">The third line binds to the `Description` property of the current item in the collection.</span></span>

```xaml
<Button Content="{Binding }" />
<Button Content="{Binding Path=/}" />
<Button Content="{Binding Path=/Description}" />
```

<span data-ttu-id="2bee9-399">La barra e la sintassi della proprietà possono inoltre essere sovrapposte per attraversare una gerarchia di raccolte.</span><span class="sxs-lookup"><span data-stu-id="2bee9-399">The slash and property syntax can also be stacked to traverse a hierarchy of collections.</span></span> <span data-ttu-id="2bee9-400">Nell'esempio seguente viene eseguito il binding all'elemento corrente di una raccolta denominata `Offices`, che è una proprietà dell'elemento corrente della raccolta di origine.</span><span class="sxs-lookup"><span data-stu-id="2bee9-400">The following example binds to the current item of a collection named `Offices`, which is a property of the current item of the source collection.</span></span>

```xaml
<Button Content="{Binding /Offices/}" />
```

<span data-ttu-id="2bee9-401">Il puntatore dell'elemento corrente può essere influenzato da un'operazione di ordinamento o filtro applicata alla raccolta.</span><span class="sxs-lookup"><span data-stu-id="2bee9-401">The current item pointer can be affected by any sorting or filtering that is applied to the collection.</span></span> <span data-ttu-id="2bee9-402">L'ordinamento mantiene il puntatore dell'elemento corrente sull'ultimo elemento selezionato, ma la visualizzazione di raccolta viene ristrutturata in base a tale elemento.</span><span class="sxs-lookup"><span data-stu-id="2bee9-402">Sorting preserves the current item pointer on the last item selected, but the collection view is now restructured around it.</span></span> <span data-ttu-id="2bee9-403">(Probabilmente l'elemento selezionato si trovava all'inizio dell'elenco prima, ma ora l'elemento selezionato potrebbe trovarsi in un punto al centro). Il filtro mantiene l'elemento selezionato se tale selezione rimane visualizzata dopo il filtro.</span><span class="sxs-lookup"><span data-stu-id="2bee9-403">(Perhaps the selected item was at the beginning of the list before, but now the selected item might be somewhere in the middle.) Filtering preserves the selected item if that selection remains in view after the filtering.</span></span> <span data-ttu-id="2bee9-404">Il puntatore dell'elemento corrente viene altrimenti impostato sul primo elemento della visualizzazione di raccolta filtrata.</span><span class="sxs-lookup"><span data-stu-id="2bee9-404">Otherwise, the current item pointer is set to the first item of the filtered collection view.</span></span>

#### <a name="master-detail-binding-scenario"></a><span data-ttu-id="2bee9-405">Scenario di associazione master-dettagli</span><span class="sxs-lookup"><span data-stu-id="2bee9-405">Master-detail binding scenario</span></span>

<span data-ttu-id="2bee9-406">La nozione di elemento corrente è utile non solo per l'esplorazione degli elementi in una raccolta, bensì anche per lo scenario di binding master-dettagli.</span><span class="sxs-lookup"><span data-stu-id="2bee9-406">The notion of a current item is useful not only for navigation of items in a collection, but also for the master-detail binding scenario.</span></span> <span data-ttu-id="2bee9-407">Prendere in considerazione l'interfaccia utente dell'app nella sezione [What is data binding](#what-is-data-binding) .</span><span class="sxs-lookup"><span data-stu-id="2bee9-407">Consider the app UI in the [What is data binding](#what-is-data-binding) section again.</span></span> <span data-ttu-id="2bee9-408">In tale app la selezione all'interno di <xref:System.Windows.Controls.ListBox> determina il contenuto visualizzato nell'oggetto <xref:System.Windows.Controls.ContentControl> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-408">In that app, the selection within the <xref:System.Windows.Controls.ListBox> determines the content shown in the <xref:System.Windows.Controls.ContentControl>.</span></span> <span data-ttu-id="2bee9-409">Per inserirla in un altro modo, quando <xref:System.Windows.Controls.ListBox> viene selezionato un elemento, <xref:System.Windows.Controls.ContentControl> Visualizza i dettagli dell'elemento selezionato.</span><span class="sxs-lookup"><span data-stu-id="2bee9-409">To put it in another way, when a <xref:System.Windows.Controls.ListBox> item is selected, the <xref:System.Windows.Controls.ContentControl> shows the details of the selected item.</span></span>

<span data-ttu-id="2bee9-410">Per implementare lo scenario master-dettagli, occorre semplicemente avere due o più controlli associati alla stessa visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-410">You can implement the master-detail scenario simply by having two or more controls bound to the same view.</span></span> <span data-ttu-id="2bee9-411">L'esempio seguente dalla [demo di data binding][data-binding-demo] Mostra il markup di <xref:System.Windows.Controls.ListBox> e l'oggetto <xref:System.Windows.Controls.ContentControl> visualizzato nell'interfaccia utente dell'app nella sezione [What is data binding](#what-is-data-binding) .</span><span class="sxs-lookup"><span data-stu-id="2bee9-411">The following example from the [Data binding demo][data-binding-demo] shows the markup of the <xref:System.Windows.Controls.ListBox> and the <xref:System.Windows.Controls.ContentControl> you see on the app UI in the [What is data binding](#what-is-data-binding) section.</span></span>

[!code-xaml[ListBoxContentControl](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml#ListBoxContentControl)]

<span data-ttu-id="2bee9-412">Si noti che entrambi i controlli sono associati alla stessa origine, ovvero la risorsa statica *listingDataView* (vedere la definizione di questa risorsa nella [sezione How to create a View](#how-to-create-a-view)).</span><span class="sxs-lookup"><span data-stu-id="2bee9-412">Notice that both of the controls are bound to the same source, the *listingDataView* static resource (see the definition of this resource in the [How to create a view section](#how-to-create-a-view)).</span></span> <span data-ttu-id="2bee9-413">Questa associazione funziona perché quando un oggetto Singleton ( <xref:System.Windows.Controls.ContentControl> in questo caso) è associato a una visualizzazione di raccolta, viene automaticamente associato all'oggetto <xref:System.Windows.Data.CollectionView.CurrentItem%2A> della visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-413">This binding works because when a singleton object (the <xref:System.Windows.Controls.ContentControl> in this case) is bound to a collection view, it automatically binds to the <xref:System.Windows.Data.CollectionView.CurrentItem%2A> of the view.</span></span> <span data-ttu-id="2bee9-414">Gli <xref:System.Windows.Data.CollectionViewSource> oggetti sincronizzano automaticamente valuta e selezione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-414">The <xref:System.Windows.Data.CollectionViewSource> objects automatically synchronize currency and selection.</span></span> <span data-ttu-id="2bee9-415">Se il controllo elenco non è associato a un <xref:System.Windows.Data.CollectionViewSource> oggetto come in questo esempio, è necessario impostare la relativa <xref:System.Windows.Controls.Primitives.Selector.IsSynchronizedWithCurrentItem%2A> proprietà su `true` affinché funzioni.</span><span class="sxs-lookup"><span data-stu-id="2bee9-415">If your list control is not bound to a <xref:System.Windows.Data.CollectionViewSource> object as in this example, then you would need to set its <xref:System.Windows.Controls.Primitives.Selector.IsSynchronizedWithCurrentItem%2A> property to `true` for this to work.</span></span>

<span data-ttu-id="2bee9-416">Per altri esempi, vedere [eseguire l'associazione a una raccolta e visualizzare informazioni in base alla selezione](../../framework/wpf/data/how-to-bind-to-a-collection-and-display-information-based-on-selection.md) e [usare il modello Master-Details con dati gerarchici](../../framework/wpf/data/how-to-use-the-master-detail-pattern-with-hierarchical-data.md).</span><span class="sxs-lookup"><span data-stu-id="2bee9-416">For other examples, see [Bind to a collection and display information based on selection](../../framework/wpf/data/how-to-bind-to-a-collection-and-display-information-based-on-selection.md) and [Use the master-detail pattern with hierarchical data](../../framework/wpf/data/how-to-use-the-master-detail-pattern-with-hierarchical-data.md).</span></span>

<span data-ttu-id="2bee9-417">Come si può notare, l'esempio precedente usa un modello.</span><span class="sxs-lookup"><span data-stu-id="2bee9-417">You may have noticed that the above example uses a template.</span></span> <span data-ttu-id="2bee9-418">Infatti, i dati non vengono visualizzati nel modo desiderato senza l'uso di modelli (quello usato in modo esplicito da <xref:System.Windows.Controls.ContentControl> e quello usato in modo implicito da <xref:System.Windows.Controls.ListBox> ).</span><span class="sxs-lookup"><span data-stu-id="2bee9-418">In fact, the data would not be displayed the way we wish without the use of templates (the one explicitly used by the <xref:System.Windows.Controls.ContentControl> and the one implicitly used by the <xref:System.Windows.Controls.ListBox>).</span></span> <span data-ttu-id="2bee9-419">Le sezione seguente illustra i modelli di dati.</span><span class="sxs-lookup"><span data-stu-id="2bee9-419">We now turn to data templating in the next section.</span></span>

## <a name="data-templating"></a><span data-ttu-id="2bee9-420">Modelli di dati</span><span class="sxs-lookup"><span data-stu-id="2bee9-420">Data templating</span></span>

<span data-ttu-id="2bee9-421">Senza l'uso di modelli di dati, l'interfaccia utente dell'app nella sezione [What is data binding](#what-is-data-binding) avrà un aspetto simile al seguente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-421">Without the use of data templates, our app UI in the [What is data binding](#what-is-data-binding) section would look like the following.</span></span>

![Data Binding Demo senza Data Templates](./media/data-binding-overview/demo-no-template.png)

<span data-ttu-id="2bee9-423">Come illustrato nell'esempio della sezione precedente, sia il <xref:System.Windows.Controls.ListBox> controllo che l'oggetto <xref:System.Windows.Controls.ContentControl> sono associati all'intero oggetto Collection (o, più specificamente, alla vista sull'oggetto Collection) di *AuctionItem*s.</span><span class="sxs-lookup"><span data-stu-id="2bee9-423">As shown in the example in the previous section, both the <xref:System.Windows.Controls.ListBox> control and the <xref:System.Windows.Controls.ContentControl> are bound to the entire collection object (or more specifically, the view over the collection object) of *AuctionItem*s.</span></span> <span data-ttu-id="2bee9-424">Senza istruzioni specifiche sulla visualizzazione della raccolta di dati, <xref:System.Windows.Controls.ListBox> Visualizza la rappresentazione di stringa di ogni oggetto nella raccolta sottostante e <xref:System.Windows.Controls.ContentControl> Visualizza la rappresentazione di stringa dell'oggetto a cui è associato.</span><span class="sxs-lookup"><span data-stu-id="2bee9-424">Without specific instructions of how to display the data collection, the <xref:System.Windows.Controls.ListBox> displays the string representation of each object in the underlying collection, and the <xref:System.Windows.Controls.ContentControl> displays the string representation of the object it is bound to.</span></span>

<span data-ttu-id="2bee9-425">Per risolvere il problema, l'app definisce <xref:System.Windows.DataTemplate?text=DataTemplates> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-425">To solve that problem, the app defines <xref:System.Windows.DataTemplate?text=DataTemplates>.</span></span> <span data-ttu-id="2bee9-426">Come illustrato nell'esempio della sezione precedente, <xref:System.Windows.Controls.ContentControl> USA in modo esplicito il modello di dati *detailsProductListingTemplate* .</span><span class="sxs-lookup"><span data-stu-id="2bee9-426">As shown in the example in the previous section, the <xref:System.Windows.Controls.ContentControl> explicitly uses the *detailsProductListingTemplate* data template.</span></span> <span data-ttu-id="2bee9-427">Il <xref:System.Windows.Controls.ListBox> controllo utilizza in modo implicito il modello di dati seguente quando vengono visualizzati gli oggetti *AuctionItem* nella raccolta.</span><span class="sxs-lookup"><span data-stu-id="2bee9-427">The <xref:System.Windows.Controls.ListBox> control implicitly uses the following data template when displaying the *AuctionItem* objects in the collection.</span></span>

[!code-xaml[AuctionItemDataTemplate](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml#AuctionItemDataTemplate)]

<span data-ttu-id="2bee9-428">Con l'uso di questi due DataTemplate, l'interfaccia utente risultante è quella illustrata nella sezione [What is data binding](#what-is-data-binding) .</span><span class="sxs-lookup"><span data-stu-id="2bee9-428">With the use of those two DataTemplates, the resulting UI is the one shown in the [What is data binding](#what-is-data-binding) section.</span></span> <span data-ttu-id="2bee9-429">Come si può notare dallo screenshot, oltre a consentire di inserire i dati nei controlli, DataTemplates consente di definire oggetti visivi accattivanti per i dati.</span><span class="sxs-lookup"><span data-stu-id="2bee9-429">As you can see from that screenshot, in addition to letting you place data in your controls, DataTemplates allow you to define compelling visuals for your data.</span></span> <span data-ttu-id="2bee9-430">Ad esempio, <xref:System.Windows.DataTrigger> le istanze di vengono usate in precedenza in <xref:System.Windows.DataTemplate> modo che *AuctionItem*s con il valore *SpecialFeatures* di *Highlight* venga visualizzato con un bordo arancione e una stella.</span><span class="sxs-lookup"><span data-stu-id="2bee9-430">For example, <xref:System.Windows.DataTrigger>s are used in the above <xref:System.Windows.DataTemplate> so that *AuctionItem*s with *SpecialFeatures* value of *HighLight* would be displayed with an orange border and a star.</span></span>

<span data-ttu-id="2bee9-431">Per ulteriori informazioni sui modelli di dati, vedere [Cenni preliminari](../../framework/wpf/data/data-templating-overview.md)sui modelli di dati.</span><span class="sxs-lookup"><span data-stu-id="2bee9-431">For more information about data templates, see the [Data templating overview](../../framework/wpf/data/data-templating-overview.md).</span></span>

## <a name="data-validation"></a><span data-ttu-id="2bee9-432">Convalida dei dati</span><span class="sxs-lookup"><span data-stu-id="2bee9-432">Data validation</span></span>

<span data-ttu-id="2bee9-433">La maggior parte dell'app che accetta input utente deve avere la logica di convalida per assicurarsi che l'utente abbia immesso le informazioni previste.</span><span class="sxs-lookup"><span data-stu-id="2bee9-433">Most app that take user input need to have validation logic to ensure that the user has entered the expected information.</span></span> <span data-ttu-id="2bee9-434">I controlli di convalida possono essere basati su tipo, intervallo, formato o altri requisiti specifici dell'app.</span><span class="sxs-lookup"><span data-stu-id="2bee9-434">The validation checks can be based on type, range, format, or other app-specific requirements.</span></span> <span data-ttu-id="2bee9-435">In questa sezione viene illustrato il funzionamento della convalida dei dati in WPF.</span><span class="sxs-lookup"><span data-stu-id="2bee9-435">This section discusses how data validation works in WPF.</span></span>

### <a name="associating-validation-rules-with-a-binding"></a><span data-ttu-id="2bee9-436">Associazione delle regole di convalida a un'associazione</span><span class="sxs-lookup"><span data-stu-id="2bee9-436">Associating validation rules with a binding</span></span>

<span data-ttu-id="2bee9-437">Il modello di data binding WPF consente di associarlo all' <xref:System.Windows.Data.Binding.ValidationRules%2A> <xref:System.Windows.Data.Binding> oggetto.</span><span class="sxs-lookup"><span data-stu-id="2bee9-437">The WPF data binding model allows you to associate <xref:System.Windows.Data.Binding.ValidationRules%2A> with your <xref:System.Windows.Data.Binding> object.</span></span> <span data-ttu-id="2bee9-438">Nell'esempio seguente, ad esempio, viene associato un <xref:System.Windows.Controls.TextBox> oggetto a una proprietà denominata `StartPrice` e viene aggiunto un <xref:System.Windows.Controls.ExceptionValidationRule> oggetto alla <xref:System.Windows.Data.Binding.ValidationRules%2A?displayProperty=nameWithType> Proprietà.</span><span class="sxs-lookup"><span data-stu-id="2bee9-438">For example, the following example binds a <xref:System.Windows.Controls.TextBox> to a property named `StartPrice` and adds a <xref:System.Windows.Controls.ExceptionValidationRule> object to the <xref:System.Windows.Data.Binding.ValidationRules%2A?displayProperty=nameWithType> property.</span></span>

[!code-xaml[TextboxStartPrice](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/DataValidation.xaml#TextboxStartPrice)]

<span data-ttu-id="2bee9-439"><xref:System.Windows.Controls.ValidationRule>Oggetto che controlla se il valore di una proprietà è valido.</span><span class="sxs-lookup"><span data-stu-id="2bee9-439">A <xref:System.Windows.Controls.ValidationRule> object checks whether the value of a property is valid.</span></span> <span data-ttu-id="2bee9-440">WPF include due tipi di oggetti incorporati <xref:System.Windows.Controls.ValidationRule> :</span><span class="sxs-lookup"><span data-stu-id="2bee9-440">WPF has two types of built-in <xref:System.Windows.Controls.ValidationRule> objects:</span></span>

- <span data-ttu-id="2bee9-441">Un <xref:System.Windows.Controls.ExceptionValidationRule> controllo per le eccezioni generate durante l'aggiornamento della proprietà di origine dell'associazione.</span><span class="sxs-lookup"><span data-stu-id="2bee9-441">A <xref:System.Windows.Controls.ExceptionValidationRule> checks for exceptions thrown during the update of the binding source property.</span></span> <span data-ttu-id="2bee9-442">Nell'esempio precedente `StartPrice` è di tipo intero.</span><span class="sxs-lookup"><span data-stu-id="2bee9-442">In the previous example, `StartPrice` is of type integer.</span></span> <span data-ttu-id="2bee9-443">Quando l'utente immette un valore che non può essere convertito in un intero, viene generata un'eccezione e il binding viene contrassegnato come non valido.</span><span class="sxs-lookup"><span data-stu-id="2bee9-443">When the user enters a value that cannot be converted to an integer, an exception is thrown, causing the binding to be marked as invalid.</span></span> <span data-ttu-id="2bee9-444">Una sintassi alternativa per impostare in <xref:System.Windows.Controls.ExceptionValidationRule> modo esplicito è l'impostazione della <xref:System.Windows.Data.Binding.ValidatesOnExceptions%2A> proprietà `true` su sull' <xref:System.Windows.Data.Binding> <xref:System.Windows.Data.MultiBinding> oggetto o.</span><span class="sxs-lookup"><span data-stu-id="2bee9-444">An alternative syntax to setting the <xref:System.Windows.Controls.ExceptionValidationRule> explicitly is to set the <xref:System.Windows.Data.Binding.ValidatesOnExceptions%2A> property to `true` on your <xref:System.Windows.Data.Binding> or <xref:System.Windows.Data.MultiBinding> object.</span></span>

- <span data-ttu-id="2bee9-445">Un <xref:System.Windows.Controls.DataErrorValidationRule> oggetto verifica la presenza di errori generati da oggetti che implementano l' <xref:System.ComponentModel.IDataErrorInfo> interfaccia.</span><span class="sxs-lookup"><span data-stu-id="2bee9-445">A <xref:System.Windows.Controls.DataErrorValidationRule> object checks for errors that are raised by objects that implement the <xref:System.ComponentModel.IDataErrorInfo> interface.</span></span> <span data-ttu-id="2bee9-446">Per un esempio di utilizzo di questa regola di convalida, vedere <xref:System.Windows.Controls.DataErrorValidationRule> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-446">For an example of using this validation rule, see <xref:System.Windows.Controls.DataErrorValidationRule>.</span></span> <span data-ttu-id="2bee9-447">Una sintassi alternativa per impostare in <xref:System.Windows.Controls.DataErrorValidationRule> modo esplicito è l'impostazione della <xref:System.Windows.Data.Binding.ValidatesOnDataErrors%2A> proprietà `true` su sull' <xref:System.Windows.Data.Binding> <xref:System.Windows.Data.MultiBinding> oggetto o.</span><span class="sxs-lookup"><span data-stu-id="2bee9-447">An alternative syntax to setting the <xref:System.Windows.Controls.DataErrorValidationRule> explicitly is to set the <xref:System.Windows.Data.Binding.ValidatesOnDataErrors%2A> property to `true` on your <xref:System.Windows.Data.Binding> or <xref:System.Windows.Data.MultiBinding> object.</span></span>

<span data-ttu-id="2bee9-448">È anche possibile creare una regola di convalida personalizzata derivando dalla <xref:System.Windows.Controls.ValidationRule> classe e implementando il <xref:System.Windows.Controls.ValidationRule.Validate%2A> metodo.</span><span class="sxs-lookup"><span data-stu-id="2bee9-448">You can also create your own validation rule by deriving from the <xref:System.Windows.Controls.ValidationRule> class and implementing the <xref:System.Windows.Controls.ValidationRule.Validate%2A> method.</span></span> <span data-ttu-id="2bee9-449">Nell'esempio seguente viene illustrata la regola utilizzata dall' *aggiunta del prodotto* "data di inizio" <xref:System.Windows.Controls.TextBox> dalla sezione informazioni sul [Data Binding](#what-is-data-binding) .</span><span class="sxs-lookup"><span data-stu-id="2bee9-449">The following example shows the rule used by the *Add Product Listing* "Start Date" <xref:System.Windows.Controls.TextBox> from the [What is data binding](#what-is-data-binding) section.</span></span>

[!code-csharp[FutureDateRule](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/FutureDateRule.cs#FutureDateRule)]
[!code-vb[FutureDateRule](~/samples/snippets/desktop-guide/wpf/data-binding-overview/vb/FutureDateRule.vb#FutureDateRule)]

<span data-ttu-id="2bee9-450">*Oggetto* <xref:System.Windows.Controls.TextBox> Usa questo *FutureDateRule*, come illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-450">The *StartDateEntryForm* <xref:System.Windows.Controls.TextBox> uses this *FutureDateRule*, as shown in the following example.</span></span>

[!code-xaml[TextboxStartDate](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/DataValidation.xaml#TextboxStartDate)]

<span data-ttu-id="2bee9-451">Poiché il <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> valore è <xref:System.Windows.Data.UpdateSourceTrigger.PropertyChanged> , il motore di associazione aggiorna il valore di origine per ogni sequenza di tasti, il che significa che controlla anche ogni regola nella <xref:System.Windows.Data.Binding.ValidationRules%2A> raccolta per ogni sequenza di tasti.</span><span class="sxs-lookup"><span data-stu-id="2bee9-451">Because the <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> value is <xref:System.Windows.Data.UpdateSourceTrigger.PropertyChanged>, the binding engine updates the source value on every keystroke, which means it also checks every rule in the <xref:System.Windows.Data.Binding.ValidationRules%2A> collection on every keystroke.</span></span> <span data-ttu-id="2bee9-452">L'argomento verrà ulteriormente trattato nella sezione Processo di convalida.</span><span class="sxs-lookup"><span data-stu-id="2bee9-452">We discuss this further in the Validation Process section.</span></span>

### <a name="providing-visual-feedback"></a><span data-ttu-id="2bee9-453">Fornire feedback visivo</span><span class="sxs-lookup"><span data-stu-id="2bee9-453">Providing visual feedback</span></span>

<span data-ttu-id="2bee9-454">Se l'utente immette un valore non valido, potrebbe essere necessario fornire un feedback sull'errore nell'interfaccia utente dell'app.</span><span class="sxs-lookup"><span data-stu-id="2bee9-454">If the user enters an invalid value, you may want to provide some feedback about the error on the app UI.</span></span> <span data-ttu-id="2bee9-455">Un modo per fornire un feedback di questo tipo consiste nell'impostare la <xref:System.Windows.Controls.Validation.ErrorTemplate%2A?displayProperty=nameWithType> proprietà associata su un oggetto personalizzato <xref:System.Windows.Controls.ControlTemplate> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-455">One way to provide such feedback is to set the <xref:System.Windows.Controls.Validation.ErrorTemplate%2A?displayProperty=nameWithType> attached property to a custom <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="2bee9-456">Come illustrato nella sottosezione precedente, *oggetto* <xref:System.Windows.Controls.TextBox> Usa un oggetto <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> denominato *validationTemplate*.</span><span class="sxs-lookup"><span data-stu-id="2bee9-456">As shown in the previous subsection, the *StartDateEntryForm* <xref:System.Windows.Controls.TextBox> uses an <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> called *validationTemplate*.</span></span> <span data-ttu-id="2bee9-457">Nell'esempio seguente viene illustrata la definizione di *validationTemplate*.</span><span class="sxs-lookup"><span data-stu-id="2bee9-457">The following example shows the definition of *validationTemplate*.</span></span>

[!code-xaml[ControlTemplate](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/DataValidation.xaml#ControlTemplate)]

<span data-ttu-id="2bee9-458">L' <xref:System.Windows.Controls.AdornedElementPlaceholder> elemento specifica la posizione in cui deve essere inserito il controllo da decorare.</span><span class="sxs-lookup"><span data-stu-id="2bee9-458">The <xref:System.Windows.Controls.AdornedElementPlaceholder> element specifies where the control being adorned should be placed.</span></span>

<span data-ttu-id="2bee9-459">Inoltre, è possibile utilizzare un oggetto <xref:System.Windows.Controls.ToolTip> per visualizzare il messaggio di errore.</span><span class="sxs-lookup"><span data-stu-id="2bee9-459">In addition, you may also use a <xref:System.Windows.Controls.ToolTip> to display the error message.</span></span> <span data-ttu-id="2bee9-460">Sia *oggetto* che *StartPriceEntryForm* <xref:System.Windows.Controls.TextBox> es utilizzano lo stile *textStyleTextBox*, che consente di creare un oggetto in <xref:System.Windows.Controls.ToolTip> cui viene visualizzato il messaggio di errore.</span><span class="sxs-lookup"><span data-stu-id="2bee9-460">Both the *StartDateEntryForm* and the *StartPriceEntryForm*<xref:System.Windows.Controls.TextBox>es use the style *textStyleTextBox*, which creates a <xref:System.Windows.Controls.ToolTip> that displays the error message.</span></span> <span data-ttu-id="2bee9-461">L'esempio seguente illustra la definizione di *textStyleTextBox*.</span><span class="sxs-lookup"><span data-stu-id="2bee9-461">The following example shows the definition of *textStyleTextBox*.</span></span> <span data-ttu-id="2bee9-462">La proprietà associata <xref:System.Windows.Controls.Validation.HasError%2A?displayProperty=nameWithType> è `true` quando uno o più binding nelle proprietà dell'elemento associato sono in errore.</span><span class="sxs-lookup"><span data-stu-id="2bee9-462">The attached property <xref:System.Windows.Controls.Validation.HasError%2A?displayProperty=nameWithType> is `true` when one or more of the bindings on the properties of the bound element are in error.</span></span>

[!code-xaml[TextBoxStyle](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/DataValidation.xaml#TextBoxStyle)]

<span data-ttu-id="2bee9-463">Con l'oggetto personalizzato <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> e l'oggetto <xref:System.Windows.Controls.ToolTip> , *oggetto* <xref:System.Windows.Controls.TextBox> è simile al seguente quando si verifica un errore di convalida.</span><span class="sxs-lookup"><span data-stu-id="2bee9-463">With the custom <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> and the <xref:System.Windows.Controls.ToolTip>, the *StartDateEntryForm* <xref:System.Windows.Controls.TextBox> looks like the following when there is a validation error.</span></span>

<span data-ttu-id="2bee9-464">![Errore di convalida del data binding](./media/data-binding-overview/demo-validation-date.png "DataBindingDemo_Validation")</span><span class="sxs-lookup"><span data-stu-id="2bee9-464">![Data binding validation error](./media/data-binding-overview/demo-validation-date.png "DataBindingDemo_Validation")</span></span>

<span data-ttu-id="2bee9-465">Se il <xref:System.Windows.Data.Binding> dispone di regole di convalida associate ma non si specifica un oggetto <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> sul controllo associato, verrà utilizzato un valore predefinito <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> per notificare agli utenti quando si verifica un errore di convalida.</span><span class="sxs-lookup"><span data-stu-id="2bee9-465">If your <xref:System.Windows.Data.Binding> has associated validation rules but you do not specify an <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> on the bound control, a default <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> will be used to notify users when there is a validation error.</span></span> <span data-ttu-id="2bee9-466">Il valore predefinito <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> è un modello di controllo che definisce un bordo rosso nel livello dello strumento decorativo.</span><span class="sxs-lookup"><span data-stu-id="2bee9-466">The default <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> is a control template that defines a red border in the adorner layer.</span></span> <span data-ttu-id="2bee9-467">Con le impostazioni predefinite <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> e <xref:System.Windows.Controls.ToolTip> , l'interfaccia utente di *StartPriceEntryForm* <xref:System.Windows.Controls.TextBox> ha un aspetto simile al seguente quando si verifica un errore di convalida.</span><span class="sxs-lookup"><span data-stu-id="2bee9-467">With the default <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> and the <xref:System.Windows.Controls.ToolTip>, the UI of the *StartPriceEntryForm* <xref:System.Windows.Controls.TextBox> looks like the following when there is a validation error.</span></span>

<span data-ttu-id="2bee9-468">![Errore di convalida del data binding](./media/data-binding-overview/demo-validation-price.png "DataBindingDemo_ValidationDefault")</span><span class="sxs-lookup"><span data-stu-id="2bee9-468">![Data binding validation error](./media/data-binding-overview/demo-validation-price.png "DataBindingDemo_ValidationDefault")</span></span>

<span data-ttu-id="2bee9-469">Per un esempio di come fornire la logica per la convalida di tutti i controlli in una finestra di dialogo, vedere la sezione finestre di dialogo personalizzate nelle [finestre di dialogo Panoramica](../../framework/wpf/app-development/dialog-boxes-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2bee9-469">For an example of how to provide logic to validate all controls in a dialog box, see the Custom Dialog Boxes section in the [Dialog boxes overview](../../framework/wpf/app-development/dialog-boxes-overview.md).</span></span>

### <a name="validation-process"></a><span data-ttu-id="2bee9-470">Processo di convalida</span><span class="sxs-lookup"><span data-stu-id="2bee9-470">Validation process</span></span>

<span data-ttu-id="2bee9-471">La convalida avviene solitamente quando si trasferisce un valore di destinazione alla proprietà di origine del binding.</span><span class="sxs-lookup"><span data-stu-id="2bee9-471">Validation usually occurs when the value of a target is transferred to the binding source property.</span></span> <span data-ttu-id="2bee9-472">Questo trasferimento si verifica <xref:System.Windows.Data.BindingMode.TwoWay> sulle <xref:System.Windows.Data.BindingMode.OneWayToSource> associazioni e.</span><span class="sxs-lookup"><span data-stu-id="2bee9-472">This transfer occurs on <xref:System.Windows.Data.BindingMode.TwoWay> and <xref:System.Windows.Data.BindingMode.OneWayToSource> bindings.</span></span> <span data-ttu-id="2bee9-473">Per ripetere, cosa causa un aggiornamento di origine in base al valore della <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> proprietà, come descritto nella sezione [What Triggers Source Updates](#what-triggers-source-updates) .</span><span class="sxs-lookup"><span data-stu-id="2bee9-473">To reiterate, what causes a source update depends on the value of the <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> property, as described in the [What triggers source updates](#what-triggers-source-updates) section.</span></span>

<span data-ttu-id="2bee9-474">Gli elementi seguenti descrivono il processo di *convalida* .</span><span class="sxs-lookup"><span data-stu-id="2bee9-474">The following items describe the *validation* process.</span></span> <span data-ttu-id="2bee9-475">Se in qualsiasi momento durante questo processo si verifica un errore di convalida o un altro tipo di errore, il processo viene interrotto:</span><span class="sxs-lookup"><span data-stu-id="2bee9-475">If a validation error or other type of error occurs at any time during this process, the process is halted:</span></span>

1. <span data-ttu-id="2bee9-476">Il motore di associazione controlla se sono presenti <xref:System.Windows.Controls.ValidationRule> oggetti personalizzati definiti la cui proprietà <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> è impostata <xref:System.Windows.Controls.ValidationStep.RawProposedValue> <xref:System.Windows.Data.Binding> su, nel qual caso viene chiamato il <xref:System.Windows.Controls.ValidationRule.Validate%2A> metodo su ogni oggetto <xref:System.Windows.Controls.ValidationRule> fino a quando uno di essi non viene eseguito in un errore o fino a quando non vengono superati tutti.</span><span class="sxs-lookup"><span data-stu-id="2bee9-476">The binding engine checks if there are any custom <xref:System.Windows.Controls.ValidationRule> objects defined whose <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> is set to <xref:System.Windows.Controls.ValidationStep.RawProposedValue> for that <xref:System.Windows.Data.Binding>, in which case it calls the <xref:System.Windows.Controls.ValidationRule.Validate%2A> method on each <xref:System.Windows.Controls.ValidationRule> until one of them runs into an error or until all of them pass.</span></span>

2. <span data-ttu-id="2bee9-477">Il motore di binding chiama quindi il convertitore, se presente.</span><span class="sxs-lookup"><span data-stu-id="2bee9-477">The binding engine then calls the converter, if one exists.</span></span>

3. <span data-ttu-id="2bee9-478">Se il convertitore ha esito positivo, il motore di associazione controlla se sono presenti <xref:System.Windows.Controls.ValidationRule> oggetti personalizzati definiti la cui proprietà <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> è impostata su <xref:System.Windows.Controls.ValidationStep.ConvertedProposedValue> <xref:System.Windows.Data.Binding> , nel qual caso chiama il <xref:System.Windows.Controls.ValidationRule.Validate%2A> metodo su ogni <xref:System.Windows.Controls.ValidationRule> che ha impostato su <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> <xref:System.Windows.Controls.ValidationStep.ConvertedProposedValue> fino a quando uno di essi non viene eseguito in un errore o fino a quando non vengono superati tutti.</span><span class="sxs-lookup"><span data-stu-id="2bee9-478">If the converter succeeds, the binding engine checks if there are any custom <xref:System.Windows.Controls.ValidationRule> objects defined whose <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> is set to <xref:System.Windows.Controls.ValidationStep.ConvertedProposedValue> for that <xref:System.Windows.Data.Binding>, in which case it calls the <xref:System.Windows.Controls.ValidationRule.Validate%2A> method on each <xref:System.Windows.Controls.ValidationRule> that has <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> set to <xref:System.Windows.Controls.ValidationStep.ConvertedProposedValue> until one of them runs into an error or until all of them pass.</span></span>

4. <span data-ttu-id="2bee9-479">Il motore di binding imposta la proprietà di origine.</span><span class="sxs-lookup"><span data-stu-id="2bee9-479">The binding engine sets the source property.</span></span>

5. <span data-ttu-id="2bee9-480">Il motore di associazione controlla se sono presenti <xref:System.Windows.Controls.ValidationRule> oggetti personalizzati definiti la cui proprietà <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> è impostata su <xref:System.Windows.Controls.ValidationStep.UpdatedValue> <xref:System.Windows.Data.Binding> , nel qual caso viene chiamato il <xref:System.Windows.Controls.ValidationRule.Validate%2A> metodo su ogni oggetto <xref:System.Windows.Controls.ValidationRule> impostato su <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> <xref:System.Windows.Controls.ValidationStep.UpdatedValue> fino a quando uno di essi non viene eseguito in un errore o fino a quando non vengono superati tutti.</span><span class="sxs-lookup"><span data-stu-id="2bee9-480">The binding engine checks if there are any custom <xref:System.Windows.Controls.ValidationRule> objects defined whose <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> is set to <xref:System.Windows.Controls.ValidationStep.UpdatedValue> for that <xref:System.Windows.Data.Binding>, in which case it calls the <xref:System.Windows.Controls.ValidationRule.Validate%2A> method on each <xref:System.Windows.Controls.ValidationRule> that has <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> set to <xref:System.Windows.Controls.ValidationStep.UpdatedValue> until one of them runs into an error or until all of them pass.</span></span> <span data-ttu-id="2bee9-481">Se un oggetto <xref:System.Windows.Controls.DataErrorValidationRule> è associato a un'associazione e la relativa proprietà <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> è impostata sul valore predefinito, <xref:System.Windows.Controls.ValidationStep.UpdatedValue> , <xref:System.Windows.Controls.DataErrorValidationRule> a questo punto viene verificato.</span><span class="sxs-lookup"><span data-stu-id="2bee9-481">If a <xref:System.Windows.Controls.DataErrorValidationRule> is associated with a binding and its <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> is set to the default, <xref:System.Windows.Controls.ValidationStep.UpdatedValue>, the <xref:System.Windows.Controls.DataErrorValidationRule> is checked at this point.</span></span> <span data-ttu-id="2bee9-482">A questo punto <xref:System.Windows.Data.Binding.ValidatesOnDataErrors%2A> , viene controllata qualsiasi binding con impostato su `true` .</span><span class="sxs-lookup"><span data-stu-id="2bee9-482">At this point any binding that has the <xref:System.Windows.Data.Binding.ValidatesOnDataErrors%2A> set to `true` is checked.</span></span>

6. <span data-ttu-id="2bee9-483">Il motore di associazione controlla se sono presenti <xref:System.Windows.Controls.ValidationRule> oggetti personalizzati definiti la cui proprietà <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> è impostata su <xref:System.Windows.Controls.ValidationStep.CommittedValue> <xref:System.Windows.Data.Binding> , nel qual caso viene chiamato il <xref:System.Windows.Controls.ValidationRule.Validate%2A> metodo su ogni oggetto <xref:System.Windows.Controls.ValidationRule> impostato su <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> <xref:System.Windows.Controls.ValidationStep.CommittedValue> fino a quando uno di essi non viene eseguito in un errore o fino a quando non vengono superati tutti.</span><span class="sxs-lookup"><span data-stu-id="2bee9-483">The binding engine checks if there are any custom <xref:System.Windows.Controls.ValidationRule> objects defined whose <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> is set to <xref:System.Windows.Controls.ValidationStep.CommittedValue> for that <xref:System.Windows.Data.Binding>, in which case it calls the <xref:System.Windows.Controls.ValidationRule.Validate%2A> method on each <xref:System.Windows.Controls.ValidationRule> that has <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> set to <xref:System.Windows.Controls.ValidationStep.CommittedValue> until one of them runs into an error or until all of them pass.</span></span>

<span data-ttu-id="2bee9-484">Se un <xref:System.Windows.Controls.ValidationRule> non passa in qualsiasi momento durante questo processo, il motore di binding crea un <xref:System.Windows.Controls.ValidationError> oggetto e lo aggiunge alla <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> raccolta dell'elemento associato.</span><span class="sxs-lookup"><span data-stu-id="2bee9-484">If a <xref:System.Windows.Controls.ValidationRule> does not pass at any time throughout this process, the binding engine creates a <xref:System.Windows.Controls.ValidationError> object and adds it to the <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> collection of the bound element.</span></span> <span data-ttu-id="2bee9-485">Prima che il motore di associazione esegua gli <xref:System.Windows.Controls.ValidationRule> oggetti in un determinato passaggio, rimuove tutti gli <xref:System.Windows.Controls.ValidationError> elementi aggiunti alla <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> proprietà associata dell'elemento associato durante tale passaggio.</span><span class="sxs-lookup"><span data-stu-id="2bee9-485">Before the binding engine runs the <xref:System.Windows.Controls.ValidationRule> objects at any given step, it removes any <xref:System.Windows.Controls.ValidationError> that was added to the <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> attached property of the bound element during that step.</span></span> <span data-ttu-id="2bee9-486">Se, ad esempio, un oggetto il <xref:System.Windows.Controls.ValidationRule> cui <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> è impostato su <xref:System.Windows.Controls.ValidationStep.UpdatedValue> failed, alla successiva esecuzione del processo di convalida, il motore di binding lo rimuove <xref:System.Windows.Controls.ValidationError> immediatamente prima di chiamare qualsiasi oggetto con <xref:System.Windows.Controls.ValidationRule> <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> impostato su <xref:System.Windows.Controls.ValidationStep.UpdatedValue> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-486">For example, if a <xref:System.Windows.Controls.ValidationRule> whose <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> is set to <xref:System.Windows.Controls.ValidationStep.UpdatedValue> failed, the next time the validation process occurs, the binding engine removes that <xref:System.Windows.Controls.ValidationError> immediately before it calls any <xref:System.Windows.Controls.ValidationRule> that has <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> set to <xref:System.Windows.Controls.ValidationStep.UpdatedValue>.</span></span>

<span data-ttu-id="2bee9-487">Quando <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> non è vuoto, la <xref:System.Windows.Controls.Validation.HasError%2A?displayProperty=nameWithType> proprietà associata dell'elemento viene impostata su `true` .</span><span class="sxs-lookup"><span data-stu-id="2bee9-487">When <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> is not empty, the <xref:System.Windows.Controls.Validation.HasError%2A?displayProperty=nameWithType> attached property of the element is set to `true`.</span></span> <span data-ttu-id="2bee9-488">Inoltre, se la <xref:System.Windows.Data.Binding.NotifyOnValidationError%2A> proprietà di <xref:System.Windows.Data.Binding> è impostata su `true` , il motore di binding genera l' <xref:System.Windows.Controls.Validation.Error?displayProperty=nameWithType> evento associato sull'elemento.</span><span class="sxs-lookup"><span data-stu-id="2bee9-488">Also, if the <xref:System.Windows.Data.Binding.NotifyOnValidationError%2A> property of the <xref:System.Windows.Data.Binding> is set to `true`, then the binding engine raises the <xref:System.Windows.Controls.Validation.Error?displayProperty=nameWithType> attached event on the element.</span></span>

<span data-ttu-id="2bee9-489">Si noti anche che un trasferimento di valore valido in entrambe le direzioni (da destinazione a origine o origine a destinazione) cancella la <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> proprietà associata.</span><span class="sxs-lookup"><span data-stu-id="2bee9-489">Also note that a valid value transfer in either direction (target to source or source to target) clears the <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> attached property.</span></span>

<span data-ttu-id="2bee9-490">Se al binding è associato un oggetto o se la <xref:System.Windows.Controls.ExceptionValidationRule> <xref:System.Windows.Data.Binding.ValidatesOnExceptions%2A> proprietà è impostata su `true` e viene generata un'eccezione quando il motore di binding imposta l'origine, il motore di associazione verifica se è presente un <xref:System.Windows.Data.Binding.UpdateSourceExceptionFilter%2A> .</span><span class="sxs-lookup"><span data-stu-id="2bee9-490">If the binding either has an <xref:System.Windows.Controls.ExceptionValidationRule> associated with it, or had the <xref:System.Windows.Data.Binding.ValidatesOnExceptions%2A> property is set to `true` and an exception is thrown when the binding engine sets the source, the binding engine checks to see if there is a <xref:System.Windows.Data.Binding.UpdateSourceExceptionFilter%2A>.</span></span> <span data-ttu-id="2bee9-491">È possibile usare il <xref:System.Windows.Data.Binding.UpdateSourceExceptionFilter%2A> callback per fornire un gestore personalizzato per la gestione delle eccezioni.</span><span class="sxs-lookup"><span data-stu-id="2bee9-491">You have the option to use the <xref:System.Windows.Data.Binding.UpdateSourceExceptionFilter%2A> callback to provide a custom handler for handling exceptions.</span></span> <span data-ttu-id="2bee9-492">Se un oggetto <xref:System.Windows.Data.Binding.UpdateSourceExceptionFilter%2A> non è specificato in <xref:System.Windows.Data.Binding> , il motore di associazione crea un oggetto <xref:System.Windows.Controls.ValidationError> con l'eccezione e lo aggiunge alla <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> raccolta dell'elemento associato.</span><span class="sxs-lookup"><span data-stu-id="2bee9-492">If an <xref:System.Windows.Data.Binding.UpdateSourceExceptionFilter%2A> is not specified on the <xref:System.Windows.Data.Binding>, the binding engine creates a <xref:System.Windows.Controls.ValidationError> with the exception and adds it to the <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> collection of the bound element.</span></span>

## <a name="debugging-mechanism"></a><span data-ttu-id="2bee9-493">Meccanismo di debug</span><span class="sxs-lookup"><span data-stu-id="2bee9-493">Debugging mechanism</span></span>

<span data-ttu-id="2bee9-494">È possibile impostare la proprietà associata <xref:System.Diagnostics.PresentationTraceSources.TraceLevel%2A?displayProperty=nameWithType> su un oggetto correlato all'associazione per ricevere informazioni sullo stato di un'associazione specifica.</span><span class="sxs-lookup"><span data-stu-id="2bee9-494">You can set the attached property <xref:System.Diagnostics.PresentationTraceSources.TraceLevel%2A?displayProperty=nameWithType> on a binding-related object to receive information about the status of a specific binding.</span></span>

## <a name="see-also"></a><span data-ttu-id="2bee9-495">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="2bee9-495">See also</span></span>

- <xref:System.Windows.Controls.DataErrorValidationRule>
- [<span data-ttu-id="2bee9-496">Eseguire l'associazione ai risultati di una query LINQ</span><span class="sxs-lookup"><span data-stu-id="2bee9-496">Bind to the results of a LINQ query</span></span>](../../framework/wpf/data/how-to-bind-to-the-results-of-a-linq-query.md)
- [<span data-ttu-id="2bee9-497">Associazione dati</span><span class="sxs-lookup"><span data-stu-id="2bee9-497">Data binding</span></span>](../../framework/wpf/advanced/optimizing-performance-data-binding.md)
- <span data-ttu-id="2bee9-498">[Demo di data binding][data-binding-demo]</span><span class="sxs-lookup"><span data-stu-id="2bee9-498">[Data binding demo][data-binding-demo]</span></span>
- [<span data-ttu-id="2bee9-499">Articoli sulle procedure</span><span class="sxs-lookup"><span data-stu-id="2bee9-499">How-to articles</span></span>](../../framework/wpf/data/data-binding-how-to-topics.md)
- [<span data-ttu-id="2bee9-500">Eseguire il binding a un'origine dati ADO.NET</span><span class="sxs-lookup"><span data-stu-id="2bee9-500">Bind to an ADO.NET data source</span></span>](../../framework/wpf/data/how-to-bind-to-an-ado-net-data-source.md)

[data-binding-demo]: https://github.com/microsoft/WPF-Samples/tree/master/Sample%20Applications/DataBindingDemo "app demo data binding"
