---
title: Panoramica del data binding
description: Informazioni sulle diverse origini dati che è possibile aggiungere al progetto in Windows Presentation Foundation per .NET Core.Learn about the different data sources you can add to your project in Windows Presentation Foundation for .NET Core. Le origini dati possono essere associate a elementi XAML per creare app dinamiche.
author: thraka
ms.date: 09/19/2019
ms.author: adegeo
dev_langs:
- csharp
- vb
ms.openlocfilehash: 7f17ff094a35c04ba880c87c6966d7d249817516
ms.sourcegitcommit: b75a45f0cfe012b71b45dd9bf723adf32369d40c
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/24/2020
ms.locfileid: "82072011"
---
# <a name="data-binding-overview-in-wpf"></a><span data-ttu-id="57c66-104">Panoramica dell'associazione dati in WPFData binding overview in WPF</span><span class="sxs-lookup"><span data-stu-id="57c66-104">Data binding overview in WPF</span></span>

<span data-ttu-id="57c66-105">L'associazione dati in Windows Presentation Foundation (WPF)Windows Presentation Foundation (WPF)Windows Presentation Foundation (WPF)Windows Presentation Foundation (WPF)Windows Presentation Foundation (WPF)Windows Presentation Foundation (WPF)Windows Presentation Foundation (WPF)Windows Presentation Foundation (WPF)Windows Presentation Foundation (WPF)Windows Presentation Foundation (WPF)Windows Presentation Foundation (WPF)Windows Presentation</span><span class="sxs-lookup"><span data-stu-id="57c66-105">Data binding in Windows Presentation Foundation (WPF) provides a simple and consistent way for apps to present and interact with data.</span></span> <span data-ttu-id="57c66-106">Gli elementi possono essere associati ai dati da un'ampia gamma di origini dati sotto forma di oggetti .NET e XML.</span><span class="sxs-lookup"><span data-stu-id="57c66-106">Elements can be bound to data from a variety of data sources in the form of .NET objects and XML.</span></span> <span data-ttu-id="57c66-107">Qualsiasi, <xref:System.Windows.Controls.ContentControl> <xref:System.Windows.Controls.Button> ad <xref:System.Windows.Controls.ItemsControl>esempio, <xref:System.Windows.Controls.ListBox> e <xref:System.Windows.Controls.ListView>qualsiasi , quali e , dispongono di funzionalità incorporate per consentire lo stile flessibile di singoli elementi di dati o raccolte di elementi di dati.</span><span class="sxs-lookup"><span data-stu-id="57c66-107">Any <xref:System.Windows.Controls.ContentControl> such as <xref:System.Windows.Controls.Button> and any <xref:System.Windows.Controls.ItemsControl>, such as <xref:System.Windows.Controls.ListBox> and <xref:System.Windows.Controls.ListView>, have built-in functionality to enable flexible styling of single data items or collections of data items.</span></span> <span data-ttu-id="57c66-108">In cima ai dati è possibile generare visualizzazioni di ordinamento, filtro e raggruppamento.</span><span class="sxs-lookup"><span data-stu-id="57c66-108">Sort, filter, and group views can be generated on top of the data.</span></span>

<span data-ttu-id="57c66-109">La funzionalità di associazione dati in WPFWPF presenta diversi vantaggi rispetto ai modelli tradizionali, tra cui il supporto intrinseco per l'associazione dati da parte di un'ampia gamma di proprietà, una rappresentazione flessibile dell'interfaccia utente dei dati e una netta separazione della logica di business dall'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="57c66-109">The data binding functionality in WPF has several advantages over traditional models, including inherent support for data binding by a broad range of properties, flexible UI representation of data, and clean separation of business logic from UI.</span></span>

<span data-ttu-id="57c66-110">In questo articolo vengono illustrati in primo luogo i <xref:System.Windows.Data.Binding> concetti fondamentali per l'associazione dati WPFWPF e quindi viene illustrato l'utilizzo della classe e di altre funzionalità dell'associazione dati.</span><span class="sxs-lookup"><span data-stu-id="57c66-110">This article first discusses concepts fundamental to WPF data binding and then covers the usage of the <xref:System.Windows.Data.Binding> class and other features of data binding.</span></span>

[!INCLUDE [desktop guide under construction](../../../includes/desktop-guide-preview-note.md)]

## <a name="what-is-data-binding"></a><span data-ttu-id="57c66-111">Che cos'è il data binding?</span><span class="sxs-lookup"><span data-stu-id="57c66-111">What is data binding?</span></span>

<span data-ttu-id="57c66-112">L'associazione dati è il processo che stabilisce una connessione tra l'interfaccia utente dell'app e i dati visualizzati.</span><span class="sxs-lookup"><span data-stu-id="57c66-112">Data binding is the process that establishes a connection between the app UI and the data it displays.</span></span> <span data-ttu-id="57c66-113">Se l'associazione è impostata correttamente e i dati forniscono le notifiche appropriate, quando il valore dei dati cambia la modifica si riflette automaticamente negli elementi associati ai dati.</span><span class="sxs-lookup"><span data-stu-id="57c66-113">If the binding has the correct settings and the data provides the proper notifications, when the data changes its value, the elements that are bound to the data reflect changes automatically.</span></span> <span data-ttu-id="57c66-114">Il data binding prevede anche che, se una rappresentazione esterna dei dati in un elemento viene modificata, i dati sottostanti possono essere automaticamente aggiornati in modo da riflettere la modifica.</span><span class="sxs-lookup"><span data-stu-id="57c66-114">Data binding can also mean that if an outer representation of the data in an element changes, then the underlying data can be automatically updated to reflect the change.</span></span> <span data-ttu-id="57c66-115">Ad esempio, se l'utente modifica `TextBox` il valore in un elemento, il valore dei dati sottostante viene aggiornato automaticamente per riflettere tale modifica.</span><span class="sxs-lookup"><span data-stu-id="57c66-115">For example, if the user edits the value in a `TextBox` element, the underlying data value is automatically updated to reflect that change.</span></span>

<span data-ttu-id="57c66-116">Un utilizzo tipico dell'associazione dati consiste nell'inserire i dati di configurazione locali o del server in form o altri controlli dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="57c66-116">A typical use of data binding is to place server or local configuration data into forms or other UI controls.</span></span> <span data-ttu-id="57c66-117">In WPFWPF, questo concetto viene espanso per includere l'associazione di un'ampia gamma di proprietà a un'ampia gamma di origini dati.</span><span class="sxs-lookup"><span data-stu-id="57c66-117">In WPF, this concept is expanded to include binding a broad range of properties to a variety of data sources.</span></span> <span data-ttu-id="57c66-118">In WPFWPF, le proprietà di dipendenza degli elementi possono essere associate a oggetti .NET (inclusi oggetti ADO.NET o oggetti associati a servizi Web e proprietà Web) e dati XML.</span><span class="sxs-lookup"><span data-stu-id="57c66-118">In WPF, dependency properties of elements can be bound to .NET objects (including ADO.NET objects or objects associated with Web Services and Web properties) and XML data.</span></span>

<span data-ttu-id="57c66-119">Per un esempio di associazione dati, dai un'occhiata alla seguente interfaccia utente dell'app dalla [demo sull'associazione dati][data-binding-demo], che visualizza un elenco di elementi dell'asta.</span><span class="sxs-lookup"><span data-stu-id="57c66-119">For an example of data binding, take a look at the following app UI from the [Data Binding Demo][data-binding-demo], which displays a list of auction items.</span></span>

<span data-ttu-id="57c66-120">![Schermata di esempio di associazione dati](./media/data-binding-overview/demo.png "DataBinding_DataBindingDemo")</span><span class="sxs-lookup"><span data-stu-id="57c66-120">![Data binding sample screenshot](./media/data-binding-overview/demo.png "DataBinding_DataBindingDemo")</span></span>

<span data-ttu-id="57c66-121">L'app illustra le seguenti funzionalità dell'associazione dati:</span><span class="sxs-lookup"><span data-stu-id="57c66-121">The app demonstrates the following features of data binding:</span></span>

- <span data-ttu-id="57c66-122">Il contenuto di ListBox è associato a una raccolta di *AuctionItem* oggetti.</span><span class="sxs-lookup"><span data-stu-id="57c66-122">The content of the ListBox is bound to a collection of *AuctionItem* objects.</span></span> <span data-ttu-id="57c66-123">Un oggetto *AuctionItem* dispone di proprietà quali *Description*, *StartPrice*, *StartDate*, *Category*, *SpecialFeatures*e così via.</span><span class="sxs-lookup"><span data-stu-id="57c66-123">An *AuctionItem* object has properties such as *Description*, *StartPrice*, *StartDate*, *Category*, *SpecialFeatures*, and so on.</span></span>

- <span data-ttu-id="57c66-124">I dati ( oggetti*AuctionItem)* visualizzati nel `ListBox` oggetto sono basati su modelli in modo che la descrizione e il prezzo corrente vengano visualizzati per ogni articolo.</span><span class="sxs-lookup"><span data-stu-id="57c66-124">The data (*AuctionItem* objects) displayed in the `ListBox` is templated so that the description and the current price are shown for each item.</span></span> <span data-ttu-id="57c66-125">Il modello viene creato <xref:System.Windows.DataTemplate>utilizzando un oggetto .</span><span class="sxs-lookup"><span data-stu-id="57c66-125">The template is created by using a <xref:System.Windows.DataTemplate>.</span></span> <span data-ttu-id="57c66-126">L'aspetto di ogni articolo dipende inoltre dal valore di *SpecialFeatures* dell'oggetto *AuctionItem* visualizzato.</span><span class="sxs-lookup"><span data-stu-id="57c66-126">In addition, the appearance of each item depends on the *SpecialFeatures* value of the *AuctionItem* being displayed.</span></span> <span data-ttu-id="57c66-127">Se il valore di *SpecialFeatures* dell'oggetto *AuctionItem* è *Color*, l'articolo avrà un bordo blu.</span><span class="sxs-lookup"><span data-stu-id="57c66-127">If the *SpecialFeatures* value of the *AuctionItem* is *Color*, the item has a blue border.</span></span> <span data-ttu-id="57c66-128">Se il valore è *Highlight*, l'articolo sarà dotato di un bordo arancione e di una stella.</span><span class="sxs-lookup"><span data-stu-id="57c66-128">If the value is *Highlight*, the item has an orange border and a star.</span></span> <span data-ttu-id="57c66-129">La sezione [Modelli di dati](#data-templating) include informazioni sull'applicazione di modelli ai dati.</span><span class="sxs-lookup"><span data-stu-id="57c66-129">The [Data Templating](#data-templating) section provides information about data templating.</span></span>

- <span data-ttu-id="57c66-130">L'utente può raggruppare, filtrare `CheckBoxes` o ordinare i dati utilizzando quelli forniti.</span><span class="sxs-lookup"><span data-stu-id="57c66-130">The user can group, filter, or sort the data using the `CheckBoxes` provided.</span></span> <span data-ttu-id="57c66-131">Nell'immagine precedente vengono selezionate le opzioni **Raggruppa per categoria** e Ordina per categoria e **data.** `CheckBoxes`</span><span class="sxs-lookup"><span data-stu-id="57c66-131">In the image above, the **Group by category** and **Sort by category and date** `CheckBoxes` are selected.</span></span> <span data-ttu-id="57c66-132">I dati sono raggruppati in base alla categoria del prodotto e i nomi delle categorie seguono l'ordine alfabetico.</span><span class="sxs-lookup"><span data-stu-id="57c66-132">You may have noticed that the data is grouped based on the category of the product, and the category name is in alphabetical order.</span></span> <span data-ttu-id="57c66-133">Benché non risulti evidente dalla figura, gli articoli sono anche ordinati in base alla data di inizio all'interno di ogni categoria.</span><span class="sxs-lookup"><span data-stu-id="57c66-133">It is difficult to notice from the image but the items are also sorted by the start date within each category.</span></span> <span data-ttu-id="57c66-134">L'ordinamento viene eseguito utilizzando una *visualizzazione raccolta.*</span><span class="sxs-lookup"><span data-stu-id="57c66-134">Sorting is done using a *collection view*.</span></span> <span data-ttu-id="57c66-135">La sezione [Associazione alle raccolte](#binding-to-collections) illustra le visualizzazioni delle raccolte.</span><span class="sxs-lookup"><span data-stu-id="57c66-135">The [Binding to collections](#binding-to-collections) section discusses collection views.</span></span>

- <span data-ttu-id="57c66-136">Quando l'utente seleziona un <xref:System.Windows.Controls.ContentControl> elemento, visualizza i dettagli dell'elemento selezionato.</span><span class="sxs-lookup"><span data-stu-id="57c66-136">When the user selects an item, the <xref:System.Windows.Controls.ContentControl> displays the details of the selected item.</span></span> <span data-ttu-id="57c66-137">Questa esperienza è *denominata scenario Master-dettagli*.</span><span class="sxs-lookup"><span data-stu-id="57c66-137">This experience is called the *Master-detail scenario*.</span></span> <span data-ttu-id="57c66-138">Nella sezione [Scenario Master-dettagli](#master-detail-binding-scenario) vengono fornite informazioni su questo tipo di associazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-138">The [Master-detail scenario](#master-detail-binding-scenario) section provides information about this type of binding.</span></span>

- <span data-ttu-id="57c66-139">Il tipo della proprietà <xref:System.DateTime> *StartDate* è , che restituisce una data che include l'ora al millisecondo.</span><span class="sxs-lookup"><span data-stu-id="57c66-139">The type of the *StartDate* property is <xref:System.DateTime>, which returns a date that includes the time to the millisecond.</span></span> <span data-ttu-id="57c66-140">In questa app è stato utilizzato un convertitore personalizzato in modo che venga visualizzata una stringa di data più breve.</span><span class="sxs-lookup"><span data-stu-id="57c66-140">In this app, a custom converter has been used so that a shorter date string is displayed.</span></span> <span data-ttu-id="57c66-141">La sezione [Conversione dati](#data-conversion) fornisce informazioni sui convertitori.</span><span class="sxs-lookup"><span data-stu-id="57c66-141">The [Data conversion](#data-conversion) section provides information about converters.</span></span>

<span data-ttu-id="57c66-142">Quando l'utente seleziona il pulsante *Aggiungi prodotto,* viene visualizzato il seguente modulo.</span><span class="sxs-lookup"><span data-stu-id="57c66-142">When the user selects the *Add Product* button, the following form comes up.</span></span>

<span data-ttu-id="57c66-143">![Pagina Add Product Listing](./media/data-binding-overview/demo-addproductlisting.png "DataBinding_Demo_AddProductListing")</span><span class="sxs-lookup"><span data-stu-id="57c66-143">![Add Product Listing page](./media/data-binding-overview/demo-addproductlisting.png "DataBinding_Demo_AddProductListing")</span></span>

<span data-ttu-id="57c66-144">L'utente può modificare i campi nel modulo, visualizzare in anteprima l'elenco `Submit` dei prodotti utilizzando i riquadri di anteprima brevi o dettagliati e scegliere di aggiungere il nuovo elenco di prodotti.</span><span class="sxs-lookup"><span data-stu-id="57c66-144">The user can edit the fields in the form, preview the product listing using the short or detailed preview panes, and select `Submit` to add the new product listing.</span></span> <span data-ttu-id="57c66-145">Tutte le impostazioni di raggruppamento, filtro e ordinamento esistenti verranno applicate alla nuova voce.</span><span class="sxs-lookup"><span data-stu-id="57c66-145">Any existing grouping, filtering and sorting settings will apply to the new entry.</span></span> <span data-ttu-id="57c66-146">In questo caso specifico, l'articolo immesso nella figura precedente verrà visualizzato come secondo articolo della categoria *Computer*.</span><span class="sxs-lookup"><span data-stu-id="57c66-146">In this particular case, the item entered in the above image will be displayed as the second item within the *Computer* category.</span></span>

<span data-ttu-id="57c66-147">Non viene visualizzata in questa immagine è la logica di convalida fornita nella *data* <xref:System.Windows.Controls.TextBox>di inizio .</span><span class="sxs-lookup"><span data-stu-id="57c66-147">Not shown in this image is the validation logic provided in the *Start Date* <xref:System.Windows.Controls.TextBox>.</span></span> <span data-ttu-id="57c66-148">Se l'utente immette una data non valida (formattazione non valida <xref:System.Windows.Controls.ToolTip> o una data passata), <xref:System.Windows.Controls.TextBox>l'utente riceverà una notifica con un punto esclamativo rosso accanto al .</span><span class="sxs-lookup"><span data-stu-id="57c66-148">If the user enters an invalid date (invalid formatting or a past date), the user will be notified with a <xref:System.Windows.Controls.ToolTip> and a red exclamation point next to the <xref:System.Windows.Controls.TextBox>.</span></span> <span data-ttu-id="57c66-149">La sezione [Convalida dei dati](#data-validation) descrive come creare la logica di convalida.</span><span class="sxs-lookup"><span data-stu-id="57c66-149">The [Data Validation](#data-validation) section discusses how to create validation logic.</span></span>

<span data-ttu-id="57c66-150">Prima di esaminare le diverse funzionalità dell'associazione dati descritte in precedenza, verranno illustrati i concetti fondamentali fondamentali fondamentali per comprendere l'associazione dati WPF.</span><span class="sxs-lookup"><span data-stu-id="57c66-150">Before going into the different features of data binding outlined above, we will first discuss the fundamental concepts that are critical to understanding WPF data binding.</span></span>

## <a name="basic-data-binding-concepts"></a><span data-ttu-id="57c66-151">Concetti di base sull'associazione dati</span><span class="sxs-lookup"><span data-stu-id="57c66-151">Basic data binding concepts</span></span>

<span data-ttu-id="57c66-152">Indipendentemente dall'elemento da associare e dalla natura dell'origine dati, ogni associazione segue sempre il modello illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="57c66-152">Regardless of what element you are binding and the nature of your data source, each binding always follows the model illustrated by the following figure.</span></span>

![Diagramma che mostra il modello di associazione dati di base.](./media/data-binding-overview/basic-data-binding-diagram.png)

<span data-ttu-id="57c66-154">Come illustrato nella figura, l'associazione dati è essenzialmente il ponte tra la destinazione di associazione e l'origine di associazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-154">As the figure shows, data binding is essentially the bridge between your binding target and your binding source.</span></span> <span data-ttu-id="57c66-155">Nella figura vengono illustrati i concetti fondamentali di associazione dati WPF:The figure demonstrates the following fundamental WPF Data binding concepts:</span><span class="sxs-lookup"><span data-stu-id="57c66-155">The figure demonstrates the following fundamental WPF data binding concepts:</span></span>

- <span data-ttu-id="57c66-156">In genere, ogni associazione ha quattro componenti:Typically, each binding has four components:</span><span class="sxs-lookup"><span data-stu-id="57c66-156">Typically, each binding has four components:</span></span>

  - <span data-ttu-id="57c66-157">Oggetto di destinazione dell'associazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-157">A binding target object.</span></span>
  - <span data-ttu-id="57c66-158">Una proprietà di destinazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-158">A target property.</span></span>
  - <span data-ttu-id="57c66-159">Un'origine di binding.</span><span class="sxs-lookup"><span data-stu-id="57c66-159">A binding source.</span></span>
  - <span data-ttu-id="57c66-160">Percorso del valore nell'origine dell'associazione da utilizzare.</span><span class="sxs-lookup"><span data-stu-id="57c66-160">A path to the value in the binding source to use.</span></span>
  
  > <span data-ttu-id="57c66-161">Ad esempio, se si desidera associare il contenuto `TextBox` di un oggetto alla proprietà , l'oggetto `Employee.Name` di destinazione è il `TextBox`, la proprietà di destinazione è la <xref:System.Windows.Controls.TextBox.Text%2A> proprietà , il valore da utilizzare è *Name*e l'oggetto di origine è il *Employee* oggetto.</span><span class="sxs-lookup"><span data-stu-id="57c66-161">For example, if you want to bind the content of a `TextBox` to the `Employee.Name` property, your target object is the `TextBox`, the target property is the <xref:System.Windows.Controls.TextBox.Text%2A> property, the value to use is *Name*, and the source object is the *Employee* object.</span></span>

- <span data-ttu-id="57c66-162">La proprietà di destinazione deve essere una proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="57c66-162">The target property must be a dependency property.</span></span> <span data-ttu-id="57c66-163">La <xref:System.Windows.UIElement> maggior parte delle proprietà sono proprietà di dipendenza e la maggior parte delle proprietà di dipendenza, ad eccezione di quelle di sola lettura, supporta l'associazione dati per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="57c66-163">Most <xref:System.Windows.UIElement> properties are dependency properties, and most dependency properties, except read-only ones, support data binding by default.</span></span> <span data-ttu-id="57c66-164">Solo i tipi <xref:System.Windows.DependencyObject> derivati da possono <xref:System.Windows.UIElement> definire le `DependencyObject`proprietà di dipendenza e tutti i tipi derivano da .)</span><span class="sxs-lookup"><span data-stu-id="57c66-164">(Only types derived from <xref:System.Windows.DependencyObject> can define dependency properties; and all <xref:System.Windows.UIElement> types derive from `DependencyObject`.)</span></span>

- <span data-ttu-id="57c66-165">Anche se non è illustrato nella figura, è necessario notare che l'oggetto origine dell'associazione non è limitato a essere un oggetto .NET personalizzato.</span><span class="sxs-lookup"><span data-stu-id="57c66-165">Although not shown in the figure, it should be noted that the binding source object is not restricted to being a custom .NET object.</span></span> <span data-ttu-id="57c66-166">L'associazione dati WPF supporta i dati sotto forma di oggetti .NET e XML.</span><span class="sxs-lookup"><span data-stu-id="57c66-166">WPF data binding supports data in the form of .NET objects and XML.</span></span> <span data-ttu-id="57c66-167">Per fornire alcuni esempi, l'origine dell'associazione può essere un oggetto , un <xref:System.Windows.UIElement>oggetto elenco, un oggetto ADO.NET o Servizi Web o un Oggetto XmlNode contenente i dati XML.</span><span class="sxs-lookup"><span data-stu-id="57c66-167">To provide some examples, your binding source may be a <xref:System.Windows.UIElement>, any list object, an ADO.NET or Web Services object, or an XmlNode that contains your XML data.</span></span> <span data-ttu-id="57c66-168">Per ulteriori informazioni, vedere Panoramica delle origini di [associazione.](../../framework/wpf/data/binding-sources-overview.md)</span><span class="sxs-lookup"><span data-stu-id="57c66-168">For more information, see [Binding sources overview](../../framework/wpf/data/binding-sources-overview.md).</span></span>

<span data-ttu-id="57c66-169">È importante ricordare che quando si stabilisce un'associazione, si associa una destinazione di associazione *a* un'origine di associazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-169">It is important to remember that when you are establishing a binding, you are binding a binding target *to* a binding source.</span></span> <span data-ttu-id="57c66-170">Ad esempio, se si visualizzano alcuni <xref:System.Windows.Controls.ListBox> dati XML sottostanti in `ListBox` un'associazione dati di utilizzo, si sta associando l'elemento ai dati XML.</span><span class="sxs-lookup"><span data-stu-id="57c66-170">For example, if you are displaying some underlying XML data in a <xref:System.Windows.Controls.ListBox> using data binding, you are binding your `ListBox` to the XML data.</span></span>

<span data-ttu-id="57c66-171">Per stabilire un'associazione, utilizzare l'oggetto <xref:System.Windows.Data.Binding> .</span><span class="sxs-lookup"><span data-stu-id="57c66-171">To establish a binding, you use the <xref:System.Windows.Data.Binding> object.</span></span> <span data-ttu-id="57c66-172">Nella parte restante di questo articolo vengono illustrati molti dei `Binding` concetti associati e alcune delle proprietà e l'utilizzo dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="57c66-172">The rest of this article discusses many of the concepts associated with and some of the properties and usage of the `Binding` object.</span></span>

### <a name="direction-of-the-data-flow"></a><span data-ttu-id="57c66-173">Direzione del flusso di dati</span><span class="sxs-lookup"><span data-stu-id="57c66-173">Direction of the data flow</span></span>

<span data-ttu-id="57c66-174">Come indicato dalla freccia nella figura precedente, il flusso di dati di un'associazione può passare dalla destinazione di associazione all'origine di associazione (ad esempio, il valore di origine cambia quando un utente modifica il valore di un `TextBox`) e/o dall'origine di associazione alla destinazione di associazione (ad esempio, il `TextBox` contenuto viene aggiornato con le modifiche nell'origine di associazione) se l'origine di associazione fornisce le notifiche appropriate.</span><span class="sxs-lookup"><span data-stu-id="57c66-174">As indicated by the arrow in the previous figure, the data flow of a binding can go from the binding target to the binding source (for example, the source value changes when a user edits the value of a `TextBox`) and/or from the binding source to the binding target (for example, your `TextBox` content is updated with changes in the binding source) if the binding source provides the proper notifications.</span></span>

<span data-ttu-id="57c66-175">Puoi consentire all'app di modificare i dati e propagarlo nuovamente all'oggetto di origine.</span><span class="sxs-lookup"><span data-stu-id="57c66-175">You may want your app to enable users to change the data and propagate it back to the source object.</span></span> <span data-ttu-id="57c66-176">oppure è possibile fare in modo che gli utenti non possano aggiornare i dati di origine.</span><span class="sxs-lookup"><span data-stu-id="57c66-176">Or you may not want to enable users to update the source data.</span></span> <span data-ttu-id="57c66-177">È possibile controllare il flusso <xref:System.Windows.Data.Binding.Mode?displayProperty=nameWithType>di dati impostando il .</span><span class="sxs-lookup"><span data-stu-id="57c66-177">You can control the flow of data by setting the <xref:System.Windows.Data.Binding.Mode?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="57c66-178">Figura che illustra i diversi tipi di flusso di dati:This figure illustrates the different types of data flow:</span><span class="sxs-lookup"><span data-stu-id="57c66-178">This figure illustrates the different types of data flow:</span></span>

<span data-ttu-id="57c66-179">![Flusso di dati dell'associazione dati](./media/data-binding-overview/databinding-dataflow.png "DataBinding_DataFlow")</span><span class="sxs-lookup"><span data-stu-id="57c66-179">![Data binding data flow](./media/data-binding-overview/databinding-dataflow.png "DataBinding_DataFlow")</span></span>

- <span data-ttu-id="57c66-180"><xref:System.Windows.Data.BindingMode.OneWay>L'associazione fa sì che le modifiche alla proprietà di origine aggiornino automaticamente la proprietà di destinazione, ma le modifiche alla proprietà di destinazione non vengono propagate alla proprietà di origine.</span><span class="sxs-lookup"><span data-stu-id="57c66-180"><xref:System.Windows.Data.BindingMode.OneWay> binding causes changes to the source property to automatically update the target property, but changes to the target property are not propagated back to the source property.</span></span> <span data-ttu-id="57c66-181">Questo tipo di binding è appropriato se il controllo da associare è implicitamente di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="57c66-181">This type of binding is appropriate if the control being bound is implicitly read-only.</span></span> <span data-ttu-id="57c66-182">Ad esempio, è possibile eseguire l'associazione a un'origine, ad esempio un ticker azionario o forse la proprietà di destinazione non dispone di alcuna interfaccia di controllo fornita per apportare modifiche, ad esempio un colore di sfondo con associazione a dati di una tabella.</span><span class="sxs-lookup"><span data-stu-id="57c66-182">For instance, you may bind to a source such as a stock ticker, or perhaps your target property has no control interface provided for making changes, such as a data-bound background color of a table.</span></span> <span data-ttu-id="57c66-183">Se non è necessario monitorare le modifiche delle proprietà di destinazione, l'uso della modalità di associazione <xref:System.Windows.Data.BindingMode.OneWay> consente di evitare il sovraccarico della modalità di binding <xref:System.Windows.Data.BindingMode.TwoWay>.</span><span class="sxs-lookup"><span data-stu-id="57c66-183">If there is no need to monitor the changes of the target property, using the <xref:System.Windows.Data.BindingMode.OneWay> binding mode avoids the overhead of the <xref:System.Windows.Data.BindingMode.TwoWay> binding mode.</span></span>

- <span data-ttu-id="57c66-184"><xref:System.Windows.Data.BindingMode.TwoWay>L'associazione fa sì che le modifiche alla proprietà di origine o alla proprietà di destinazione aggiornino automaticamente l'altra.</span><span class="sxs-lookup"><span data-stu-id="57c66-184"><xref:System.Windows.Data.BindingMode.TwoWay> binding causes changes to either the source property or the target property to automatically update the other.</span></span> <span data-ttu-id="57c66-185">Questo tipo di associazione è appropriato per i moduli modificabili o altri scenari dell'interfaccia utente completamente interattivi.</span><span class="sxs-lookup"><span data-stu-id="57c66-185">This type of binding is appropriate for editable forms or other fully interactive UI scenarios.</span></span> <span data-ttu-id="57c66-186">La maggior <xref:System.Windows.Data.BindingMode.OneWay> parte delle proprietà per impostazione predefinita per l'associazione, <xref:System.Windows.Controls.TextBox.Text?displayProperty=nameWithType> ma alcune proprietà di <xref:System.Windows.Data.BindingMode.TwoWay> dipendenza (in genere le proprietà dei controlli modificabili dall'utente, ad esempio il e [CheckBox.IsChecked](xref:System.Windows.Controls.Primitives.ToggleButton.IsChecked) predefinito per l'associazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-186">Most properties default to <xref:System.Windows.Data.BindingMode.OneWay> binding, but some dependency properties (typically properties of user-editable controls such as the <xref:System.Windows.Controls.TextBox.Text?displayProperty=nameWithType> and  [CheckBox.IsChecked](xref:System.Windows.Controls.Primitives.ToggleButton.IsChecked) default to <xref:System.Windows.Data.BindingMode.TwoWay> binding.</span></span> <span data-ttu-id="57c66-187">Un modo a livello di codice per determinare se una proprietà di dipendenza viene associata unidirezionale o bidirezionale per impostazione predefinita consiste nell'ottenere i metadati della proprietà con <xref:System.Windows.DependencyProperty.GetMetadata%2A?displayProperty=nameWithType> e quindi controllare il valore booleano della <xref:System.Windows.FrameworkPropertyMetadata.BindsTwoWayByDefault%2A?displayProperty=nameWithType> proprietà.</span><span class="sxs-lookup"><span data-stu-id="57c66-187">A programmatic way to determine whether a dependency property binds one-way or two-way by default is to get the property metadata with <xref:System.Windows.DependencyProperty.GetMetadata%2A?displayProperty=nameWithType> and then check the Boolean value of the <xref:System.Windows.FrameworkPropertyMetadata.BindsTwoWayByDefault%2A?displayProperty=nameWithType> property.</span></span>

- <span data-ttu-id="57c66-188"><xref:System.Windows.Data.BindingMode.OneWayToSource>è il <xref:System.Windows.Data.BindingMode.OneWay> contrario dell'associazione; aggiorna la proprietà di origine quando la proprietà di destinazione viene modificata.</span><span class="sxs-lookup"><span data-stu-id="57c66-188"><xref:System.Windows.Data.BindingMode.OneWayToSource> is the reverse of <xref:System.Windows.Data.BindingMode.OneWay> binding; it updates the source property when the target property changes.</span></span> <span data-ttu-id="57c66-189">Uno scenario di esempio è se è necessario rivalutare solo il valore di origine dall'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="57c66-189">One example scenario is if you only need to reevaluate the source value from the UI.</span></span>

- <span data-ttu-id="57c66-190">Non illustrato nella <xref:System.Windows.Data.BindingMode.OneTime> figura è l'associazione, che fa sì che la proprietà di origine per inizializzare la proprietà di destinazione, ma non propagare le modifiche successive.</span><span class="sxs-lookup"><span data-stu-id="57c66-190">Not illustrated in the figure is <xref:System.Windows.Data.BindingMode.OneTime> binding, which causes the source property to initialize the target property but does not propagate subsequent changes.</span></span> <span data-ttu-id="57c66-191">Se il contesto dati cambia o l'oggetto nel contesto dati viene modificato, la modifica *non* viene riflessa nella proprietà di destinazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-191">If the data context changes or the object in the data context changes, the change is *not* reflected in the target property.</span></span> <span data-ttu-id="57c66-192">Questo tipo di associazione è appropriato se uno snapshot dello stato corrente è appropriato o se i dati sono veramente statici.</span><span class="sxs-lookup"><span data-stu-id="57c66-192">This type of binding is appropriate if either a snapshot of the current state is appropriate or the data is truly static.</span></span> <span data-ttu-id="57c66-193">Questo tipo di binding è utile anche se si vuole inizializzare la proprietà di destinazione con un valore ricavato da una proprietà di origine e il contesto dei dati non è noto in anticipo.</span><span class="sxs-lookup"><span data-stu-id="57c66-193">This type of binding is also useful if you want to initialize your target property with some value from a source property and the data context is not known in advance.</span></span> <span data-ttu-id="57c66-194">Questa modalità è essenzialmente <xref:System.Windows.Data.BindingMode.OneWay> una forma più semplice di associazione che fornisce prestazioni migliori nei casi in cui il valore di origine non viene modificato.</span><span class="sxs-lookup"><span data-stu-id="57c66-194">This mode is essentially a simpler form of <xref:System.Windows.Data.BindingMode.OneWay> binding that provides better performance in cases where the source value does not change.</span></span>

<span data-ttu-id="57c66-195">Per rilevare le <xref:System.Windows.Data.BindingMode.OneWay> modifiche <xref:System.Windows.Data.BindingMode.TwoWay> di origine (applicabili a e associazioni), <xref:System.ComponentModel.INotifyPropertyChanged>l'origine deve implementare un meccanismo di notifica di modifica delle proprietà adatto, ad esempio .</span><span class="sxs-lookup"><span data-stu-id="57c66-195">To detect source changes (applicable to <xref:System.Windows.Data.BindingMode.OneWay> and <xref:System.Windows.Data.BindingMode.TwoWay> bindings), the source must implement a suitable property change notification mechanism such as <xref:System.ComponentModel.INotifyPropertyChanged>.</span></span> <span data-ttu-id="57c66-196">Vedere [Procedura: implementare la notifica](../../framework/wpf/data/how-to-implement-property-change-notification.md) di <xref:System.ComponentModel.INotifyPropertyChanged> modifica delle proprietà per un esempio di un'implementazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-196">See [How to: Implement property change notification](../../framework/wpf/data/how-to-implement-property-change-notification.md) for an example of an <xref:System.ComponentModel.INotifyPropertyChanged> implementation.</span></span>

<span data-ttu-id="57c66-197">La <xref:System.Windows.Data.Binding.Mode?displayProperty=nameWithType> proprietà fornisce ulteriori informazioni sulle modalità di associazione e un esempio di come specificare la direzione di un'associazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-197">The <xref:System.Windows.Data.Binding.Mode?displayProperty=nameWithType> property provides more information about binding modes and an example of how to specify the direction of a binding.</span></span>

### <a name="what-triggers-source-updates"></a><span data-ttu-id="57c66-198">Elementi che attivano gli aggiornamenti dell'origineWhat triggers source updates</span><span class="sxs-lookup"><span data-stu-id="57c66-198">What triggers source updates</span></span>

<span data-ttu-id="57c66-199">Associazioni che <xref:System.Windows.Data.BindingMode.TwoWay> sono <xref:System.Windows.Data.BindingMode.OneWayToSource> o ascoltano le modifiche nella proprietà di destinazione e le propagano nuovamente all'origine, nota come aggiornamento dell'origine.</span><span class="sxs-lookup"><span data-stu-id="57c66-199">Bindings that are <xref:System.Windows.Data.BindingMode.TwoWay> or <xref:System.Windows.Data.BindingMode.OneWayToSource> listen for changes in the target property and propagate them back to the source, known as updating the source.</span></span> <span data-ttu-id="57c66-200">Può accadere ad esempio che si modifichi il testo di un oggetto TextBox per modificare il valore di origine sottostante.</span><span class="sxs-lookup"><span data-stu-id="57c66-200">For example, you may edit the text of a TextBox to change the underlying source value.</span></span>

<span data-ttu-id="57c66-201">Tuttavia, il valore di origine viene aggiornato durante la modifica del testo o dopo aver completato la modifica del testo e il controllo perde lo stato attivo?</span><span class="sxs-lookup"><span data-stu-id="57c66-201">However, is your source value updated while you are editing the text or after you finish editing the text and the control loses focus?</span></span> <span data-ttu-id="57c66-202">La <xref:System.Windows.Data.Binding.UpdateSourceTrigger?displayProperty=nameWithType> proprietà determina ciò che attiva l'aggiornamento dell'origine.</span><span class="sxs-lookup"><span data-stu-id="57c66-202">The <xref:System.Windows.Data.Binding.UpdateSourceTrigger?displayProperty=nameWithType> property determines what triggers the update of the source.</span></span> <span data-ttu-id="57c66-203">I punti delle frecce a destra nella figura seguente <xref:System.Windows.Data.Binding.UpdateSourceTrigger?displayProperty=nameWithType> illustrano il ruolo della proprietà.</span><span class="sxs-lookup"><span data-stu-id="57c66-203">The dots of the right arrows in the following figure illustrate the role of the <xref:System.Windows.Data.Binding.UpdateSourceTrigger?displayProperty=nameWithType> property.</span></span>

![Diagramma che mostra il ruolo della proprietà UpdateSourceTrigger.](./media/data-binding-overview/data-binding-updatesource-trigger.png)

<span data-ttu-id="57c66-205">Se `UpdateSourceTrigger` il <xref:System.Windows.Data.UpdateSourceTrigger.PropertyChanged?displayProperty=nameWithType>valore è , il valore a <xref:System.Windows.Data.BindingMode.TwoWay> cui <xref:System.Windows.Data.BindingMode.OneWayToSource> fa riferimento la freccia destra o le associazioni vengono aggiornati non appena la proprietà di destinazione viene modificata.</span><span class="sxs-lookup"><span data-stu-id="57c66-205">If the `UpdateSourceTrigger` value is <xref:System.Windows.Data.UpdateSourceTrigger.PropertyChanged?displayProperty=nameWithType>, then the value pointed to by the right arrow of <xref:System.Windows.Data.BindingMode.TwoWay> or the <xref:System.Windows.Data.BindingMode.OneWayToSource> bindings is updated as soon as the target property changes.</span></span> <span data-ttu-id="57c66-206">Tuttavia, `UpdateSourceTrigger` se <xref:System.Windows.Data.UpdateSourceTrigger.LostFocus>il valore è , tale valore viene aggiornato solo con il nuovo valore quando la proprietà di destinazione perde lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="57c66-206">However, if the `UpdateSourceTrigger` value is <xref:System.Windows.Data.UpdateSourceTrigger.LostFocus>, then that value only is updated with the new value when the target property loses focus.</span></span>

<span data-ttu-id="57c66-207">Analogamente <xref:System.Windows.Data.Binding.Mode%2A> alla proprietà, proprietà di <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> dipendenza diverse hanno valori predefiniti diversi.</span><span class="sxs-lookup"><span data-stu-id="57c66-207">Similar to the <xref:System.Windows.Data.Binding.Mode%2A> property, different dependency properties have different default <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> values.</span></span> <span data-ttu-id="57c66-208">Il valore predefinito per la maggior parte delle proprietà di dipendenza è <xref:System.Windows.Data.UpdateSourceTrigger.PropertyChanged>, mentre la proprietà `TextBox.Text` ha il valore predefinito <xref:System.Windows.Data.UpdateSourceTrigger.LostFocus>.</span><span class="sxs-lookup"><span data-stu-id="57c66-208">The default value for most dependency properties is <xref:System.Windows.Data.UpdateSourceTrigger.PropertyChanged>, while the `TextBox.Text` property has a default value of <xref:System.Windows.Data.UpdateSourceTrigger.LostFocus>.</span></span> <span data-ttu-id="57c66-209">`PropertyChanged`significa che gli aggiornamenti di origine in genere si verificano ogni volta che la proprietà di destinazione viene modificata.</span><span class="sxs-lookup"><span data-stu-id="57c66-209">`PropertyChanged` means the source updates usually happen whenever the target property changes.</span></span> <span data-ttu-id="57c66-210">Le modifiche istantanee vanno bene per le caselle di controllo e altri controlli semplici.</span><span class="sxs-lookup"><span data-stu-id="57c66-210">Instant changes are fine for CheckBoxes and other simple controls.</span></span> <span data-ttu-id="57c66-211">Tuttavia, per i campi di testo, l'aggiornamento dopo ogni pressione di tasto può ridurre le prestazioni e nega all'utente la solita opportunità di backspace e correggere gli errori di digitazione prima di eseguire il commit del nuovo valore.</span><span class="sxs-lookup"><span data-stu-id="57c66-211">However, for text fields, updating after every keystroke can diminish performance and denies the user the usual opportunity to backspace and fix typing errors before committing to the new value.</span></span>

<span data-ttu-id="57c66-212">Vedere <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> la pagina delle proprietà per informazioni su come trovare il valore predefinito di una proprietà di dipendenza.</span><span class="sxs-lookup"><span data-stu-id="57c66-212">See the <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> property page for information about how to find the default value of a dependency property.</span></span>

<span data-ttu-id="57c66-213">Nella tabella seguente viene fornito <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> uno <xref:System.Windows.Controls.TextBox> scenario di esempio per ogni valore usando l'oggetto come esempio.</span><span class="sxs-lookup"><span data-stu-id="57c66-213">The following table provides an example scenario for each <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> value using the <xref:System.Windows.Controls.TextBox> as an example.</span></span>

| <span data-ttu-id="57c66-214">Valore di UpdateSourceTrigger</span><span class="sxs-lookup"><span data-stu-id="57c66-214">UpdateSourceTrigger value</span></span> | <span data-ttu-id="57c66-215">Quando il valore di origine viene aggiornato</span><span class="sxs-lookup"><span data-stu-id="57c66-215">When the source value is updated</span></span> | <span data-ttu-id="57c66-216">Scenario di esempio per TextBoxExample scenario for TextBox</span><span class="sxs-lookup"><span data-stu-id="57c66-216">Example scenario for TextBox</span></span> |
| ------------------------- | ---------------------------------- | ---------------------------- |
| <span data-ttu-id="57c66-217">`LostFocus`(impostazione <xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=nameWithType>predefinita per )</span><span class="sxs-lookup"><span data-stu-id="57c66-217">`LostFocus` (default for <xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=nameWithType>)</span></span> | <span data-ttu-id="57c66-218">Quando il TextBox controllo perde lo stato attivo.</span><span class="sxs-lookup"><span data-stu-id="57c66-218">When the TextBox control loses focus.</span></span> | <span data-ttu-id="57c66-219">Oggetto TextBox associato alla logica di convalida (vedere [Convalida dei dati](#data-validation) di seguito).</span><span class="sxs-lookup"><span data-stu-id="57c66-219">A TextBox that is associated with validation logic (see [Data Validation](#data-validation) below).</span></span> |
| `PropertyChanged` | <span data-ttu-id="57c66-220">Durante la digitazione nel <xref:System.Windows.Controls.TextBox>file .</span><span class="sxs-lookup"><span data-stu-id="57c66-220">As you type into the <xref:System.Windows.Controls.TextBox>.</span></span> | <span data-ttu-id="57c66-221">Controlli TextBox in una finestra della chat room.</span><span class="sxs-lookup"><span data-stu-id="57c66-221">TextBox controls in a chat room window.</span></span> |
| `Explicit` | <span data-ttu-id="57c66-222">Quando l'app chiama <xref:System.Windows.Data.BindingExpression.UpdateSource%2A>.</span><span class="sxs-lookup"><span data-stu-id="57c66-222">When the app calls <xref:System.Windows.Data.BindingExpression.UpdateSource%2A>.</span></span> | <span data-ttu-id="57c66-223">Controlli TextBox in un modulo modificabile (aggiorna i valori di origine solo quando l'utente fa clic sul pulsante di invio).</span><span class="sxs-lookup"><span data-stu-id="57c66-223">TextBox controls in an editable form (updates the source values only when the user clicks the submit button).</span></span> |

<span data-ttu-id="57c66-224">Per un esempio, vedere [Procedura: controllare quando il testo TextBox aggiorna l'origine](../../framework/wpf/data/how-to-control-when-the-textbox-text-updates-the-source.md).</span><span class="sxs-lookup"><span data-stu-id="57c66-224">For an example, see [How to: Control when the TextBox text updates the source](../../framework/wpf/data/how-to-control-when-the-textbox-text-updates-the-source.md).</span></span>

## <a name="creating-a-binding"></a><span data-ttu-id="57c66-225">Creazione di un'associazioneCreating a binding</span><span class="sxs-lookup"><span data-stu-id="57c66-225">Creating a binding</span></span>

<span data-ttu-id="57c66-226">Per riformulare alcuni dei concetti illustrati nelle sezioni precedenti, si stabilisce un'associazione usando l'oggetto <xref:System.Windows.Data.Binding> e ogni associazione include in genere quattro componenti: una destinazione di associazione, una proprietà di destinazione, un'origine di associazione e un percorso al valore di origine da utilizzare.</span><span class="sxs-lookup"><span data-stu-id="57c66-226">To restate some of the concepts discussed in the previous sections, you establish a binding using the <xref:System.Windows.Data.Binding> object, and each binding usually has four components: a binding target, a target property, a binding source, and a path to the source value to use.</span></span> <span data-ttu-id="57c66-227">Questa sezione illustra come impostare un binding.</span><span class="sxs-lookup"><span data-stu-id="57c66-227">This section discusses how to set up a binding.</span></span>

<span data-ttu-id="57c66-228">Si consideri l'esempio seguente, in cui l'oggetto origine del binding è una classe denominata *MyData* definita nello spazio dei nomi *SDKSample*.</span><span class="sxs-lookup"><span data-stu-id="57c66-228">Consider the following example, in which the binding source object is a class named *MyData* that is defined in the *SDKSample* namespace.</span></span> <span data-ttu-id="57c66-229">A scopo dimostrativo, *MyData* ha una proprietà stringa denominata *ColorName* il cui valore è impostato su "Red".</span><span class="sxs-lookup"><span data-stu-id="57c66-229">For demonstration purposes, *MyData* has a string property named *ColorName* whose value is set to "Red".</span></span> <span data-ttu-id="57c66-230">L'esempio genera quindi un pulsante con uno sfondo rosso.</span><span class="sxs-lookup"><span data-stu-id="57c66-230">Thus, this example generates a button with a red background.</span></span>

[!code-xaml[BindNonTextProperty](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/AutoConvertPropertyToColor.xaml#BindAutoConvertColor)]

<span data-ttu-id="57c66-231">Per ulteriori informazioni sulla sintassi della dichiarazione di associazione ed esempi su come impostare un'associazione nel codice, vedere [Cenni preliminari](../../framework/wpf/data/binding-declarations-overview.md)sulle dichiarazioni di associazione .</span><span class="sxs-lookup"><span data-stu-id="57c66-231">For more information on the binding declaration syntax and examples of how to set up a binding in code, see [Binding Declarations Overview](../../framework/wpf/data/binding-declarations-overview.md).</span></span>

<span data-ttu-id="57c66-232">Se si applica questo esempio al diagramma di base, la figura risultante sarà simile alla seguente.</span><span class="sxs-lookup"><span data-stu-id="57c66-232">If we apply this example to our basic diagram, the resulting figure looks like the following.</span></span> <span data-ttu-id="57c66-233">Questa figura descrive <xref:System.Windows.Data.BindingMode.OneWay> un'associazione perché <xref:System.Windows.Data.BindingMode.OneWay> il Background proprietà supporta l'associazione per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="57c66-233">This figure describes a <xref:System.Windows.Data.BindingMode.OneWay> binding because the Background property supports <xref:System.Windows.Data.BindingMode.OneWay> binding by default.</span></span>

![Diagramma che mostra la proprietà Background di associazione dati.](./media/data-binding-overview/data-binding-button-background-example.png)

<span data-ttu-id="57c66-235">Ci si potrebbe chiedere perché questa associazione funziona anche <xref:System.Windows.Controls.Control.Background%2A> se il <xref:System.Windows.Media.Brush> *ColorName* proprietà è di tipo string mentre la proprietà è di tipo .</span><span class="sxs-lookup"><span data-stu-id="57c66-235">You may wonder why this binding works even though the *ColorName* property is of type string while the <xref:System.Windows.Controls.Control.Background%2A> property is of type <xref:System.Windows.Media.Brush>.</span></span> <span data-ttu-id="57c66-236">Questa associazione usa la conversione dei tipi predefinita, descritta nella sezione [Conversione dati.](#data-conversion)</span><span class="sxs-lookup"><span data-stu-id="57c66-236">This binding uses default type conversion, which is discussed in the [Data conversion](#data-conversion) section.</span></span>

### <a name="specifying-the-binding-source"></a><span data-ttu-id="57c66-237">Specifica dell'origine dell'associazioneSpecifying the binding source</span><span class="sxs-lookup"><span data-stu-id="57c66-237">Specifying the binding source</span></span>

<span data-ttu-id="57c66-238">Si noti che nell'esempio precedente, l'origine dell'associazione viene specificata impostando il [DockPanel.DataContext](xref:System.Windows.FrameworkElement.DataContext) proprietà.</span><span class="sxs-lookup"><span data-stu-id="57c66-238">Notice that in the previous example, the binding source is specified by setting the [DockPanel.DataContext](xref:System.Windows.FrameworkElement.DataContext) property.</span></span> <span data-ttu-id="57c66-239">Il <xref:System.Windows.Controls.Button> quindi eredita <xref:System.Windows.FrameworkElement.DataContext%2A> il <xref:System.Windows.Controls.DockPanel>valore da , che è l'elemento padre.</span><span class="sxs-lookup"><span data-stu-id="57c66-239">The <xref:System.Windows.Controls.Button> then inherits the <xref:System.Windows.FrameworkElement.DataContext%2A> value from the <xref:System.Windows.Controls.DockPanel>, which is its parent element.</span></span> <span data-ttu-id="57c66-240">Come già detto, l'oggetto origine del binding è uno dei quattro componenti necessari di un binding.</span><span class="sxs-lookup"><span data-stu-id="57c66-240">To reiterate, the binding source object is one of the four necessary components of a binding.</span></span> <span data-ttu-id="57c66-241">Se quindi non si specifica l'oggetto origine del binding, questa non viene creata.</span><span class="sxs-lookup"><span data-stu-id="57c66-241">Therefore, without the binding source object being specified, the binding would do nothing.</span></span>

<span data-ttu-id="57c66-242">Esistono diversi modi per specificare l'oggetto origine del binding.</span><span class="sxs-lookup"><span data-stu-id="57c66-242">There are several ways to specify the binding source object.</span></span> <span data-ttu-id="57c66-243">L'utilizzo della <xref:System.Windows.FrameworkElement.DataContext%2A> proprietà su un elemento padre è utile quando si associano più proprietà alla stessa origine.</span><span class="sxs-lookup"><span data-stu-id="57c66-243">Using the <xref:System.Windows.FrameworkElement.DataContext%2A> property on a parent element is useful when you are binding multiple properties to the same source.</span></span> <span data-ttu-id="57c66-244">In alcuni casi, tuttavia, è preferibile specificare l'origine del binding in singole dichiarazioni di binding.</span><span class="sxs-lookup"><span data-stu-id="57c66-244">However, sometimes it may be more appropriate to specify the binding source on individual binding declarations.</span></span> <span data-ttu-id="57c66-245">Per l'esempio precedente, <xref:System.Windows.FrameworkElement.DataContext%2A> anziché utilizzare la proprietà , <xref:System.Windows.Data.Binding.Source%2A?displayProperty=nameWithType> è possibile specificare l'origine dell'associazione impostando la proprietà direttamente nella dichiarazione di associazione del pulsante, come nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="57c66-245">For the previous example, instead of using the <xref:System.Windows.FrameworkElement.DataContext%2A> property, you can specify the binding source by setting the <xref:System.Windows.Data.Binding.Source%2A?displayProperty=nameWithType> property directly on the binding declaration of the button, as in the following example.</span></span>

[!code-xaml[BindNonTextPropertyCompactBinding](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/AutoConvertPropertyToColor.xaml#BindAutoConvertColorCompactBinding)]

<span data-ttu-id="57c66-246">Oltre a <xref:System.Windows.FrameworkElement.DataContext%2A> impostare direttamente la proprietà <xref:System.Windows.FrameworkElement.DataContext%2A> su un elemento, ereditando il valore da un predecessore (ad <xref:System.Windows.Data.Binding.Source%2A?displayProperty=nameWithType> esempio il pulsante nel primo esempio) e specificando <xref:System.Windows.Data.Binding.ElementName?displayProperty=nameWithType> in modo <xref:System.Windows.Data.Binding.RelativeSource?displayProperty=nameWithType> esplicito l'origine dell'associazione impostando la proprietà nell'associazione (ad esempio il pulsante nell'ultimo esempio), è anche possibile usare la proprietà o la proprietà per specificare l'origine dell'associazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-246">Other than setting the <xref:System.Windows.FrameworkElement.DataContext%2A> property on an element directly, inheriting the <xref:System.Windows.FrameworkElement.DataContext%2A> value from an ancestor (such as the button in the first example), and explicitly specifying the binding source by setting the <xref:System.Windows.Data.Binding.Source%2A?displayProperty=nameWithType> property on the binding (such as the button the last example), you can also use the <xref:System.Windows.Data.Binding.ElementName?displayProperty=nameWithType> property or the <xref:System.Windows.Data.Binding.RelativeSource?displayProperty=nameWithType> property to specify the binding source.</span></span> <span data-ttu-id="57c66-247">La <xref:System.Windows.Data.Binding.ElementName%2A> proprietà è utile quando si esegue l'associazione ad altri elementi dell'app, ad esempio quando si usa un dispositivo di scorrimento per regolare la larghezza di un pulsante.</span><span class="sxs-lookup"><span data-stu-id="57c66-247">The <xref:System.Windows.Data.Binding.ElementName%2A> property is useful when you are binding to other elements in your app, such as when you are using a slider to adjust the width of a button.</span></span> <span data-ttu-id="57c66-248">La <xref:System.Windows.Data.Binding.RelativeSource%2A> proprietà è utile quando l'associazione è specificata in un <xref:System.Windows.Controls.ControlTemplate> oggetto o in un <xref:System.Windows.Style>oggetto .</span><span class="sxs-lookup"><span data-stu-id="57c66-248">The <xref:System.Windows.Data.Binding.RelativeSource%2A> property is useful when the binding is specified in a <xref:System.Windows.Controls.ControlTemplate> or a <xref:System.Windows.Style>.</span></span> <span data-ttu-id="57c66-249">Per ulteriori informazioni, vedere [Procedura: specificare l'origine dell'associazione](../../framework/wpf/data/how-to-specify-the-binding-source.md).</span><span class="sxs-lookup"><span data-stu-id="57c66-249">For more information, see [How to: Specify the binding source](../../framework/wpf/data/how-to-specify-the-binding-source.md).</span></span>

### <a name="specifying-the-path-to-the-value"></a><span data-ttu-id="57c66-250">Specifica del percorso del valore</span><span class="sxs-lookup"><span data-stu-id="57c66-250">Specifying the path to the value</span></span>

<span data-ttu-id="57c66-251">Se l'origine dell'associazione <xref:System.Windows.Data.Binding.Path?displayProperty=nameWithType> è un oggetto, utilizzare la proprietà per specificare il valore da utilizzare per l'associazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-251">If your binding source is an object, you use the <xref:System.Windows.Data.Binding.Path?displayProperty=nameWithType> property to specify the value to use for your binding.</span></span> <span data-ttu-id="57c66-252">Se si esegue l'associazione <xref:System.Windows.Data.Binding.XPath?displayProperty=nameWithType> a dati XML, utilizzare la proprietà per specificare il valore.</span><span class="sxs-lookup"><span data-stu-id="57c66-252">If you are binding to XML data, you use the <xref:System.Windows.Data.Binding.XPath?displayProperty=nameWithType> property to specify the value.</span></span> <span data-ttu-id="57c66-253">In alcuni casi, può essere <xref:System.Windows.Data.Binding.Path%2A> applicabile per utilizzare la proprietà anche quando i dati sono XML.</span><span class="sxs-lookup"><span data-stu-id="57c66-253">In some cases, it may be applicable to use the <xref:System.Windows.Data.Binding.Path%2A> property even when your data is XML.</span></span> <span data-ttu-id="57c66-254">Ad esempio, se si desidera accedere al Name proprietà di un restituito XmlNode (come <xref:System.Windows.Data.Binding.Path%2A> risultato di <xref:System.Windows.Data.Binding.XPath%2A> una query XPath), è necessario utilizzare la proprietà oltre alla proprietà.</span><span class="sxs-lookup"><span data-stu-id="57c66-254">For example, if you want to access the Name property of a returned XmlNode (as a result of an XPath query), you should use the <xref:System.Windows.Data.Binding.Path%2A> property in addition to the <xref:System.Windows.Data.Binding.XPath%2A> property.</span></span>

<span data-ttu-id="57c66-255">Per ulteriori informazioni, <xref:System.Windows.Data.Binding.Path%2A> <xref:System.Windows.Data.Binding.XPath%2A> vedere le proprietà e .</span><span class="sxs-lookup"><span data-stu-id="57c66-255">For more information, see the <xref:System.Windows.Data.Binding.Path%2A> and <xref:System.Windows.Data.Binding.XPath%2A> properties.</span></span>

<span data-ttu-id="57c66-256">Anche se abbiamo sottolineato <xref:System.Windows.Data.Binding.Path%2A> che il per il valore da utilizzare è uno dei quattro componenti necessari di un'associazione, negli scenari che si desidera associare a un intero oggetto, il valore da utilizzare sarebbe lo stesso dell'oggetto di origine dell'associazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-256">Although we have emphasized that the <xref:System.Windows.Data.Binding.Path%2A> to the value to use is one of the four necessary components of a binding, in the scenarios that you want to bind to an entire object, the value to use would be the same as the binding source object.</span></span> <span data-ttu-id="57c66-257">In questi casi, è applicabile <xref:System.Windows.Data.Binding.Path%2A>a non specificare un file .</span><span class="sxs-lookup"><span data-stu-id="57c66-257">In those cases, it is applicable to not specify a <xref:System.Windows.Data.Binding.Path%2A>.</span></span> <span data-ttu-id="57c66-258">Si consideri l'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="57c66-258">Consider the following example.</span></span>

[!code-xaml[EmptyBinding](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/EmptyBinding.xaml#EmptyBinding)]

<span data-ttu-id="57c66-259">L'esempio precedente usa la sintassi di binding vuota: {Binding}.</span><span class="sxs-lookup"><span data-stu-id="57c66-259">The above example uses the empty binding syntax: {Binding}.</span></span> <span data-ttu-id="57c66-260">In questo caso, eredita <xref:System.Windows.Controls.ListBox> il DataContext da un elemento DockPanel padre (non illustrato in questo esempio).</span><span class="sxs-lookup"><span data-stu-id="57c66-260">In this case, the <xref:System.Windows.Controls.ListBox> inherits the DataContext from a parent DockPanel element (not shown in this example).</span></span> <span data-ttu-id="57c66-261">Quando il percorso non viene specificato, per impostazione predefinita si esegue un binding all'intero oggetto.</span><span class="sxs-lookup"><span data-stu-id="57c66-261">When the path is not specified, the default is to bind to the entire object.</span></span> <span data-ttu-id="57c66-262">In altre parole, in questo esempio, il percorso è <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A> stato tralasciato perché la proprietà viene riuneta all'intero oggetto.</span><span class="sxs-lookup"><span data-stu-id="57c66-262">In other words, in this example, the path has been left out because we are binding the <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A> property to the entire object.</span></span> <span data-ttu-id="57c66-263">Per una discussione approfondita, vedere la sezione [Associazione alle raccolte.](#binding-to-collections)</span><span class="sxs-lookup"><span data-stu-id="57c66-263">(See the [Binding to collections](#binding-to-collections) section for an in-depth discussion.)</span></span>

<span data-ttu-id="57c66-264">Oltre al binding a una raccolta, questo scenario è utile anche in caso di binding a un intero oggetto anziché a una singola proprietà di un oggetto.</span><span class="sxs-lookup"><span data-stu-id="57c66-264">Other than binding to a collection, this scenario is also useful when you want to bind to an entire object instead of just a single property of an object.</span></span> <span data-ttu-id="57c66-265">Ad esempio, se l'oggetto <xref:System.String>di origine è di tipo , è possibile semplicemente eseguire l'associazione alla stringa stessa.</span><span class="sxs-lookup"><span data-stu-id="57c66-265">For example, if your source object is of type <xref:System.String>, you may simply want to bind to the string itself.</span></span> <span data-ttu-id="57c66-266">Un altro scenario comune riguarda il binding di un elemento a un oggetto con numerose proprietà.</span><span class="sxs-lookup"><span data-stu-id="57c66-266">Another common scenario is when you want to bind an element to an object with several properties.</span></span>

<span data-ttu-id="57c66-267">Potrebbe essere necessario applicare la logica personalizzata in modo che i dati sono significativi per la proprietà di destinazione associata.</span><span class="sxs-lookup"><span data-stu-id="57c66-267">You may need to apply custom logic so that the data is meaningful to your bound target property.</span></span> <span data-ttu-id="57c66-268">La logica personalizzata può essere sotto forma di un convertitore personalizzato se la conversione del tipo predefinito non esiste.</span><span class="sxs-lookup"><span data-stu-id="57c66-268">The custom logic may be in the form of a custom converter if default type conversion does not exist.</span></span> <span data-ttu-id="57c66-269">Vedere [Conversione dei dati](#data-conversion) per informazioni sui convertitori.</span><span class="sxs-lookup"><span data-stu-id="57c66-269">See [Data conversion](#data-conversion) for information about converters.</span></span>

### <a name="binding-and-bindingexpression"></a><span data-ttu-id="57c66-270">Binding e BindingExpression</span><span class="sxs-lookup"><span data-stu-id="57c66-270">Binding and BindingExpression</span></span>

<span data-ttu-id="57c66-271">Prima di accedere ad altre funzionalità e utilizzi dell'associazione dati, è utile introdurre la <xref:System.Windows.Data.BindingExpression> classe .</span><span class="sxs-lookup"><span data-stu-id="57c66-271">Before getting into other features and usages of data binding, it is useful to introduce the <xref:System.Windows.Data.BindingExpression> class.</span></span> <span data-ttu-id="57c66-272">Come si è visto nelle <xref:System.Windows.Data.Binding> sezioni precedenti, la classe è la classe di alto livello per la dichiarazione di un'associazione; fornisce molte proprietà che consentono di specificare le caratteristiche di un'associazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-272">As you have seen in previous sections, the <xref:System.Windows.Data.Binding> class is the high-level class for the declaration of a binding; it provides many properties that allow you to specify the characteristics of a binding.</span></span> <span data-ttu-id="57c66-273">Una classe <xref:System.Windows.Data.BindingExpression>correlata, , è l'oggetto sottostante che mantiene la connessione tra l'origine e la destinazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-273">A related class, <xref:System.Windows.Data.BindingExpression>, is the underlying object that maintains the connection between the source and the target.</span></span> <span data-ttu-id="57c66-274">Un binding contiene tutte le informazioni condivisibili tra diverse espressioni di binding.</span><span class="sxs-lookup"><span data-stu-id="57c66-274">A binding contains all the information that can be shared across several binding expressions.</span></span> <span data-ttu-id="57c66-275">Un <xref:System.Windows.Data.BindingExpression> è un'espressione di istanza che non può <xref:System.Windows.Data.Binding>essere condivisa e contiene tutte le informazioni sull'istanza dell'oggetto .</span><span class="sxs-lookup"><span data-stu-id="57c66-275">A <xref:System.Windows.Data.BindingExpression> is an instance expression that cannot be shared and contains all the instance information of the <xref:System.Windows.Data.Binding>.</span></span>

<span data-ttu-id="57c66-276">Si consideri l'esempio seguente, `myDataObject` where è un'istanza della `MyData` classe, `myBinding` è l'oggetto di origine <xref:System.Windows.Data.Binding> ed `MyData` è una classe definita che contiene una proprietà stringa denominata `MyDataProperty`.</span><span class="sxs-lookup"><span data-stu-id="57c66-276">Consider the following example, where `myDataObject` is an instance of the `MyData` class, `myBinding` is the source <xref:System.Windows.Data.Binding> object, and `MyData` is a defined class that contains a string property named `MyDataProperty`.</span></span> <span data-ttu-id="57c66-277">In questo esempio il `myText`contenuto di <xref:System.Windows.Controls.TextBlock>testo `MyDataProperty`di , un'istanza di , viene associato a .</span><span class="sxs-lookup"><span data-stu-id="57c66-277">This example binds the text content of `myText`, an instance of <xref:System.Windows.Controls.TextBlock>, to `MyDataProperty`.</span></span>

[!code-csharp[CodeOnlyBinding](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/ManualBinding.cs#CodeOnlyBinding)]
[!code-vb[CodeOnlyBinding](~/samples/snippets/desktop-guide/wpf/data-binding-overview/vb/ManualBinding.vb#CodeOnlyBinding)]

<span data-ttu-id="57c66-278">È possibile usare lo stesso oggetto *myBinding* per creare altri binding.</span><span class="sxs-lookup"><span data-stu-id="57c66-278">You can use the same *myBinding* object to create other bindings.</span></span> <span data-ttu-id="57c66-279">Ad esempio, è possibile utilizzare l'oggetto *myBinding* per associare il contenuto di testo di una casella di controllo a *MyDataProperty*.</span><span class="sxs-lookup"><span data-stu-id="57c66-279">For example, you can use the *myBinding* object to bind the text content of a check box to *MyDataProperty*.</span></span> <span data-ttu-id="57c66-280">In questo scenario, ci saranno <xref:System.Windows.Data.BindingExpression> due istanze di condivisione del *myBinding* oggetto.</span><span class="sxs-lookup"><span data-stu-id="57c66-280">In that scenario, there will be two instances of <xref:System.Windows.Data.BindingExpression> sharing the *myBinding* object.</span></span>

<span data-ttu-id="57c66-281">Un <xref:System.Windows.Data.BindingExpression> oggetto viene restituito <xref:System.Windows.Data.BindingOperations.GetBindingExpression%2A> chiamando su un oggetto con associazione a dati.</span><span class="sxs-lookup"><span data-stu-id="57c66-281">A <xref:System.Windows.Data.BindingExpression> object is returned by calling <xref:System.Windows.Data.BindingOperations.GetBindingExpression%2A> on a data-bound object.</span></span> <span data-ttu-id="57c66-282">Gli articoli seguenti illustrano alcuni <xref:System.Windows.Data.BindingExpression> degli utilizzi della classe:</span><span class="sxs-lookup"><span data-stu-id="57c66-282">The following articles demonstrate some of the usages of the <xref:System.Windows.Data.BindingExpression> class:</span></span>

- [<span data-ttu-id="57c66-283">Ottenere l'oggetto di binding da una proprietà di destinazione associata</span><span class="sxs-lookup"><span data-stu-id="57c66-283">Get the binding object from a bound target property</span></span>](../../framework/wpf/data/how-to-get-the-binding-object-from-a-bound-target-property.md)

- [<span data-ttu-id="57c66-284">Controllo quando il testo TextBox aggiorna l'origine</span><span class="sxs-lookup"><span data-stu-id="57c66-284">Control When the TextBox text updates the source</span></span>](../../framework/wpf/data/how-to-control-when-the-textbox-text-updates-the-source.md)

## <a name="data-conversion"></a><span data-ttu-id="57c66-285">Conversione di dati</span><span class="sxs-lookup"><span data-stu-id="57c66-285">Data conversion</span></span>

<span data-ttu-id="57c66-286">Nella [sezione Creazione di un'associazione,](#creating-a-binding) il pulsante è rosso perché la relativa <xref:System.Windows.Controls.Control.Background%2A> proprietà è associata a una proprietà stringa con il valore "Red".</span><span class="sxs-lookup"><span data-stu-id="57c66-286">In the [Creating a binding](#creating-a-binding) section, the button is red because its <xref:System.Windows.Controls.Control.Background%2A> property is bound to a string property with the value "Red".</span></span> <span data-ttu-id="57c66-287">Questo valore stringa funziona perché un <xref:System.Windows.Media.Brush> convertitore di tipi è <xref:System.Windows.Media.Brush>presente nel tipo per convertire il valore stringa in un oggetto .</span><span class="sxs-lookup"><span data-stu-id="57c66-287">This string value works because a type converter is present on the <xref:System.Windows.Media.Brush> type to convert the string value to a <xref:System.Windows.Media.Brush>.</span></span>

<span data-ttu-id="57c66-288">Aggiunta di queste informazioni alla figura la [creazione di un'associazione](#creating-a-binding) sezione è simile al seguente.</span><span class="sxs-lookup"><span data-stu-id="57c66-288">Adding this information to the figure the [Creating a Binding](#creating-a-binding) section looks like this.</span></span>

![Diagramma che mostra la proprietà Default di associazione dati.](./media/data-binding-overview/data-binding-button-default-conversion.png)

<span data-ttu-id="57c66-290">Tuttavia, cosa succede se invece di avere una *Color* proprietà di <xref:System.Windows.Media.Color>tipo stringa l'oggetto di origine dell'associazione ha un Color proprietà di tipo ?</span><span class="sxs-lookup"><span data-stu-id="57c66-290">However, what if instead of having a property of type string your binding source object has a *Color* property of type <xref:System.Windows.Media.Color>?</span></span> <span data-ttu-id="57c66-291">In tal caso, affinché l'associazione funzioni è *Color* necessario innanzitutto trasformare <xref:System.Windows.Controls.Control.Background%2A> il Color valore della proprietà in un elemento che la proprietà accetta.</span><span class="sxs-lookup"><span data-stu-id="57c66-291">In that case, in order for the binding to work you would need to first turn the *Color* property value into something that the <xref:System.Windows.Controls.Control.Background%2A> property accepts.</span></span> <span data-ttu-id="57c66-292">È necessario creare un convertitore <xref:System.Windows.Data.IValueConverter> personalizzato implementando l'interfaccia , come nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="57c66-292">You would need to create a custom converter by implementing the <xref:System.Windows.Data.IValueConverter> interface, as in the following example.</span></span>

[!code-csharp[CodeOnlyBinding](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/ColorBrushConverter.cs#ColorBrushConverter)]
[!code-vb[CodeOnlyBinding](~/samples/snippets/desktop-guide/wpf/data-binding-overview/vb/ColorBrushConverter.vb#ColorBrushConverter)]

<span data-ttu-id="57c66-293">Per altre informazioni, vedere <xref:System.Windows.Data.IValueConverter>.</span><span class="sxs-lookup"><span data-stu-id="57c66-293">See <xref:System.Windows.Data.IValueConverter> for more information.</span></span>

<span data-ttu-id="57c66-294">Ora viene utilizzato il convertitore personalizzato anziché la conversione predefinita e il diagramma è simile al seguente.</span><span class="sxs-lookup"><span data-stu-id="57c66-294">Now the custom converter is used instead of default conversion, and our diagram looks like this.</span></span>

![Diagramma che mostra il convertitore personalizzato di associazione dati.](./media/data-binding-overview/data-binding-converter-color-example.png)

<span data-ttu-id="57c66-296">Come già detto, le conversioni predefinite possono essere disponibili o meno a seconda dei convertitori presenti nel tipo a cui si esegue il binding.</span><span class="sxs-lookup"><span data-stu-id="57c66-296">To reiterate, default conversions may be available because of type converters that are present in the type being bound to.</span></span> <span data-ttu-id="57c66-297">Questo comportamento dipenderà dai convertitori di tipi disponibili nella destinazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-297">This behavior will depend on which type converters are available in the target.</span></span> <span data-ttu-id="57c66-298">In caso di dubbio, creare un convertitore personalizzato.</span><span class="sxs-lookup"><span data-stu-id="57c66-298">If in doubt, create your own converter.</span></span>

<span data-ttu-id="57c66-299">Di seguito sono riportati alcuni scenari tipici in cui è opportuno implementare un convertitore di dati:The following are some typical scenarios where it makes sense to implement a data converter:</span><span class="sxs-lookup"><span data-stu-id="57c66-299">The following are some typical scenarios where it makes sense to implement a data converter:</span></span>

- <span data-ttu-id="57c66-300">I dati devono essere visualizzati in modo diverso, a seconda delle impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="57c66-300">Your data should be displayed differently, depending on culture.</span></span> <span data-ttu-id="57c66-301">Ad esempio, è possibile implementare un convertitore di valuta o un convertitore di data/ora del calendario in base alle convenzioni utilizzate in determinate impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="57c66-301">For instance, you might want to implement a currency converter or a calendar date/time converter based on the conventions used in a particular culture.</span></span>

- <span data-ttu-id="57c66-302">I dati usati non devono necessariamente modificare il valore di testo di una proprietà quanto piuttosto altri valori, ad esempio l'origine di un'immagine oppure il colore o lo stile del testo visualizzato.</span><span class="sxs-lookup"><span data-stu-id="57c66-302">The data being used is not necessarily intended to change the text value of a property, but is instead intended to change some other value, such as the source for an image, or the color or style of the display text.</span></span> <span data-ttu-id="57c66-303">I convertitori possono essere usati in questo caso per convertire il binding di una proprietà considerata poco appropriata, ad esempio il binding di un campo di testo alla proprietà Background della cella di una tabella.</span><span class="sxs-lookup"><span data-stu-id="57c66-303">Converters can be used in this instance by converting the binding of a property that might not seem to be appropriate, such as binding a text field to the Background property of a table cell.</span></span>

- <span data-ttu-id="57c66-304">Più di un controllo o più proprietà dei controlli sono associati agli stessi dati.</span><span class="sxs-lookup"><span data-stu-id="57c66-304">More than one control or multiple properties of controls are bound to the same data.</span></span> <span data-ttu-id="57c66-305">In questo caso, il binding primario potrebbe semplicemente visualizzare il testo, mentre gli altri binding gestiscono problemi di visualizzazione specifici, usando comunque lo stesso binding come informazione di origine.</span><span class="sxs-lookup"><span data-stu-id="57c66-305">In this case, the primary binding might just display the text, whereas other bindings handle specific display issues but still use the same binding as source information.</span></span>

- <span data-ttu-id="57c66-306">Una proprietà di destinazione dispone di una <xref:System.Windows.Data.MultiBinding>raccolta di associazioni, che viene definita .</span><span class="sxs-lookup"><span data-stu-id="57c66-306">A target property has a collection of bindings, which is termed <xref:System.Windows.Data.MultiBinding>.</span></span> <span data-ttu-id="57c66-307">Per <xref:System.Windows.Data.MultiBinding>, si <xref:System.Windows.Data.IMultiValueConverter> utilizza un oggetto personalizzato per produrre un valore finale dai valori delle associazioni.</span><span class="sxs-lookup"><span data-stu-id="57c66-307">For <xref:System.Windows.Data.MultiBinding>, you use a custom <xref:System.Windows.Data.IMultiValueConverter> to produce a final value from the values of the bindings.</span></span> <span data-ttu-id="57c66-308">È possibile ad esempio calcolare il colore dai valori rosso, blu e verde, ovvero valori che possono provenire da oggetti origine del binding identici o diversi.</span><span class="sxs-lookup"><span data-stu-id="57c66-308">For example, color may be computed from red, blue, and green values, which can be values from the same or different binding source objects.</span></span> <span data-ttu-id="57c66-309">Vedere <xref:System.Windows.Data.MultiBinding> per esempi e informazioni.</span><span class="sxs-lookup"><span data-stu-id="57c66-309">See  <xref:System.Windows.Data.MultiBinding> for examples and information.</span></span>

## <a name="binding-to-collections"></a><span data-ttu-id="57c66-310">Associazione alle raccolteBinding to collections</span><span class="sxs-lookup"><span data-stu-id="57c66-310">Binding to collections</span></span>

<span data-ttu-id="57c66-311">Un oggetto origine di associazione può essere considerato come un singolo oggetto le cui proprietà contengono dati o come una raccolta di dati di oggetti polimorfici spesso raggruppati (ad esempio il risultato di una query in un database).</span><span class="sxs-lookup"><span data-stu-id="57c66-311">A binding source object can be treated either as a single object whose properties contain data or as a data collection of polymorphic objects that are often grouped together (such as the result of a query to a database).</span></span> <span data-ttu-id="57c66-312">Finora abbiamo discusso solo l'associazione a singoli oggetti.</span><span class="sxs-lookup"><span data-stu-id="57c66-312">So far we've only discussed binding to single objects.</span></span> <span data-ttu-id="57c66-313">Tuttavia, l'associazione a una raccolta dati è uno scenario comune.</span><span class="sxs-lookup"><span data-stu-id="57c66-313">However, binding to a data collection is a common scenario.</span></span> <span data-ttu-id="57c66-314">Ad esempio, uno scenario comune <xref:System.Windows.Controls.ItemsControl> consiste <xref:System.Windows.Controls.ListBox>nell'utilizzare un esempio, ad esempio <xref:System.Windows.Controls.ListView>, o <xref:System.Windows.Controls.TreeView> per visualizzare una raccolta di dati, ad esempio nell'app illustrata nella sezione Che [cos'è l'associazione dati.](#what-is-data-binding)</span><span class="sxs-lookup"><span data-stu-id="57c66-314">For example, a common scenario is to use an <xref:System.Windows.Controls.ItemsControl> such as a <xref:System.Windows.Controls.ListBox>, <xref:System.Windows.Controls.ListView>, or <xref:System.Windows.Controls.TreeView> to display a data collection, such as in the app shown in the [What is data binding](#what-is-data-binding) section.</span></span>

<span data-ttu-id="57c66-315">Anche in questo caso è possibile applicare il diagramma di base.</span><span class="sxs-lookup"><span data-stu-id="57c66-315">Fortunately, our basic diagram still applies.</span></span> <span data-ttu-id="57c66-316">Se si associa <xref:System.Windows.Controls.ItemsControl> un a una raccolta, il diagramma è simile al seguente.</span><span class="sxs-lookup"><span data-stu-id="57c66-316">If you are binding an <xref:System.Windows.Controls.ItemsControl> to a collection, the diagram looks like this.</span></span>

![Diagramma che mostra l'oggetto ItemsControl di associazione dati.](./media/data-binding-overview/data-binding-itemscontrol.png)

<span data-ttu-id="57c66-318">Come illustrato in questo diagramma, per associare un <xref:System.Windows.Controls.ItemsControl> oggetto raccolta, <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A?displayProperty=nameWithType> proprietà è la proprietà da utilizzare.</span><span class="sxs-lookup"><span data-stu-id="57c66-318">As shown in this diagram, to bind an <xref:System.Windows.Controls.ItemsControl> to a collection object, <xref:System.Windows.Controls.ItemsControl.ItemsSource%2A?displayProperty=nameWithType> property is the property to use.</span></span> <span data-ttu-id="57c66-319">Si può `ItemsSource` pensare come il <xref:System.Windows.Controls.ItemsControl>contenuto del .</span><span class="sxs-lookup"><span data-stu-id="57c66-319">You can think of `ItemsSource` as the content of the <xref:System.Windows.Controls.ItemsControl>.</span></span> <span data-ttu-id="57c66-320">L'associazione <xref:System.Windows.Data.BindingMode.OneWay> `ItemsSource` è perché `OneWay` la proprietà supporta l'associazione per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="57c66-320">The binding is <xref:System.Windows.Data.BindingMode.OneWay> because the `ItemsSource` property supports `OneWay` binding by default.</span></span>

### <a name="how-to-implement-collections"></a><span data-ttu-id="57c66-321">Come implementare le raccolte</span><span class="sxs-lookup"><span data-stu-id="57c66-321">How to implement collections</span></span>

<span data-ttu-id="57c66-322">È possibile enumerare su <xref:System.Collections.IEnumerable> qualsiasi raccolta che implementa l'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="57c66-322">You can enumerate over any collection that implements the <xref:System.Collections.IEnumerable> interface.</span></span> <span data-ttu-id="57c66-323">Tuttavia, per impostare le associazioni dinamiche in modo che gli inserimenti o <xref:System.Collections.Specialized.INotifyCollectionChanged> le eliminazioni nella raccolta aggiornino automaticamente l'interfaccia utente, la raccolta deve implementare l'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="57c66-323">However, to set up dynamic bindings so that insertions or deletions in the collection update the UI automatically, the collection must implement the <xref:System.Collections.Specialized.INotifyCollectionChanged> interface.</span></span> <span data-ttu-id="57c66-324">Questa interfaccia espone un evento che deve essere generato a ogni modifica della raccolta sottostante.</span><span class="sxs-lookup"><span data-stu-id="57c66-324">This interface exposes an event that should be raised whenever the underlying collection changes.</span></span>

<span data-ttu-id="57c66-325">WPFWPF <xref:System.Collections.ObjectModel.ObservableCollection%601> fornisce la classe , che è un'implementazione <xref:System.Collections.Specialized.INotifyCollectionChanged> incorporata di una raccolta di dati che espone l'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="57c66-325">WPF provides the <xref:System.Collections.ObjectModel.ObservableCollection%601> class, which is a built-in implementation of a data collection that exposes the <xref:System.Collections.Specialized.INotifyCollectionChanged> interface.</span></span> <span data-ttu-id="57c66-326">Per supportare completamente il trasferimento di valori di dati da oggetti di origine a <xref:System.ComponentModel.INotifyPropertyChanged> destinazioni, ogni oggetto nella raccolta che supporta le proprietà associabili deve implementare anche l'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="57c66-326">To fully support transferring data values from source objects to targets, each object in your collection that supports bindable properties must also implement the <xref:System.ComponentModel.INotifyPropertyChanged> interface.</span></span> <span data-ttu-id="57c66-327">Per ulteriori informazioni, vedere Panoramica delle origini di [associazione.](../../framework/wpf/data/binding-sources-overview.md)</span><span class="sxs-lookup"><span data-stu-id="57c66-327">For more information, see [Binding sources overview](../../framework/wpf/data/binding-sources-overview.md).</span></span>

<span data-ttu-id="57c66-328">Prima di implementare un <xref:System.Collections.ObjectModel.ObservableCollection%601> insieme personalizzato, è consigliabile <xref:System.Collections.Generic.List%601> <xref:System.Collections.ObjectModel.Collection%601>utilizzare <xref:System.ComponentModel.BindingList%601>o una delle classi di raccolte esistenti, ad esempio , e , tra le altre.</span><span class="sxs-lookup"><span data-stu-id="57c66-328">Before implementing your own collection, consider using <xref:System.Collections.ObjectModel.ObservableCollection%601> or one of the existing collection classes, such as <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ObjectModel.Collection%601>, and <xref:System.ComponentModel.BindingList%601>, among many others.</span></span> <span data-ttu-id="57c66-329">Se si dispone di uno scenario avanzato e <xref:System.Collections.IList>si desidera implementare un insieme personalizzato, è consigliabile utilizzare , che fornisce una raccolta non generica di oggetti a cui l'indice può accedere singolarmente e che fornisce pertanto le prestazioni migliori.</span><span class="sxs-lookup"><span data-stu-id="57c66-329">If you have an advanced scenario and want to implement your own collection, consider using <xref:System.Collections.IList>, which provides a non-generic collection of objects that can be individually accessed by the index, and thus provides the best performance.</span></span>

### <a name="collection-views"></a><span data-ttu-id="57c66-330">Visualizzazioni raccolta</span><span class="sxs-lookup"><span data-stu-id="57c66-330">Collection views</span></span>

<span data-ttu-id="57c66-331">Una <xref:System.Windows.Controls.ItemsControl> volta che è associato a una raccolta di dati, è possibile ordinare, filtrare o raggruppare i dati.</span><span class="sxs-lookup"><span data-stu-id="57c66-331">Once your <xref:System.Windows.Controls.ItemsControl> is bound to a data collection, you may want to sort, filter, or group the data.</span></span> <span data-ttu-id="57c66-332">A tale scopo, utilizzare le visualizzazioni di <xref:System.ComponentModel.ICollectionView> raccolta, ovvero le classi che implementano l'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="57c66-332">To do that, you use collection views, which are classes that implement the <xref:System.ComponentModel.ICollectionView> interface.</span></span>

#### <a name="what-are-collection-views"></a><span data-ttu-id="57c66-333">Che cosa sono le visualizzazioni di raccolta?</span><span class="sxs-lookup"><span data-stu-id="57c66-333">What Are collection views?</span></span>

<span data-ttu-id="57c66-334">Una visualizzazione di raccolta rappresenta il livello superiore di una raccolta di origine di binding che consente di esplorare e visualizzare la raccolta di origine in base a query di ordinamento, filtro e raggruppamento, il tutto senza modificare la raccolta di origine sottostante.</span><span class="sxs-lookup"><span data-stu-id="57c66-334">A collection view is a layer on top of a binding source collection that allows you to navigate and display the source collection based on sort, filter, and group queries, without having to change the underlying source collection itself.</span></span> <span data-ttu-id="57c66-335">Una visualizzazione di raccolta mantiene inoltre un puntatore all'elemento corrente nella raccolta.</span><span class="sxs-lookup"><span data-stu-id="57c66-335">A collection view also maintains a pointer to the current item in the collection.</span></span> <span data-ttu-id="57c66-336">Se la raccolta <xref:System.Collections.Specialized.INotifyCollectionChanged> di origine implementa l'interfaccia, le modifiche generate dall'evento <xref:System.Collections.Specialized.INotifyCollectionChanged.CollectionChanged> vengono propagate alle visualizzazioni.</span><span class="sxs-lookup"><span data-stu-id="57c66-336">If the source collection implements the <xref:System.Collections.Specialized.INotifyCollectionChanged> interface, the changes raised by the <xref:System.Collections.Specialized.INotifyCollectionChanged.CollectionChanged> event are propagated to the views.</span></span>

<span data-ttu-id="57c66-337">Poiché le visualizzazioni non modificano le raccolte di origine sottostanti, ogni raccolta di origine può avere più visualizzazioni associate.</span><span class="sxs-lookup"><span data-stu-id="57c66-337">Because views do not change the underlying source collections, each source collection can have multiple views associated with it.</span></span> <span data-ttu-id="57c66-338">Si consideri ad esempio una raccolta di oggetti *Task*.</span><span class="sxs-lookup"><span data-stu-id="57c66-338">For example, you may have a collection of *Task* objects.</span></span> <span data-ttu-id="57c66-339">Grazie alle visualizzazioni è possibile visualizzare gli stessi dati in modi diversi.</span><span class="sxs-lookup"><span data-stu-id="57c66-339">With the use of views, you can display that same data in different ways.</span></span> <span data-ttu-id="57c66-340">È possibile ad esempio visualizzare le attività ordinate in base alla priorità nella parte sinistra della pagina e, contemporaneamente nella parte destra, visualizzare le stesse attività raggruppate in base all'area.</span><span class="sxs-lookup"><span data-stu-id="57c66-340">For example, on the left side of your page you may want to show tasks sorted by priority, and on the right side, grouped by area.</span></span>

#### <a name="how-to-create-a-view"></a><span data-ttu-id="57c66-341">Come creare una visualizzazione</span><span class="sxs-lookup"><span data-stu-id="57c66-341">How to create a view</span></span>

<span data-ttu-id="57c66-342">Per creare e usare una visualizzazione, è possibile creare direttamente un'istanza dell'oggetto visualizzazione e usare tale istanza come origine del binding.</span><span class="sxs-lookup"><span data-stu-id="57c66-342">One way to create and use a view is to instantiate the view object directly and then use it as the binding source.</span></span> <span data-ttu-id="57c66-343">Si consideri, ad esempio, l'app [dimostrativa per l'associazione dati][data-binding-demo] nella sezione [Che cos'è l'associazione dati.](#what-is-data-binding)</span><span class="sxs-lookup"><span data-stu-id="57c66-343">For example, consider the [Data binding demo][data-binding-demo] app shown in the [What is data binding](#what-is-data-binding) section.</span></span> <span data-ttu-id="57c66-344">L'app viene implementata in modo che l'associazione <xref:System.Windows.Controls.ListBox> a una visualizzazione sulla raccolta dati anziché direttamente la raccolta dati.</span><span class="sxs-lookup"><span data-stu-id="57c66-344">The app is implemented such that the <xref:System.Windows.Controls.ListBox> binds to a view over the data collection instead of the data collection directly.</span></span> <span data-ttu-id="57c66-345">L'esempio seguente viene estratto dall'app [demo di associazione dati.][data-binding-demo]</span><span class="sxs-lookup"><span data-stu-id="57c66-345">The following example is extracted from the [Data binding demo][data-binding-demo] app.</span></span> <span data-ttu-id="57c66-346">La <xref:System.Windows.Data.CollectionViewSource> classe è il proxy XAML di <xref:System.Windows.Data.CollectionView>una classe che eredita da .</span><span class="sxs-lookup"><span data-stu-id="57c66-346">The <xref:System.Windows.Data.CollectionViewSource> class is the XAML proxy of a class that inherits from <xref:System.Windows.Data.CollectionView>.</span></span> <span data-ttu-id="57c66-347">In questo particolare <xref:System.Windows.Data.CollectionViewSource.Source%2A> esempio, l'oggetto della visualizzazione è <xref:System.Collections.ObjectModel.ObservableCollection%601>associato all'insieme *AuctionItems* (di tipo ) dell'oggetto app corrente.</span><span class="sxs-lookup"><span data-stu-id="57c66-347">In this particular example, the <xref:System.Windows.Data.CollectionViewSource.Source%2A> of the view is bound to the *AuctionItems* collection (of type <xref:System.Collections.ObjectModel.ObservableCollection%601>) of the current app object.</span></span>

[!code-xaml[CollectionView](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml#CollectionView)]

<span data-ttu-id="57c66-348">La risorsa *listingDataView* funge quindi da origine di associazione <xref:System.Windows.Controls.ListBox>per gli elementi nell'app, ad esempio il file .</span><span class="sxs-lookup"><span data-stu-id="57c66-348">The resource *listingDataView* then serves as the binding source for elements in the app, such as the <xref:System.Windows.Controls.ListBox>.</span></span>

[!code-xaml[ListBoxCollectionView](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml#ListBoxCollectionView)]

<span data-ttu-id="57c66-349">Per creare un'altra visualizzazione per la <xref:System.Windows.Data.CollectionViewSource> stessa raccolta, `x:Key` è possibile creare un'altra istanza e assegnarle un nome diverso.</span><span class="sxs-lookup"><span data-stu-id="57c66-349">To create another view for the same collection, you can create another <xref:System.Windows.Data.CollectionViewSource> instance and give it a different `x:Key` name.</span></span>

<span data-ttu-id="57c66-350">Nella tabella seguente vengono illustrati i tipi di dati <xref:System.Windows.Data.CollectionViewSource> della visualizzazione creati come visualizzazione di raccolta predefinita o in base al tipo di raccolta di origine.</span><span class="sxs-lookup"><span data-stu-id="57c66-350">The following table shows what view data types are created as the default collection view or by <xref:System.Windows.Data.CollectionViewSource> based on the source collection type.</span></span>

| <span data-ttu-id="57c66-351">Tipo di raccolta di origine</span><span class="sxs-lookup"><span data-stu-id="57c66-351">Source collection type</span></span>                    | <span data-ttu-id="57c66-352">Tipo di visualizzazione di raccolta</span><span class="sxs-lookup"><span data-stu-id="57c66-352">Collection view type</span></span> | <span data-ttu-id="57c66-353">Note</span><span class="sxs-lookup"><span data-stu-id="57c66-353">Notes</span></span> |
| ----------------------------------------- | -------------------- | ----- |
| <xref:System.Collections.IEnumerable>     | <span data-ttu-id="57c66-354">Un tipo interno basato su<xref:System.Windows.Data.CollectionView></span><span class="sxs-lookup"><span data-stu-id="57c66-354">An internal type based on <xref:System.Windows.Data.CollectionView></span></span> | <span data-ttu-id="57c66-355">Non è possibile raggruppare gli elementi.</span><span class="sxs-lookup"><span data-stu-id="57c66-355">Cannot group items.</span></span> |
| <xref:System.Collections.IList>           | <xref:System.Windows.Data.ListCollectionView> | <span data-ttu-id="57c66-356">Il più veloce.</span><span class="sxs-lookup"><span data-stu-id="57c66-356">Fastest.</span></span> |
| <xref:System.ComponentModel.IBindingList> | <xref:System.Windows.Data.BindingListCollectionView> | |

#### <a name="using-a-default-view"></a><span data-ttu-id="57c66-357">Utilizzo di una visualizzazione predefinita</span><span class="sxs-lookup"><span data-stu-id="57c66-357">Using a default view</span></span>

<span data-ttu-id="57c66-358">Specificare una visualizzazione di raccolta come origine di binding rappresenta un modo per creare e usare una visualizzazione di raccolta.</span><span class="sxs-lookup"><span data-stu-id="57c66-358">Specifying a collection view as a binding source is one way to create and use a collection view.</span></span> <span data-ttu-id="57c66-359">WPF crea inoltre una visualizzazione di raccolta predefinita per ogni raccolta usata come origine di binding.</span><span class="sxs-lookup"><span data-stu-id="57c66-359">WPF also creates a default collection view for every collection used as a binding source.</span></span> <span data-ttu-id="57c66-360">Se si esegue il binding direttamente a una raccolta, WPF esegue il binding alla relativa visualizzazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="57c66-360">If you bind directly to a collection, WPF binds to its default view.</span></span> <span data-ttu-id="57c66-361">Questa visualizzazione predefinita è condivisa da tutte le associazioni alla stessa raccolta, pertanto una modifica apportata a una visualizzazione predefinita da un controllo associato o codice (ad esempio l'ordinamento o una modifica al puntatore dell'elemento corrente, illustrato più avanti) si riflette in tutte le altre associazioni alla stessa raccolta.</span><span class="sxs-lookup"><span data-stu-id="57c66-361">This default view is shared by all bindings to the same collection, so a change made to a default view by one bound control or code (such as sorting or a change to the current item pointer, discussed later) is reflected in all other bindings to the same collection.</span></span>

<span data-ttu-id="57c66-362">Per ottenere la visualizzazione predefinita, utilizzare il <xref:System.Windows.Data.CollectionViewSource.GetDefaultView%2A> metodo .</span><span class="sxs-lookup"><span data-stu-id="57c66-362">To get the default view, you use the <xref:System.Windows.Data.CollectionViewSource.GetDefaultView%2A> method.</span></span> <span data-ttu-id="57c66-363">Per un esempio, vedere [Ottenere la visualizzazione predefinita di una raccolta dati.](../../framework/wpf/data/how-to-get-the-default-view-of-a-data-collection.md)</span><span class="sxs-lookup"><span data-stu-id="57c66-363">For an example, see [Get the default view of a data collection](../../framework/wpf/data/how-to-get-the-default-view-of-a-data-collection.md).</span></span>

#### <a name="collection-views-with-adonet-datatables"></a><span data-ttu-id="57c66-364">Visualizzazioni di raccolta con ADO.NET DataTable</span><span class="sxs-lookup"><span data-stu-id="57c66-364">Collection views with ADO.NET DataTables</span></span>

<span data-ttu-id="57c66-365">Per migliorare le prestazioni, <xref:System.Data.DataTable> <xref:System.Data.DataView> le visualizzazioni di <xref:System.Data.DataView>raccolta per ADO.NET o gli oggetti delegano l'ordinamento e il filtro a , che determina la condivisione dell'ordinamento e del filtro tra tutte le visualizzazioni di raccolta dell'origine dati.</span><span class="sxs-lookup"><span data-stu-id="57c66-365">To improve performance, collection views for ADO.NET <xref:System.Data.DataTable> or <xref:System.Data.DataView> objects delegate sorting and filtering to the <xref:System.Data.DataView>, which causes sorting and filtering to be shared across all collection views of the data source.</span></span> <span data-ttu-id="57c66-366">Per consentire a ogni visualizzazione di raccolta di ordinare <xref:System.Data.DataView> e filtrare in modo indipendente, inizializzare ogni visualizzazione della raccolta con il proprio oggetto.</span><span class="sxs-lookup"><span data-stu-id="57c66-366">To enable each collection view to sort and filter independently, initialize each collection view with its own <xref:System.Data.DataView> object.</span></span>

#### <a name="sorting"></a><span data-ttu-id="57c66-367">Ordinamento</span><span class="sxs-lookup"><span data-stu-id="57c66-367">Sorting</span></span>

<span data-ttu-id="57c66-368">Come detto in precedenza, le visualizzazioni possono applicare un ordinamento a una raccolta.</span><span class="sxs-lookup"><span data-stu-id="57c66-368">As mentioned before, views can apply a sort order to a collection.</span></span> <span data-ttu-id="57c66-369">Poiché esistono nella raccolta sottostante, i dati possono avere o non avere un ordine intrinseco.</span><span class="sxs-lookup"><span data-stu-id="57c66-369">As it exists in the underlying collection, your data may or may not have a relevant, inherent order.</span></span> <span data-ttu-id="57c66-370">La visualizzazione della raccolta consente di imporre un ordine o di modificare l'ordine predefinito in base ai criteri di confronto che si forniscono.</span><span class="sxs-lookup"><span data-stu-id="57c66-370">The view over the collection allows you to impose an order, or change the default order, based on comparison criteria that you supply.</span></span> <span data-ttu-id="57c66-371">Trattandosi di una visualizzazione dei dati basata su client, uno scenario comune prevede che l'utente possa ordinare le colonne di dati tabulari in base al valore al quale corrisponde la colonna.</span><span class="sxs-lookup"><span data-stu-id="57c66-371">Because it is a client-based view of the data, a common scenario is that the user might want to sort columns of tabular data per the value that the column corresponds to.</span></span> <span data-ttu-id="57c66-372">Grazie alle visualizzazioni, è possibile applicare questo ordinamento gestito dall'utente senza apportare alcuna modifica alla raccolta sottostante né dover ripetere la query nel contenuto della raccolta.</span><span class="sxs-lookup"><span data-stu-id="57c66-372">Using views, this user-driven sort can be applied, again without making any changes to the underlying collection or even having to requery for the collection content.</span></span> <span data-ttu-id="57c66-373">Per un esempio, vedere [Ordinare una colonna GridView quando si fa clic su un'intestazione](../../framework/wpf/controls/how-to-sort-a-gridview-column-when-a-header-is-clicked.md).</span><span class="sxs-lookup"><span data-stu-id="57c66-373">For an example, see [Sort a GridView column when a header is clicked](../../framework/wpf/controls/how-to-sort-a-gridview-column-when-a-header-is-clicked.md).</span></span>

<span data-ttu-id="57c66-374">L'esempio seguente mostra la logica di ordinamento <xref:System.Windows.Controls.CheckBox> di "Ordina per categoria e data" dell'interfaccia utente dell'app nella sezione [Che cos'è l'associazione dati.](#what-is-data-binding)</span><span class="sxs-lookup"><span data-stu-id="57c66-374">The following example shows the sorting logic of the "Sort by category and date" <xref:System.Windows.Controls.CheckBox> of the app UI in the [What is data binding](#what-is-data-binding) section.</span></span>

[!code-csharp[AddSortChecked](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml.cs#AddSortChecked)]
[!code-vb[AddSortChecked](~/samples/snippets/desktop-guide/wpf/data-binding-overview/vb/CollectionView.xaml.vb#AddSortChecked)]

#### <a name="filtering"></a><span data-ttu-id="57c66-375">Filtri</span><span class="sxs-lookup"><span data-stu-id="57c66-375">Filtering</span></span>

<span data-ttu-id="57c66-376">Le visualizzazioni possono anche applicare un filtro a una raccolta, in modo che la visualizzazione mostri solo un determinato subset della raccolta completa.</span><span class="sxs-lookup"><span data-stu-id="57c66-376">Views can also apply a filter to a collection, so that the view shows only a certain subset of the full collection.</span></span> <span data-ttu-id="57c66-377">I dati possono essere filtrati in base a una condizione.</span><span class="sxs-lookup"><span data-stu-id="57c66-377">You might filter on a condition in the data.</span></span> <span data-ttu-id="57c66-378">Ad esempio, come avviene dall'app nella sezione [Che cos'è l'associazione dati,](#what-is-data-binding) la "Mostra solo occasioni" <xref:System.Windows.Controls.CheckBox> contiene la logica per filtrare gli elementi che costano 25 dollari o più.</span><span class="sxs-lookup"><span data-stu-id="57c66-378">For instance, as is done by the app in the [What is data binding](#what-is-data-binding) section, the "Show only bargains" <xref:System.Windows.Controls.CheckBox> contains logic to filter out items that cost $25 or more.</span></span> <span data-ttu-id="57c66-379">Il codice seguente viene eseguito per impostare <xref:System.Windows.Data.CollectionViewSource.Filter> *ShowOnlyBargainsFilter* come gestore eventi quando <xref:System.Windows.Controls.CheckBox> viene selezionato.</span><span class="sxs-lookup"><span data-stu-id="57c66-379">The following code is executed to set *ShowOnlyBargainsFilter* as the <xref:System.Windows.Data.CollectionViewSource.Filter> event handler when that <xref:System.Windows.Controls.CheckBox> is selected.</span></span>

[!code-csharp[ListingViewFilter](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml.cs#ListingViewFilter)]
[!code-vb[ListingViewFilter](~/samples/snippets/desktop-guide/wpf/data-binding-overview/vb/CollectionView.xaml.vb#ListingViewFilter)]

<span data-ttu-id="57c66-380">Il *ShowOnlyBargainsFilter* gestore dell'evento ha l'implementazione seguente.</span><span class="sxs-lookup"><span data-stu-id="57c66-380">The *ShowOnlyBargainsFilter* event handler has the following implementation.</span></span>

[!code-csharp[FilterEvent](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml.cs#FilterEvent)]
[!code-vb[FilterEvent](~/samples/snippets/desktop-guide/wpf/data-binding-overview/vb/CollectionView.xaml.vb#FilterEvent)]

<span data-ttu-id="57c66-381">Se si utilizza una <xref:System.Windows.Data.CollectionView> delle classi <xref:System.Windows.Data.CollectionViewSource>direttamente anziché <xref:System.Windows.Data.CollectionView.Filter%2A> , è necessario utilizzare la proprietà per specificare un callback.</span><span class="sxs-lookup"><span data-stu-id="57c66-381">If you are using one of the <xref:System.Windows.Data.CollectionView> classes directly instead of <xref:System.Windows.Data.CollectionViewSource>, you would use the <xref:System.Windows.Data.CollectionView.Filter%2A> property to specify a callback.</span></span> <span data-ttu-id="57c66-382">Per un esempio, vedere [Procedura: Filtrare i dati in una visualizzazione](../../framework/wpf/data/how-to-filter-data-in-a-view.md).</span><span class="sxs-lookup"><span data-stu-id="57c66-382">For an example, see [Filter Data in a View](../../framework/wpf/data/how-to-filter-data-in-a-view.md).</span></span>

#### <a name="grouping"></a><span data-ttu-id="57c66-383">Raggruppamento</span><span class="sxs-lookup"><span data-stu-id="57c66-383">Grouping</span></span>

<span data-ttu-id="57c66-384">Ad eccezione della classe <xref:System.Collections.IEnumerable> interna che visualizza una raccolta, tutte le visualizzazioni dell'insieme supportano il *raggruppamento*, che consente all'utente di partizionare la raccolta nella visualizzazione raccolta in gruppi logici.</span><span class="sxs-lookup"><span data-stu-id="57c66-384">Except for the internal class that views an <xref:System.Collections.IEnumerable> collection, all collection views support *grouping*, which allows the user to partition the collection in the collection view into logical groups.</span></span> <span data-ttu-id="57c66-385">Se l'utente fornisce un elenco di gruppi, questi saranno espliciti. Se invece i gruppi vengono generati in modo dinamico in base ai dati, si avranno gruppi impliciti.</span><span class="sxs-lookup"><span data-stu-id="57c66-385">The groups can be explicit, where the user supplies a list of groups, or implicit, where the groups are generated dynamically depending on the data.</span></span>

<span data-ttu-id="57c66-386">Nell'esempio seguente viene illustrata la <xref:System.Windows.Controls.CheckBox>logica del "Gruppo per categoria".</span><span class="sxs-lookup"><span data-stu-id="57c66-386">The following example shows the logic of the "Group by category" <xref:System.Windows.Controls.CheckBox>.</span></span>

[!code-csharp[ListingGroupCheck](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml.cs#ListingGroupCheck)]
[!code-vb[ListingGroupCheck](~/samples/snippets/desktop-guide/wpf/data-binding-overview/vb/CollectionView.xaml.vb#ListingGroupCheck)]

<span data-ttu-id="57c66-387">Per un altro esempio di raggruppamento, vedere [Procedura: Raggruppare gli elementi di un controllo ListView che implementa una GridView](../../framework/wpf/controls/how-to-group-items-in-a-listview-that-implements-a-gridview.md).</span><span class="sxs-lookup"><span data-stu-id="57c66-387">For another grouping example, see [Group Items in a ListView That Implements a GridView](../../framework/wpf/controls/how-to-group-items-in-a-listview-that-implements-a-gridview.md).</span></span>

#### <a name="current-item-pointers"></a><span data-ttu-id="57c66-388">Puntatori all'elemento corrente</span><span class="sxs-lookup"><span data-stu-id="57c66-388">Current item pointers</span></span>

<span data-ttu-id="57c66-389">Le visualizzazioni supportano anche la nozione di elemento corrente.</span><span class="sxs-lookup"><span data-stu-id="57c66-389">Views also support the notion of a current item.</span></span> <span data-ttu-id="57c66-390">In una visualizzazione di raccolta è possibile spostarsi da un oggetto all'altro.</span><span class="sxs-lookup"><span data-stu-id="57c66-390">You can navigate through the objects in a collection view.</span></span> <span data-ttu-id="57c66-391">Durante lo spostamento viene spostato un puntatore dell'elemento che consente di recuperare l'oggetto presente in un percorso specifico nella raccolta.</span><span class="sxs-lookup"><span data-stu-id="57c66-391">As you navigate, you are moving an item pointer that allows you to retrieve the object that exists at that particular location in the collection.</span></span> <span data-ttu-id="57c66-392">Per un esempio, vedere [Spostarsi tra gli oggetti in un oggetto CollectionView di dati.](../../framework/wpf/data/how-to-navigate-through-the-objects-in-a-data-collectionview.md)</span><span class="sxs-lookup"><span data-stu-id="57c66-392">For an example, see [Navigate through the objects in a data CollectionView](../../framework/wpf/data/how-to-navigate-through-the-objects-in-a-data-collectionview.md).</span></span>

<span data-ttu-id="57c66-393">Poiché WPF esegue il binding a una raccolta solo tramite una visualizzazione, che può essere sia una visualizzazione specificata dall'utente che la visualizzazione predefinita della raccolta, tutti i binding alle raccolte contengono un puntatore dell'elemento corrente.</span><span class="sxs-lookup"><span data-stu-id="57c66-393">Because WPF binds to a collection only by using a view (either a view you specify, or the collection's default view), all bindings to collections have a current item pointer.</span></span> <span data-ttu-id="57c66-394">Quando si esegue il binding a una visualizzazione, il carattere barra ("/") in un valore di `Path` definisce l'elemento corrente della visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-394">When binding to a view, the slash ("/") character in a `Path` value designates the current item of the view.</span></span> <span data-ttu-id="57c66-395">Nell'esempio seguente il contesto di dati è una visualizzazione di raccolta.</span><span class="sxs-lookup"><span data-stu-id="57c66-395">In the following example, the data context is a collection view.</span></span> <span data-ttu-id="57c66-396">La prima riga viene associata alla raccolta.</span><span class="sxs-lookup"><span data-stu-id="57c66-396">The first line binds to the collection.</span></span> <span data-ttu-id="57c66-397">La seconda riga viene associata all'elemento corrente della raccolta.</span><span class="sxs-lookup"><span data-stu-id="57c66-397">The second line binds to the current item in the collection.</span></span> <span data-ttu-id="57c66-398">La terza riga viene associata alla proprietà `Description` dell'elemento corrente nella raccolta.</span><span class="sxs-lookup"><span data-stu-id="57c66-398">The third line binds to the `Description` property of the current item in the collection.</span></span>

```xaml
<Button Content="{Binding }" />
<Button Content="{Binding Path=/}" />
<Button Content="{Binding Path=/Description}" />
```

<span data-ttu-id="57c66-399">La barra e la sintassi della proprietà possono inoltre essere sovrapposte per attraversare una gerarchia di raccolte.</span><span class="sxs-lookup"><span data-stu-id="57c66-399">The slash and property syntax can also be stacked to traverse a hierarchy of collections.</span></span> <span data-ttu-id="57c66-400">Nell'esempio seguente viene eseguito il binding all'elemento corrente di una raccolta denominata `Offices`, che è una proprietà dell'elemento corrente della raccolta di origine.</span><span class="sxs-lookup"><span data-stu-id="57c66-400">The following example binds to the current item of a collection named `Offices`, which is a property of the current item of the source collection.</span></span>

```xaml
<Button Content="{Binding /Offices/}" />
```

<span data-ttu-id="57c66-401">Il puntatore dell'elemento corrente può essere influenzato da un'operazione di ordinamento o filtro applicata alla raccolta.</span><span class="sxs-lookup"><span data-stu-id="57c66-401">The current item pointer can be affected by any sorting or filtering that is applied to the collection.</span></span> <span data-ttu-id="57c66-402">L'ordinamento mantiene il puntatore dell'elemento corrente sull'ultimo elemento selezionato, ma la visualizzazione di raccolta viene ristrutturata in base a tale elemento.</span><span class="sxs-lookup"><span data-stu-id="57c66-402">Sorting preserves the current item pointer on the last item selected, but the collection view is now restructured around it.</span></span> <span data-ttu-id="57c66-403">(Forse l'elemento selezionato era all'inizio dell'elenco prima, ma ora l'elemento selezionato potrebbe essere da qualche parte nel mezzo.) Il filtro mantiene l'elemento selezionato se tale selezione rimane in visualizzazione dopo il filtro.</span><span class="sxs-lookup"><span data-stu-id="57c66-403">(Perhaps the selected item was at the beginning of the list before, but now the selected item might be somewhere in the middle.) Filtering preserves the selected item if that selection remains in view after the filtering.</span></span> <span data-ttu-id="57c66-404">Il puntatore dell'elemento corrente viene altrimenti impostato sul primo elemento della visualizzazione di raccolta filtrata.</span><span class="sxs-lookup"><span data-stu-id="57c66-404">Otherwise, the current item pointer is set to the first item of the filtered collection view.</span></span>

#### <a name="master-detail-binding-scenario"></a><span data-ttu-id="57c66-405">Scenario di associazione master-dettagli</span><span class="sxs-lookup"><span data-stu-id="57c66-405">Master-detail binding scenario</span></span>

<span data-ttu-id="57c66-406">La nozione di elemento corrente è utile non solo per l'esplorazione degli elementi in una raccolta, bensì anche per lo scenario di binding master-dettagli.</span><span class="sxs-lookup"><span data-stu-id="57c66-406">The notion of a current item is useful not only for navigation of items in a collection, but also for the master-detail binding scenario.</span></span> <span data-ttu-id="57c66-407">Considera di nuovo l'interfaccia utente dell'app nella sezione [Che cos'è l'associazione dati.](#what-is-data-binding)</span><span class="sxs-lookup"><span data-stu-id="57c66-407">Consider the app UI in the [What is data binding](#what-is-data-binding) section again.</span></span> <span data-ttu-id="57c66-408">In tale app, la <xref:System.Windows.Controls.ListBox> selezione all'interno <xref:System.Windows.Controls.ContentControl>di determina il contenuto visualizzato nel file .</span><span class="sxs-lookup"><span data-stu-id="57c66-408">In that app, the selection within the <xref:System.Windows.Controls.ListBox> determines the content shown in the <xref:System.Windows.Controls.ContentControl>.</span></span> <span data-ttu-id="57c66-409">Per dirla in un <xref:System.Windows.Controls.ListBox> altro modo, <xref:System.Windows.Controls.ContentControl> quando viene selezionato un elemento, mostra i dettagli dell'elemento selezionato.</span><span class="sxs-lookup"><span data-stu-id="57c66-409">To put it in another way, when a <xref:System.Windows.Controls.ListBox> item is selected, the <xref:System.Windows.Controls.ContentControl> shows the details of the selected item.</span></span>

<span data-ttu-id="57c66-410">Per implementare lo scenario master-dettagli, occorre semplicemente avere due o più controlli associati alla stessa visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-410">You can implement the master-detail scenario simply by having two or more controls bound to the same view.</span></span> <span data-ttu-id="57c66-411">L'esempio seguente della [demo dell'associazione dati][data-binding-demo] mostra il markup dell'interfaccia <xref:System.Windows.Controls.ListBox> utente dell'app e <xref:System.Windows.Controls.ContentControl> viene visualizzato nella sezione Che [cos'è l'associazione dati.](#what-is-data-binding)</span><span class="sxs-lookup"><span data-stu-id="57c66-411">The following example from the [Data binding demo][data-binding-demo] shows the markup of the <xref:System.Windows.Controls.ListBox> and the <xref:System.Windows.Controls.ContentControl> you see on the app UI in the [What is data binding](#what-is-data-binding) section.</span></span>

[!code-xaml[ListBoxContentControl](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml#ListBoxContentControl)]

<span data-ttu-id="57c66-412">Si noti che entrambi i controlli sono associati alla stessa origine, la risorsa statica *listingDataView* (vedere la definizione di questa risorsa nella [sezione Come creare una visualizzazione](#how-to-create-a-view)).</span><span class="sxs-lookup"><span data-stu-id="57c66-412">Notice that both of the controls are bound to the same source, the *listingDataView* static resource (see the definition of this resource in the [How to create a view section](#how-to-create-a-view)).</span></span> <span data-ttu-id="57c66-413">Questa associazione funziona perché quando un <xref:System.Windows.Controls.ContentControl> singleton oggetto (il in questo caso) <xref:System.Windows.Data.CollectionView.CurrentItem%2A> è associato a una visualizzazione di raccolta, viene associato automaticamente alla visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-413">This binding works because when a singleton object (the <xref:System.Windows.Controls.ContentControl> in this case) is bound to a collection view, it automatically binds to the <xref:System.Windows.Data.CollectionView.CurrentItem%2A> of the view.</span></span> <span data-ttu-id="57c66-414">Gli <xref:System.Windows.Data.CollectionViewSource> oggetti sincronizzano automaticamente la valuta e la selezione.</span><span class="sxs-lookup"><span data-stu-id="57c66-414">The <xref:System.Windows.Data.CollectionViewSource> objects automatically synchronize currency and selection.</span></span> <span data-ttu-id="57c66-415">Se il controllo elenco non <xref:System.Windows.Data.CollectionViewSource> è associato a un oggetto come <xref:System.Windows.Controls.Primitives.Selector.IsSynchronizedWithCurrentItem%2A> in `true` questo esempio, è necessario impostare la relativa proprietà su per il funzionamento.</span><span class="sxs-lookup"><span data-stu-id="57c66-415">If your list control is not bound to a <xref:System.Windows.Data.CollectionViewSource> object as in this example, then you would need to set its <xref:System.Windows.Controls.Primitives.Selector.IsSynchronizedWithCurrentItem%2A> property to `true` for this to work.</span></span>

<span data-ttu-id="57c66-416">Per altri esempi, vedere [Associare a una raccolta e visualizzare le informazioni in base alla selezione](../../framework/wpf/data/how-to-bind-to-a-collection-and-display-information-based-on-selection.md) e Usare il modello [master-dettagli con dati gerarchici.](../../framework/wpf/data/how-to-use-the-master-detail-pattern-with-hierarchical-data.md)</span><span class="sxs-lookup"><span data-stu-id="57c66-416">For other examples, see [Bind to a collection and display information based on selection](../../framework/wpf/data/how-to-bind-to-a-collection-and-display-information-based-on-selection.md) and [Use the master-detail pattern with hierarchical data](../../framework/wpf/data/how-to-use-the-master-detail-pattern-with-hierarchical-data.md).</span></span>

<span data-ttu-id="57c66-417">Come si può notare, l'esempio precedente usa un modello.</span><span class="sxs-lookup"><span data-stu-id="57c66-417">You may have noticed that the above example uses a template.</span></span> <span data-ttu-id="57c66-418">Infatti, i dati non verrebbero visualizzati nel modo che desideriamo senza <xref:System.Windows.Controls.ContentControl> l'uso di modelli <xref:System.Windows.Controls.ListBox>(quello esplicitamente utilizzato da e quello implicitamente utilizzato dal ).</span><span class="sxs-lookup"><span data-stu-id="57c66-418">In fact, the data would not be displayed the way we wish without the use of templates (the one explicitly used by the <xref:System.Windows.Controls.ContentControl> and the one implicitly used by the <xref:System.Windows.Controls.ListBox>).</span></span> <span data-ttu-id="57c66-419">Le sezione seguente illustra i modelli di dati.</span><span class="sxs-lookup"><span data-stu-id="57c66-419">We now turn to data templating in the next section.</span></span>

## <a name="data-templating"></a><span data-ttu-id="57c66-420">Modelli di dati</span><span class="sxs-lookup"><span data-stu-id="57c66-420">Data templating</span></span>

<span data-ttu-id="57c66-421">Senza l'uso dei modelli di dati, l'interfaccia utente dell'app nella sezione [Che cos'è l'associazione dati](#what-is-data-binding) sarà simile alla seguente.</span><span class="sxs-lookup"><span data-stu-id="57c66-421">Without the use of data templates, our app UI in the [What is data binding](#what-is-data-binding) section would look like the following.</span></span>

![Data Binding Demo senza Data Templates](./media/data-binding-overview/demo-no-template.png)

<span data-ttu-id="57c66-423">Come illustrato nell'esempio nella sezione <xref:System.Windows.Controls.ListBox> precedente, <xref:System.Windows.Controls.ContentControl> sia il controllo che l'oggetto sono associati all'intero oggetto raccolta (o, più specificamente, alla visualizzazione sull'oggetto raccolta) di *AuctionItem*s.</span><span class="sxs-lookup"><span data-stu-id="57c66-423">As shown in the example in the previous section, both the <xref:System.Windows.Controls.ListBox> control and the <xref:System.Windows.Controls.ContentControl> are bound to the entire collection object (or more specifically, the view over the collection object) of *AuctionItem*s.</span></span> <span data-ttu-id="57c66-424">Senza istruzioni specifiche su come visualizzare <xref:System.Windows.Controls.ListBox> la raccolta dei dati, viene visualizzata <xref:System.Windows.Controls.ContentControl> la rappresentazione di stringa di ogni oggetto nella raccolta sottostante e la rappresentazione di stringa dell'oggetto a cui è associato.</span><span class="sxs-lookup"><span data-stu-id="57c66-424">Without specific instructions of how to display the data collection, the <xref:System.Windows.Controls.ListBox> displays the string representation of each object in the underlying collection, and the <xref:System.Windows.Controls.ContentControl> displays the string representation of the object it is bound to.</span></span>

<span data-ttu-id="57c66-425">Per risolvere questo problema, <xref:System.Windows.DataTemplate?text=DataTemplates>l'applicazione definisce .</span><span class="sxs-lookup"><span data-stu-id="57c66-425">To solve that problem, the app defines <xref:System.Windows.DataTemplate?text=DataTemplates>.</span></span> <span data-ttu-id="57c66-426">Come illustrato nell'esempio nella sezione <xref:System.Windows.Controls.ContentControl> precedente, il utilizzo esplicito del modello di dati *detailsProductListingTemplate.As* shown in the example in the previous section, the explicitly uses the detailsProductListingTemplate data template.</span><span class="sxs-lookup"><span data-stu-id="57c66-426">As shown in the example in the previous section, the <xref:System.Windows.Controls.ContentControl> explicitly uses the *detailsProductListingTemplate* data template.</span></span> <span data-ttu-id="57c66-427">Il <xref:System.Windows.Controls.ListBox> controllo utilizza in modo implicito il modello di dati seguente quando si visualizzano gli oggetti *AuctionItem* nella raccolta.</span><span class="sxs-lookup"><span data-stu-id="57c66-427">The <xref:System.Windows.Controls.ListBox> control implicitly uses the following data template when displaying the *AuctionItem* objects in the collection.</span></span>

[!code-xaml[AuctionItemDataTemplate](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/CollectionView.xaml#AuctionItemDataTemplate)]

<span data-ttu-id="57c66-428">Con l'uso di questi due DataTemplates, l'interfaccia utente risultante è quella illustrata nella sezione [Che cos'è l'associazione dati.](#what-is-data-binding)</span><span class="sxs-lookup"><span data-stu-id="57c66-428">With the use of those two DataTemplates, the resulting UI is the one shown in the [What is data binding](#what-is-data-binding) section.</span></span> <span data-ttu-id="57c66-429">Come si può vedere da quella schermata, oltre a consentire di inserire dati nei controlli, DataTemplates consentono di definire oggetti visivi accattivanti per i dati.</span><span class="sxs-lookup"><span data-stu-id="57c66-429">As you can see from that screenshot, in addition to letting you place data in your controls, DataTemplates allow you to define compelling visuals for your data.</span></span> <span data-ttu-id="57c66-430">Ad <xref:System.Windows.DataTrigger>esempio, s vengono <xref:System.Windows.DataTemplate> utilizzati nell'esempio precedente in modo che *AuctionItem*s con *valore SpecialFeatures* di *HighLight* venga visualizzato con un bordo arancione e una stella.</span><span class="sxs-lookup"><span data-stu-id="57c66-430">For example, <xref:System.Windows.DataTrigger>s are used in the above <xref:System.Windows.DataTemplate> so that *AuctionItem*s with *SpecialFeatures* value of *HighLight* would be displayed with an orange border and a star.</span></span>

<span data-ttu-id="57c66-431">Per ulteriori informazioni sui modelli di dati, vedere [Panoramica](../../framework/wpf/data/data-templating-overview.md)dei modelli di dati .</span><span class="sxs-lookup"><span data-stu-id="57c66-431">For more information about data templates, see the [Data templating overview](../../framework/wpf/data/data-templating-overview.md).</span></span>

## <a name="data-validation"></a><span data-ttu-id="57c66-432">Convalida dei dati</span><span class="sxs-lookup"><span data-stu-id="57c66-432">Data validation</span></span>

<span data-ttu-id="57c66-433">La maggior parte delle app che accettano l'input dell'utente devono disporre della logica di convalida per garantire che l'utente abbia immesso le informazioni previste.</span><span class="sxs-lookup"><span data-stu-id="57c66-433">Most app that take user input need to have validation logic to ensure that the user has entered the expected information.</span></span> <span data-ttu-id="57c66-434">I controlli di convalida possono essere basati sul tipo, l'intervallo, il formato o altri requisiti specifici dell'app.</span><span class="sxs-lookup"><span data-stu-id="57c66-434">The validation checks can be based on type, range, format, or other app-specific requirements.</span></span> <span data-ttu-id="57c66-435">In questa sezione viene illustrato il funzionamento della convalida dei dati in WPFWPF.</span><span class="sxs-lookup"><span data-stu-id="57c66-435">This section discusses how data validation works in WPF.</span></span>

### <a name="associating-validation-rules-with-a-binding"></a><span data-ttu-id="57c66-436">Associazione di regole di convalida a un'associazione</span><span class="sxs-lookup"><span data-stu-id="57c66-436">Associating validation rules with a binding</span></span>

<span data-ttu-id="57c66-437">Il modello di associazione <xref:System.Windows.Data.Binding.ValidationRules%2A> dati <xref:System.Windows.Data.Binding> WPFWPF consente di eseguire l'associazione all'oggetto.</span><span class="sxs-lookup"><span data-stu-id="57c66-437">The WPF data binding model allows you to associate <xref:System.Windows.Data.Binding.ValidationRules%2A> with your <xref:System.Windows.Data.Binding> object.</span></span> <span data-ttu-id="57c66-438">Ad esempio, l'esempio <xref:System.Windows.Controls.TextBox> seguente associa `StartPrice` a una <xref:System.Windows.Controls.ExceptionValidationRule> proprietà <xref:System.Windows.Data.Binding.ValidationRules%2A?displayProperty=nameWithType> denominata e aggiunge un oggetto alla proprietà.</span><span class="sxs-lookup"><span data-stu-id="57c66-438">For example, the following example binds a <xref:System.Windows.Controls.TextBox> to a property named `StartPrice` and adds a <xref:System.Windows.Controls.ExceptionValidationRule> object to the <xref:System.Windows.Data.Binding.ValidationRules%2A?displayProperty=nameWithType> property.</span></span>

[!code-xaml[TextboxStartPrice](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/DataValidation.xaml#TextboxStartPrice)]

<span data-ttu-id="57c66-439">Un <xref:System.Windows.Controls.ValidationRule> oggetto verifica se il valore di una proprietà è valido.</span><span class="sxs-lookup"><span data-stu-id="57c66-439">A <xref:System.Windows.Controls.ValidationRule> object checks whether the value of a property is valid.</span></span> <span data-ttu-id="57c66-440">WPFWPF dispone di due <xref:System.Windows.Controls.ValidationRule> tipi di oggetti predefiniti:WPFWPF has two types of built-in objects:</span><span class="sxs-lookup"><span data-stu-id="57c66-440">WPF has two types of built-in <xref:System.Windows.Controls.ValidationRule> objects:</span></span>

- <span data-ttu-id="57c66-441">Un <xref:System.Windows.Controls.ExceptionValidationRule> controllo verifica la presenza di eccezioni generate durante l'aggiornamento della proprietà dell'origine di associazione.</span><span class="sxs-lookup"><span data-stu-id="57c66-441">A <xref:System.Windows.Controls.ExceptionValidationRule> checks for exceptions thrown during the update of the binding source property.</span></span> <span data-ttu-id="57c66-442">Nell'esempio precedente `StartPrice` è di tipo intero.</span><span class="sxs-lookup"><span data-stu-id="57c66-442">In the previous example, `StartPrice` is of type integer.</span></span> <span data-ttu-id="57c66-443">Quando l'utente immette un valore che non può essere convertito in un intero, viene generata un'eccezione e il binding viene contrassegnato come non valido.</span><span class="sxs-lookup"><span data-stu-id="57c66-443">When the user enters a value that cannot be converted to an integer, an exception is thrown, causing the binding to be marked as invalid.</span></span> <span data-ttu-id="57c66-444">Una sintassi alternativa <xref:System.Windows.Controls.ExceptionValidationRule> all'impostazione <xref:System.Windows.Data.Binding.ValidatesOnExceptions%2A> esplicita di `true` consiste nell'impostare la proprietà su <xref:System.Windows.Data.Binding> o <xref:System.Windows.Data.MultiBinding> sull'oggetto .</span><span class="sxs-lookup"><span data-stu-id="57c66-444">An alternative syntax to setting the <xref:System.Windows.Controls.ExceptionValidationRule> explicitly is to set the <xref:System.Windows.Data.Binding.ValidatesOnExceptions%2A> property to `true` on your <xref:System.Windows.Data.Binding> or <xref:System.Windows.Data.MultiBinding> object.</span></span>

- <span data-ttu-id="57c66-445">Un <xref:System.Windows.Controls.DataErrorValidationRule> oggetto verifica la presenza di errori <xref:System.ComponentModel.IDataErrorInfo> generati da oggetti che implementano l'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="57c66-445">A <xref:System.Windows.Controls.DataErrorValidationRule> object checks for errors that are raised by objects that implement the <xref:System.ComponentModel.IDataErrorInfo> interface.</span></span> <span data-ttu-id="57c66-446">Per un esempio di utilizzo <xref:System.Windows.Controls.DataErrorValidationRule>di questa regola di convalida, vedere .</span><span class="sxs-lookup"><span data-stu-id="57c66-446">For an example of using this validation rule, see <xref:System.Windows.Controls.DataErrorValidationRule>.</span></span> <span data-ttu-id="57c66-447">Una sintassi alternativa <xref:System.Windows.Controls.DataErrorValidationRule> all'impostazione <xref:System.Windows.Data.Binding.ValidatesOnDataErrors%2A> esplicita di `true` consiste nell'impostare la proprietà su <xref:System.Windows.Data.Binding> o <xref:System.Windows.Data.MultiBinding> sull'oggetto .</span><span class="sxs-lookup"><span data-stu-id="57c66-447">An alternative syntax to setting the <xref:System.Windows.Controls.DataErrorValidationRule> explicitly is to set the <xref:System.Windows.Data.Binding.ValidatesOnDataErrors%2A> property to `true` on your <xref:System.Windows.Data.Binding> or <xref:System.Windows.Data.MultiBinding> object.</span></span>

<span data-ttu-id="57c66-448">È inoltre possibile creare una regola di <xref:System.Windows.Controls.ValidationRule> convalida personalizzata derivandola dalla classe e implementando il <xref:System.Windows.Controls.ValidationRule.Validate%2A> metodo.</span><span class="sxs-lookup"><span data-stu-id="57c66-448">You can also create your own validation rule by deriving from the <xref:System.Windows.Controls.ValidationRule> class and implementing the <xref:System.Windows.Controls.ValidationRule.Validate%2A> method.</span></span> <span data-ttu-id="57c66-449">Nell'esempio seguente viene illustrata la regola utilizzata <xref:System.Windows.Controls.TextBox> dalla sezione Aggiungi elenco *prodotti* "Data di inizio" dalla sezione Che [cos'è l'associazione dati.](#what-is-data-binding)</span><span class="sxs-lookup"><span data-stu-id="57c66-449">The following example shows the rule used by the *Add Product Listing* "Start Date" <xref:System.Windows.Controls.TextBox> from the [What is data binding](#what-is-data-binding) section.</span></span>

[!code-csharp[FutureDateRule](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/FutureDateRule.cs#FutureDateRule)]
[!code-vb[FutureDateRule](~/samples/snippets/desktop-guide/wpf/data-binding-overview/vb/FutureDateRule.vb#FutureDateRule)]

<span data-ttu-id="57c66-450">*StartDateEntryForm* <xref:System.Windows.Controls.TextBox> utilizza *FutureDateRule*, come illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="57c66-450">The *StartDateEntryForm* <xref:System.Windows.Controls.TextBox> uses this *FutureDateRule*, as shown in the following example.</span></span>

[!code-xaml[TextboxStartDate](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/DataValidation.xaml#TextboxStartDate)]

<span data-ttu-id="57c66-451">Poiché <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> il <xref:System.Windows.Data.UpdateSourceTrigger.PropertyChanged>valore è , il motore di associazione aggiorna il valore <xref:System.Windows.Data.Binding.ValidationRules%2A> di origine a ogni sequenza di tasti, il che significa che controlla anche ogni regola nell'insieme a ogni sequenza di tasti.</span><span class="sxs-lookup"><span data-stu-id="57c66-451">Because the <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> value is <xref:System.Windows.Data.UpdateSourceTrigger.PropertyChanged>, the binding engine updates the source value on every keystroke, which means it also checks every rule in the <xref:System.Windows.Data.Binding.ValidationRules%2A> collection on every keystroke.</span></span> <span data-ttu-id="57c66-452">L'argomento verrà ulteriormente trattato nella sezione Processo di convalida.</span><span class="sxs-lookup"><span data-stu-id="57c66-452">We discuss this further in the Validation Process section.</span></span>

### <a name="providing-visual-feedback"></a><span data-ttu-id="57c66-453">Fornire feedback visivo</span><span class="sxs-lookup"><span data-stu-id="57c66-453">Providing visual feedback</span></span>

<span data-ttu-id="57c66-454">Se l'utente immette un valore non valido, è possibile fornire un feedback sull'errore nell'interfaccia utente dell'app.</span><span class="sxs-lookup"><span data-stu-id="57c66-454">If the user enters an invalid value, you may want to provide some feedback about the error on the app UI.</span></span> <span data-ttu-id="57c66-455">Un modo per fornire tale <xref:System.Windows.Controls.Validation.ErrorTemplate%2A?displayProperty=nameWithType> feedback consiste nell'impostare la proprietà associata su un oggetto personalizzato <xref:System.Windows.Controls.ControlTemplate>.</span><span class="sxs-lookup"><span data-stu-id="57c66-455">One way to provide such feedback is to set the <xref:System.Windows.Controls.Validation.ErrorTemplate%2A?displayProperty=nameWithType> attached property to a custom <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="57c66-456">Come illustrato nella sottosezione precedente, *StartDateEntryForm* <xref:System.Windows.Controls.TextBox> utilizza un <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> oggetto *validationTemplate*denominato .</span><span class="sxs-lookup"><span data-stu-id="57c66-456">As shown in the previous subsection, the *StartDateEntryForm* <xref:System.Windows.Controls.TextBox> uses an <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> called *validationTemplate*.</span></span> <span data-ttu-id="57c66-457">Nell'esempio seguente viene illustrata la definizione di *validationTemplate*.</span><span class="sxs-lookup"><span data-stu-id="57c66-457">The following example shows the definition of *validationTemplate*.</span></span>

[!code-xaml[ControlTemplate](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/DataValidation.xaml#ControlTemplate)]

<span data-ttu-id="57c66-458">L'elemento <xref:System.Windows.Controls.AdornedElementPlaceholder> specifica dove deve essere posizionato il controllo da aggiungere.</span><span class="sxs-lookup"><span data-stu-id="57c66-458">The <xref:System.Windows.Controls.AdornedElementPlaceholder> element specifies where the control being adorned should be placed.</span></span>

<span data-ttu-id="57c66-459">Inoltre, è anche possibile <xref:System.Windows.Controls.ToolTip> utilizzare un per visualizzare il messaggio di errore.</span><span class="sxs-lookup"><span data-stu-id="57c66-459">In addition, you may also use a <xref:System.Windows.Controls.ToolTip> to display the error message.</span></span> <span data-ttu-id="57c66-460">*StartDateEntryForm* e *StartPriceEntryForm*<xref:System.Windows.Controls.TextBox>utilizzano lo stile *textStyleTextBox*, <xref:System.Windows.Controls.ToolTip> che crea un che visualizza il messaggio di errore.</span><span class="sxs-lookup"><span data-stu-id="57c66-460">Both the *StartDateEntryForm* and the *StartPriceEntryForm*<xref:System.Windows.Controls.TextBox>es use the style *textStyleTextBox*, which creates a <xref:System.Windows.Controls.ToolTip> that displays the error message.</span></span> <span data-ttu-id="57c66-461">L'esempio seguente illustra la definizione di *textStyleTextBox*.</span><span class="sxs-lookup"><span data-stu-id="57c66-461">The following example shows the definition of *textStyleTextBox*.</span></span> <span data-ttu-id="57c66-462">La proprietà <xref:System.Windows.Controls.Validation.HasError%2A?displayProperty=nameWithType> associata si verifica `true` quando una o più associazioni sulle proprietà dell'elemento associato sono in errore.</span><span class="sxs-lookup"><span data-stu-id="57c66-462">The attached property <xref:System.Windows.Controls.Validation.HasError%2A?displayProperty=nameWithType> is `true` when one or more of the bindings on the properties of the bound element are in error.</span></span>

[!code-xaml[TextBoxStyle](~/samples/snippets/desktop-guide/wpf/data-binding-overview/csharp/DataValidation.xaml#TextBoxStyle)]

<span data-ttu-id="57c66-463">Con <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> l'aspetto <xref:System.Windows.Controls.ToolTip>personalizzato e l'oggetto , *StartDateEntryForm* <xref:System.Windows.Controls.TextBox> è simile al seguente quando si verifica un errore di convalida.</span><span class="sxs-lookup"><span data-stu-id="57c66-463">With the custom <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> and the <xref:System.Windows.Controls.ToolTip>, the *StartDateEntryForm* <xref:System.Windows.Controls.TextBox> looks like the following when there is a validation error.</span></span>

<span data-ttu-id="57c66-464">![Errore di convalida del data binding](./media/data-binding-overview/demo-validation-date.png "DataBindingDemo_Validation")</span><span class="sxs-lookup"><span data-stu-id="57c66-464">![Data binding validation error](./media/data-binding-overview/demo-validation-date.png "DataBindingDemo_Validation")</span></span>

<span data-ttu-id="57c66-465">Se <xref:System.Windows.Data.Binding> sono associate regole di convalida <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> ma non si specifica <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> un controllo associato, verrà utilizzato un valore predefinito per notificare agli utenti quando si verifica un errore di convalida.</span><span class="sxs-lookup"><span data-stu-id="57c66-465">If your <xref:System.Windows.Data.Binding> has associated validation rules but you do not specify an <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> on the bound control, a default <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> will be used to notify users when there is a validation error.</span></span> <span data-ttu-id="57c66-466">L'impostazione predefinita <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> è un modello di controllo che definisce un bordo rosso nel livello dello strumento decorativo visuale.</span><span class="sxs-lookup"><span data-stu-id="57c66-466">The default <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> is a control template that defines a red border in the adorner layer.</span></span> <span data-ttu-id="57c66-467">Con il <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> valore <xref:System.Windows.Controls.ToolTip>predefinito e l'interfaccia utente di *StartPriceEntryForm* <xref:System.Windows.Controls.TextBox> è simile al seguente quando si verifica un errore di convalida.</span><span class="sxs-lookup"><span data-stu-id="57c66-467">With the default <xref:System.Windows.Controls.Validation.ErrorTemplate%2A> and the <xref:System.Windows.Controls.ToolTip>, the UI of the *StartPriceEntryForm* <xref:System.Windows.Controls.TextBox> looks like the following when there is a validation error.</span></span>

<span data-ttu-id="57c66-468">![Errore di convalida del data binding](./media/data-binding-overview/demo-validation-price.png "DataBindingDemo_ValidationDefault")</span><span class="sxs-lookup"><span data-stu-id="57c66-468">![Data binding validation error](./media/data-binding-overview/demo-validation-price.png "DataBindingDemo_ValidationDefault")</span></span>

<span data-ttu-id="57c66-469">Per un esempio di come fornire la logica per convalidare tutti i controlli in una finestra di dialogo, vedere la sezione Finestre di dialogo personalizzate in [Panoramica delle finestre di dialogo](../../framework/wpf/app-development/dialog-boxes-overview.md).</span><span class="sxs-lookup"><span data-stu-id="57c66-469">For an example of how to provide logic to validate all controls in a dialog box, see the Custom Dialog Boxes section in the [Dialog boxes overview](../../framework/wpf/app-development/dialog-boxes-overview.md).</span></span>

### <a name="validation-process"></a><span data-ttu-id="57c66-470">Processo di convalida</span><span class="sxs-lookup"><span data-stu-id="57c66-470">Validation process</span></span>

<span data-ttu-id="57c66-471">La convalida avviene solitamente quando si trasferisce un valore di destinazione alla proprietà di origine del binding.</span><span class="sxs-lookup"><span data-stu-id="57c66-471">Validation usually occurs when the value of a target is transferred to the binding source property.</span></span> <span data-ttu-id="57c66-472">Questo trasferimento <xref:System.Windows.Data.BindingMode.TwoWay> avviene e <xref:System.Windows.Data.BindingMode.OneWayToSource> i binding.</span><span class="sxs-lookup"><span data-stu-id="57c66-472">This transfer occurs on <xref:System.Windows.Data.BindingMode.TwoWay> and <xref:System.Windows.Data.BindingMode.OneWayToSource> bindings.</span></span> <span data-ttu-id="57c66-473">Per ribadire, ciò che causa un <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> aggiornamento di origine dipende dal valore della proprietà, come descritto nella sezione [Che cosa attiva](#what-triggers-source-updates) gli aggiornamenti di origine .</span><span class="sxs-lookup"><span data-stu-id="57c66-473">To reiterate, what causes a source update depends on the value of the <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> property, as described in the [What triggers source updates](#what-triggers-source-updates) section.</span></span>

<span data-ttu-id="57c66-474">Negli elementi seguenti viene descritto il processo di *convalida.*</span><span class="sxs-lookup"><span data-stu-id="57c66-474">The following items describe the *validation* process.</span></span> <span data-ttu-id="57c66-475">Se si verifica un errore di convalida o un altro tipo di errore in qualsiasi momento durante questo processo, il processo viene interrotto:</span><span class="sxs-lookup"><span data-stu-id="57c66-475">If a validation error or other type of error occurs at any time during this process, the process is halted:</span></span>

1. <span data-ttu-id="57c66-476">Il motore di associazione <xref:System.Windows.Controls.ValidationRule> controlla se <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> sono <xref:System.Windows.Controls.ValidationStep.RawProposedValue> presenti <xref:System.Windows.Data.Binding>oggetti personalizzati definiti di <xref:System.Windows.Controls.ValidationRule.Validate%2A> cui <xref:System.Windows.Controls.ValidationRule> è impostato su per tale , nel qual caso chiama il metodo su ciascuno di essi fino a quando uno di essi non si verifica un errore o fino a quando tutti non passano.</span><span class="sxs-lookup"><span data-stu-id="57c66-476">The binding engine checks if there are any custom <xref:System.Windows.Controls.ValidationRule> objects defined whose <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> is set to <xref:System.Windows.Controls.ValidationStep.RawProposedValue> for that <xref:System.Windows.Data.Binding>, in which case it calls the <xref:System.Windows.Controls.ValidationRule.Validate%2A> method on each <xref:System.Windows.Controls.ValidationRule> until one of them runs into an error or until all of them pass.</span></span>

2. <span data-ttu-id="57c66-477">Il motore di binding chiama quindi il convertitore, se presente.</span><span class="sxs-lookup"><span data-stu-id="57c66-477">The binding engine then calls the converter, if one exists.</span></span>

3. <span data-ttu-id="57c66-478">Se il convertitore ha esito positivo, <xref:System.Windows.Controls.ValidationRule> il motore <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> di <xref:System.Windows.Controls.ValidationStep.ConvertedProposedValue> associazione <xref:System.Windows.Data.Binding>verifica se sono <xref:System.Windows.Controls.ValidationRule.Validate%2A> presenti oggetti <xref:System.Windows.Controls.ValidationRule> personalizzati <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> definiti <xref:System.Windows.Controls.ValidationStep.ConvertedProposedValue> il cui è impostato su tale , nel qual caso chiama il metodo su ognuno che è stato impostato su ogni che è stato impostato su fino a quando uno di essi si verifica un errore o finché non vengono passati tutti.</span><span class="sxs-lookup"><span data-stu-id="57c66-478">If the converter succeeds, the binding engine checks if there are any custom <xref:System.Windows.Controls.ValidationRule> objects defined whose <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> is set to <xref:System.Windows.Controls.ValidationStep.ConvertedProposedValue> for that <xref:System.Windows.Data.Binding>, in which case it calls the <xref:System.Windows.Controls.ValidationRule.Validate%2A> method on each <xref:System.Windows.Controls.ValidationRule> that has <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> set to <xref:System.Windows.Controls.ValidationStep.ConvertedProposedValue> until one of them runs into an error or until all of them pass.</span></span>

4. <span data-ttu-id="57c66-479">Il motore di binding imposta la proprietà di origine.</span><span class="sxs-lookup"><span data-stu-id="57c66-479">The binding engine sets the source property.</span></span>

5. <span data-ttu-id="57c66-480">Il motore di associazione <xref:System.Windows.Controls.ValidationRule> controlla se <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> sono <xref:System.Windows.Controls.ValidationStep.UpdatedValue> presenti <xref:System.Windows.Data.Binding>oggetti personalizzati definiti di <xref:System.Windows.Controls.ValidationRule.Validate%2A> cui <xref:System.Windows.Controls.ValidationRule> è <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> impostato <xref:System.Windows.Controls.ValidationStep.UpdatedValue> su per tale , nel qual caso chiama il metodo su ognuno che è impostato su ogni che è impostato su fino a quando uno di essi si verifica un errore o fino a quando tutti passano.</span><span class="sxs-lookup"><span data-stu-id="57c66-480">The binding engine checks if there are any custom <xref:System.Windows.Controls.ValidationRule> objects defined whose <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> is set to <xref:System.Windows.Controls.ValidationStep.UpdatedValue> for that <xref:System.Windows.Data.Binding>, in which case it calls the <xref:System.Windows.Controls.ValidationRule.Validate%2A> method on each <xref:System.Windows.Controls.ValidationRule> that has <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> set to <xref:System.Windows.Controls.ValidationStep.UpdatedValue> until one of them runs into an error or until all of them pass.</span></span> <span data-ttu-id="57c66-481">Se <xref:System.Windows.Controls.DataErrorValidationRule> un oggetto è associato <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> a un'associazione e la relativa impostazione è impostata sul valore predefinito, <xref:System.Windows.Controls.ValidationStep.UpdatedValue>, a questo punto viene selezionata la casella <xref:System.Windows.Controls.DataErrorValidationRule> di controllo.</span><span class="sxs-lookup"><span data-stu-id="57c66-481">If a <xref:System.Windows.Controls.DataErrorValidationRule> is associated with a binding and its <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> is set to the default, <xref:System.Windows.Controls.ValidationStep.UpdatedValue>, the <xref:System.Windows.Controls.DataErrorValidationRule> is checked at this point.</span></span> <span data-ttu-id="57c66-482">A questo punto viene <xref:System.Windows.Data.Binding.ValidatesOnDataErrors%2A> controllata `true` qualsiasi associazione con l'opzione impostata su.</span><span class="sxs-lookup"><span data-stu-id="57c66-482">At this point any binding that has the <xref:System.Windows.Data.Binding.ValidatesOnDataErrors%2A> set to `true` is checked.</span></span>

6. <span data-ttu-id="57c66-483">Il motore di associazione <xref:System.Windows.Controls.ValidationRule> controlla se <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> sono <xref:System.Windows.Controls.ValidationStep.CommittedValue> presenti <xref:System.Windows.Data.Binding>oggetti personalizzati definiti di <xref:System.Windows.Controls.ValidationRule.Validate%2A> cui <xref:System.Windows.Controls.ValidationRule> è <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> impostato <xref:System.Windows.Controls.ValidationStep.CommittedValue> su per tale , nel qual caso chiama il metodo su ognuno che è impostato su ogni che è impostato su fino a quando uno di essi si verifica un errore o fino a quando tutti passano.</span><span class="sxs-lookup"><span data-stu-id="57c66-483">The binding engine checks if there are any custom <xref:System.Windows.Controls.ValidationRule> objects defined whose <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> is set to <xref:System.Windows.Controls.ValidationStep.CommittedValue> for that <xref:System.Windows.Data.Binding>, in which case it calls the <xref:System.Windows.Controls.ValidationRule.Validate%2A> method on each <xref:System.Windows.Controls.ValidationRule> that has <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> set to <xref:System.Windows.Controls.ValidationStep.CommittedValue> until one of them runs into an error or until all of them pass.</span></span>

<span data-ttu-id="57c66-484">Se <xref:System.Windows.Controls.ValidationRule> un oggetto non passa in qualsiasi momento durante <xref:System.Windows.Controls.ValidationError> questo processo, <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> il motore di associazione crea un oggetto e lo aggiunge alla raccolta dell'elemento associato.</span><span class="sxs-lookup"><span data-stu-id="57c66-484">If a <xref:System.Windows.Controls.ValidationRule> does not pass at any time throughout this process, the binding engine creates a <xref:System.Windows.Controls.ValidationError> object and adds it to the <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> collection of the bound element.</span></span> <span data-ttu-id="57c66-485">Prima che il <xref:System.Windows.Controls.ValidationRule> motore di associazione esegua gli oggetti in un determinato passaggio, rimuove quello <xref:System.Windows.Controls.ValidationError> aggiunto alla proprietà <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> associata dell'elemento associato durante tale passaggio.</span><span class="sxs-lookup"><span data-stu-id="57c66-485">Before the binding engine runs the <xref:System.Windows.Controls.ValidationRule> objects at any given step, it removes any <xref:System.Windows.Controls.ValidationError> that was added to the <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> attached property of the bound element during that step.</span></span> <span data-ttu-id="57c66-486">Ad esempio, <xref:System.Windows.Controls.ValidationRule> se <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> un <xref:System.Windows.Controls.ValidationStep.UpdatedValue> oggetto cui è impostato su non riuscito, <xref:System.Windows.Controls.ValidationError> la volta successiva <xref:System.Windows.Controls.ValidationRule> che <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> si <xref:System.Windows.Controls.ValidationStep.UpdatedValue>verifica il processo di convalida, il motore di associazione rimuove immediatamente tale operazione prima di chiamare qualsiasi che è impostato su .</span><span class="sxs-lookup"><span data-stu-id="57c66-486">For example, if a <xref:System.Windows.Controls.ValidationRule> whose <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> is set to <xref:System.Windows.Controls.ValidationStep.UpdatedValue> failed, the next time the validation process occurs, the binding engine removes that <xref:System.Windows.Controls.ValidationError> immediately before it calls any <xref:System.Windows.Controls.ValidationRule> that has <xref:System.Windows.Controls.ValidationRule.ValidationStep%2A> set to <xref:System.Windows.Controls.ValidationStep.UpdatedValue>.</span></span>

<span data-ttu-id="57c66-487">Quando <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> non è <xref:System.Windows.Controls.Validation.HasError%2A?displayProperty=nameWithType> vuota, la proprietà associata `true`dell'elemento è impostata su .</span><span class="sxs-lookup"><span data-stu-id="57c66-487">When <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> is not empty, the <xref:System.Windows.Controls.Validation.HasError%2A?displayProperty=nameWithType> attached property of the element is set to `true`.</span></span> <span data-ttu-id="57c66-488">Inoltre, se <xref:System.Windows.Data.Binding.NotifyOnValidationError%2A> la <xref:System.Windows.Data.Binding> proprietà di `true`è impostata su <xref:System.Windows.Controls.Validation.Error?displayProperty=nameWithType> , il motore di associazione genera l'evento associato sull'elemento.</span><span class="sxs-lookup"><span data-stu-id="57c66-488">Also, if the <xref:System.Windows.Data.Binding.NotifyOnValidationError%2A> property of the <xref:System.Windows.Data.Binding> is set to `true`, then the binding engine raises the <xref:System.Windows.Controls.Validation.Error?displayProperty=nameWithType> attached event on the element.</span></span>

<span data-ttu-id="57c66-489">Si noti inoltre che un trasferimento di valore valido in entrambe le direzioni (destinazione all'origine o di origine alla destinazione) cancella la <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> proprietà associata.</span><span class="sxs-lookup"><span data-stu-id="57c66-489">Also note that a valid value transfer in either direction (target to source or source to target) clears the <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> attached property.</span></span>

<span data-ttu-id="57c66-490">Se all'associazione <xref:System.Windows.Controls.ExceptionValidationRule> è associato un <xref:System.Windows.Data.Binding.ValidatesOnExceptions%2A> oggetto o `true` se la proprietà è impostata su e viene generata un'eccezione quando il motore di associazione imposta l'origine, il motore di associazione verifica se è presente un <xref:System.Windows.Data.Binding.UpdateSourceExceptionFilter%2A>oggetto .</span><span class="sxs-lookup"><span data-stu-id="57c66-490">If the binding either has an <xref:System.Windows.Controls.ExceptionValidationRule> associated with it, or had the <xref:System.Windows.Data.Binding.ValidatesOnExceptions%2A> property is set to `true` and an exception is thrown when the binding engine sets the source, the binding engine checks to see if there is a <xref:System.Windows.Data.Binding.UpdateSourceExceptionFilter%2A>.</span></span> <span data-ttu-id="57c66-491">È possibile utilizzare il <xref:System.Windows.Data.Binding.UpdateSourceExceptionFilter%2A> callback per fornire un gestore personalizzato per la gestione delle eccezioni.</span><span class="sxs-lookup"><span data-stu-id="57c66-491">You have the option to use the <xref:System.Windows.Data.Binding.UpdateSourceExceptionFilter%2A> callback to provide a custom handler for handling exceptions.</span></span> <span data-ttu-id="57c66-492">Se <xref:System.Windows.Data.Binding.UpdateSourceExceptionFilter%2A> un oggetto non <xref:System.Windows.Data.Binding>è specificato in <xref:System.Windows.Controls.ValidationError> , il motore di <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> associazione crea un oggetto con l'eccezione e lo aggiunge all'insieme dell'elemento associato.</span><span class="sxs-lookup"><span data-stu-id="57c66-492">If an <xref:System.Windows.Data.Binding.UpdateSourceExceptionFilter%2A> is not specified on the <xref:System.Windows.Data.Binding>, the binding engine creates a <xref:System.Windows.Controls.ValidationError> with the exception and adds it to the <xref:System.Windows.Controls.Validation.Errors%2A?displayProperty=nameWithType> collection of the bound element.</span></span>

## <a name="debugging-mechanism"></a><span data-ttu-id="57c66-493">Meccanismo di debug</span><span class="sxs-lookup"><span data-stu-id="57c66-493">Debugging mechanism</span></span>

<span data-ttu-id="57c66-494">È possibile impostare <xref:System.Diagnostics.PresentationTraceSources.TraceLevel%2A?displayProperty=nameWithType> la proprietà associata su un oggetto correlato all'associazione per ricevere informazioni sullo stato di un'associazione specifica.</span><span class="sxs-lookup"><span data-stu-id="57c66-494">You can set the attached property <xref:System.Diagnostics.PresentationTraceSources.TraceLevel%2A?displayProperty=nameWithType> on a binding-related object to receive information about the status of a specific binding.</span></span>

## <a name="see-also"></a><span data-ttu-id="57c66-495">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="57c66-495">See also</span></span>

- <xref:System.Windows.Controls.DataErrorValidationRule>
- [<span data-ttu-id="57c66-496">Eseguire l'associazione ai risultati di una query LINQBind to the results of a LINQ query</span><span class="sxs-lookup"><span data-stu-id="57c66-496">Bind to the results of a LINQ query</span></span>](../../framework/wpf/data/how-to-bind-to-the-results-of-a-linq-query.md)
- [<span data-ttu-id="57c66-497">Associazione dati</span><span class="sxs-lookup"><span data-stu-id="57c66-497">Data binding</span></span>](../../framework/wpf/advanced/optimizing-performance-data-binding.md)
- <span data-ttu-id="57c66-498">[Demo sull'associazione dati][data-binding-demo]</span><span class="sxs-lookup"><span data-stu-id="57c66-498">[Data binding demo][data-binding-demo]</span></span>
- [<span data-ttu-id="57c66-499">Articoli pratici</span><span class="sxs-lookup"><span data-stu-id="57c66-499">How-to articles</span></span>](../../framework/wpf/data/data-binding-how-to-topics.md)
- [<span data-ttu-id="57c66-500">Eseguire il binding a un'origine dati ADO.NET</span><span class="sxs-lookup"><span data-stu-id="57c66-500">Bind to an ADO.NET data source</span></span>](../../framework/wpf/data/how-to-bind-to-an-ado-net-data-source.md)

[data-binding-demo]: https://github.com/microsoft/WPF-Samples/tree/master/Sample%20Applications/DataBindingDemo "app demo per l'associazione dati"
