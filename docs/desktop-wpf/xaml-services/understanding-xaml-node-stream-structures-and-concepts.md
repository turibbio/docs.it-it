---
title: Informazioni su strutture e concetti del flusso del nodo XAML
ms.date: 03/30/2017
helpviewer_keywords:
- XAML node streams [XAML Services]
- nodes [XAML Services], XAML node stream
- XAML [XAML Services], XAML node streams
ms.assetid: 7c11abec-1075-474c-9d9b-778e5dab21c3
ms.openlocfilehash: b3de3dca029c5e676fc7cdebc7735cfdade0228a
ms.sourcegitcommit: c2d9718996402993cf31541f11e95531bc68bad0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 02/27/2020
ms.locfileid: "82071619"
---
# <a name="xaml-node-stream-structures-and-concepts"></a><span data-ttu-id="43750-102">Concetti e strutture del flusso del nodo XAMLXAML node stream structures and concepts</span><span class="sxs-lookup"><span data-stu-id="43750-102">XAML node stream structures and concepts</span></span>

<span data-ttu-id="43750-103">I reader XAML e i writer XAML implementati nei servizi XAML di .NET si basano sul concetto di progettazione di un flusso del nodo XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-103">XAML readers and XAML writers as implemented in .NET XAML Services are based on the design concept of a XAML node stream.</span></span> <span data-ttu-id="43750-104">Il flusso di nodi XAML è una concettualizzazione di un set di nodi XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-104">The XAML node stream is a conceptualization of a set of XAML nodes.</span></span> <span data-ttu-id="43750-105">In questa concettualizzazione, un processore XAML attraversa la struttura delle relazioni tra i nodi in XAML, una alla volta.</span><span class="sxs-lookup"><span data-stu-id="43750-105">In this conceptualization, a XAML processor walks through the structure of the node relationships in the XAML one at a time.</span></span> <span data-ttu-id="43750-106">In qualsiasi momento, in un flusso di nodi XAML aperto è presente solo un record o una posizione corrente e molti aspetti dell'API segnalano unicamente le informazioni disponibili da tale posizione.</span><span class="sxs-lookup"><span data-stu-id="43750-106">At any time, only one current record or current position exists in an open XAML node stream, and many aspects of the API report only the information available from that position.</span></span> <span data-ttu-id="43750-107">Il nodo corrente in un flusso di nodi XAML può essere descritto come un oggetto, un membro o un valore.</span><span class="sxs-lookup"><span data-stu-id="43750-107">The current node in a XAML node stream can be described as being an object, a member, or a value.</span></span> <span data-ttu-id="43750-108">Trattando XAML come flusso di nodi XAML, i reader XAML possono comunicare con i writer XAML e consentire a un programma di visualizzare, interagire con o modificare i contenuti di un flusso di nodi XAML durante un'operazione relativa a un percorso di salvataggio o di caricamento che usa XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-108">By treating XAML as a XAML node stream, XAML readers can communicate with XAML writers and enable a program to view, interact with, or alter the contents of a XAML node stream during either a load path or a save path operation that involves XAML.</span></span> <span data-ttu-id="43750-109">La progettazione dell'API del lettore e del writer XAML e il concetto di flusso del nodo <xref:System.Xml.XmlReader> XAML <xref:System.Xml.XmlWriter> sono simili ai precedenti progetti e concetti del lettore e del writer correlati, ad esempio il modello DOM (Document Object Model) XML e le classi e .</span><span class="sxs-lookup"><span data-stu-id="43750-109">XAML reader and writer API design and the XAML node stream concept are similar to previous related reader and writer designs and concepts, such as the XML Document Object Model (DOM) and the <xref:System.Xml.XmlReader> and <xref:System.Xml.XmlWriter> classes.</span></span> <span data-ttu-id="43750-110">Questo argomento illustra i concetti correlati al flusso di nodi XAML e descrive come scrivere routine che interagiscono con rappresentazioni XAML a livello di nodi XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-110">This topic discusses XAML node stream concepts and describes how you can write routines that interact with XAML representations at the XAML node level.</span></span>

## <a name="loading-xaml-into-a-xaml-reader"></a><span data-ttu-id="43750-111">Caricamento di XAML in un reader XAML</span><span class="sxs-lookup"><span data-stu-id="43750-111">Loading XAML into a XAML Reader</span></span>

<span data-ttu-id="43750-112">La classe base <xref:System.Xaml.XamlReader> non dichiara una tecnica particolare di caricamento del codice XAML iniziale in un reader XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-112">The base <xref:System.Xaml.XamlReader> class does not declare a particular technique for loading the initial XAML into a XAML reader.</span></span> <span data-ttu-id="43750-113">Al contrario, una classe derivata dichiara e implementa la tecnica di caricamento, tra cui le caratteristiche generali e i vincoli dell'origine di input per XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-113">Instead, a derived class declares and implements the loading technique, including the general characteristics and constraints of its input source for XAML.</span></span> <span data-ttu-id="43750-114">Ad esempio, un oggetto <xref:System.Xaml.XamlObjectReader> legge un oggetto grafico, a partire dall'origine di input di un singolo oggetto che rappresenta la radice o base.</span><span class="sxs-lookup"><span data-stu-id="43750-114">For example, a <xref:System.Xaml.XamlObjectReader> reads an object graph, starting from the input source of a single object that represents the root or base.</span></span> <span data-ttu-id="43750-115">L'oggetto <xref:System.Xaml.XamlObjectReader> produce quindi un flusso di nodi XAML dall'oggetto grafico.</span><span class="sxs-lookup"><span data-stu-id="43750-115">The <xref:System.Xaml.XamlObjectReader> then produces a XAML node stream from the object graph.</span></span>

<span data-ttu-id="43750-116">La sottoclasse definita dai <xref:System.Xaml.XamlReader> servizi XAML <xref:System.Xaml.XamlXmlReader>.NET più importante è .</span><span class="sxs-lookup"><span data-stu-id="43750-116">The most prominent .NET XAML Services–defined <xref:System.Xaml.XamlReader> subclass is <xref:System.Xaml.XamlXmlReader>.</span></span> <span data-ttu-id="43750-117"><xref:System.Xaml.XamlXmlReader> carica il codice XAML iniziale, caricando un file di testo direttamente tramite un flusso o un percorso di file o indirettamente tramite una classe reader correlata, come <xref:System.IO.TextReader>.</span><span class="sxs-lookup"><span data-stu-id="43750-117"><xref:System.Xaml.XamlXmlReader> loads the initial XAML, either by loading a text file directly through a stream or file path, or indirectly through a related reader class such as <xref:System.IO.TextReader>.</span></span> <span data-ttu-id="43750-118">Si può pensare a <xref:System.Xaml.XamlReader> come a un oggetto contenente tutta l'origine di input XAML dopo il caricamento.</span><span class="sxs-lookup"><span data-stu-id="43750-118">The <xref:System.Xaml.XamlReader> can be thought of as containing the entirety of the XAML input source after it has loaded.</span></span> <span data-ttu-id="43750-119">Tuttavia, l'API di base di <xref:System.Xaml.XamlReader> è progettata in modo che il reader interagisca con un singolo nodo XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-119">However, the <xref:System.Xaml.XamlReader> base API is designed so that the reader is interacting with a single node of the XAML.</span></span> <span data-ttu-id="43750-120">Quando viene eseguito il caricamento per la prima volta, il primo nodo singolo incontrato è la radice di XAML e il relativo oggetto iniziale.</span><span class="sxs-lookup"><span data-stu-id="43750-120">When first loaded, the first single node you encounter is the root of the XAML, and its start object.</span></span>

### <a name="the-xaml-node-stream-concept"></a><span data-ttu-id="43750-121">Concetto di flusso di nodi XAML</span><span class="sxs-lookup"><span data-stu-id="43750-121">The XAML Node Stream Concept</span></span>

<span data-ttu-id="43750-122">Se si ha maggiore familiarità con un DOM, una metafora della struttura ad albero o un approccio basato su query per l'accesso alle tecnologie basate su XML, è necessario che sia disponibile un modo utile per concettualizzare un flusso di nodi XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-122">If you are more familiar with a DOM, tree metaphor, or query-based approach towards accessing XML-based technologies, a helpful way to conceptualize a XAML node stream is as follows.</span></span> <span data-ttu-id="43750-123">Si immagini che il codice XAML caricato sia un modello DOM o un albero in cui ogni nodo possibile è espanso completamente e quindi presentato in modo lineare.</span><span class="sxs-lookup"><span data-stu-id="43750-123">Imagine that the loaded XAML is a DOM or a tree where every possible node is expanded all the way, and then presented linearly.</span></span> <span data-ttu-id="43750-124">Avanzando tra i nodi, si potrebbe entrare o uscire da livelli che sarebbero rilevanti per un modello DOM, ma il flusso di nodi XAML non ne tiene traccia in modo esplicito in quanto questi concetti relativi ai livelli non sono rilevanti per un flusso di nodi.</span><span class="sxs-lookup"><span data-stu-id="43750-124">As you advance through the nodes, you might be traversing "in" or "out" of levels that would be relevant to a DOM, but the XAML node stream does not explicitly keep track because these level concepts are not relevant to a node stream.</span></span> <span data-ttu-id="43750-125">Il flusso di nodi ha una posizione "corrente", ma a meno che non siano state archiviate altre parti del flusso come riferimenti, ogni aspetto del flusso di nodi al di fuori della posizione del nodo corrente non viene visualizzato.</span><span class="sxs-lookup"><span data-stu-id="43750-125">The node stream has a "current" position, but unless you have stored other parts of the stream yourself as references, every aspect of the node stream other than the current node position is out of view.</span></span>

<span data-ttu-id="43750-126">Il concetto di flusso di nodi XAML offre il considerevole vantaggio che, se si scorre l'intero flusso di nodi, si può essere certi che sia stata elaborata l'intera rappresentazione XAML. Non è necessario preoccuparsi del fatto che in una query, un'operazione DOM o altri approcci non lineari all'elaborazione delle informazioni venga persa una parte della rappresentazione XAML completa.</span><span class="sxs-lookup"><span data-stu-id="43750-126">The XAML node stream concept has the notable advantage that if you go through the entire node stream, you are assured that you have processed the entire XAML representation; you do not need to worry that a query, a DOM operation, or some other nonlinear approach to processing information has missed some part of the complete XAML representation.</span></span> <span data-ttu-id="43750-127">Per questo motivo, la rappresentazione del flusso di nodi XAML è ideale per la connessione di reader XAML e writer XAML e per fornire un sistema che consenta di inserire un proprio processo che opera tra le fasi di lettura e scrittura di un'operazione di elaborazione XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-127">For this reason, the XAML node stream representation is ideal both for connecting XAML readers and XAML writers, and for providing a system where you can insert your own process that acts between the read and write phases of a XAML processing operation.</span></span> <span data-ttu-id="43750-128">In molti casi, l'ordine dei nodi nel flusso di nodi XAML viene deliberatamente ottimizzato o riorganizzato dai reader XAML rispetto all'ordine che potrebbe caratterizzare l'oggetto grafico, il file binario o il testo di origine.</span><span class="sxs-lookup"><span data-stu-id="43750-128">In many cases, the ordering of nodes in the XAML node stream is deliberately optimized or reordered by XAML readers versus how the order might appear in the source text, binary, or object graph.</span></span> <span data-ttu-id="43750-129">Questo comportamento è finalizzato ad applicare un'architettura di elaborazione XAML in cui i writer XAML non si trovano mai in una posizione in cui devono tornare "indietro" nel flusso di nodi.</span><span class="sxs-lookup"><span data-stu-id="43750-129">This behavior is intended to enforce a XAML processing architecture whereby XAML writers are never in a position where they have to go "back" in the node stream.</span></span> <span data-ttu-id="43750-130">Idealmente, tutte le operazioni di scrittura XAML devono poter essere eseguite in base al contesto dello schema e alla posizione corrente del flusso di nodi.</span><span class="sxs-lookup"><span data-stu-id="43750-130">Ideally, all XAML write operations should be able to act based on schema context plus the current position of the node stream.</span></span>

## <a name="a-basic-reading-node-loop"></a><span data-ttu-id="43750-131">Ciclo di nodi di lettura di base</span><span class="sxs-lookup"><span data-stu-id="43750-131">A Basic Reading Node Loop</span></span>

<span data-ttu-id="43750-132">Un ciclo di nodi di lettura di base per l'esame di un flusso di nodi XAML è costituito dai concetti seguenti.</span><span class="sxs-lookup"><span data-stu-id="43750-132">A basic reading node loop for examining a XAML node stream consists of the following concepts.</span></span> <span data-ttu-id="43750-133">Ai fini dei cicli di nodi descritti in questo argomento, si presupponga di leggere un file XAML leggibile basato su testo tramite <xref:System.Xaml.XamlXmlReader>.</span><span class="sxs-lookup"><span data-stu-id="43750-133">For purposes of node loops as discussed in this topic, assume that you are reading a text-based, human-readable XAML file using <xref:System.Xaml.XamlXmlReader>.</span></span> <span data-ttu-id="43750-134">I collegamenti in questa sezione si riferiscono all'API del ciclo di nodi XAML specifica implementata da <xref:System.Xaml.XamlXmlReader>.</span><span class="sxs-lookup"><span data-stu-id="43750-134">The links in this section refer to the particular XAML node loop API implemented by <xref:System.Xaml.XamlXmlReader>.</span></span>

- <span data-ttu-id="43750-135">Assicurarsi di non trovarsi alla fine del flusso di nodi XAML (controllare <xref:System.Xaml.XamlXmlReader.IsEof%2A>oppure usare il valore restituito di <xref:System.Xaml.XamlXmlReader.Read%2A> ).</span><span class="sxs-lookup"><span data-stu-id="43750-135">Make sure that you are not at the end of the XAML node stream (check <xref:System.Xaml.XamlXmlReader.IsEof%2A>, or use the <xref:System.Xaml.XamlXmlReader.Read%2A> return value).</span></span> <span data-ttu-id="43750-136">Se ci si trova alla fine del flusso, non vi è alcun nodo corrente ed è necessario uscire.</span><span class="sxs-lookup"><span data-stu-id="43750-136">If you are at the end of the stream, there is no current node and you should exit.</span></span>

- <span data-ttu-id="43750-137">Controllare il tipo di nodo attualmente esposto dal flusso di nodi XAML chiamando <xref:System.Xaml.XamlXmlReader.NodeType%2A>.</span><span class="sxs-lookup"><span data-stu-id="43750-137">Check what type of node the XAML node stream currently exposes by calling <xref:System.Xaml.XamlXmlReader.NodeType%2A>.</span></span>

- <span data-ttu-id="43750-138">Se si dispone di un writer di oggetti XAML associato connesso direttamente, a questo punto si chiama in genere <xref:System.Xaml.XamlWriter.WriteNode%2A> .</span><span class="sxs-lookup"><span data-stu-id="43750-138">If you have an associated XAML object writer that is connected directly, you generally call <xref:System.Xaml.XamlWriter.WriteNode%2A> at this point.</span></span>

- <span data-ttu-id="43750-139">In base al valore <xref:System.Xaml.XamlNodeType> segnalato per il nodo corrente o il record corrente, chiamare una delle proprietà seguenti per ottenere informazioni sui contenuti del nodo:</span><span class="sxs-lookup"><span data-stu-id="43750-139">Based on which <xref:System.Xaml.XamlNodeType> is reported as the current node or current record, call one of the following to obtain information about the node contents:</span></span>

  - <span data-ttu-id="43750-140">Per la proprietà <xref:System.Xaml.XamlXmlReader.NodeType%2A> di <xref:System.Xaml.XamlNodeType.StartMember> o <xref:System.Xaml.XamlNodeType.EndMember>, chiamare <xref:System.Xaml.XamlXmlReader.Member%2A> per ottenere le informazioni di <xref:System.Xaml.XamlMember> su un membro.</span><span class="sxs-lookup"><span data-stu-id="43750-140">For a <xref:System.Xaml.XamlXmlReader.NodeType%2A> of <xref:System.Xaml.XamlNodeType.StartMember> or <xref:System.Xaml.XamlNodeType.EndMember>, call <xref:System.Xaml.XamlXmlReader.Member%2A> to obtain <xref:System.Xaml.XamlMember> information about a member.</span></span> <span data-ttu-id="43750-141">Il membro potrebbe <xref:System.Xaml.XamlDirective>essere un oggetto e pertanto non necessariamente un membro convenzionale definito dal tipo dell'oggetto precedente.</span><span class="sxs-lookup"><span data-stu-id="43750-141">The member might be a <xref:System.Xaml.XamlDirective>, and thus might not necessarily be a conventional type-defined member of the preceding object.</span></span> <span data-ttu-id="43750-142">Ad esempio, `x:Name` applicato a un oggetto corrisponde a un membro XAML dove <xref:System.Xaml.XamlMember.IsDirective%2A> è true e la proprietà <xref:System.Xaml.XamlMember.Name%2A> del membro è `Name`, con altre proprietà che indicano che questa direttiva si trova nello spazio dei nomi XAML del linguaggio XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-142">For example, `x:Name` applied to an object appears as a XAML member where <xref:System.Xaml.XamlMember.IsDirective%2A> is true and the <xref:System.Xaml.XamlMember.Name%2A> of the member is `Name`, with other properties indicating that this directive is under the XAML language XAML namespace.</span></span>

  - <span data-ttu-id="43750-143">Per la proprietà <xref:System.Xaml.XamlXmlReader.NodeType%2A> di <xref:System.Xaml.XamlNodeType.StartObject> o <xref:System.Xaml.XamlNodeType.EndObject>, chiamare <xref:System.Xaml.XamlXmlReader.Type%2A> per ottenere le informazioni di <xref:System.Xaml.XamlType> su un oggetto.</span><span class="sxs-lookup"><span data-stu-id="43750-143">For a <xref:System.Xaml.XamlXmlReader.NodeType%2A> of <xref:System.Xaml.XamlNodeType.StartObject> or <xref:System.Xaml.XamlNodeType.EndObject>, call <xref:System.Xaml.XamlXmlReader.Type%2A> to obtain <xref:System.Xaml.XamlType> information about an object.</span></span>

  - <span data-ttu-id="43750-144">Per la proprietà <xref:System.Xaml.XamlXmlReader.NodeType%2A> di <xref:System.Xaml.XamlNodeType.Value>, chiamare <xref:System.Xaml.XamlXmlReader.Value%2A>.</span><span class="sxs-lookup"><span data-stu-id="43750-144">For a <xref:System.Xaml.XamlXmlReader.NodeType%2A> of <xref:System.Xaml.XamlNodeType.Value>, call <xref:System.Xaml.XamlXmlReader.Value%2A>.</span></span> <span data-ttu-id="43750-145">Un nodo è un valore solo se è l'espressione più semplice di un valore per un membro o il testo di inizializzazione per un oggetto (tuttavia, è opportuno tenere conto del comportamento di conversione dei tipi illustrato più avanti in questo argomento).</span><span class="sxs-lookup"><span data-stu-id="43750-145">A node is a value only if it is the simplest expression of a value for a member, or the initialization text for an object (however, you should be aware of type conversion behavior as documented in an upcoming section of this topic).</span></span>

  - <span data-ttu-id="43750-146">Per la proprietà <xref:System.Xaml.XamlXmlReader.NodeType%2A> di <xref:System.Xaml.XamlNodeType.NamespaceDeclaration>, chiamare <xref:System.Xaml.XamlXmlReader.Namespace%2A> per ottenere informazioni sullo spazio dei nomi per un nodo spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="43750-146">For a <xref:System.Xaml.XamlXmlReader.NodeType%2A> of <xref:System.Xaml.XamlNodeType.NamespaceDeclaration>, call <xref:System.Xaml.XamlXmlReader.Namespace%2A> to obtain namespace information for a namespace node.</span></span>

- <span data-ttu-id="43750-147">Chiamare <xref:System.Xaml.XamlXmlReader.Read%2A> per far avanzare il reader XAML al nodo successivo nel flusso di nodi XAML e ripetere la procedura.</span><span class="sxs-lookup"><span data-stu-id="43750-147">Call <xref:System.Xaml.XamlXmlReader.Read%2A> to advance the XAML reader to the next node in the XAML node stream, and repeat the steps again.</span></span>

<span data-ttu-id="43750-148">Il flusso del nodo XAML fornito dai lettori XAML dei servizi XAML .NET fornisce sempre un attraversamento completo e approfondito di tutti i possibili nodi.</span><span class="sxs-lookup"><span data-stu-id="43750-148">The XAML node stream provided by .NET XAML Services XAML readers always provides a full, deep traversal of all possible nodes.</span></span> <span data-ttu-id="43750-149">Tra le tipiche tecniche di controllo di flusso per un ciclo di nodi XAML vi sono la definizione di un corpo in `while (reader.Read())`e l'attivazione di <xref:System.Xaml.XamlXmlReader.NodeType%2A> in corrispondenza di ogni punto nodo nel ciclo di nodi.</span><span class="sxs-lookup"><span data-stu-id="43750-149">Typical flow-control techniques for a XAML node loop include defining a body within `while (reader.Read())`, and switching on <xref:System.Xaml.XamlXmlReader.NodeType%2A> at each node point in the node loop.</span></span>

<span data-ttu-id="43750-150">Se il flusso di nodi è alla fine del file, il nodo corrente è null.</span><span class="sxs-lookup"><span data-stu-id="43750-150">If the node stream is at end of file, the current node is null.</span></span>

<span data-ttu-id="43750-151">Il ciclo più semplice che usa un reader e un writer è simile all'esempio riportato di seguito.</span><span class="sxs-lookup"><span data-stu-id="43750-151">The simplest loop that uses a reader and writer resembles the following example.</span></span>

```csharp
XamlXmlReader xxr = new XamlXmlReader(new StringReader(xamlStringToLoad));
//where xamlStringToLoad is a string of well formed XAML
XamlObjectWriter xow = new XamlObjectWriter(xxr.SchemaContext);
while (xxr.Read()) {
  xow.WriteNode(xxr);
}
```

<span data-ttu-id="43750-152">Questo esempio di base di un ciclo di nodi XAML del percorso di caricamento connette in modo trasparente il reader XAML e il writer XAML, in modo analogo a quanto avviene usando <xref:System.Xaml.XamlServices.Parse%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="43750-152">This basic example of a load path XAML node loop transparently connects the XAML reader and XAML writer, doing nothing different than if you had used <xref:System.Xaml.XamlServices.Parse%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="43750-153">Ma questa struttura di base viene quindi espansa per essere applicata allo scenario di lettura o scrittura.</span><span class="sxs-lookup"><span data-stu-id="43750-153">But this basic structure is then expanded to apply to your reading or writing scenario.</span></span> <span data-ttu-id="43750-154">Ecco alcuni degli scenari possibili:</span><span class="sxs-lookup"><span data-stu-id="43750-154">Some possible scenarios are as follows:</span></span>

- <span data-ttu-id="43750-155">Attivare <xref:System.Xaml.XamlXmlReader.NodeType%2A>.</span><span class="sxs-lookup"><span data-stu-id="43750-155">Switch on <xref:System.Xaml.XamlXmlReader.NodeType%2A>.</span></span> <span data-ttu-id="43750-156">Eseguire azioni diverse a seconda del tipo di nodo letto.</span><span class="sxs-lookup"><span data-stu-id="43750-156">Perform different actions depending on which node type is being read.</span></span>

- <span data-ttu-id="43750-157">Non chiamare <xref:System.Xaml.XamlWriter.WriteNode%2A> in tutti i casi.</span><span class="sxs-lookup"><span data-stu-id="43750-157">Do not call <xref:System.Xaml.XamlWriter.WriteNode%2A> in all cases.</span></span> <span data-ttu-id="43750-158">Chiamare <xref:System.Xaml.XamlWriter.WriteNode%2A> solo per alcuni valori di <xref:System.Xaml.XamlXmlReader.NodeType%2A> .</span><span class="sxs-lookup"><span data-stu-id="43750-158">Only call <xref:System.Xaml.XamlWriter.WriteNode%2A> in some <xref:System.Xaml.XamlXmlReader.NodeType%2A> cases.</span></span>

- <span data-ttu-id="43750-159">Nella logica per un determinato tipo di nodo, analizzare le specifiche di tale nodo e agire di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="43750-159">Within the logic for a particular node type, analyze the specifics of that node and act on them.</span></span> <span data-ttu-id="43750-160">Ad esempio, è possibile scrivere solo oggetti provenienti da un particolare spazio dei nomi XAML e quindi eliminare o rinviare tutti gli oggetti non da tale spazio dei nomi XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-160">For example, you could only write objects that come from a particular XAML namespace, and then drop or defer any objects not from that XAML namespace.</span></span> <span data-ttu-id="43750-161">In alternativa, è possibile rimuovere o rielaborare in altro modo qualsiasi direttiva XAML non supportata dal sistema XAML come parte dell'elaborazione dei membri.</span><span class="sxs-lookup"><span data-stu-id="43750-161">Or you could drop or otherwise reprocess any XAML directives that your XAML system does not support as part of your member processing.</span></span>

- <span data-ttu-id="43750-162">Definire un oggetto <xref:System.Xaml.XamlObjectWriter> personalizzato che esegue l'override dei metodi `Write*` , eventualmente con un mapping dei tipi che consenta il bypass del contesto dello schema XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-162">Define a custom <xref:System.Xaml.XamlObjectWriter> that overrides `Write*` methods, possibly performing type mapping that bypasses XAML schema context.</span></span>

- <span data-ttu-id="43750-163">Costruire l'oggetto <xref:System.Xaml.XamlXmlReader> in modo da usare un contesto dello schema XAML non predefinito, affinché le differenze personalizzate nel comportamento XAML vengano usate sia dal reader sia dal writer.</span><span class="sxs-lookup"><span data-stu-id="43750-163">Construct the <xref:System.Xaml.XamlXmlReader> to use a nondefault XAML schema context, so that customized differences in XAML behavior are used both by the reader and the writer.</span></span>

### <a name="accessing-xaml-beyond-the-node-loop-concept"></a><span data-ttu-id="43750-164">Accesso a XAML non legato al concetto di ciclo di nodi</span><span class="sxs-lookup"><span data-stu-id="43750-164">Accessing XAML Beyond the Node Loop Concept</span></span>

<span data-ttu-id="43750-165">Vi sono altri modi, non legati al concetto di ciclo di nodi, per usare una rappresentazione XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-165">There are potentially other ways to work with a XAML representation other than as a XAML node loop.</span></span> <span data-ttu-id="43750-166">Potrebbe ad esempio essere disponibile un reader XAML in grado di leggere un nodo indicizzato oppure di accedere direttamente ai nodi tramite `x:Name`, `x:Uid`o altri identificatori.</span><span class="sxs-lookup"><span data-stu-id="43750-166">For example, there could exist a XAML reader that can read an indexed node, or in particular accesses nodes directly by `x:Name`, by `x:Uid`, or through other identifiers.</span></span> <span data-ttu-id="43750-167">I servizi XAML .NET non forniscono un'implementazione completa, ma forniscono un modello suggerito tramite servizi e tipi di supporto.</span><span class="sxs-lookup"><span data-stu-id="43750-167">.NET XAML Services does not provide a full implementation, but provides a suggested pattern through services and support types.</span></span> <span data-ttu-id="43750-168">Per altre informazioni, vedere <xref:System.Xaml.IXamlIndexingReader> e <xref:System.Xaml.XamlNodeList>.</span><span class="sxs-lookup"><span data-stu-id="43750-168">For more information, see <xref:System.Xaml.IXamlIndexingReader> and <xref:System.Xaml.XamlNodeList>.</span></span>

## <a name="working-with-the-current-node"></a><span data-ttu-id="43750-169">Uso del nodo corrente</span><span class="sxs-lookup"><span data-stu-id="43750-169">Working with the Current Node</span></span>

<span data-ttu-id="43750-170">Nella maggior parte degli scenari in cui viene usato un ciclo di nodi XAML non vengono solo letti i nodi,</span><span class="sxs-lookup"><span data-stu-id="43750-170">Most scenarios that use a XAML node loop do not only read the nodes.</span></span> <span data-ttu-id="43750-171">ma vengono anche elaborati i nodi correnti e ogni nodo viene passato a un'implementazione di <xref:System.Xaml.XamlWriter>.</span><span class="sxs-lookup"><span data-stu-id="43750-171">Most scenarios process current nodes and pass each node one at a time to an implementation of <xref:System.Xaml.XamlWriter>.</span></span>

<span data-ttu-id="43750-172">Nello scenario tipico di percorso di caricamento, un oggetto <xref:System.Xaml.XamlXmlReader> produce un flusso di nodi XAML, i nodi XAML vengono elaborati in base alla logica e al contesto dello schema XAML e vengono passati a un oggetto <xref:System.Xaml.XamlObjectWriter>.</span><span class="sxs-lookup"><span data-stu-id="43750-172">In the typical load path scenario, a <xref:System.Xaml.XamlXmlReader> produces a XAML node stream; the XAML nodes are processed according to your logic and XAML schema context; and the nodes are passed to a <xref:System.Xaml.XamlObjectWriter>.</span></span> <span data-ttu-id="43750-173">L'oggetto grafico risultante viene quindi integrato nell'applicazione o nel framework.</span><span class="sxs-lookup"><span data-stu-id="43750-173">You then integrate the resulting object graph into your application or framework.</span></span>

<span data-ttu-id="43750-174">In uno scenario tipico di percorso di salvataggio, un oggetto <xref:System.Xaml.XamlObjectReader> legge l'oggetto grafico, i singoli nodi XAML vengono elaborati e un oggetto <xref:System.Xaml.XamlXmlWriter> restituisce il risultato serializzato come file di testo XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-174">In a typical save path scenario, a <xref:System.Xaml.XamlObjectReader> reads the object graph, individual XAML nodes are processed, and a <xref:System.Xaml.XamlXmlWriter> outputs the serialized result as a XAML text file.</span></span> <span data-ttu-id="43750-175">La chiave è che sia i percorsi che gli scenari implicano l'utilizzo di esattamente un nodo XAML alla volta e i nodi XAML sono disponibili per il trattamento in modo standardizzato definito dal sistema di tipi XAML e the.NET API dei servizi XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-175">The key is that both paths and scenarios involve working with exactly one XAML node at a time, and the XAML nodes are available for treatment in a standardized way that is defined by the XAML type system and the.NET XAML Services APIs.</span></span>

### <a name="frames-and-scope"></a><span data-ttu-id="43750-176">Frame e ambito</span><span class="sxs-lookup"><span data-stu-id="43750-176">Frames and Scope</span></span>

<span data-ttu-id="43750-177">Un ciclo di nodi XAML attraversa un flusso di nodi XAML in modo lineare.</span><span class="sxs-lookup"><span data-stu-id="43750-177">A XAML node loop walks through a XAML node stream in a linear way.</span></span> <span data-ttu-id="43750-178">Il flusso di nodi attraversa oggetti, membri che contengono altri oggetti e così via.</span><span class="sxs-lookup"><span data-stu-id="43750-178">The node stream traverses into objects, into members that contain other objects, and so on.</span></span> <span data-ttu-id="43750-179">Spesso è utile tenere traccia dell'ambito all'interno del flusso di nodi XAML mediante l'implementazione di un concetto di frame e stack.</span><span class="sxs-lookup"><span data-stu-id="43750-179">It is often useful to keep track of scope within the XAML node stream by implementing a frame and stack concept.</span></span> <span data-ttu-id="43750-180">Ciò è particolarmente utile se si modifica attivamente il flusso di nodi mentre ci si trova al suo interno.</span><span class="sxs-lookup"><span data-stu-id="43750-180">This is particularly true if you are actively adjusting the node stream while you are in it.</span></span> <span data-ttu-id="43750-181">Il supporto di frame e stack implementato come parte della logica del ciclo di nodi può contare gli ambiti di `StartObject` (o `GetObject`) e `EndObject` man mano che si scende in una struttura di nodi XAML, se si pensa alla struttura da una prospettiva DOM.</span><span class="sxs-lookup"><span data-stu-id="43750-181">The frame and stack support that you implement as part of your node loop logic could count `StartObject` (or `GetObject`) and `EndObject` scopes as you descend into a XAML node structure if the structure is thought of from a DOM perspective.</span></span>

## <a name="traversing-and-entering-object-nodes"></a><span data-ttu-id="43750-182">Attraversamento e ingresso nei nodi oggetto</span><span class="sxs-lookup"><span data-stu-id="43750-182">Traversing and Entering Object Nodes</span></span>

<span data-ttu-id="43750-183">Il primo nodo in un flusso quando viene aperto da un reader XAML è il nodo oggetto iniziale dell'oggetto radice.</span><span class="sxs-lookup"><span data-stu-id="43750-183">The first node in a node stream when it is opened by a XAML reader is the start-object node of the root object.</span></span> <span data-ttu-id="43750-184">Per definizione, questo oggetto è sempre un nodo singolo senza peer.</span><span class="sxs-lookup"><span data-stu-id="43750-184">By definition, this object is always a single object node and has no peers.</span></span> <span data-ttu-id="43750-185">In qualsiasi esempio XAML reale, l'oggetto radice è definito con una o più proprietà che contengono più oggetti e queste proprietà presentano nodi membro.</span><span class="sxs-lookup"><span data-stu-id="43750-185">In any real-world XAML example, the root object is defined to have one or more properties that hold more objects, and these properties have member nodes.</span></span> <span data-ttu-id="43750-186">I nodi membro dispongono quindi di uno o più nodi oggetto oppure possono terminare con un nodo valore.</span><span class="sxs-lookup"><span data-stu-id="43750-186">The member nodes then have one or more object nodes, or might also terminate in a value node instead.</span></span> <span data-ttu-id="43750-187">In genere, l'oggetto radice definisce gli ambiti dei nomi XAML, che sono assegnati sintatticamente come attributi nel markup di testo XAML, ma che sono mappati a un tipo di nodo `Namescope` nella rappresentazione del flusso di nodi XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-187">The root object typically defines XAML namescopes, which are syntactically assigned as attributes in the XAML text markup but map to a `Namescope` node type in the XAML node stream representation.</span></span>

<span data-ttu-id="43750-188">Si consideri l'esempio XAML seguente (si tratta di XAML arbitrario, non supportato da tipi esistenti in .NET).</span><span class="sxs-lookup"><span data-stu-id="43750-188">Consider the following XAML example (this is arbitrary XAML, not backed by existing types in .NET).</span></span> <span data-ttu-id="43750-189">Si presupponga che in questo modello a oggetti `FavorCollection` sia un oggetto `List<T>` di `Favor`, che `Balloon` e `NoiseMaker` possano essere assegnati a `Favor`, che la proprietà `Balloon.Color` sia supportata da un oggetto `Color` analogo al modo in cui WPF definisce i colori come nomi di colori noti e che `Color` supporti un convertitore di tipi per la sintassi di attributo.</span><span class="sxs-lookup"><span data-stu-id="43750-189">Assume that in this object model, `FavorCollection` is `List<T>` of `Favor`, `Balloon` and `NoiseMaker` are assignable to `Favor`, the `Balloon.Color` property is backed by a `Color` object similar to how WPF defines colors as known color names, and `Color` supports a type converter for attribute syntax.</span></span>

|<span data-ttu-id="43750-190">Markup XAML</span><span class="sxs-lookup"><span data-stu-id="43750-190">XAML markup</span></span>|<span data-ttu-id="43750-191">Flusso di nodi XAML risultante</span><span class="sxs-lookup"><span data-stu-id="43750-191">Resulting XAML node stream</span></span>|
|-----------------|--------------------------------|
|`<Party`|<span data-ttu-id="43750-192">`Namespace` per `Party`</span><span class="sxs-lookup"><span data-stu-id="43750-192">`Namespace` node for `Party`</span></span>|
|`xmlns="PartyXamlNamespace">`|<span data-ttu-id="43750-193">`StartObject` per `Party`</span><span class="sxs-lookup"><span data-stu-id="43750-193">`StartObject` node for `Party`</span></span>|
|`<Party.Favors>`|<span data-ttu-id="43750-194">`StartMember` per `Party.Favors`</span><span class="sxs-lookup"><span data-stu-id="43750-194">`StartMember` node for `Party.Favors`</span></span>|
||<span data-ttu-id="43750-195">Nodo`StartObject` per l'oggetto `FavorCollection`implicito</span><span class="sxs-lookup"><span data-stu-id="43750-195">`StartObject` node for implicit `FavorCollection`</span></span>|
||<span data-ttu-id="43750-196">Nodo`StartMember` per la proprietà degli elementi `FavorCollection` impliciti</span><span class="sxs-lookup"><span data-stu-id="43750-196">`StartMember` node for implicit `FavorCollection` items property.</span></span>|
|`<Balloon`|<span data-ttu-id="43750-197">`StartObject` per `Balloon`</span><span class="sxs-lookup"><span data-stu-id="43750-197">`StartObject` node for `Balloon`</span></span>|
|`Color="Red"`|<span data-ttu-id="43750-198">`StartMember` per `Color`</span><span class="sxs-lookup"><span data-stu-id="43750-198">`StartMember` node for `Color`</span></span><br /><br /> <span data-ttu-id="43750-199">`Value` per la stringa di valore di attributo `"Red"`</span><span class="sxs-lookup"><span data-stu-id="43750-199">`Value` node for the attribute value string `"Red"`</span></span><br /><br /> <span data-ttu-id="43750-200">`EndMember` per `Color`</span><span class="sxs-lookup"><span data-stu-id="43750-200">`EndMember` for `Color`</span></span>|
|`HasHelium="True"`|<span data-ttu-id="43750-201">`StartMember` per `HasHelium`</span><span class="sxs-lookup"><span data-stu-id="43750-201">`StartMember` node for `HasHelium`</span></span><br /><br /> <span data-ttu-id="43750-202">`Value` per la stringa di valore di attributo `"True"`</span><span class="sxs-lookup"><span data-stu-id="43750-202">`Value` node for the attribute value string `"True"`</span></span><br /><br /> <span data-ttu-id="43750-203">`EndMember` per `HasHelium`</span><span class="sxs-lookup"><span data-stu-id="43750-203">`EndMember` for `HasHelium`</span></span>|
|`>`|<span data-ttu-id="43750-204">`EndObject` per `Balloon`</span><span class="sxs-lookup"><span data-stu-id="43750-204">`EndObject` for `Balloon`</span></span>|
|`<NoiseMaker>Loudest</NoiseMaker>`|<span data-ttu-id="43750-205">`StartObject` per `NoiseMaker`</span><span class="sxs-lookup"><span data-stu-id="43750-205">`StartObject` node for `NoiseMaker`</span></span><br /><br /> <span data-ttu-id="43750-206">`StartMember` per `_Initialization`</span><span class="sxs-lookup"><span data-stu-id="43750-206">`StartMember` node for `_Initialization`</span></span><br /><br /> <span data-ttu-id="43750-207">`Value` per la stringa di valore di inizializzazione `"Loudest"`</span><span class="sxs-lookup"><span data-stu-id="43750-207">`Value` node for the initialization value string `"Loudest"`</span></span><br /><br /> <span data-ttu-id="43750-208">`EndMember` per `_Initialization`</span><span class="sxs-lookup"><span data-stu-id="43750-208">`EndMember` node for `_Initialization`</span></span><br /><br /> <span data-ttu-id="43750-209">`EndObject` per `NoiseMaker`</span><span class="sxs-lookup"><span data-stu-id="43750-209">`EndObject` for `NoiseMaker`</span></span>|
||<span data-ttu-id="43750-210">Nodo`EndMember` per la proprietà degli elementi `FavorCollection` impliciti</span><span class="sxs-lookup"><span data-stu-id="43750-210">`EndMember` node for implicit `FavorCollection` items property.</span></span>|
||<span data-ttu-id="43750-211">Nodo`EndObject` per l'oggetto `FavorCollection`implicito</span><span class="sxs-lookup"><span data-stu-id="43750-211">`EndObject` node for implicit `FavorCollection`</span></span>|
|`</Party.Favors>`|<span data-ttu-id="43750-212">`EndMember` per `Favors`</span><span class="sxs-lookup"><span data-stu-id="43750-212">`EndMember` for `Favors`</span></span>|
|`</Party>`|<span data-ttu-id="43750-213">`EndObject` per `Party`</span><span class="sxs-lookup"><span data-stu-id="43750-213">`EndObject` for `Party`</span></span>|

<span data-ttu-id="43750-214">Nel flusso di nodi XAML è possibile fare affidamento sul comportamento illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="43750-214">In the XAML node stream, you can rely on the following behavior:</span></span>

- <span data-ttu-id="43750-215">Se è presente un nodo `Namespace` , viene aggiunto al flusso immediatamente prima dell'oggetto `StartObject` che ha dichiarato lo spazio dei nomi XAML con `xmlns`.</span><span class="sxs-lookup"><span data-stu-id="43750-215">If a `Namespace` node exists, it is added to the stream immediately before the `StartObject` that declared the XAML namespace with `xmlns`.</span></span> <span data-ttu-id="43750-216">Osservare di nuovo la tabella precedente con il codice XAML e il flusso di nodi di esempio.</span><span class="sxs-lookup"><span data-stu-id="43750-216">Look at the previous table with the XAML and example node stream again.</span></span> <span data-ttu-id="43750-217">Si noti che i nodi `StartObject` e `Namespace` sembrano essere invertiti rispetto alle relative posizioni di dichiarazione nel markup di testo.</span><span class="sxs-lookup"><span data-stu-id="43750-217">Notice how the `StartObject` and `Namespace` nodes seem to be transposed versus their declaration positions in text markup.</span></span> <span data-ttu-id="43750-218">Ciò è rappresentativo del comportamento in base a cui i nodi spazio dei nomi vengono sempre visualizzati prima del nodo a cui si applicano nel flusso di nodi.</span><span class="sxs-lookup"><span data-stu-id="43750-218">This is representative of the behavior where the namespace nodes always appear ahead of the node they apply to in the node stream.</span></span> <span data-ttu-id="43750-219">Ciò è dovuto al fatto che le informazioni dello spazio dei nomi sono fondamentali per i writer di oggetti e devono essere note al writer prima di poter eseguire il mapping dei tipi o elaborare in altro modo l'oggetto.</span><span class="sxs-lookup"><span data-stu-id="43750-219">The purpose of this design is that the namespace information is vital to object writers and must be known before the object writer attempts to perform type mapping or otherwise process the object.</span></span> <span data-ttu-id="43750-220">Il posizionamento delle informazioni dello spazio dei nomi XAML prima del relativo ambito di applicazione nel flusso semplifica l'elaborazione del flusso di nodi sempre nell'ordine di presentazione.</span><span class="sxs-lookup"><span data-stu-id="43750-220">Placing the XAML namespace information ahead of its application scope in the stream makes it simpler to always process the node stream in its presented order.</span></span>

- <span data-ttu-id="43750-221">Tenendo presenti le considerazioni precedenti, nella maggior parte dei casi di markup reali, quando si attraversano i nodi dall'inizio, si leggono prima uno o più nodi `Namespace` rispetto all'oggetto `StartObject` della radice.</span><span class="sxs-lookup"><span data-stu-id="43750-221">Because of the above consideration, it is one or more `Namespace` nodes that you read first in most real-world markup cases when traversing nodes from the start, not the `StartObject` of the root.</span></span>

- <span data-ttu-id="43750-222">Un nodo `StartObject` può essere seguito da un oggetto `StartMember`, `Value`o immediatamente da `EndObject`.</span><span class="sxs-lookup"><span data-stu-id="43750-222">A `StartObject` node can be followed by `StartMember`, `Value`, or an immediate `EndObject`.</span></span> <span data-ttu-id="43750-223">Non è mai seguito immediatamente da un altro oggetto `StartObject`.</span><span class="sxs-lookup"><span data-stu-id="43750-223">It is never followed immediately by another `StartObject`.</span></span>

- <span data-ttu-id="43750-224">Un oggetto `StartMember` può essere seguito da un oggetto `StartObject`, `Value`o immediatamente da `EndMember`.</span><span class="sxs-lookup"><span data-stu-id="43750-224">A `StartMember` can be followed by a `StartObject`, `Value`, or an immediate `EndMember`.</span></span> <span data-ttu-id="43750-225">Può essere seguito da `GetObject`, per i membri il cui valore si suppone provenire da un valore esistente dell'oggetto padre anziché da un oggetto `StartObject` che creerebbe un'istanza di un nuovo valore.</span><span class="sxs-lookup"><span data-stu-id="43750-225">It can be followed by `GetObject`, for members where the value is supposed to come from an existing value of the parent object rather than a `StartObject` that would instantiate a new value.</span></span> <span data-ttu-id="43750-226">Può anche essere seguito da un nodo `Namespace` , che si applica a un oggetto `StartObject`successivo.</span><span class="sxs-lookup"><span data-stu-id="43750-226">It can also be followed by a `Namespace` node, which applies to an upcoming `StartObject`.</span></span> <span data-ttu-id="43750-227">Non è mai seguito immediatamente da un altro oggetto `StartMember`.</span><span class="sxs-lookup"><span data-stu-id="43750-227">It is never followed immediately by another `StartMember`.</span></span>

- <span data-ttu-id="43750-228">Un nodo `Value` rappresenta il valore stesso e non è previsto alcun oggetto "EndValue".</span><span class="sxs-lookup"><span data-stu-id="43750-228">A `Value` node represents the value itself; there is no "EndValue".</span></span> <span data-ttu-id="43750-229">Può essere seguito solo da un oggetto `EndMember`.</span><span class="sxs-lookup"><span data-stu-id="43750-229">It can be followed only by an `EndMember`.</span></span>

  - <span data-ttu-id="43750-230">Il testo di inizializzazione XAML dell'oggetto come potrebbe venire usato per costruzione non comporta la creazione di una struttura oggetto-valore.</span><span class="sxs-lookup"><span data-stu-id="43750-230">XAML initialization text of the object as might be used by construction does not result in an Object-Value structure.</span></span> <span data-ttu-id="43750-231">Viene invece creato un nodo membro dedicato per un membro denominato `_Initialization`</span><span class="sxs-lookup"><span data-stu-id="43750-231">Instead, a dedicated member node for a member named `_Initialization` is created.</span></span> <span data-ttu-id="43750-232">e tale nodo membro contiene la stringa di valore di inizializzazione.</span><span class="sxs-lookup"><span data-stu-id="43750-232">and that member node contains the initialization value string.</span></span> <span data-ttu-id="43750-233">Se presente, `_Initialization` è sempre il primo oggetto `StartMember`.</span><span class="sxs-lookup"><span data-stu-id="43750-233">If it exists, `_Initialization` is always the first `StartMember`.</span></span> <span data-ttu-id="43750-234">L'oggetto`_Initialization` può essere qualificato in alcune rappresentazioni dei servizi XAML con l'ambito dei nomi XAML del linguaggio XAML, per specificare che `_Initialization` non è una proprietà definita nei tipi di supporto.</span><span class="sxs-lookup"><span data-stu-id="43750-234">`_Initialization` may be qualified in some XAML services representations with the XAML language XAML namescope, to clarify that `_Initialization` is not a defined property in backing types.</span></span>

  - <span data-ttu-id="43750-235">Una combinazione membro-valore rappresenta un'impostazione di attributo del valore.</span><span class="sxs-lookup"><span data-stu-id="43750-235">A Member-Value combination represents an attribute setting of the value.</span></span> <span data-ttu-id="43750-236">Per l'elaborazione del valore potrebbe venire usato un convertitore di valori e il valore è una stringa semplice.</span><span class="sxs-lookup"><span data-stu-id="43750-236">There might eventually be a value converter involved in processing this value, and the value is a plain string.</span></span> <span data-ttu-id="43750-237">Tuttavia, il valore non viene valutato fino a quando un writer di oggetti XAML non elabora il flusso di nodi.</span><span class="sxs-lookup"><span data-stu-id="43750-237">However, that is not evaluated until a XAML object writer processes this node stream.</span></span> <span data-ttu-id="43750-238">Il writer di oggetti XAML dispone del contesto dello schema XAML necessario, del mapping del sistema di tipi e di altri tipo di supporto necessari per le conversioni dei valori.</span><span class="sxs-lookup"><span data-stu-id="43750-238">The XAML object writer possesses the necessary XAML schema context, type system mapping, and other support needed for value conversions.</span></span>

- <span data-ttu-id="43750-239">Un nodo `EndMember` può essere seguito da un nodo `StartMember` per un membro successivo o da un nodo `EndObject` per il proprietario del membro.</span><span class="sxs-lookup"><span data-stu-id="43750-239">An `EndMember` node can be followed by a `StartMember` node for a subsequent member, or by an `EndObject` node for the member owner.</span></span>

- <span data-ttu-id="43750-240">Un nodo `EndObject` può essere seguito da un nodo `EndMember` .</span><span class="sxs-lookup"><span data-stu-id="43750-240">An `EndObject` node can be followed by an `EndMember` node.</span></span> <span data-ttu-id="43750-241">Può anche essere seguito da un nodo `StartObject` per i casi in cui gli oggetti sono peer negli elementi di una raccolta.</span><span class="sxs-lookup"><span data-stu-id="43750-241">It can also be followed by a `StartObject` node for cases where the objects are peers in a collection's items.</span></span> <span data-ttu-id="43750-242">In alternativa, può essere seguito da un nodo `Namespace` , che si applica a un oggetto `StartObject`successivo.</span><span class="sxs-lookup"><span data-stu-id="43750-242">Or it can be followed by a `Namespace` node, which applies to an upcoming `StartObject`.</span></span>

  - <span data-ttu-id="43750-243">Esclusivamente nel caso della chiusura dell'intero flusso di nodi, l'oggetto `EndObject` della radice non è seguito da niente, il reader ha raggiunto la fine del file e <xref:System.Xaml.XamlReader.Read%2A> restituisce `false`.</span><span class="sxs-lookup"><span data-stu-id="43750-243">For the unique case of closing the entire node stream, the `EndObject` of the root is not followed by anything; the reader is now end-of-file, and <xref:System.Xaml.XamlReader.Read%2A> returns `false`.</span></span>

## <a name="value-converters-and-the-xaml-node-stream"></a><span data-ttu-id="43750-244">Convertitori di valori e flusso di nodi XAML</span><span class="sxs-lookup"><span data-stu-id="43750-244">Value Converters and the XAML Node Stream</span></span>

<span data-ttu-id="43750-245">Un convertitore di valori è un termine generale per un'estensione di markup, un convertitore di tipi (inclusi i serializzatori di valori) o un'altra classe dedicata segnalata come convertitore di valori nel sistema di tipi XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-245">A value converter is a general term for a markup extension, a type converter (including value serializers) or another dedicated class that is reported as a value converter through the XAML type system.</span></span> <span data-ttu-id="43750-246">Nel flusso di nodi XAML, l'utilizzo di un convertitore di tipi e l'utilizzo di un'estensione di markup hanno rappresentazioni molto diverse.</span><span class="sxs-lookup"><span data-stu-id="43750-246">In the XAML node stream, a type converter usage and a markup extension usage have very different representations.</span></span>

### <a name="type-converters-in-the-xaml-node-stream"></a><span data-ttu-id="43750-247">Convertitori di tipi nel flusso di nodi XAML</span><span class="sxs-lookup"><span data-stu-id="43750-247">Type Converters in the XAML Node Stream</span></span>

<span data-ttu-id="43750-248">Un set di attributi che comporta l'utilizzo di un convertitore di tipi viene segnalato nel flusso di nodi XAML come valore di un membro.</span><span class="sxs-lookup"><span data-stu-id="43750-248">An attribute set that eventually results in a type converter usage is reported in the XAML node stream as a value of a member.</span></span> <span data-ttu-id="43750-249">Il flusso di nodi XAML non tenta di produrre un oggetto istanza del convertitore di tipi e passare a esso il valore.</span><span class="sxs-lookup"><span data-stu-id="43750-249">The XAML node stream does not attempt to produce a type converter instance object and pass the value to it.</span></span> <span data-ttu-id="43750-250">Per usare un'implementazione della conversione di un convertitore di tipi è necessario richiamare il contesto dello schema XAML e usarlo per il mapping dei tipi.</span><span class="sxs-lookup"><span data-stu-id="43750-250">Using a type converter's conversion implementation requires invoking the XAML schema context and using it for type-mapping.</span></span> <span data-ttu-id="43750-251">Anche per determinare quale classe di convertitore di tipi deve essere usata per elaborare il valore è necessario indirettamente il contesto dello schema XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-251">Even determining which type converter class should be used to process the value requires the XAML schema context indirectly.</span></span> <span data-ttu-id="43750-252">Quando si usa il contesto dello schema XAML predefinito, tali informazioni sono disponibili dal sistema di tipi XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-252">When you use the default XAML schema context, that information is available from the XAML type system.</span></span> <span data-ttu-id="43750-253">Se sono necessarie informazioni sulla classe del convertitore di tipi a livello di flusso di nodi XAML prima della connessione a un writer XAML, è possibile ottenerle dalle informazioni di <xref:System.Xaml.XamlMember> del membro che viene impostato.</span><span class="sxs-lookup"><span data-stu-id="43750-253">If you need the type converter class information at the XAML node stream level before connection to a XAML writer, you can obtain it from the <xref:System.Xaml.XamlMember> information of the member being set.</span></span> <span data-ttu-id="43750-254">In caso contrario, l'input del convertitore di tipi deve essere mantenuto nel flusso del nodo XAML come valore normale fino al resto delle operazioni che richiedono il sistema di mapping dei tipi e il contesto dello schema XAML, ad esempio la creazione di oggetti da un writer di oggetti XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-254">But otherwise, type converter input should be preserved in the XAML node stream as a plain value until the remainder of operations that require the type-mapping system and XAML schema context are performed, for example the object creation by a XAML object writer.</span></span>

<span data-ttu-id="43750-255">Si consideri, ad esempio, la seguente struttura di definizione di classe e il relativo utilizzo XAML:</span><span class="sxs-lookup"><span data-stu-id="43750-255">For example, consider the following class definition outline and XAML usage for it:</span></span>

```csharp
public class BoardSizeConverter : TypeConverter {
  //converts from string to an int[2] by splitting on an "x" char
}
public class GameBoard {
  [TypeConverter(typeof(BoardSizeConverter))]
  public int[] BoardSize; //2x2 array, initialization not shown
}
```

```xaml
<GameBoard BoardSize="8x8"/>
```

<span data-ttu-id="43750-256">Una rappresentazione di testo del flusso di nodi XAML per questo utilizzo può essere espressa come segue:</span><span class="sxs-lookup"><span data-stu-id="43750-256">A text representation of the XAML node stream for this usage could be expressed as the following:</span></span>

<span data-ttu-id="43750-257">`StartObject` con <xref:System.Xaml.XamlType> per rappresentare `GameBoard`</span><span class="sxs-lookup"><span data-stu-id="43750-257">`StartObject` with <xref:System.Xaml.XamlType> representing `GameBoard`</span></span>

<span data-ttu-id="43750-258">`StartMember` con <xref:System.Xaml.XamlMember> per rappresentare `BoardSize`</span><span class="sxs-lookup"><span data-stu-id="43750-258">`StartMember` with <xref:System.Xaml.XamlMember> representing `BoardSize`</span></span>

<span data-ttu-id="43750-259">Nodo`Value` , con stringa di testo "`8x8`"</span><span class="sxs-lookup"><span data-stu-id="43750-259">`Value` node, with text string "`8x8`"</span></span>

<span data-ttu-id="43750-260">`EndMember` corrisponde a `BoardSize`</span><span class="sxs-lookup"><span data-stu-id="43750-260">`EndMember` matches `BoardSize`</span></span>

<span data-ttu-id="43750-261">`EndObject` corrisponde a `GameBoard`</span><span class="sxs-lookup"><span data-stu-id="43750-261">`EndObject` matches `GameBoard`</span></span>

<span data-ttu-id="43750-262">Si noti che non è presente alcuna istanza di convertitore di tipi in questo flusso di nodi.</span><span class="sxs-lookup"><span data-stu-id="43750-262">Notice that there is no type converter instance in this node stream.</span></span> <span data-ttu-id="43750-263">È tuttavia possibile ottenere informazioni sul convertitore di tipi chiamando <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> su <xref:System.Xaml.XamlMember> per `BoardSize`.</span><span class="sxs-lookup"><span data-stu-id="43750-263">But you can get type converter information by calling <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> on the <xref:System.Xaml.XamlMember> for `BoardSize`.</span></span> <span data-ttu-id="43750-264">Se si dispone di un contesto dello schema XAML valido, è anche possibile richiamare i metodi del convertitore ottenendo un'istanza da <xref:System.Xaml.Schema.XamlValueConverter%601.ConverterInstance%2A>.</span><span class="sxs-lookup"><span data-stu-id="43750-264">If you have a valid XAML schema context, you can also invoke the converter methods by obtaining an instance from <xref:System.Xaml.Schema.XamlValueConverter%601.ConverterInstance%2A>.</span></span>

### <a name="markup-extensions-in-the-xaml-node-stream"></a><span data-ttu-id="43750-265">Estensioni di markup nel flusso di nodi XAML</span><span class="sxs-lookup"><span data-stu-id="43750-265">Markup Extensions in the XAML Node Stream</span></span>

<span data-ttu-id="43750-266">L'utilizzo di un'estensione di markup viene segnalato nel flusso di nodi XAML come nodo oggetto all'interno di un membro, in cui l'oggetto rappresenta un'istanza dell'estensione di markup.</span><span class="sxs-lookup"><span data-stu-id="43750-266">A markup extension usage is reported in the XAML node stream as an object node within a member, where the object represents a markup extension instance.</span></span> <span data-ttu-id="43750-267">L'utilizzo di un'estensione di markup viene presentato pertanto in modo più esplicito nella rappresentazione del flusso di nodi rispetto all'utilizzo di un convertitore di tipi e fornisce maggiori informazioni.</span><span class="sxs-lookup"><span data-stu-id="43750-267">Thus a markup extension usage is presented more explicitly in the node stream representation than a type converter usage is, and carries more information.</span></span> <span data-ttu-id="43750-268">Le informazioni di<xref:System.Xaml.XamlMember> potrebbero non aver fornito dati in relazione all'estensione di markup, poiché l'utilizzo varia in base alle situazioni e a ogni caso possibile markup e non è dedicato né implicito per ogni tipo o membro come nel caso del convertitori di tipi.</span><span class="sxs-lookup"><span data-stu-id="43750-268"><xref:System.Xaml.XamlMember> information could not have told you anything about the markup extension, because the usage is situational and varies in each possible markup case; it is not dedicated and implicit per type or member as is the case with type converters.</span></span>

<span data-ttu-id="43750-269">La rappresentazione del flusso di nodi delle estensioni di markup come nodi oggetto avviene anche se l'utilizzo dell'estensione di markup è stato fatto in forma di attributo nel markup di testo XAML, come spesso accade.</span><span class="sxs-lookup"><span data-stu-id="43750-269">The node stream representation of markup extensions as object nodes is the case even if the markup extension usage was made in attribute form in the XAML text markup (which is often the case).</span></span> <span data-ttu-id="43750-270">I casi di utilizzo di un'estensione di markup in forma di elemento oggetto esplicito vengono trattati nello stesso modo.</span><span class="sxs-lookup"><span data-stu-id="43750-270">Markup extension usages that used an explicit object element form are treated the same way.</span></span>

<span data-ttu-id="43750-271">In un nodo oggetto di un'estensione di markup possono essere presenti membri di tale estensione di markup.</span><span class="sxs-lookup"><span data-stu-id="43750-271">Within a markup extension object node, there may be members of that markup extension.</span></span> <span data-ttu-id="43750-272">La rappresentazione del flusso di nodi XAML preserva l'utilizzo di tale estensione di markup, sia in caso di utilizzo di un parametro posizionale sia di utilizzo con parametri denominati espliciti.</span><span class="sxs-lookup"><span data-stu-id="43750-272">The XAML node stream representation preserves the usage of that markup extension, whether that be a positional parameter usage or a usage with explicit named parameters.</span></span>

<span data-ttu-id="43750-273">In caso di utilizzo di un parametro posizionale, il flusso di nodi XAML contiene una proprietà `_PositionalParameters` definita dal linguaggio XAML che registra l'utilizzo.</span><span class="sxs-lookup"><span data-stu-id="43750-273">For a positional parameter usage, the XAML node stream contains a XAML language-defined property `_PositionalParameters` that records the usage.</span></span> <span data-ttu-id="43750-274">Questa proprietà è un oggetto <xref:System.Collections.Generic.List%601> generico con vincolo <xref:System.Object> .</span><span class="sxs-lookup"><span data-stu-id="43750-274">This property is a generic <xref:System.Collections.Generic.List%601> with <xref:System.Object> constraint.</span></span> <span data-ttu-id="43750-275">Il vincolo è un oggetto e non una stringa perché presumibilmente l'utilizzo di un parametro posizionale potrebbe contenere utilizzi di estensioni di markup annidati.</span><span class="sxs-lookup"><span data-stu-id="43750-275">The constraint is object and not string because conceivably a positional parameter usage could contain nested markup extension usages within it.</span></span> <span data-ttu-id="43750-276">Per accedere ai parametri posizionali dall'utilizzo, è possibile eseguire l'iterazione nell'elenco e usare gli indicizzatori per i singoli valori di elenco.</span><span class="sxs-lookup"><span data-stu-id="43750-276">To access the positional parameters from the usage, you could iterate through the list and use the indexers for individual list values.</span></span>

<span data-ttu-id="43750-277">Per l'utilizzo di un parametro denominato, ogni parametro denominato è rappresentato come nodo membro di tale nome nel flusso di nodi.</span><span class="sxs-lookup"><span data-stu-id="43750-277">For a named parameter usage, each named parameter is represented as a member node of that name in the node stream.</span></span> <span data-ttu-id="43750-278">I valori dei membri non sono necessariamente stringhe, poiché potrebbe essere presente un utilizzo di estensioni di markup annidato.</span><span class="sxs-lookup"><span data-stu-id="43750-278">The member values are not necessarily strings, because there could be a nested markup extension usage.</span></span>

<span data-ttu-id="43750-279">L'oggetto`ProvideValue` dall'estensione di markup non è stato ancora richiamato.</span><span class="sxs-lookup"><span data-stu-id="43750-279">`ProvideValue` from the markup extension is not yet invoked.</span></span> <span data-ttu-id="43750-280">Viene tuttavia richiamato se si connettono un reader XAML e un writer XAML in modo che venga richiamato `WriteEndObject` nel nodo dell'estensione di markup quando lo si esamina nel flusso di nodi.</span><span class="sxs-lookup"><span data-stu-id="43750-280">However, it is invoked if you connect a XAML reader and XAML writer so that `WriteEndObject` is invoked on the markup extension node when you examine it in the node stream.</span></span> <span data-ttu-id="43750-281">Per questo motivo, è in genere necessario che sia disponibile lo stesso contesto dello schema XAML che verrebbe usato per creare l'oggetto grafico nel percorso di caricamento.</span><span class="sxs-lookup"><span data-stu-id="43750-281">For this reason, you generally need the same XAML schema context available as would be used in order to form the object graph on the load path.</span></span> <span data-ttu-id="43750-282">In caso contrario, l'oggetto `ProvideValue` da qualsiasi estensione di markup può generare eccezioni, in quanto non sono disponibili i servizi previsti.</span><span class="sxs-lookup"><span data-stu-id="43750-282">Otherwise, `ProvideValue` from any markup extension can throw exceptions here, because it does not have expected services available.</span></span>

## <a name="xaml-and-xml-language-defined-members-in-the-xaml-node-stream"></a><span data-ttu-id="43750-283">Membri definiti dai linguaggi XAML e XML nel flusso di nodi XAML</span><span class="sxs-lookup"><span data-stu-id="43750-283">XAML and XML Language-Defined Members in the XAML Node Stream</span></span>

<span data-ttu-id="43750-284">Alcuni membri vengono introdotti in un flusso di nodi XAML a causa di interpretazioni e convenzioni di un reader XAML, anziché tramite una costruzione o una ricerca esplicita di <xref:System.Xaml.XamlMember> .</span><span class="sxs-lookup"><span data-stu-id="43750-284">Certain members are introduced to a XAML node stream because of interpretations and conventions of a XAML reader, instead of through an explicit <xref:System.Xaml.XamlMember> lookup or construction.</span></span> <span data-ttu-id="43750-285">Spesso, questi membri sono direttive XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-285">Often, these members are XAML directives.</span></span> <span data-ttu-id="43750-286">In alcuni casi, è l'operazione di lettura del codice XAML che introduce la direttiva nel flusso di nodi XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-286">In some cases, it is the act of reading the XAML that introduces the directive into the XAML node stream.</span></span> <span data-ttu-id="43750-287">In altre parole, il testo XAML di input originale non ha specificato in modo esplicito la direttiva del membro, ma il reader XAML inserisce la direttiva per soddisfare una convenzione XAML strutturale e le informazioni del report nel flusso del nodo XAML prima che tali informazioni vengano perse.</span><span class="sxs-lookup"><span data-stu-id="43750-287">In other words, the original input XAML text did not explicitly specify the member directive, but the XAML reader inserts the directive in order to satisfy a structural XAML convention and report information in the XAML node stream before that information is lost.</span></span>

<span data-ttu-id="43750-288">L'elenco seguente prende nota di tutti i casi in cui è previsto che un reader XAML introduca un nodo membro XAML della direttiva e il modo in cui tale nodo membro viene identificato nelle implementazioni dei servizi XAML .NET.</span><span class="sxs-lookup"><span data-stu-id="43750-288">The following list notes all cases where a XAML reader is expected to introduce a directive XAML member node, and how that member node is identified in .NET XAML Services implementations.</span></span>

- <span data-ttu-id="43750-289">**Testo di inizializzazione per un nodo oggetto:** il nome di questo nodo membro è `_Initialization`, rappresenta una direttiva XAML e viene definito nello spazio dei nomi XAML del linguaggio XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-289">**Initialization text for an object node:** The name of this member node is `_Initialization`, it represents a XAML directive, and it is defined in the XAML language XAML namespace.</span></span> <span data-ttu-id="43750-290">È possibile ottenere un'entità statica per esso da <xref:System.Xaml.XamlLanguage.Initialization%2A>.</span><span class="sxs-lookup"><span data-stu-id="43750-290">You can get a static entity for it from <xref:System.Xaml.XamlLanguage.Initialization%2A>.</span></span>

- <span data-ttu-id="43750-291">**Parametri posizionali per un'estensione di markup:** il nome di questo nodo membro è `_PositionalParameters`e viene definito nello spazio dei nomi XAML del linguaggio XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-291">**Positional parameters for a markup extension:** The name of this member node is `_PositionalParameters`, and it is defined in the XAML language XAML namespace.</span></span> <span data-ttu-id="43750-292">Contiene sempre un elenco generico di oggetti, ognuno dei quali è un parametro posizionale pre-separato con il carattere delimitatore `,` come specificato nel codice XAML di input.</span><span class="sxs-lookup"><span data-stu-id="43750-292">It always contains a generic list of objects, each of which is a positional parameter pre-separated by splitting on the `,` delimiter character as supplied in the input XAML.</span></span> <span data-ttu-id="43750-293">È possibile ottenere un'entità statica per la direttiva di parametri posizionali da <xref:System.Xaml.XamlLanguage.PositionalParameters%2A>.</span><span class="sxs-lookup"><span data-stu-id="43750-293">You can get a static entity for the positional parameters directive from <xref:System.Xaml.XamlLanguage.PositionalParameters%2A>.</span></span>

- <span data-ttu-id="43750-294">**Contenuto sconosciuto:** il nome di questo nodo membro è `_UnknownContent`.</span><span class="sxs-lookup"><span data-stu-id="43750-294">**Unknown content:** The name of this member node is `_UnknownContent`.</span></span> <span data-ttu-id="43750-295">Nello specifico, si tratta di un oggetto <xref:System.Xaml.XamlDirective>e viene definito nello spazio dei nomi XAML del linguaggio XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-295">Strictly speaking, it is a <xref:System.Xaml.XamlDirective>, and it is defined in the XAML language XAML namespace.</span></span> <span data-ttu-id="43750-296">Questa direttiva viene usata come elemento sentinel per i casi in cui un elemento oggetto XAML include contenuto nel codice XAML di origine, ma non è possibile determinare alcuna proprietà del contenuto nel contesto dello schema XAML attualmente disponibile.</span><span class="sxs-lookup"><span data-stu-id="43750-296">This directive is used as a sentinel for cases where a XAML object element contains content in the source XAML but no content property can be determined under the currently available XAML schema context.</span></span> <span data-ttu-id="43750-297">È possibile rilevare questo caso in un flusso di nodi XAML controllando la presenza di membri denominati `_UnknownContent`.</span><span class="sxs-lookup"><span data-stu-id="43750-297">You can detect this case in a XAML node stream by checking for members named `_UnknownContent`.</span></span> <span data-ttu-id="43750-298">Se non viene eseguita alcuna altra azione nel flusso di nodi XAML del percorso di caricamento, l'oggetto <xref:System.Xaml.XamlObjectWriter> predefinito genera un'eccezione nel caso di un tentativo di chiamare `WriteEndObject` quando viene rilevato il membro `_UnknownContent` in qualsiasi oggetto.</span><span class="sxs-lookup"><span data-stu-id="43750-298">If no other action is taken in a load path XAML node stream, the default <xref:System.Xaml.XamlObjectWriter> throws on attempted `WriteEndObject` when it encounters the `_UnknownContent` member on any object.</span></span> <span data-ttu-id="43750-299">L'oggetto <xref:System.Xaml.XamlXmlWriter> predefinito non genera un'eccezione e tratta il membro come implicito.</span><span class="sxs-lookup"><span data-stu-id="43750-299">The default <xref:System.Xaml.XamlXmlWriter> does not throw, and treats the member as implicit.</span></span> <span data-ttu-id="43750-300">È possibile ottenere un'entità statica per `_UnknownContent` da <xref:System.Xaml.XamlLanguage.UnknownContent%2A>.</span><span class="sxs-lookup"><span data-stu-id="43750-300">You can get a static entity for `_UnknownContent` from <xref:System.Xaml.XamlLanguage.UnknownContent%2A>.</span></span>

- <span data-ttu-id="43750-301">**Proprietà Collection di una raccolta:** Anche se il tipo CLR di supporto di una classe di raccolta utilizzata per XAML dispone in genere di una proprietà denominata dedicata che contiene gli elementi della raccolta, tale proprietà non è nota a un sistema di tipi XAML prima della risoluzione del tipo di supporto.</span><span class="sxs-lookup"><span data-stu-id="43750-301">**Collection property of a collection:** Although the backing CLR type of a collection class that is used for XAML usually has a dedicated named property that holds the collection items, that property is not known to a XAML type system prior to backing type resolution.</span></span> <span data-ttu-id="43750-302">Il flusso di nodi XAML introduce invece un segnaposto `Items` come membro del tipo XAML della raccolta.</span><span class="sxs-lookup"><span data-stu-id="43750-302">Instead, the XAML node stream introduces an `Items` placeholder as a member of the collection XAML type.</span></span> <span data-ttu-id="43750-303">Nell'implementazione dei servizi XAML .NET, il nome `_Items`di questa direttiva o membro nel flusso del nodo è .</span><span class="sxs-lookup"><span data-stu-id="43750-303">In .NET XAML Services implementation, the name of this directive or member in the node stream is `_Items`.</span></span> <span data-ttu-id="43750-304">È possibile ottenere una costante per questa direttiva da <xref:System.Xaml.XamlLanguage.Items%2A>.</span><span class="sxs-lookup"><span data-stu-id="43750-304">A constant for this directive can be obtained from <xref:System.Xaml.XamlLanguage.Items%2A>.</span></span>

    <span data-ttu-id="43750-305">Si noti che un flusso del nodo XAML potrebbe contenere un Items proprietà con elementi che risultano non essere analizzabile in base alla risoluzione del tipo di supporto e contesto dello schema XAML.</span><span class="sxs-lookup"><span data-stu-id="43750-305">Note that a XAML node stream might contain an Items property with items that turn out to not be parsable based on the backing type resolution and XAML schema context.</span></span> <span data-ttu-id="43750-306">Ad esempio,</span><span class="sxs-lookup"><span data-stu-id="43750-306">For example,</span></span>

- <span data-ttu-id="43750-307">**Membri definiti da XML:** I `xml:base` `xml:lang` `xml:space` membri e definiti in XML vengono `base`segnalati come direttive XAML denominate , `lang`, e `space` nelle implementazioni dei servizi XAML .NET.</span><span class="sxs-lookup"><span data-stu-id="43750-307">**XML-defined members:** The XML-defined `xml:base`, `xml:lang` and `xml:space` members are reported as XAML directives named `base`, `lang`, and `space` in .NET XAML Services implementations.</span></span> <span data-ttu-id="43750-308">Lo spazio dei nomi per questi membri è lo spazio dei nomi XML `http://www.w3.org/XML/1998/namespace`.</span><span class="sxs-lookup"><span data-stu-id="43750-308">The namespace for these is the XML namespace `http://www.w3.org/XML/1998/namespace`.</span></span> <span data-ttu-id="43750-309">È possibile ottenere costanti per ognuno di essi da <xref:System.Xaml.XamlLanguage>.</span><span class="sxs-lookup"><span data-stu-id="43750-309">Constants for each of these can be obtained from <xref:System.Xaml.XamlLanguage>.</span></span>

## <a name="node-order"></a><span data-ttu-id="43750-310">Ordine dei nodi</span><span class="sxs-lookup"><span data-stu-id="43750-310">Node Order</span></span>

<span data-ttu-id="43750-311">In alcuni casi, <xref:System.Xaml.XamlXmlReader> modifica l'ordine dei nodi XAML nel flusso di nodi XAML rispetto all'ordine in cui i nodi vengono visualizzati nel markup o elaborati come XML.</span><span class="sxs-lookup"><span data-stu-id="43750-311">In some cases, <xref:System.Xaml.XamlXmlReader> changes the order of XAML nodes in the XAML node stream, versus the order the nodes appear if viewed in the markup or if processed as XML.</span></span> <span data-ttu-id="43750-312">Lo scopo è quello di ordinare i nodi in modo tale che un oggetto <xref:System.Xaml.XamlObjectWriter> possa elaborare il flusso dei nodi solo procedendo in avanti.</span><span class="sxs-lookup"><span data-stu-id="43750-312">This is done in order to order the nodes such that a <xref:System.Xaml.XamlObjectWriter> can process the node stream in a forward-only manner.</span></span>  <span data-ttu-id="43750-313">Nei servizi XAML .NET, il reader XAML riordina i nodi anziché lasciare questa attività al writer XAML, come ottimizzazione delle prestazioni per i consumer del writer di oggetti XAML del flusso del nodo.</span><span class="sxs-lookup"><span data-stu-id="43750-313">In .NET XAML Services, the XAML reader reorders nodes rather than leaving this task to the XAML writer, as a performance optimization for XAML object writer consumers of the node stream.</span></span>

<span data-ttu-id="43750-314">Alcune direttive sono finalizzate in modo specifico a fornire maggiori informazioni per la creazione di un oggetto da un elemento oggetto.</span><span class="sxs-lookup"><span data-stu-id="43750-314">Certain directives are intended specifically to provide more information for the creation of an object from an object element.</span></span> <span data-ttu-id="43750-315">Tali direttive sono `Initialization`, `PositionalParameters`, `TypeArguments`, `FactoryMethod`, `Arguments`.</span><span class="sxs-lookup"><span data-stu-id="43750-315">These directives are: `Initialization`, `PositionalParameters`, `TypeArguments`, `FactoryMethod`, `Arguments`.</span></span> <span data-ttu-id="43750-316">I lettori XAML dei servizi XAML di .NET tentano di inserire queste `StartObject`direttive come primi membri nel flusso del nodo che segue quello di un oggetto, per i motivi illustrati nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="43750-316">.NET XAML Services XAML readers attempt to place these directives as the first members in the node stream following an object's `StartObject`, for reasons that are explained in the next section.</span></span>

### <a name="xamlobjectwriter-behavior-and-node-order"></a><span data-ttu-id="43750-317">Comportamento di XamlObjectWriter e ordine dei nodi</span><span class="sxs-lookup"><span data-stu-id="43750-317">XamlObjectWriter Behavior and Node Order</span></span>

<span data-ttu-id="43750-318">`StartObject` per <xref:System.Xaml.XamlObjectWriter> non segnala necessariamente al writer di oggetti XAML di costruire immediatamente l'istanza dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="43750-318">`StartObject` to a <xref:System.Xaml.XamlObjectWriter> is not necessarily a signal to the XAML object writer to immediately construct the object instance.</span></span> <span data-ttu-id="43750-319">XAML include diverse funzionalità del linguaggio che consentono di inizializzare un oggetto con input aggiuntivo e di non basarsi interamente sulla chiamata di un costruttore senza parametri per produrre l'oggetto iniziale e solo allora l'impostazione delle proprietà.</span><span class="sxs-lookup"><span data-stu-id="43750-319">XAML includes several language features that make it possible to initialize an object with additional input, and to not rely entirely on invoking a parameterless constructor to produce the initial object, and only then setting properties.</span></span> <span data-ttu-id="43750-320">Tali funzionalità includono <xref:System.Windows.Markup.XamlDeferLoadAttribute>, testo di inizializzazione, [x:TypeArguments](xtypearguments-directive.md), parametri posizionali di un'estensione di markup, metodi factory e nodi [x:Arguments](xarguments-directive.md) associati (XAML 2009).</span><span class="sxs-lookup"><span data-stu-id="43750-320">These features include: <xref:System.Windows.Markup.XamlDeferLoadAttribute>; initialization text; [x:TypeArguments](xtypearguments-directive.md); positional parameters of a markup extension; factory methods and associated [x:Arguments](xarguments-directive.md) nodes (XAML 2009).</span></span> <span data-ttu-id="43750-321">Ognuno di questi casi ritarda la costruzione effettiva dell'oggetto e, poiché il flusso del nodo viene riordinato, il writer di oggetti XAML può basarsi sul comportamento di costruzione effettiva dell'istanza ogni volta che viene rilevato un membro iniziale che non è specificamente una direttiva di costruzione per quel tipo di oggetto.</span><span class="sxs-lookup"><span data-stu-id="43750-321">Each of these cases delays the actual object construction, and because the node stream is reordered, the XAML object writer can rely on a behavior of actually constructing the instance whenever a start member is encountered that is not specifically a construction directive for that object type.</span></span>

### <a name="getobject"></a><span data-ttu-id="43750-322">GetObject</span><span class="sxs-lookup"><span data-stu-id="43750-322">GetObject</span></span>

<span data-ttu-id="43750-323">`GetObject` rappresenta un nodo XAML in cui anziché costruire un nuovo oggetto, un writer di oggetti XAML deve ottenere il valore della proprietà che contiene l'oggetto.</span><span class="sxs-lookup"><span data-stu-id="43750-323">`GetObject` represents a XAML node where rather than constructing a new object, a XAML object writer should instead get the value of the object's containing property.</span></span> <span data-ttu-id="43750-324">Un caso tipico in cui un nodo `GetObject` viene rilevato in un flusso di nodi XAML riguarda un oggetto raccolta o un oggetto dizionario, quando la proprietà che contiene l'oggetto è deliberatamente di sola lettura nel modello a oggetti del tipo di supporto.</span><span class="sxs-lookup"><span data-stu-id="43750-324">A typical  case where a `GetObject` node is encountered in a XAML node stream is for a collection object or a dictionary object, when the containing property is deliberately read-only in the backing type's object model.</span></span> <span data-ttu-id="43750-325">In questo scenario, la raccolta o il dizionario viene spesso creato e inizializzato (in genere come oggetto vuoto) dalla logica di inizializzazione di un tipo proprietario.</span><span class="sxs-lookup"><span data-stu-id="43750-325">In this scenario, the collection or dictionary often is created and initialized (usually empty) by the initialization logic of an owning type.</span></span>

## <a name="see-also"></a><span data-ttu-id="43750-326">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="43750-326">See also</span></span>

- <xref:System.Xaml.XamlObjectReader>
- [<span data-ttu-id="43750-327">Servizi XAML</span><span class="sxs-lookup"><span data-stu-id="43750-327">XAML Services</span></span>](index.md)
- [<span data-ttu-id="43750-328">Spazi dei nomi XAML</span><span class="sxs-lookup"><span data-stu-id="43750-328">XAML Namespaces</span></span>](namespaces.md)
