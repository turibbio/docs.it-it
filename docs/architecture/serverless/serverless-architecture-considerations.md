---
title: Considerazioni sull'architettura senza server-app senza server
description: Informazioni sulle problemi di architettura delle applicazioni senza server, dalla gestione dello stato e dall'archiviazione permanente per la scalabilità, la registrazione, la traccia e la diagnostica.
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 04/06/2020
ms.openlocfilehash: 3c07e1149e6af41a6b9a9317238e5c71015d2c4e
ms.sourcegitcommit: 8b02d42f93adda304246a47f49f6449fc74a3af4
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/24/2020
ms.locfileid: "82135672"
---
# <a name="serverless-architecture-considerations"></a><span data-ttu-id="44c9d-103">Considerazioni sull'architettura serverless</span><span class="sxs-lookup"><span data-stu-id="44c9d-103">Serverless architecture considerations</span></span>

<span data-ttu-id="44c9d-104">L'adozione di un'architettura senza server comporta alcune problemi.</span><span class="sxs-lookup"><span data-stu-id="44c9d-104">Adopting a serverless architecture does come with certain challenges.</span></span> <span data-ttu-id="44c9d-105">In questa sezione vengono esaminate alcune delle considerazioni più comuni da tenere presenti.</span><span class="sxs-lookup"><span data-stu-id="44c9d-105">This section explores some of the more common considerations to be aware of.</span></span> <span data-ttu-id="44c9d-106">Tutti questi problemi hanno soluzioni.</span><span class="sxs-lookup"><span data-stu-id="44c9d-106">All of these challenges have solutions.</span></span> <span data-ttu-id="44c9d-107">Come per tutte le opzioni di architettura, la decisione di passare al server non deve essere eseguita solo dopo aver valutato attentamente i vantaggi e gli svantaggi.</span><span class="sxs-lookup"><span data-stu-id="44c9d-107">As with all architecture choices, the decision to go serverless should be made only after carefully considering the pros and cons.</span></span> <span data-ttu-id="44c9d-108">A seconda delle esigenze dell'applicazione, è possibile decidere che un'implementazione senza server non sia la soluzione corretta per alcuni componenti.</span><span class="sxs-lookup"><span data-stu-id="44c9d-108">Depending on the needs of your application, you may decide a serverless implementation isn't the right solution for certain components.</span></span>

## <a name="managing-state"></a><span data-ttu-id="44c9d-109">Gestione dello stato</span><span class="sxs-lookup"><span data-stu-id="44c9d-109">Managing state</span></span>

<span data-ttu-id="44c9d-110">Le funzioni senza server, come per i microservizi in generale, sono senza stato per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="44c9d-110">Serverless functions, as with microservices in general, are stateless by default.</span></span> <span data-ttu-id="44c9d-111">Evitare lo stato consente di rendere effimero il server, aumentare il livello di scalabilità orizzontale e fornire resilienza senza un punto centrale di errore.</span><span class="sxs-lookup"><span data-stu-id="44c9d-111">Avoiding state enables serverless to be ephemeral, to scale out, and to provide resiliency without a central point of failure.</span></span> <span data-ttu-id="44c9d-112">In alcune circostanze, i processi aziendali richiedono lo stato.</span><span class="sxs-lookup"><span data-stu-id="44c9d-112">In some circumstances, business processes require state.</span></span> <span data-ttu-id="44c9d-113">Se il processo richiede lo stato, sono disponibili due opzioni.</span><span class="sxs-lookup"><span data-stu-id="44c9d-113">If your process requires state, you have two options.</span></span> <span data-ttu-id="44c9d-114">È possibile adottare un modello diverso da senza server o interagire con un servizio separato che fornisce lo stato.</span><span class="sxs-lookup"><span data-stu-id="44c9d-114">You can adopt a model other than serverless, or interact with a separate service that provides state.</span></span> <span data-ttu-id="44c9d-115">L'aggiunta dello stato può complicare la soluzione e renderla più difficile da scalare e potenzialmente creare un singolo punto di errore.</span><span class="sxs-lookup"><span data-stu-id="44c9d-115">Adding state can complicate the solution and make it harder to scale, and potentially create a single point of failure.</span></span> <span data-ttu-id="44c9d-116">Valutare attentamente se la funzione richiede assolutamente lo stato.</span><span class="sxs-lookup"><span data-stu-id="44c9d-116">Carefully consider whether your function absolutely requires state.</span></span> <span data-ttu-id="44c9d-117">Se la risposta è "Sì", determinare se è comunque opportuno implementarla con senza server.</span><span class="sxs-lookup"><span data-stu-id="44c9d-117">If the answer is "yes," determine whether it still makes sense to implement it with serverless.</span></span>

<span data-ttu-id="44c9d-118">Sono disponibili diverse soluzioni per adottare lo stato senza compromettere i vantaggi di senza server.</span><span class="sxs-lookup"><span data-stu-id="44c9d-118">There are several solutions to adopt state without compromising the benefits of serverless.</span></span> <span data-ttu-id="44c9d-119">Di seguito sono riportate alcune delle soluzioni più diffuse:</span><span class="sxs-lookup"><span data-stu-id="44c9d-119">Some of the more popular solutions include:</span></span>

- <span data-ttu-id="44c9d-120">Usare un archivio dati temporaneo o una cache distribuita, ad esempio Redis</span><span class="sxs-lookup"><span data-stu-id="44c9d-120">Use a temporary data store or distributed cache, like Redis</span></span>
- <span data-ttu-id="44c9d-121">Archiviare lo stato in un database, ad esempio SQL o CosmosDB</span><span class="sxs-lookup"><span data-stu-id="44c9d-121">Store state in a database, like SQL or CosmosDB</span></span>
- <span data-ttu-id="44c9d-122">Gestire lo stato tramite un motore del flusso di lavoro come [funzioni permanenti](https://docs.microsoft.com/azure/azure-functions/durable/durable-functions-overview)</span><span class="sxs-lookup"><span data-stu-id="44c9d-122">Handle state through a workflow engine like [durable functions](https://docs.microsoft.com/azure/azure-functions/durable/durable-functions-overview)</span></span>

<span data-ttu-id="44c9d-123">Il risultato finale è che è necessario tenere presente la necessità di qualsiasi gestione dello stato all'interno dei processi che si sta considerando di implementare senza server.</span><span class="sxs-lookup"><span data-stu-id="44c9d-123">The bottom line is that you should be aware of the need for any state management within processes you're considering to implement with serverless.</span></span>

## <a name="long-running-processes"></a><span data-ttu-id="44c9d-124">Processi a esecuzione prolungata</span><span class="sxs-lookup"><span data-stu-id="44c9d-124">Long-running processes</span></span>

<span data-ttu-id="44c9d-125">Molti vantaggi offerti dai server si basano sui processi temporanei.</span><span class="sxs-lookup"><span data-stu-id="44c9d-125">Many benefits of serverless rely on the processes being ephemeral.</span></span> <span data-ttu-id="44c9d-126">I tempi di esecuzione brevi rendono più semplice per il provider senza server liberare risorse come funzioni terminano e condividono funzioni tra gli host.</span><span class="sxs-lookup"><span data-stu-id="44c9d-126">Short run times make it easier for the serverless provider to free up resources as functions end and share functions across hosts.</span></span> <span data-ttu-id="44c9d-127">La maggior parte dei provider di servizi cloud consente di limitare il tempo totale di esecuzione della funzione a circa 10 minuti.</span><span class="sxs-lookup"><span data-stu-id="44c9d-127">Most cloud providers limit the total time your function can run to around 10 minutes.</span></span> <span data-ttu-id="44c9d-128">Se il processo potrebbe richiedere più tempo, è possibile considerare un'implementazione alternativa.</span><span class="sxs-lookup"><span data-stu-id="44c9d-128">If your process may take longer, you might consider an alternative implementation.</span></span>

<span data-ttu-id="44c9d-129">Esistono alcune eccezioni e soluzioni.</span><span class="sxs-lookup"><span data-stu-id="44c9d-129">There are a few exceptions and solutions.</span></span> <span data-ttu-id="44c9d-130">Una soluzione può consistere nel suddividere il processo in componenti più piccoli che imprendano individualmente meno tempo per l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="44c9d-130">One solution may be to break your process into smaller components that individually take less time to run.</span></span> <span data-ttu-id="44c9d-131">Se il processo viene eseguito a lungo a causa di dipendenze, è anche possibile considerare un flusso di lavoro asincrono usando una soluzione come funzioni permanenti.</span><span class="sxs-lookup"><span data-stu-id="44c9d-131">If your process runs long because of dependencies, you can also consider an asynchronous workflow using a solution like durable functions.</span></span> <span data-ttu-id="44c9d-132">Le funzioni permanenti sospendeno e mantengono lo stato del processo mentre è in attesa del completamento di un processo esterno.</span><span class="sxs-lookup"><span data-stu-id="44c9d-132">Durable functions pause and maintain the state of your process while it's waiting on an external process to finish.</span></span> <span data-ttu-id="44c9d-133">La gestione asincrona riduce il tempo di esecuzione del processo effettivo.</span><span class="sxs-lookup"><span data-stu-id="44c9d-133">Asynchronous handling reduces the time the actual process runs.</span></span>

## <a name="startup-time"></a><span data-ttu-id="44c9d-134">Tempo di avvio</span><span class="sxs-lookup"><span data-stu-id="44c9d-134">Startup time</span></span>

<span data-ttu-id="44c9d-135">Un potenziale problema con le implementazioni senza server è la fase di avvio.</span><span class="sxs-lookup"><span data-stu-id="44c9d-135">One potential concern with serverless implementations is startup time.</span></span> <span data-ttu-id="44c9d-136">Per conservare le risorse, molti provider senza server creano un'infrastruttura su richiesta.</span><span class="sxs-lookup"><span data-stu-id="44c9d-136">To conserve resources, many serverless providers create infrastructure "on demand."</span></span> <span data-ttu-id="44c9d-137">Quando una funzione senza server viene attivata dopo un periodo di tempo, potrebbe essere necessario creare o riavviare le risorse per ospitare la funzione.</span><span class="sxs-lookup"><span data-stu-id="44c9d-137">When a serverless function is triggered after a period of time, the resources to host the function may need to be created or restarted.</span></span> <span data-ttu-id="44c9d-138">In alcune situazioni, l'avvio a freddo può causare ritardi di alcuni secondi.</span><span class="sxs-lookup"><span data-stu-id="44c9d-138">In some situations, cold starts may result in delays of several seconds.</span></span> <span data-ttu-id="44c9d-139">Il tempo di avvio varia a seconda del livello di servizio e provider.</span><span class="sxs-lookup"><span data-stu-id="44c9d-139">Startup time varies across providers and service levels.</span></span> <span data-ttu-id="44c9d-140">Ci sono alcuni approcci per risolvere i tempi di avvio se è importante ridurre al minimo il successo dell'app.</span><span class="sxs-lookup"><span data-stu-id="44c9d-140">There are a few approaches to address startup time if it's important to minimize for the success of the app.</span></span>

- <span data-ttu-id="44c9d-141">Alcuni provider consentono agli utenti di pagare i livelli di servizio che garantiscono che l'infrastruttura sia "always on".</span><span class="sxs-lookup"><span data-stu-id="44c9d-141">Some providers allow users to pay for service levels that guarantee infrastructure is "always on".</span></span>
- <span data-ttu-id="44c9d-142">Implementare un meccanismo Keep-Alive (effettuare il ping dell'endpoint per mantenerlo "sveglio").</span><span class="sxs-lookup"><span data-stu-id="44c9d-142">Implement a keep-alive mechanism (ping the endpoint to keep it "awake").</span></span>
- <span data-ttu-id="44c9d-143">Utilizzare un'orchestrazione come Kubernetes con un approccio di funzione in contenitori (l'host è già in esecuzione, quindi la creazione di nuove istanze è estremamente veloce).</span><span class="sxs-lookup"><span data-stu-id="44c9d-143">Use orchestration like Kubernetes with a containerized function approach (the host is already running so spinning up new instances is extremely fast).</span></span>

## <a name="database-updates-and-migrations"></a><span data-ttu-id="44c9d-144">Aggiornamenti e migrazioni del database</span><span class="sxs-lookup"><span data-stu-id="44c9d-144">Database updates and migrations</span></span>

<span data-ttu-id="44c9d-145">Un vantaggio del codice senza server è che è possibile rilasciare nuove funzioni senza dover ridistribuire l'intera applicazione.</span><span class="sxs-lookup"><span data-stu-id="44c9d-145">An advantage of serverless code is that you can release new functions without having to redeploy the entire application.</span></span> <span data-ttu-id="44c9d-146">Questo vantaggio può diventare uno svantaggio quando è presente un database relazionale.</span><span class="sxs-lookup"><span data-stu-id="44c9d-146">This advantage can become a disadvantage when there's a relational database involved.</span></span> <span data-ttu-id="44c9d-147">Le modifiche apportate agli schemi del database sono difficili da sincronizzare con aggiornamenti senza server.</span><span class="sxs-lookup"><span data-stu-id="44c9d-147">Changes to database schemas are difficult to synchronize with serverless updates.</span></span> <span data-ttu-id="44c9d-148">Quando si verificano problemi ed è necessario eseguire il rollback delle modifiche, si verificano ulteriori problemi.</span><span class="sxs-lookup"><span data-stu-id="44c9d-148">Additional challenges are posed when things go wrong and the changes must be rolled back.</span></span> <span data-ttu-id="44c9d-149">L'integrità dei dati è un motivo per cui una procedura consigliata per i microservizi e le funzioni senza server è che possiedono i propri dati.</span><span class="sxs-lookup"><span data-stu-id="44c9d-149">Data integrity is one reason that a best practice for microservices and serverless functions is that they own their own data.</span></span> <span data-ttu-id="44c9d-150">È possibile distribuire le modifiche come una singola unità di calcolo e di dati.</span><span class="sxs-lookup"><span data-stu-id="44c9d-150">It is possible to deploy changes as a single unit of compute and data.</span></span> <span data-ttu-id="44c9d-151">La realtà è che molti sistemi legacy includono un database back-end di grandi dimensioni che deve essere riconciliato con l'architettura senza server.</span><span class="sxs-lookup"><span data-stu-id="44c9d-151">The reality is that many legacy systems feature a large back-end database that must be reconciled with the serverless architecture.</span></span>

<span data-ttu-id="44c9d-152">Un approccio comune per la risoluzione del controllo delle versioni dello schema consiste nel non modificare mai le colonne e le proprietà esistenti, bensì aggiungere nuove informazioni.</span><span class="sxs-lookup"><span data-stu-id="44c9d-152">A popular approach to solve schema versioning is to never modify existing properties and columns, but instead add new information.</span></span> <span data-ttu-id="44c9d-153">Si consideri, ad esempio, una modifica per spostarsi da un flag "completed" booleano per un elenco todo a una "data di completamento".</span><span class="sxs-lookup"><span data-stu-id="44c9d-153">For example, consider a change to move from a Boolean "completed" flag for a todo list to a "completed date."</span></span> <span data-ttu-id="44c9d-154">Anziché rimuovere il campo precedente, la modifica del database sarà:</span><span class="sxs-lookup"><span data-stu-id="44c9d-154">Instead of removing the old field, the database change will:</span></span>

1. <span data-ttu-id="44c9d-155">Aggiungere un nuovo campo "data di completamento".</span><span class="sxs-lookup"><span data-stu-id="44c9d-155">Add a new "completed date" field.</span></span>
1. <span data-ttu-id="44c9d-156">Trasformare il campo booleano "completed" in una funzione calcolata che valuta se la data completata è successiva alla data corrente.</span><span class="sxs-lookup"><span data-stu-id="44c9d-156">Transform the "completed" Boolean field to a computed function that evaluates whether the completed date is after the current date.</span></span>
1. <span data-ttu-id="44c9d-157">Aggiungere un trigger per impostare la data di completamento sulla data corrente quando il valore booleano completed è impostato su true.</span><span class="sxs-lookup"><span data-stu-id="44c9d-157">Add a trigger to set the completed date to the current date when the completed Boolean is set to true.</span></span>

<span data-ttu-id="44c9d-158">La sequenza di modifiche garantisce che il codice legacy continui a essere eseguito "così com'è", mentre le funzioni senza server più recenti possono sfruttare il nuovo campo.</span><span class="sxs-lookup"><span data-stu-id="44c9d-158">The sequence of changes ensures that legacy code continues to run "as is" while newer serverless functions can take advantage of the new field.</span></span>

<span data-ttu-id="44c9d-159">Per ulteriori informazioni sui dati nelle architetture senza server, vedere [problemi e soluzioni per la gestione dei dati distribuiti](../microservices/architect-microservice-container-applications/distributed-data-management.md).</span><span class="sxs-lookup"><span data-stu-id="44c9d-159">For more information about data in serverless architectures, see [Challenges and solutions for distributed data management](../microservices/architect-microservice-container-applications/distributed-data-management.md).</span></span>

## <a name="scaling"></a><span data-ttu-id="44c9d-160">Scalabilità</span><span class="sxs-lookup"><span data-stu-id="44c9d-160">Scaling</span></span>

<span data-ttu-id="44c9d-161">Si tratta di un malinteso comune che significa "nessun server".</span><span class="sxs-lookup"><span data-stu-id="44c9d-161">It's a common misconception that serverless means "no server."</span></span> <span data-ttu-id="44c9d-162">È in effetti "less server".</span><span class="sxs-lookup"><span data-stu-id="44c9d-162">It's in fact "less server."</span></span> <span data-ttu-id="44c9d-163">Il fatto che esista un'infrastruttura di supporto è importante comprendere quando si tratta di ridimensionare.</span><span class="sxs-lookup"><span data-stu-id="44c9d-163">The fact there is a backing infrastructure is important to understand when it comes to scaling.</span></span> <span data-ttu-id="44c9d-164">La maggior parte delle piattaforme senza server fornisce un set di controlli per gestire la scalabilità dell'infrastruttura in caso di aumento della densità degli eventi.</span><span class="sxs-lookup"><span data-stu-id="44c9d-164">Most serverless platforms provide a set of controls to handle how the infrastructure should scale when event density increases.</span></span> <span data-ttu-id="44c9d-165">È possibile scegliere tra diverse opzioni, ma la strategia può variare a seconda della funzione.</span><span class="sxs-lookup"><span data-stu-id="44c9d-165">You can choose from a variety of options, but your strategy may vary depending on the function.</span></span> <span data-ttu-id="44c9d-166">Inoltre, le funzioni vengono in genere eseguite in un host correlato, in modo che le funzioni nello stesso host abbiano le stesse opzioni di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="44c9d-166">Furthermore, functions are typically run under a related host, so that functions on the same host have the same scale options.</span></span> <span data-ttu-id="44c9d-167">È pertanto necessario organizzare e elaborare strategie quali funzioni vengono ospitate insieme in base ai requisiti di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="44c9d-167">Therefore it is necessary to organize and strategize which functions are hosted together based on scale requirements.</span></span>

<span data-ttu-id="44c9d-168">Le regole spesso specificano la modalità di scalabilità verticale (aumento delle risorse host) e la scalabilità orizzontale (aumentare il numero di istanze host) in base a parametri variabili.</span><span class="sxs-lookup"><span data-stu-id="44c9d-168">Rules often specify how to scale-up (increase the host resources) and scale-out (increase the number of host instances) based on varying parameters.</span></span> <span data-ttu-id="44c9d-169">I trigger per le scale possono includere pianificazione, frequenza delle richieste, utilizzo della CPU e utilizzo della memoria.</span><span class="sxs-lookup"><span data-stu-id="44c9d-169">Triggers for scales may include schedule, request rates, CPU utilization, and memory usage.</span></span> <span data-ttu-id="44c9d-170">Le prestazioni più elevate spesso hanno un costo maggiore.</span><span class="sxs-lookup"><span data-stu-id="44c9d-170">Higher performance often comes at a greater cost.</span></span> <span data-ttu-id="44c9d-171">Gli approcci meno costosi e basati sul consumo potrebbero non essere ridimensionati rapidamente quando la frequenza delle richieste aumenta improvvisamente.</span><span class="sxs-lookup"><span data-stu-id="44c9d-171">The less expensive, consumption-based approaches may not scale as quickly when the request rate suddenly increases.</span></span> <span data-ttu-id="44c9d-172">C'è un compromesso tra il pagamento anticipato di "costo assicurativo" e il pagamento rigoroso "Man mano" e il rischio di risposte più lente a causa di improvvisi incrementi di richiesta.</span><span class="sxs-lookup"><span data-stu-id="44c9d-172">There is a trade-off between paying up front "insurance cost" versus paying strictly "as you go" and risking slower responses due to sudden increases in demand.</span></span>

## <a name="monitoring-tracing-and-logging"></a><span data-ttu-id="44c9d-173">Monitoraggio, traccia e registrazione</span><span class="sxs-lookup"><span data-stu-id="44c9d-173">Monitoring, tracing, and logging</span></span>

<span data-ttu-id="44c9d-174">Un aspetto spesso trascurato di DevOps è il monitoraggio delle applicazioni al termine della distribuzione.</span><span class="sxs-lookup"><span data-stu-id="44c9d-174">An often overlooked aspect of DevOps is monitoring applications once deployed.</span></span> <span data-ttu-id="44c9d-175">È importante avere una strategia per il monitoraggio di funzioni senza server.</span><span class="sxs-lookup"><span data-stu-id="44c9d-175">It's important to have a strategy for monitoring serverless functions.</span></span> <span data-ttu-id="44c9d-176">Il problema principale è spesso correlato o riconoscibile quando un utente chiama più funzioni come parte della stessa interazione.</span><span class="sxs-lookup"><span data-stu-id="44c9d-176">The biggest challenge is often correlation, or recognizing when a user calls multiple functions as part of the same interaction.</span></span> <span data-ttu-id="44c9d-177">La maggior parte delle piattaforme senza server consente la registrazione della console che può essere importata in strumenti di terze parti.</span><span class="sxs-lookup"><span data-stu-id="44c9d-177">Most serverless platforms allow console logging that can be imported into third-party tools.</span></span> <span data-ttu-id="44c9d-178">Sono disponibili anche opzioni per automatizzare la raccolta dei dati di telemetria, generare e tenere traccia degli ID di correlazione e monitorare azioni specifiche per fornire informazioni dettagliate.</span><span class="sxs-lookup"><span data-stu-id="44c9d-178">There are also options to automate collection of telemetry, generate and track correlation IDs, and monitor specific actions to provide detailed insights.</span></span> <span data-ttu-id="44c9d-179">Azure fornisce la [piattaforma di Application Insights](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) avanzata per il monitoraggio e l'analisi.</span><span class="sxs-lookup"><span data-stu-id="44c9d-179">Azure provides the advanced [Application Insights platform](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) for monitoring and analytics.</span></span>

## <a name="inter-service-dependencies"></a><span data-ttu-id="44c9d-180">Dipendenze tra servizi</span><span class="sxs-lookup"><span data-stu-id="44c9d-180">Inter-service dependencies</span></span>

<span data-ttu-id="44c9d-181">Un'architettura senza server può includere funzioni che si basano su altre funzioni.</span><span class="sxs-lookup"><span data-stu-id="44c9d-181">A serverless architecture may include functions that rely on other functions.</span></span> <span data-ttu-id="44c9d-182">In realtà, non è insolito in un'architettura senza server avere più servizi chiamati tra loro come parte di un'interazione o di una transazione distribuita.</span><span class="sxs-lookup"><span data-stu-id="44c9d-182">In fact, it isn't uncommon in a serverless architecture to have multiple services call each other as part of an interaction or distributed transaction.</span></span> <span data-ttu-id="44c9d-183">Per evitare un accoppiamento forte, è consigliabile che i servizi non facciano riferimento a vicenda direttamente.</span><span class="sxs-lookup"><span data-stu-id="44c9d-183">To avoid strong coupling, it's recommended that services don't reference each other directly.</span></span> <span data-ttu-id="44c9d-184">Quando è necessario modificare l'endpoint per un servizio, i riferimenti diretti possono comportare un refactoring principale.</span><span class="sxs-lookup"><span data-stu-id="44c9d-184">When the endpoint for a service needs to change, direct references could result in major refactoring.</span></span> <span data-ttu-id="44c9d-185">Una soluzione consigliata consiste nel fornire un meccanismo di individuazione dei servizi, ad esempio un registro, che fornisca l'endpoint appropriato per un tipo di richiesta.</span><span class="sxs-lookup"><span data-stu-id="44c9d-185">A suggested solution is to provide a service discovery mechanism, such as a registry, that provides the appropriate end point for a request type.</span></span> <span data-ttu-id="44c9d-186">Un'altra soluzione consiste nell'utilizzare servizi di messaggistica come code o argomenti per la comunicazione tra servizi.</span><span class="sxs-lookup"><span data-stu-id="44c9d-186">Another solution is to leverage messaging services like queues or topics for communication between services.</span></span>

## <a name="managing-failure-and-providing-resiliency"></a><span data-ttu-id="44c9d-187">Gestione degli errori e fornitura della resilienza</span><span class="sxs-lookup"><span data-stu-id="44c9d-187">Managing failure and providing resiliency</span></span>

<span data-ttu-id="44c9d-188">È anche importante prendere in considerazione il *modello di interruttore*: se, per qualche motivo, un servizio continua a non riuscire, non è consigliabile chiamare tale servizio ripetutamente.</span><span class="sxs-lookup"><span data-stu-id="44c9d-188">It's also important to consider the *circuit-breaker pattern*: If, for some reason, a service continues to fail, it isn't advisable to call that service repeatedly.</span></span> <span data-ttu-id="44c9d-189">Viene invece chiamato un servizio alternativo o viene restituito un messaggio finché non viene ristabilita l'integrità del servizio dipendente.</span><span class="sxs-lookup"><span data-stu-id="44c9d-189">Instead, an alternative service is called or a message returned until the health of the dependent service is re-established.</span></span> <span data-ttu-id="44c9d-190">L'architettura senza server deve prendere in considerazione la strategia per la risoluzione e la gestione delle dipendenze tra servizi.</span><span class="sxs-lookup"><span data-stu-id="44c9d-190">The serverless architecture needs to take into account the strategy for resolving and managing inter-service dependencies.</span></span>

<span data-ttu-id="44c9d-191">Per continuare il modello di interruttore, i servizi devono essere a tolleranza d'errore e resilienti.</span><span class="sxs-lookup"><span data-stu-id="44c9d-191">To continue the circuit-breaker pattern, services need to be fault tolerant and resilient.</span></span> <span data-ttu-id="44c9d-192">La tolleranza di errore si riferisce alla capacità dell'applicazione di continuare l'esecuzione anche dopo che sono state rilevate eccezioni impreviste o Stati non validi.</span><span class="sxs-lookup"><span data-stu-id="44c9d-192">Fault tolerance refers to the ability of your application to continue running even after unexpected exceptions or invalid states are encountered.</span></span> <span data-ttu-id="44c9d-193">La tolleranza di errore è in genere una funzione del codice stesso e del modo in cui viene scritta per gestire le eccezioni.</span><span class="sxs-lookup"><span data-stu-id="44c9d-193">Fault tolerance is typically a function of the code itself and how it's written to handle exceptions.</span></span> <span data-ttu-id="44c9d-194">La resilienza si riferisce al modo in cui l'app è in fase di recupero da errori.</span><span class="sxs-lookup"><span data-stu-id="44c9d-194">Resiliency refers to how capable the app is at recovering from failures.</span></span> <span data-ttu-id="44c9d-195">La resilienza è spesso gestita dalla piattaforma senza server.</span><span class="sxs-lookup"><span data-stu-id="44c9d-195">Resiliency is often managed by the serverless platform.</span></span> <span data-ttu-id="44c9d-196">La piattaforma dovrebbe essere in grado di creare una nuova istanza della funzione senza server in caso di errore di uno esistente.</span><span class="sxs-lookup"><span data-stu-id="44c9d-196">The platform should be able to spin up a new serverless function instance when the existing one fails.</span></span> <span data-ttu-id="44c9d-197">La piattaforma dovrebbe inoltre essere sufficientemente intelligente da interrompere la creazione di nuove istanze in caso di errore di ogni nuova istanza.</span><span class="sxs-lookup"><span data-stu-id="44c9d-197">The platform should also be intelligent enough to stop spinning up new instances when every new instance fails.</span></span>

<span data-ttu-id="44c9d-198">Per altre informazioni, vedere [implementazione del modello](../microservices/implement-resilient-applications/implement-circuit-breaker-pattern.md)di interruttore.</span><span class="sxs-lookup"><span data-stu-id="44c9d-198">For more information, see [Implementing the Circuit Breaker pattern](../microservices/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span></span>

## <a name="versioning-and-greenblue-deployments"></a><span data-ttu-id="44c9d-199">Controllo delle versioni e distribuzioni di verde/blu</span><span class="sxs-lookup"><span data-stu-id="44c9d-199">Versioning and green/blue deployments</span></span>

<span data-ttu-id="44c9d-200">Un vantaggio principale di senza server è la possibilità di aggiornare una funzione specifica senza dover ridistribuire l'intera applicazione.</span><span class="sxs-lookup"><span data-stu-id="44c9d-200">A major benefit of serverless is the ability to upgrade a specific function without having to redeploy the entire application.</span></span> <span data-ttu-id="44c9d-201">Affinché gli aggiornamenti abbiano esito positivo, è necessario eseguire il controllo delle versioni delle funzioni in modo che i servizi che li chiamano vengano indirizzati alla versione corretta del codice.</span><span class="sxs-lookup"><span data-stu-id="44c9d-201">For upgrades to be successful, functions must be versioned so that services calling them are routed to the correct version of code.</span></span> <span data-ttu-id="44c9d-202">È importante anche una strategia per la distribuzione di nuove versioni.</span><span class="sxs-lookup"><span data-stu-id="44c9d-202">A strategy for deploying new versions is also important.</span></span> <span data-ttu-id="44c9d-203">Un approccio comune consiste nell'usare "distribuzioni verdi/blu".</span><span class="sxs-lookup"><span data-stu-id="44c9d-203">A common approach is to use "green/blue deployments."</span></span> <span data-ttu-id="44c9d-204">La distribuzione verde è la funzione corrente.</span><span class="sxs-lookup"><span data-stu-id="44c9d-204">The green deployment is the current function.</span></span> <span data-ttu-id="44c9d-205">Una nuova versione "blu" viene distribuita nell'ambiente di produzione e testata.</span><span class="sxs-lookup"><span data-stu-id="44c9d-205">A new "blue" version is deployed to production and tested.</span></span> <span data-ttu-id="44c9d-206">Quando il test viene superato, vengono scambiate le versioni verde e blu, in modo da rendere disponibile la nuova versione.</span><span class="sxs-lookup"><span data-stu-id="44c9d-206">When testing passes, the green and blue versions are swapped so the new version comes live.</span></span> <span data-ttu-id="44c9d-207">Se vengono rilevati problemi, è possibile scambiarli nuovamente.</span><span class="sxs-lookup"><span data-stu-id="44c9d-207">If any issues are encountered, they can be swapped back.</span></span> <span data-ttu-id="44c9d-208">Per supportare le distribuzioni di versioni verdi e blu, è necessario usare una combinazione di funzioni per la modifica delle versioni e l'utilizzo della piattaforma senza server per gestire le distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="44c9d-208">Supporting versioning and green/blue deployments requires a combination of authoring the functions to accommodate version changes and working with the serverless platform to handle deployments.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="44c9d-209">[Precedente](serverless-architecture.md)
>[successivo](serverless-design-examples.md)</span><span class="sxs-lookup"><span data-stu-id="44c9d-209">[Previous](serverless-architecture.md)
[Next](serverless-design-examples.md)</span></span>
