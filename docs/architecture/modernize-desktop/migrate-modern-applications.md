---
title: Migrazione di applicazioni desktop moderne
description: Tutto ciò che occorre sapere sul processo di migrazione per le moderne applicazioni desktop.
ms.date: 05/12/2020
ms.openlocfilehash: 2108aa0b99cabfbb0f3263f094ba8277f953ed6a
ms.sourcegitcommit: 9a4488a3625866335e83a20da5e9c5286b1f034c
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/15/2020
ms.locfileid: "83423299"
---
# <a name="migrating-modern-desktop-applications"></a><span data-ttu-id="cc924-103">Migrazione di applicazioni desktop moderne</span><span class="sxs-lookup"><span data-stu-id="cc924-103">Migrating Modern Desktop applications</span></span>

<span data-ttu-id="cc924-104">In questo capitolo vengono esaminati i problemi più comuni e le sfide che è possibile affrontare quando si esegue la migrazione di un'applicazione esistente da .NET Framework a .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-104">In this chapter, we're exploring the most common issues and challenges you can face when migrating an existing application from .NET Framework to .NET Core.</span></span>

<span data-ttu-id="cc924-105">Un'applicazione desktop complessa non funziona in isolamento e necessita di un tipo di interazione con i sottosistemi che possono risiedere nel computer locale o in un server remoto.</span><span class="sxs-lookup"><span data-stu-id="cc924-105">A complex desktop application doesn't work in isolation and needs some kind of interaction with subsystems that may reside on the local machine or on a remote server.</span></span> <span data-ttu-id="cc924-106">Probabilmente sarà necessario un tipo di database per connettersi come archivio di persistenza in locale o in remoto.</span><span class="sxs-lookup"><span data-stu-id="cc924-106">It will probably need some kind of database to connect as a persistence storage either locally or remotely.</span></span> <span data-ttu-id="cc924-107">Grazie alla generazione di architetture Internet e orientate ai servizi, è normale che l'applicazione sia connessa a una sorta di servizio che risiede in un server remoto o nel cloud.</span><span class="sxs-lookup"><span data-stu-id="cc924-107">With the raise of Internet and service-oriented architectures, it's common to have your application connected to some sort of service residing on a remote server or in the cloud.</span></span> <span data-ttu-id="cc924-108">Potrebbe essere necessario accedere al computer file system per implementare alcune funzionalità.</span><span class="sxs-lookup"><span data-stu-id="cc924-108">You may need to access the machine file system to implement some functionality.</span></span> <span data-ttu-id="cc924-109">In alternativa, è possibile usare una parte di funzionalità che risiede all'interno di un oggetto COM all'esterno dell'applicazione, che è uno scenario comune se, ad esempio, si stanno integrando gli assembly di Office nell'app.</span><span class="sxs-lookup"><span data-stu-id="cc924-109">Alternatively, maybe you're using a piece of functionality that resides inside a COM object outside your application, which is a common scenario if, for example, you're integrating Office assemblies in your app.</span></span>

<span data-ttu-id="cc924-110">Sono inoltre presenti differenze nella superficie dell'API esposta da .NET Framework e .NET Core e alcune funzionalità disponibili in .NET Framework non sono disponibili in .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-110">Besides, there are differences in the API surface that is exposed by .NET Framework and .NET Core, and some features that are available on .NET Framework aren't available on .NET Core.</span></span> <span data-ttu-id="cc924-111">È quindi importante conoscerli e prenderli in considerazione durante la pianificazione di una migrazione.</span><span class="sxs-lookup"><span data-stu-id="cc924-111">So, it's important for you to know and take them into account when planning a migration.</span></span>

## <a name="configuration-files"></a><span data-ttu-id="cc924-112">File di configurazione</span><span class="sxs-lookup"><span data-stu-id="cc924-112">Configuration files</span></span>

<span data-ttu-id="cc924-113">I file di configurazione consentono di archiviare set di proprietà che vengono lette in fase di esecuzione e influiscono sul comportamento delle app, ad esempio la posizione in cui individuare un database o il numero di volte in cui eseguire un ciclo.</span><span class="sxs-lookup"><span data-stu-id="cc924-113">Configuration files offer the possibility to store sets of properties that are read at run time and affect the behavior of our apps, such as where to locate a database or how many times to execute a loop.</span></span> <span data-ttu-id="cc924-114">La bellezza di questa tecnica è che è possibile modificare alcuni aspetti dell'applicazione senza la necessità di eseguire la ricompilazione e la ricompilazione.</span><span class="sxs-lookup"><span data-stu-id="cc924-114">The beauty of this technique is that you can modify some aspects of the application without the need to recode and recompile.</span></span> <span data-ttu-id="cc924-115">Questa operazione risulta utile quando, ad esempio, lo stesso codice dell'app viene eseguito in un ambiente di sviluppo con un determinato set di valori di configurazione e in produzione con uno diverso.</span><span class="sxs-lookup"><span data-stu-id="cc924-115">This comes in handy when, for example, the same app code runs on a development environment with a certain set of configuration values and in production with a different one.</span></span>

### <a name="configuration-on-net-framework"></a><span data-ttu-id="cc924-116">Configurazione in .NET Framework</span><span class="sxs-lookup"><span data-stu-id="cc924-116">Configuration on .NET Framework</span></span>

<span data-ttu-id="cc924-117">Se si dispone di un'applicazione desktop funzionante .NET Framework, è probabile che si disponga di un file *app. config* a cui si accede tramite la <xref:System.Configuration.AppSettingsSection> classe dallo `System.Configuration` spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="cc924-117">If you have a working .NET Framework desktop application, chances are you have an *app.config* file accessed through the <xref:System.Configuration.AppSettingsSection> class from the `System.Configuration` namespace.</span></span>

<span data-ttu-id="cc924-118">All'interno dell'infrastruttura di .NET Framework, esiste una gerarchia di file di configurazione che eredita le proprietà dagli elementi padre.</span><span class="sxs-lookup"><span data-stu-id="cc924-118">Within the .NET Framework infrastructure, there's a hierarchy of configuration files that inherit properties from its parents.</span></span> <span data-ttu-id="cc924-119">È possibile trovare un file *Machine. config* che definisce molte proprietà e sezioni di configurazione che possono essere usate o sottoposte a override in qualsiasi file di configurazione discendente.</span><span class="sxs-lookup"><span data-stu-id="cc924-119">You can find a *machine.config* file that defines many properties and configuration sections that can be used or overridden in any descendant configuration file.</span></span>

### <a name="configuration-on-net-core"></a><span data-ttu-id="cc924-120">Configurazione in .NET Core</span><span class="sxs-lookup"><span data-stu-id="cc924-120">Configuration on .NET Core</span></span>

<span data-ttu-id="cc924-121">Nel mondo di .NET Core non è presente alcun file *Machine. config* .</span><span class="sxs-lookup"><span data-stu-id="cc924-121">In the .NET Core world, there's no *machine.config* file.</span></span> <span data-ttu-id="cc924-122">Inoltre, anche se è possibile continuare a usare lo <xref:System.Configuration> spazio dei nomi obsoleto, è possibile passare alla modalità moderna <xref:Microsoft.Extensions.Configuration> , che offre un numero valido di miglioramenti.</span><span class="sxs-lookup"><span data-stu-id="cc924-122">And even though you can continue to use the old fashioned <xref:System.Configuration> namespace, you may consider switching to the modern <xref:Microsoft.Extensions.Configuration>, which offers a good number of enhancements.</span></span>

<span data-ttu-id="cc924-123">L'API di configurazione supporta il concetto di provider di configurazione che definisce l'origine dati da usare per caricare la configurazione.</span><span class="sxs-lookup"><span data-stu-id="cc924-123">The configuration API supports the concept of configuration provider, which defines the data source to be used to load the configuration.</span></span> <span data-ttu-id="cc924-124">Sono disponibili diversi tipi di provider predefiniti, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="cc924-124">There are different kinds of built-in providers, such as:</span></span>

- <span data-ttu-id="cc924-125">Oggetti .NET in memoria</span><span class="sxs-lookup"><span data-stu-id="cc924-125">In-memory .NET objects</span></span>
- <span data-ttu-id="cc924-126">File INI</span><span class="sxs-lookup"><span data-stu-id="cc924-126">INI files</span></span>
- <span data-ttu-id="cc924-127">File JSON</span><span class="sxs-lookup"><span data-stu-id="cc924-127">JSON files</span></span>
- <span data-ttu-id="cc924-128">File XML</span><span class="sxs-lookup"><span data-stu-id="cc924-128">XML files</span></span>
- <span data-ttu-id="cc924-129">Argomenti della riga di comando</span><span class="sxs-lookup"><span data-stu-id="cc924-129">Command-line arguments</span></span>
- <span data-ttu-id="cc924-130">Variabili di ambiente</span><span class="sxs-lookup"><span data-stu-id="cc924-130">Environment variables</span></span>
- <span data-ttu-id="cc924-131">Archivio utente crittografato</span><span class="sxs-lookup"><span data-stu-id="cc924-131">Encrypted user store</span></span>

 <span data-ttu-id="cc924-132">In alternativa, è possibile crearne di personalizzati.</span><span class="sxs-lookup"><span data-stu-id="cc924-132">Or you can build your own.</span></span>

<span data-ttu-id="cc924-133">La nuova configurazione consente un elenco di coppie nome-valore che possono essere raggruppate in una gerarchia a più livelli.</span><span class="sxs-lookup"><span data-stu-id="cc924-133">The new configuration allows a list of name-value pairs that can be grouped into a multi-level hierarchy.</span></span> <span data-ttu-id="cc924-134">Qualsiasi valore archiviato viene mappato a una stringa ed è disponibile un supporto di associazione incorporato che consente di deserializzare le impostazioni in un oggetto Plain Old CLR Object personalizzato (POCO).</span><span class="sxs-lookup"><span data-stu-id="cc924-134">Any stored value maps to a string, and there's built-in binding support that allows you to deserialize settings into a custom plain old CLR object (POCO) object.</span></span>

<span data-ttu-id="cc924-135">L' <xref:Microsoft.Extensions.Configuration.ConfigurationBuilder> oggetto consente di aggiungere tutti i provider di configurazione che potrebbero essere necessari per l'applicazione, usando una regola di precedenza per la risoluzione delle preferenze.</span><span class="sxs-lookup"><span data-stu-id="cc924-135">The <xref:Microsoft.Extensions.Configuration.ConfigurationBuilder> object lets you add as many configuration providers you may need for your application, using a precedence rule to resolve preference.</span></span> <span data-ttu-id="cc924-136">Quindi, l'ultimo provider aggiunto nel codice sostituirà gli altri.</span><span class="sxs-lookup"><span data-stu-id="cc924-136">So, the last provider you add in your code will override the others.</span></span> <span data-ttu-id="cc924-137">Si tratta di un'ottima funzionalità per la gestione di ambienti diversi per l'esecuzione, poiché è possibile definire diverse configurazioni per gli ambienti di sviluppo, test e produzione e gestirle in una singola funzione all'interno del codice.</span><span class="sxs-lookup"><span data-stu-id="cc924-137">This is a great feature for managing different environments for execution since you can define different configurations for development, testing and production environments, and manage them on a single function inside your code.</span></span>

### <a name="migrating-configuration-files"></a><span data-ttu-id="cc924-138">Migrazione dei file di configurazione</span><span class="sxs-lookup"><span data-stu-id="cc924-138">Migrating Configuration files</span></span>

<span data-ttu-id="cc924-139">È possibile continuare a usare il file XML di app. config esistente.</span><span class="sxs-lookup"><span data-stu-id="cc924-139">You can continue to use your existing app.config XML file.</span></span> <span data-ttu-id="cc924-140">Tuttavia, è possibile eseguire la migrazione della configurazione per trarre vantaggio dai diversi miglioramenti apportati a .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-140">However, you could take this opportunity to migrate your configuration to benefit from the several enhancements made on .NET Core.</span></span>

<span data-ttu-id="cc924-141">Per eseguire la migrazione da un file *app. config* obsoleto a un nuovo file di configurazione, è necessario scegliere tra un formato XML e un formato JSON.</span><span class="sxs-lookup"><span data-stu-id="cc924-141">To migrate from an old-style *app.config* to a new configuration file, you should choose between an XML format and a JSON format.</span></span>

<span data-ttu-id="cc924-142">Se si sceglie XML, la conversione è semplice.</span><span class="sxs-lookup"><span data-stu-id="cc924-142">If you choose XML, the conversion is straightforward.</span></span> <span data-ttu-id="cc924-143">Poiché il contenuto è lo stesso, è sufficiente rinominare il file *app. config* in un file con estensione XML.</span><span class="sxs-lookup"><span data-stu-id="cc924-143">Since the content is the same, just rename the *app.config* file to a file with XML extension.</span></span> <span data-ttu-id="cc924-144">Modificare quindi il codice che fa riferimento a AppSettings per utilizzare la `ConfigurationBuilder` classe.</span><span class="sxs-lookup"><span data-stu-id="cc924-144">Then, change the code that references AppSettings to use the `ConfigurationBuilder` class.</span></span> <span data-ttu-id="cc924-145">Questa modifica dovrebbe essere semplice.</span><span class="sxs-lookup"><span data-stu-id="cc924-145">This change should be easy.</span></span>

<span data-ttu-id="cc924-146">Se si vuole usare un formato JSON e non si vuole eseguire la migrazione manualmente, è disponibile uno strumento denominato [DotNet-config2json](https://www.nuget.org/packages/dotnet-config2json/) disponibile in .NET Core che può convertire un file *app. config* in un file di configurazione JSON.</span><span class="sxs-lookup"><span data-stu-id="cc924-146">If you want to use a JSON format and you don't want to migrate by hand, there's a tool called [dotnet-config2json](https://www.nuget.org/packages/dotnet-config2json/) available on .NET Core that can convert an *app.config* file to a JSON configuration file.</span></span>

<span data-ttu-id="cc924-147">È possibile che si verifichino alcuni problemi anche quando si usano le sezioni di configurazione definite nel file *Machine. config* .</span><span class="sxs-lookup"><span data-stu-id="cc924-147">You may also come across some issues when using configuration sections that were defined in the *machine.config* file.</span></span> <span data-ttu-id="cc924-148">Si consideri, ad esempio, la configurazione seguente:</span><span class="sxs-lookup"><span data-stu-id="cc924-148">For example, consider the following configuration:</span></span>

```xml
<configuration>
    <system.diagnostics>
        <switches>
            <add name="General" value="4" />
        </switches>
        <trace autoflush="true" indentsize="2">
            <listeners>
                <add name="myListener"
                     type="System.Diagnostics.TextWriterTraceListener,
                           System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
                     initializeData="MyListener.log"
                     traceOutputOptions="ProcessId, LogicalOperationStack, Timestamp, ThreadId, Callstack, DateTime" />
            </listeners>
        </trace>
    </system.diagnostics>
</configuration>
```

<span data-ttu-id="cc924-149">Se questa configurazione viene eseguita in .NET Core, si otterrà un'eccezione:</span><span class="sxs-lookup"><span data-stu-id="cc924-149">If you take this configuration to a .NET Core, you'll get an exception:</span></span>

<span data-ttu-id="cc924-150">Sezione di configurazione non riconosciuta System. Diagnostics</span><span class="sxs-lookup"><span data-stu-id="cc924-150">Unrecognized configuration section system.diagnostics</span></span>

<span data-ttu-id="cc924-151">Questa eccezione si verifica perché la sezione e l'assembly responsabili della gestione di tale sezione sono stati definiti nel file *Machine. config* , che ora non esiste.</span><span class="sxs-lookup"><span data-stu-id="cc924-151">This exception occurs because that section and the assembly responsible for handling that section was defined in the *machine.config* file, which now doesn't exist.</span></span>

<span data-ttu-id="cc924-152">Per risolvere facilmente il problema, è possibile copiare la definizione della sezione dal file *Machine. config* precedente al nuovo file di configurazione:</span><span class="sxs-lookup"><span data-stu-id="cc924-152">To easily fix the issue, you can copy the section definition from your old *machine.config* to your new configuration file:</span></span>

```xml
<configSections>
    <section name="system.diagnostics"
             type="System.Diagnostics.SystemDiagnosticsSection,
                   System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
</configSections>
```

## <a name="accessing-databases"></a><span data-ttu-id="cc924-153">Accesso ai database</span><span class="sxs-lookup"><span data-stu-id="cc924-153">Accessing databases</span></span>

<span data-ttu-id="cc924-154">Quasi tutte le applicazioni desktop necessitano di un tipo di database.</span><span class="sxs-lookup"><span data-stu-id="cc924-154">Almost every desktop application needs some kind of database.</span></span> <span data-ttu-id="cc924-155">Per il desktop, è comune trovare architetture client-server con una connessione diretta tra l'app desktop e il motore di database.</span><span class="sxs-lookup"><span data-stu-id="cc924-155">For desktop, it's common to find client-server architectures with a direct connection between the desktop app and the database engine.</span></span> <span data-ttu-id="cc924-156">Questi database possono essere locali o remoti, a seconda della necessità di condividere le informazioni tra utenti diversi.</span><span class="sxs-lookup"><span data-stu-id="cc924-156">These databases can be local or remote depending on the need to share information between different users.</span></span>

<span data-ttu-id="cc924-157">Dal punto di vista del codice sono state apportate numerose tecnologie e Framework per offrire allo sviluppatore la possibilità di connettersi, eseguire query e aggiornare un database.</span><span class="sxs-lookup"><span data-stu-id="cc924-157">From the code perspective, there have been many technologies and frameworks to give the developer the possibility to connect, query, and update a database.</span></span>

<span data-ttu-id="cc924-158">Gli esempi più comuni di database che è possibile trovare quando si parla di applicazioni desktop di Windows sono Microsoft Access e Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="cc924-158">The most common examples of database you can find when talking about Windows Desktop application are Microsoft Access and Microsoft SQL Server.</span></span> <span data-ttu-id="cc924-159">Se si dispone di più di 20 anni di programmazione dell'esperienza per il desktop, nomi come ODBC, OLEDB, RDO, ADO, ADO.NET, LINQ e Entity Framework avranno un suono familiare.</span><span class="sxs-lookup"><span data-stu-id="cc924-159">If you have more than 20 years of experience programming for the desktop, names like ODBC, OLEDB, RDO, ADO, ADO.NET, LINQ, and Entity Framework will sound familiar.</span></span>

### <a name="odbc"></a><span data-ttu-id="cc924-160">ODBC</span><span class="sxs-lookup"><span data-stu-id="cc924-160">ODBC</span></span>

<span data-ttu-id="cc924-161">È possibile continuare a usare ODBC in .NET Core poiché Microsoft fornisce la `System.Data.Odbc` libreria compatibile con .NET Standard 2,0.</span><span class="sxs-lookup"><span data-stu-id="cc924-161">You can continue to use ODBC on .NET Core since Microsoft is providing the `System.Data.Odbc` library compatible with .NET Standard 2.0.</span></span>

### <a name="ole-db"></a><span data-ttu-id="cc924-162">OLE DB</span><span class="sxs-lookup"><span data-stu-id="cc924-162">OLE DB</span></span>

<span data-ttu-id="cc924-163">[OLE DB](https://msdn.microsoft.com/library/ms722784(v=vs.85).aspx)   è stato un ottimo modo per accedere a diverse origini dati in modo uniforme.</span><span class="sxs-lookup"><span data-stu-id="cc924-163">[OLE DB](https://msdn.microsoft.com/library/ms722784(v=vs.85).aspx) has been a great way to access various data sources in a uniform manner.</span></span> <span data-ttu-id="cc924-164">Ma si basava su COM, che è una tecnologia solo per Windows e, di conseguenza, non era la soluzione ideale per una tecnologia multipiattaforma, ad esempio .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-164">But it was based on COM, which is a Windows-only technology, and as such wasn't the best fit for a cross-platform technology such as .NET Core.</span></span> <span data-ttu-id="cc924-165">Non è supportata anche in SQL Server versioni 2014 e successive.</span><span class="sxs-lookup"><span data-stu-id="cc924-165">It's also unsupported in SQL Server versions 2014 and later.</span></span> <span data-ttu-id="cc924-166">Per questi motivi, OLE DB non sarà supportato da .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-166">For those reasons, OLE DB won't be supported by .NET Core.</span></span>

### <a name="adonet"></a><span data-ttu-id="cc924-167">ADO.NET</span><span class="sxs-lookup"><span data-stu-id="cc924-167">ADO.NET</span></span>

<span data-ttu-id="cc924-168">È comunque possibile usare ADO.NET dal codice desktop esistente in .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-168">You can still use ADO.NET from your existing desktop code on .NET Core.</span></span> <span data-ttu-id="cc924-169">È sufficiente aggiornare alcuni pacchetti NuGet.</span><span class="sxs-lookup"><span data-stu-id="cc924-169">You just need to update some NuGet packages.</span></span>

### <a name="ef-core-vs-ef6"></a><span data-ttu-id="cc924-170">Confronto tra EF Core e EF6</span><span class="sxs-lookup"><span data-stu-id="cc924-170">EF Core vs. EF6</span></span>

<span data-ttu-id="cc924-171">Sono disponibili due versioni attualmente supportate di Entity Framework (EF), Entity Framework 6 (EF6) e EF Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-171">There are two currently supported versions of Entity Framework (EF), Entity Framework 6 (EF6) and EF Core.</span></span>

<span data-ttu-id="cc924-172">La tecnologia più recente rilasciata come parte del .NET Framework mondo è Entity Framework, con 6,4 la versione più recente.</span><span class="sxs-lookup"><span data-stu-id="cc924-172">The latest technology released as part of the .NET Framework world is Entity Framework, with 6.4 being the latest version.</span></span> <span data-ttu-id="cc924-173">Con il lancio di .NET Core, Microsoft ha rilasciato anche un nuovo stack di accesso ai dati basato su Entity Framework e chiamato Entity Framework Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-173">With the launch of .NET Core, Microsoft also released a new data access stack based on Entity Framework and called Entity Framework Core.</span></span>

<span data-ttu-id="cc924-174">È possibile usare EF 6,4 e EF Core da .NET Framework e .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-174">You can use EF 6.4 and EF Core from both .NET Framework and .NET Core.</span></span> <span data-ttu-id="cc924-175">Quindi, quali sono i driver decisionali che consentono di decidere tra i due?</span><span class="sxs-lookup"><span data-stu-id="cc924-175">So, what are the decision drivers to help to decide between the two?</span></span>

<span data-ttu-id="cc924-176">EF 6,3 è la prima versione di EF6 che può essere eseguita in .NET Core e lavorare su più piattaforme.</span><span class="sxs-lookup"><span data-stu-id="cc924-176">EF 6.3 is the first version of EF6 that can run on .NET Core and work cross-platform.</span></span> <span data-ttu-id="cc924-177">In realtà, l'obiettivo principale di questa versione è quello di semplificare la migrazione delle applicazioni esistenti che usano EF6 a .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-177">In fact, the main goal of this release was to make it easier to migrate existing applications that use EF6 to .NET Core.</span></span>

<span data-ttu-id="cc924-178">EF Core è stato progettato per offrire un'esperienza di sviluppo simile a EF6.</span><span class="sxs-lookup"><span data-stu-id="cc924-178">EF Core was designed to provide a developer experience similar to EF6.</span></span> <span data-ttu-id="cc924-179">Molte delle principali API sono invariate, in modo che EF Core risulti familiare agli sviluppatori che hanno usato EF6.</span><span class="sxs-lookup"><span data-stu-id="cc924-179">Most of the top-level APIs remain the same, so EF Core will feel familiar to developers who have used EF6.</span></span>

<span data-ttu-id="cc924-180">Sebbene siano compatibili, esistono differenze nell'implementazione che è necessario verificare prima di prendere una decisione.</span><span class="sxs-lookup"><span data-stu-id="cc924-180">Although compatible, there are differences on the implementation you should check before making a decision.</span></span>
<span data-ttu-id="cc924-181">Per ulteriori informazioni, vedere [confrontare EF Core & EF6](/ef/efcore-and-ef6/).</span><span class="sxs-lookup"><span data-stu-id="cc924-181">For more information, see [Compare EF Core & EF6](/ef/efcore-and-ef6/).</span></span>

<span data-ttu-id="cc924-182">Si consiglia di utilizzare EF Core se:</span><span class="sxs-lookup"><span data-stu-id="cc924-182">The recommendation is to use EF Core if:</span></span>

* <span data-ttu-id="cc924-183">Per l'app sono necessarie le funzionalità di .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-183">The app needs the capabilities of .NET Core.</span></span>
* <span data-ttu-id="cc924-184">EF Core supporta tutte le funzionalità necessarie per l'app.</span><span class="sxs-lookup"><span data-stu-id="cc924-184">EF Core supports all of the features that the app requires.</span></span>

<span data-ttu-id="cc924-185">È consigliabile usare EF6 se vengono soddisfatte entrambe le condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="cc924-185">Consider using EF6 if both of the following conditions are true:</span></span>

* <span data-ttu-id="cc924-186">L'app viene eseguita in Windows e .NET Framework 4,0 o versione successiva.</span><span class="sxs-lookup"><span data-stu-id="cc924-186">The app will run on Windows and .NET Framework 4.0 or later.</span></span>
* <span data-ttu-id="cc924-187">EF6 supporta tutte le funzionalità necessarie per l'app.</span><span class="sxs-lookup"><span data-stu-id="cc924-187">EF6 supports all of the features that the app requires.</span></span>

### <a name="relational-databases"></a><span data-ttu-id="cc924-188">Database relazionali</span><span class="sxs-lookup"><span data-stu-id="cc924-188">Relational databases</span></span>

#### <a name="sql-server"></a><span data-ttu-id="cc924-189">SQL Server</span><span class="sxs-lookup"><span data-stu-id="cc924-189">SQL Server</span></span>

<span data-ttu-id="cc924-190">SQL Server è stato uno dei database preferiti se si sta sviluppando per il desktop alcuni anni fa.</span><span class="sxs-lookup"><span data-stu-id="cc924-190">SQL Server has been one of the databases of choice if you were developing for the desktop some years ago.</span></span> <span data-ttu-id="cc924-191">Con l'uso di <xref:System.Data.SqlClient> in .NET Framework, è possibile accedere alle versioni di SQL Server, che incapsula i protocolli specifici del database.</span><span class="sxs-lookup"><span data-stu-id="cc924-191">With the use of <xref:System.Data.SqlClient> in .NET Framework, you could access versions of SQL Server, which encapsulates database-specific protocols.</span></span>

<span data-ttu-id="cc924-192">In .NET Core è possibile trovare una nuova `SqlClient` classe, completamente compatibile con quella esistente nel .NET Framework ma che si trova nella <xref:Microsoft.Data.SqlClient> libreria.</span><span class="sxs-lookup"><span data-stu-id="cc924-192">In .NET Core, you can find a new `SqlClient` class, fully compatible with the one existing in the .NET Framework but located in the <xref:Microsoft.Data.SqlClient> library.</span></span> <span data-ttu-id="cc924-193">È sufficiente aggiungere un riferimento al pacchetto NuGet [Microsoft. Data. SqlClient](https://www.nuget.org/packages/Microsoft.Data.SqlClient/) ed eseguire alcune operazioni di ridenominazione per gli spazi dei nomi e tutti gli elementi dovrebbero funzionare come previsto.</span><span class="sxs-lookup"><span data-stu-id="cc924-193">You just have to add a reference to the [Microsoft.Data.SqlClient](https://www.nuget.org/packages/Microsoft.Data.SqlClient/) NuGet package and do some renaming for the namespaces and everything should work as expected.</span></span>

#### <a name="microsoft-access"></a><span data-ttu-id="cc924-194">Microsoft Access</span><span class="sxs-lookup"><span data-stu-id="cc924-194">Microsoft Access</span></span>

<span data-ttu-id="cc924-195">Microsoft Access è stato usato per anni quando il SQL Server sofisticato e più scalabile non era necessario.</span><span class="sxs-lookup"><span data-stu-id="cc924-195">Microsoft Access has been used for years when the sophisticated and more scalable SQL Server wasn't needed.</span></span> <span data-ttu-id="cc924-196">È comunque possibile connettersi a Microsoft Access tramite la <xref:System.Data.Odbc> libreria.</span><span class="sxs-lookup"><span data-stu-id="cc924-196">You can still connect to Microsoft Access using the <xref:System.Data.Odbc> library.</span></span>

## <a name="consuming-services"></a><span data-ttu-id="cc924-197">Utilizzo dei servizi</span><span class="sxs-lookup"><span data-stu-id="cc924-197">Consuming services</span></span>

<span data-ttu-id="cc924-198">Grazie alla generazione di architetture orientate ai servizi, le applicazioni desktop hanno iniziato a evolversi da un modello client-server all'approccio a tre livelli.</span><span class="sxs-lookup"><span data-stu-id="cc924-198">With the raise of service-oriented architectures, desktop applications began to evolve from a client-server model to the three-layer approach.</span></span> <span data-ttu-id="cc924-199">Nell'approccio client-server viene stabilita una connessione di database diretta dal client che contiene la logica di business in genere all'interno di un singolo file EXE.</span><span class="sxs-lookup"><span data-stu-id="cc924-199">In the client-server approach, a direct database connection is established from the client holding the business logic usually inside a single EXE file.</span></span> <span data-ttu-id="cc924-200">D'altra parte, l'approccio a tre livelli stabilisce un livello di servizio intermedio che implementa la logica di business e l'accesso al database, consentendo una migliore sicurezza, scalabilità e riusabilità.</span><span class="sxs-lookup"><span data-stu-id="cc924-200">On the other hand, the three-layer approach establishes an intermediate service layer implementing business logic and database access allowing for better security, scalability, and reusability.</span></span> <span data-ttu-id="cc924-201">Anziché utilizzare direttamente i set di dati di dati, l'approccio del livello si basa su un set di servizi che implementano contratti e oggetti di tipi come modo per implementare il trasferimento dei dati.</span><span class="sxs-lookup"><span data-stu-id="cc924-201">Instead of working directly with datasets of data, the layer approach relies in a set of services implementing contracts and types objects as a way to implement data transfer.</span></span>

<span data-ttu-id="cc924-202">Se si dispone di un'applicazione desktop che utilizza un servizio WCF e si desidera eseguirne la migrazione a .NET Core, è necessario prendere in considerazione alcuni aspetti.</span><span class="sxs-lookup"><span data-stu-id="cc924-202">If you have a desktop application using a WCF service and you want to migrate it to .NET Core, there are some things to consider.</span></span>

<span data-ttu-id="cc924-203">La prima cosa da fare è come risolvere la configurazione per accedere al servizio.</span><span class="sxs-lookup"><span data-stu-id="cc924-203">The first thing is how to resolve the configuration to access the service.</span></span> <span data-ttu-id="cc924-204">Poiché la configurazione è diversa in .NET Core, è necessario effettuare alcuni aggiornamenti nel file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="cc924-204">Because the configuration is different on .NET Core, you'll need to make some updates in your configuration file.</span></span>

<span data-ttu-id="cc924-205">In secondo luogo, sarà necessario rigenerare il client del servizio con i nuovi strumenti presenti in Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="cc924-205">Second, you'll need to regenerate the service client with the new tools present on Visual Studio 2019.</span></span> <span data-ttu-id="cc924-206">In questo passaggio è necessario prendere in considerazione l'attivazione della generazione delle operazioni sincrone per rendere il client compatibile con il codice esistente.</span><span class="sxs-lookup"><span data-stu-id="cc924-206">In this step, you must consider activating the generation of the synchronous operations to make the client compatible with your existing code.</span></span>

<span data-ttu-id="cc924-207">Dopo la migrazione, se si ritiene che siano presenti librerie necessarie che non sono presenti in .NET Core, è possibile aggiungere un riferimento al pacchetto NuGet [Microsoft. Windows. Compatibility](https://www.nuget.org/packages/Microsoft.Windows.Compatibility) e verificare se le funzioni mancanti sono presenti.</span><span class="sxs-lookup"><span data-stu-id="cc924-207">After the migration, if you find that there are libraries you need that aren't present on .NET Core, you can add a reference to the [Microsoft.Windows.Compatibility](https://www.nuget.org/packages/Microsoft.Windows.Compatibility) NuGet package and see if the missing functions are there.</span></span>

<span data-ttu-id="cc924-208">Se si usa la <xref:System.Net.WebRequest> classe per eseguire chiamate al servizio Web, è possibile riscontrare alcune differenze in .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-208">If you're using the <xref:System.Net.WebRequest> class to perform web service calls, you may find some differences on .NET Core.</span></span> <span data-ttu-id="cc924-209">Si consiglia di usare invece System .NET. http. HttpClient.</span><span class="sxs-lookup"><span data-stu-id="cc924-209">The recommendation is to use the System.Net.Http.HttpClient instead.</span></span>

## <a name="consuming-a-com-object"></a><span data-ttu-id="cc924-210">Utilizzo di un oggetto COM</span><span class="sxs-lookup"><span data-stu-id="cc924-210">Consuming a COM Object</span></span>

<span data-ttu-id="cc924-211">Attualmente, non è possibile aggiungere un riferimento a un oggetto COM da Visual Studio 2019 da usare con .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-211">Currently, there's no way to add a reference to a COM object from Visual Studio 2019 to use with .NET Core.</span></span> <span data-ttu-id="cc924-212">Quindi, è necessario modificare manualmente il file di progetto.</span><span class="sxs-lookup"><span data-stu-id="cc924-212">So, you have to manually modify the project file.</span></span>

<span data-ttu-id="cc924-213">Inserire una `COMReference` struttura all'interno del file di progetto, come nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="cc924-213">Insert a `COMReference` structure inside the project file like in the following example:</span></span>

```xml
<ItemGroup>
    <COMReference Include="MSHTML">
        <Guid>{3050F1C5-98B5-11CF-BB82-00AA00BDCE0B}\</Guid>
        <VersionMajor>4</VersionMajor>
        <VersionMinor>0</VersionMinor>
        <Lcid>0</Lcid>
        <WrapperTool>primary</WrapperTool>
        <Isolated>false</Isolated>
    </COMReference>
</ItemGroup>
```

## <a name="more-things-to-consider"></a><span data-ttu-id="cc924-214">Altri aspetti da considerare</span><span class="sxs-lookup"><span data-stu-id="cc924-214">More things to consider</span></span>

<span data-ttu-id="cc924-215">Diverse tecnologie disponibili per le librerie .NET Framework non sono disponibili per .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-215">Several technologies available to .NET Framework libraries aren't available for .NET Core.</span></span> <span data-ttu-id="cc924-216">Se il codice si basa su alcune di queste tecnologie, prendere in considerazione gli approcci alternativi descritti in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="cc924-216">If your code relies on some of these technologies, consider the alternative approaches outlined in this section.</span></span>

<span data-ttu-id="cc924-217">[Windows Compatibility Pack](../../core/porting/windows-compat-pack.md) fornisce l'accesso alle API che in precedenza erano disponibili solo per .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cc924-217">The [Windows Compatibility Pack](../../core/porting/windows-compat-pack.md) provides access to APIs that were previously available only for .NET Framework.</span></span> <span data-ttu-id="cc924-218">Può essere usato nei progetti .NET Core e .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="cc924-218">It can be used on .NET Core and .NET Standard projects.</span></span>

<span data-ttu-id="cc924-219">Per ulteriori informazioni sulla compatibilità delle API, è possibile trovare la documentazione sulle modifiche di rilievo e le API deprecate/legacy all'indirizzo <https://docs.microsoft.com/dotnet/core/compatibility/fx-core> .</span><span class="sxs-lookup"><span data-stu-id="cc924-219">For more information on API compatibility, you can find documentation about breaking changes and deprecated/legacy APIs at <https://docs.microsoft.com/dotnet/core/compatibility/fx-core>.</span></span>

### <a name="appdomains"></a><span data-ttu-id="cc924-220">AppDomain</span><span class="sxs-lookup"><span data-stu-id="cc924-220">AppDomains</span></span>

<span data-ttu-id="cc924-221">I domini applicazione (AppDomain) consentono di isolare le app l'una dall'altra.</span><span class="sxs-lookup"><span data-stu-id="cc924-221">Application domains (AppDomains) isolate apps from one another.</span></span> <span data-ttu-id="cc924-222">Per gli AppDomain è necessario il supporto in fase di esecuzione e sono costosi.</span><span class="sxs-lookup"><span data-stu-id="cc924-222">AppDomains require runtime support and are expensive.</span></span> <span data-ttu-id="cc924-223">La creazione di domini app aggiuntivi non è supportata.</span><span class="sxs-lookup"><span data-stu-id="cc924-223">Creating additional app domains isn't supported.</span></span> <span data-ttu-id="cc924-224">Per l'isolamento del codice, è consigliabile separare i processi o usare i contenitori in alternativa.</span><span class="sxs-lookup"><span data-stu-id="cc924-224">For code isolation, we recommend separate processes or using containers as an alternative.</span></span> <span data-ttu-id="cc924-225">Per il caricamento dinamico degli assembly, è consigliabile utilizzare la nuova  <xref:System.Runtime.Loader.AssemblyLoadContext> classe.</span><span class="sxs-lookup"><span data-stu-id="cc924-225">For the dynamic loading of assemblies, we recommend the new <xref:System.Runtime.Loader.AssemblyLoadContext> class.</span></span>

<span data-ttu-id="cc924-226">Per semplificare la migrazione del codice da .NET Framework, .NET Core espone parte della superficie dell'API AppDomain.</span><span class="sxs-lookup"><span data-stu-id="cc924-226">To make code migration from .NET Framework easier, .NET Core exposes some of the AppDomain API surface.</span></span> <span data-ttu-id="cc924-227">Parte della funzione API normalmente (ad esempio,  <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType> ), alcuni membri non eseguono alcuna operazione (ad esempio,  <xref:System.AppDomain.SetCachePath%2A> ) e alcuni di essi generano <xref:System.PlatformNotSupportedException> (ad esempio,  <xref:System.AppDomain.CreateDomain%2A> ).</span><span class="sxs-lookup"><span data-stu-id="cc924-227">Some of the APIs function normally (for example, <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType>), some members do nothing (for example, <xref:System.AppDomain.SetCachePath%2A>), and some of them throw <xref:System.PlatformNotSupportedException> (for example, <xref:System.AppDomain.CreateDomain%2A>).</span></span>

### <a name="remoting"></a><span data-ttu-id="cc924-228">Comunicazione remota</span><span class="sxs-lookup"><span data-stu-id="cc924-228">Remoting</span></span>

<span data-ttu-id="cc924-229">.NET Remoting è stato usato per la comunicazione tra domini AppDomain, che non è più supportata.</span><span class="sxs-lookup"><span data-stu-id="cc924-229">.NET Remoting was used for cross-AppDomain communication, which is no longer supported.</span></span> <span data-ttu-id="cc924-230">Per i servizi remoti è richiesto anche il supporto del runtime, costoso da gestire.</span><span class="sxs-lookup"><span data-stu-id="cc924-230">Also, Remoting requires runtime support, which is expensive to maintain.</span></span> <span data-ttu-id="cc924-231">Per questi motivi, .NET Remoting non è supportato in .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-231">For these reasons, .NET Remoting isn't supported on .NET Core.</span></span>

<span data-ttu-id="cc924-232">Per la comunicazione tra processi, è consigliabile prendere in considerazione i meccanismi di comunicazione interprocesso (IPC) come alternativa alla comunicazione remota, ad esempio la <xref:System.IO.Pipes?displayProperty=nameWithType> <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> classe o.</span><span class="sxs-lookup"><span data-stu-id="cc924-232">For communication across processes, you should consider inter-process communication (IPC) mechanisms as an alternative to Remoting, such as the <xref:System.IO.Pipes?displayProperty=nameWithType> or the <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> class.</span></span>

<span data-ttu-id="cc924-233">Per le comunicazioni tra computer, usare una soluzione basata su rete in alternativa.</span><span class="sxs-lookup"><span data-stu-id="cc924-233">Across machines, use a network-based solution as an alternative.</span></span> <span data-ttu-id="cc924-234">Preferibilmente, usare un protocollo di testo normale con overhead ridotto, ad esempio HTTP.</span><span class="sxs-lookup"><span data-stu-id="cc924-234">Preferably, use a low-overhead plaintext protocol, such as HTTP.</span></span> <span data-ttu-id="cc924-235">Il server Web Kestrel, ovvero il server Web usato da ASP.NET Core, rappresenta un'opzione praticabile in questo caso.</span><span class="sxs-lookup"><span data-stu-id="cc924-235">The Kestrel web server, the web server used by ASP.NET Core, is an option here.</span></span>

### <a name="code-access-security-cas"></a><span data-ttu-id="cc924-236">Sicurezza dall'accesso di codice (CAS, Code Access Security)</span><span class="sxs-lookup"><span data-stu-id="cc924-236">Code Access Security (CAS)</span></span>

<span data-ttu-id="cc924-237">Il sandboxing, che si basa sul runtime o sul Framework per vincolare le risorse utilizzate o eseguite da un'applicazione o da una libreria gestita, non è supportato in .NET Core.</span><span class="sxs-lookup"><span data-stu-id="cc924-237">Sandboxing, which relies on the runtime or the framework to constrain which resources a managed application or library uses or runs, isn't supported on .NET Core.</span></span>

<span data-ttu-id="cc924-238">Usare i limiti di sicurezza forniti dal sistema operativo, ad esempio la virtualizzazione, i contenitori o gli account utente per l'esecuzione di processi con il set minimo di privilegi.</span><span class="sxs-lookup"><span data-stu-id="cc924-238">Use security boundaries that are provided by the operating system, such as virtualization, containers, or user accounts for running processes with the minimum set of privileges.</span></span>

### <a name="security-transparency"></a><span data-ttu-id="cc924-239">Trasparenza della sicurezza</span><span class="sxs-lookup"><span data-stu-id="cc924-239">Security Transparency</span></span>

<span data-ttu-id="cc924-240">Analogamente alla sicurezza dall'accesso di codice, la trasparenza della sicurezza separa il codice in modalità sandbox dal codice critico per la sicurezza in modalità dichiarativa, ma non è più supportata come limite di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="cc924-240">Similar to CAS, Security Transparency separates sandboxed code from security critical code in a declarative fashion but is no longer supported as a security boundary.</span></span>

<span data-ttu-id="cc924-241">Usare i limiti di sicurezza forniti dal sistema operativo, ad esempio la virtualizzazione, i contenitori o gli account utente per l'esecuzione di processi con il minor set di privilegi.</span><span class="sxs-lookup"><span data-stu-id="cc924-241">Use security boundaries that are provided by the operating system, such as virtualization, containers, or user accounts for running processes with the least set of privileges.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="cc924-242">[Precedente](whats-new-dotnet-core.md ) 
> [Avanti](windows-migration.md)</span><span class="sxs-lookup"><span data-stu-id="cc924-242">[Previous](whats-new-dotnet-core.md )
[Next](windows-migration.md)</span></span>
