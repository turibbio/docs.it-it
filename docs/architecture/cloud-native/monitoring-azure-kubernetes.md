---
title: Monitoraggio nei servizi Azure Kubernetes
description: Monitoraggio nei servizi Azure Kubernetes
ms.date: 05/13/2020
ms.openlocfilehash: 138acf9d27fb4a676ec422c848097a6bea98fa42
ms.sourcegitcommit: 27db07ffb26f76912feefba7b884313547410db5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/19/2020
ms.locfileid: "83613824"
---
# <a name="monitoring-in-azure-kubernetes-services"></a><span data-ttu-id="a515b-103">Monitoraggio nei servizi Azure Kubernetes</span><span class="sxs-lookup"><span data-stu-id="a515b-103">Monitoring in Azure Kubernetes Services</span></span>

<span data-ttu-id="a515b-104">La registrazione incorporata in Kubernetes è primitiva.</span><span class="sxs-lookup"><span data-stu-id="a515b-104">The built-in logging in Kubernetes is primitive.</span></span> <span data-ttu-id="a515b-105">Tuttavia, esistono alcune opzioni eccezionali per ottenere i log da Kubernetes e in una posizione in cui possono essere analizzati correttamente.</span><span class="sxs-lookup"><span data-stu-id="a515b-105">However, there are some great options for getting the logs out of Kubernetes and into a place where they can be properly analyzed.</span></span> <span data-ttu-id="a515b-106">Se è necessario monitorare i cluster AKS, la configurazione di Elastic stack per Kubernetes è un'ottima soluzione.</span><span class="sxs-lookup"><span data-stu-id="a515b-106">If you need to monitor your AKS clusters, configuring Elastic Stack for Kubernetes is a great solution.</span></span>

## <a name="azure-monitor-for-containers"></a><span data-ttu-id="a515b-107">Monitoraggio di Azure per contenitori</span><span class="sxs-lookup"><span data-stu-id="a515b-107">Azure Monitor for Containers</span></span>

<span data-ttu-id="a515b-108">Il [monitoraggio di Azure per i contenitori](https://docs.microsoft.com/azure/azure-monitor/insights/container-insights-overview) supporta l'utilizzo di log non solo Kubernetes, ma anche da altri motori di orchestrazione, ad esempio DC/OS, Docker Swarm e Red Hat OpenShift.</span><span class="sxs-lookup"><span data-stu-id="a515b-108">[Azure Monitor for Containers](https://docs.microsoft.com/azure/azure-monitor/insights/container-insights-overview) supports consuming logs from not just Kubernetes but also from other orchestration engines such as DC/OS, Docker Swarm, and Red Hat OpenShift.</span></span>

<span data-ttu-id="a515b-109">![Utilizzo di log da vari contenitori ](./media/containers-diagram.png)
 **Figura 7-10**.</span><span class="sxs-lookup"><span data-stu-id="a515b-109">![Consuming logs from various containers](./media/containers-diagram.png)
**Figure 7-10**.</span></span> <span data-ttu-id="a515b-110">Utilizzo di log da vari contenitori</span><span class="sxs-lookup"><span data-stu-id="a515b-110">Consuming logs from various containers</span></span>

<span data-ttu-id="a515b-111">[Prometeo](https://prometheus.io/) è una diffusa soluzione di monitoraggio delle metriche open source.</span><span class="sxs-lookup"><span data-stu-id="a515b-111">[Prometheus](https://prometheus.io/) is a popular open source metric monitoring solution.</span></span> <span data-ttu-id="a515b-112">Fa parte della base di calcolo nativa del cloud.</span><span class="sxs-lookup"><span data-stu-id="a515b-112">It is part of the Cloud Native Compute Foundation.</span></span> <span data-ttu-id="a515b-113">In genere, l'uso di Prometeo richiede la gestione di un server Prometeo con il proprio archivio.</span><span class="sxs-lookup"><span data-stu-id="a515b-113">Typically, using Prometheus requires managing a Prometheus server with its own store.</span></span> <span data-ttu-id="a515b-114">Tuttavia, [monitoraggio di Azure per i contenitori fornisce l'integrazione diretta con gli endpoint della metrica Prometheus](https://docs.microsoft.com/azure/azure-monitor/insights/container-insights-prometheus-integration), quindi non è necessario un server separato.</span><span class="sxs-lookup"><span data-stu-id="a515b-114">However, [Azure Monitor for Containers provides direct integration with Prometheus metrics endpoints](https://docs.microsoft.com/azure/azure-monitor/insights/container-insights-prometheus-integration), so a separate server is not required.</span></span>

<span data-ttu-id="a515b-115">Le informazioni relative a log e metriche vengono raccolte non solo dai contenitori in esecuzione nel cluster, ma anche dal cluster che ospita autonomamente.</span><span class="sxs-lookup"><span data-stu-id="a515b-115">Log and metric information is gathered not just from the containers running in the cluster but also from the cluster hosts themselves.</span></span> <span data-ttu-id="a515b-116">Consente di correlare le informazioni di log dai due, rendendo molto più semplice rilevare un errore.</span><span class="sxs-lookup"><span data-stu-id="a515b-116">It allows correlating log information from the two making it much easier to track down an error.</span></span>

<span data-ttu-id="a515b-117">L'installazione degli agenti di raccolta log è diversa nei cluster [Windows](https://docs.microsoft.com/azure/azure-monitor/insights/containers#configure-a-log-analytics-windows-agent-for-kubernetes) e [Linux](https://docs.microsoft.com/azure/azure-monitor/insights/containers#configure-a-log-analytics-linux-agent-for-kubernetes) .</span><span class="sxs-lookup"><span data-stu-id="a515b-117">Installing the log collectors differs on [Windows](https://docs.microsoft.com/azure/azure-monitor/insights/containers#configure-a-log-analytics-windows-agent-for-kubernetes) and [Linux](https://docs.microsoft.com/azure/azure-monitor/insights/containers#configure-a-log-analytics-linux-agent-for-kubernetes) clusters.</span></span> <span data-ttu-id="a515b-118">In entrambi i casi, tuttavia, la raccolta di log viene implementata come Kubernetes [DaemonSet](https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/), vale a dire che l'agente di raccolta log viene eseguito come contenitore in ogni nodo.</span><span class="sxs-lookup"><span data-stu-id="a515b-118">But in both cases the log collection is implemented as a Kubernetes [DaemonSet](https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/), meaning that the log collector is run as a container on each of the nodes.</span></span>

<span data-ttu-id="a515b-119">Indipendentemente dall'agente di orchestrazione o dal sistema operativo che esegue il daemon di monitoraggio di Azure, le informazioni di log vengono trasmesse agli stessi strumenti di monitoraggio di Azure con cui gli utenti hanno familiarità.</span><span class="sxs-lookup"><span data-stu-id="a515b-119">No matter which orchestrator or operating system is running the Azure Monitor daemon, the log information is forwarded to the same Azure Monitor tools with which users are familiar.</span></span> <span data-ttu-id="a515b-120">Ciò garantisce un'esperienza parallela in ambienti che combinano origini di log diverse, ad esempio un ambiente ibrido per Kubernetes/funzioni di Azure.</span><span class="sxs-lookup"><span data-stu-id="a515b-120">This ensures a parallel experience in environments that mix different log sources such as a hybrid Kubernetes/Azure Functions environment.</span></span>

<span data-ttu-id="a515b-121">![Un dashboard di esempio che mostra le informazioni di registrazione e metrica da diversi contenitori in esecuzione. ](./media/containers-dashboard.png)
 **Figura 7-11**.</span><span class="sxs-lookup"><span data-stu-id="a515b-121">![A sample dashboard showing logging and metric information from a number of running containers.](./media/containers-dashboard.png)
**Figure 7-11**.</span></span> <span data-ttu-id="a515b-122">Un dashboard di esempio che mostra le informazioni di registrazione e metrica da diversi contenitori in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="a515b-122">A sample dashboard showing logging and metric information from a number of running containers.</span></span>

## <a name="logfinalize"></a><span data-ttu-id="a515b-123">Log. Finalize ()</span><span class="sxs-lookup"><span data-stu-id="a515b-123">Log.Finalize()</span></span>

<span data-ttu-id="a515b-124">La registrazione è uno dei componenti più trascurati e ancora più importanti della distribuzione di applicazioni su larga scala.</span><span class="sxs-lookup"><span data-stu-id="a515b-124">Logging is one of the most overlooked and yet most important parts of deploying any application at scale.</span></span> <span data-ttu-id="a515b-125">Con l'aumentare delle dimensioni e della complessità delle applicazioni, è quindi difficile eseguirne il debug.</span><span class="sxs-lookup"><span data-stu-id="a515b-125">As the size and complexity of applications increase, then so does the difficulty of debugging them.</span></span> <span data-ttu-id="a515b-126">Avere log di qualità superiore disponibili rende il debug molto più semplice e lo sposta dall'area di autenticazione "quasi impossibile" a "un'esperienza piacevole".</span><span class="sxs-lookup"><span data-stu-id="a515b-126">Having top quality logs available makes debugging much easier and moves it from the realm of "nearly impossible" to "a pleasant experience".</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="a515b-127">[Precedente](logging-with-elastic-stack.md) 
> [Avanti](azure-monitor.md)</span><span class="sxs-lookup"><span data-stu-id="a515b-127">[Previous](logging-with-elastic-stack.md)
[Next](azure-monitor.md)</span></span>
