---
title: Combinazione di contenitori e approcci senza server per i servizi nativi del cloud
description: Combinazione di contenitori e Kubernetes con approcci senza server
ms.date: 05/13/2020
ms.openlocfilehash: 67eee89659026db06eb16ef6f1154ab6935725a4
ms.sourcegitcommit: 27db07ffb26f76912feefba7b884313547410db5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/19/2020
ms.locfileid: "83614201"
---
# <a name="combining-containers-and-serverless-approaches"></a><span data-ttu-id="a5306-103">Combinazione degli approcci con contenitori e serverless</span><span class="sxs-lookup"><span data-stu-id="a5306-103">Combining containers and serverless approaches</span></span>

<span data-ttu-id="a5306-104">Le applicazioni native del cloud implementano in genere servizi che sfruttano contenitori e orchestrazione.</span><span class="sxs-lookup"><span data-stu-id="a5306-104">Cloud-native applications typically implement services leveraging containers and orchestration.</span></span> <span data-ttu-id="a5306-105">Spesso è possibile esporre alcuni dei servizi dell'applicazione come funzioni di Azure.</span><span class="sxs-lookup"><span data-stu-id="a5306-105">There are often opportunities to expose some of the application's services as Azure Functions.</span></span> <span data-ttu-id="a5306-106">Tuttavia, con un'app nativa del cloud distribuita in Kubernetes, sarebbe bello sfruttare le funzioni di Azure all'interno di questo stesso set di strumenti.</span><span class="sxs-lookup"><span data-stu-id="a5306-106">However, with a cloud-native app deployed to Kubernetes, it would be nice to leverage Azure Functions within this same toolset.</span></span> <span data-ttu-id="a5306-107">Fortunatamente, è possibile eseguire il wrapping di funzioni di Azure all'interno di contenitori Docker e distribuirle usando gli stessi processi e gli stessi strumenti del resto dell'app basata su Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="a5306-107">Fortunately, you can wrap Azure Functions inside Docker containers and deploy them using the same processes and tools as the rest of your Kubernetes-based app.</span></span>

## <a name="when-does-it-make-sense-to-use-containers-with-serverless"></a><span data-ttu-id="a5306-108">Quando è consigliabile usare i contenitori senza server?</span><span class="sxs-lookup"><span data-stu-id="a5306-108">When does it make sense to use containers with serverless?</span></span>

<span data-ttu-id="a5306-109">La funzione di Azure non conosce la piattaforma in cui viene distribuita.</span><span class="sxs-lookup"><span data-stu-id="a5306-109">Your Azure Function has no knowledge of the platform on which it's deployed.</span></span> <span data-ttu-id="a5306-110">Per alcuni scenari, è possibile che si disponga di requisiti specifici e che sia necessario personalizzare l'ambiente in cui viene eseguito il codice di funzione.</span><span class="sxs-lookup"><span data-stu-id="a5306-110">For some scenarios, you may have specific requirements and need to customize the environment on which your function code will run.</span></span> <span data-ttu-id="a5306-111">È necessaria un'immagine personalizzata che supporti le dipendenze o una configurazione non supportata dall'immagine predefinita.</span><span class="sxs-lookup"><span data-stu-id="a5306-111">You'll need a custom image that supports dependencies or a configuration not supported by the default image.</span></span> <span data-ttu-id="a5306-112">In questi casi, è opportuno distribuire la funzione in un contenitore Docker personalizzato.</span><span class="sxs-lookup"><span data-stu-id="a5306-112">In these cases, it makes sense to deploy your function in a custom Docker container.</span></span>

## <a name="when-should-you-avoid-using-containers-with-azure-functions"></a><span data-ttu-id="a5306-113">Quando è consigliabile evitare di usare i contenitori con funzioni di Azure?</span><span class="sxs-lookup"><span data-stu-id="a5306-113">When should you avoid using containers with Azure Functions?</span></span>

<span data-ttu-id="a5306-114">Se si vuole usare la fatturazione a consumo, non sarà possibile eseguire la funzione in un contenitore.</span><span class="sxs-lookup"><span data-stu-id="a5306-114">If you want to use consumption billing, you won't be able to run your function in a container.</span></span> <span data-ttu-id="a5306-115">Se si distribuisce la funzione in un cluster Kubernetes, non sarà più possibile trarre vantaggio dal ridimensionamento incorporato fornito da funzioni di Azure.</span><span class="sxs-lookup"><span data-stu-id="a5306-115">What's more, if you deploy your function to a Kubernetes cluster, you'll no longer benefit from the built-in scaling provided by Azure Functions.</span></span> <span data-ttu-id="a5306-116">È necessario usare le funzionalità di scalabilità di Kubernetes, descritte in precedenza in questo capitolo.</span><span class="sxs-lookup"><span data-stu-id="a5306-116">You'll need to use Kubernetes' scaling features, described earlier in this chapter.</span></span>

## <a name="how-to-combine-serverless-and-docker-containers"></a><span data-ttu-id="a5306-117">Come combinare contenitori senza server e Docker</span><span class="sxs-lookup"><span data-stu-id="a5306-117">How to combine serverless and Docker containers</span></span>

<span data-ttu-id="a5306-118">Per eseguire il wrapping di una funzione di Azure in un contenitore Docker, installare il [Azure Functions Core Tools](https://github.com/Azure/azure-functions-core-tools) e quindi eseguire il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="a5306-118">To wrap an Azure Function in a Docker container, install the [Azure Functions Core Tools](https://github.com/Azure/azure-functions-core-tools) and then run the following command:</span></span>

```console
func init ProjectName --worker-runtime dotnet --docker
```

<span data-ttu-id="a5306-119">Quando il progetto viene creato, includerà un Dockerfile e il runtime del ruolo di lavoro configurato per `dotnet` .</span><span class="sxs-lookup"><span data-stu-id="a5306-119">When the project is created, it will include a Dockerfile and the worker runtime configured to `dotnet`.</span></span> <span data-ttu-id="a5306-120">A questo punto, è possibile creare e testare la funzione localmente.</span><span class="sxs-lookup"><span data-stu-id="a5306-120">Now, you can create and test your function locally.</span></span> <span data-ttu-id="a5306-121">Compilare ed eseguire il comando con `docker build` i `docker run` comandi e.</span><span class="sxs-lookup"><span data-stu-id="a5306-121">Build and run it using the  `docker build` and `docker run` commands.</span></span> <span data-ttu-id="a5306-122">Per i passaggi dettagliati per iniziare a compilare funzioni di Azure con il supporto per Docker, vedere l'esercitazione [creare una funzione in Linux tramite un'immagine personalizzata](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image) .</span><span class="sxs-lookup"><span data-stu-id="a5306-122">For detailed steps to get started building Azure Functions with Docker support, see the [Create a function on Linux using a custom image](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image) tutorial.</span></span>

## <a name="how-to-combine-serverless-and-kubernetes-with-keda"></a><span data-ttu-id="a5306-123">Come combinare senza server e Kubernetes con KEDA</span><span class="sxs-lookup"><span data-stu-id="a5306-123">How to combine serverless and Kubernetes with KEDA</span></span>

<span data-ttu-id="a5306-124">In questo capitolo si è notato che la piattaforma funzioni di Azure viene scalata automaticamente per soddisfare la domanda.</span><span class="sxs-lookup"><span data-stu-id="a5306-124">In this chapter, you've seen that the Azure Functions' platform automatically scales out to meet demand.</span></span> <span data-ttu-id="a5306-125">Quando si distribuiscono funzioni in contenitori in AKS, tuttavia, si perde la funzionalità di scalabilità incorporata.</span><span class="sxs-lookup"><span data-stu-id="a5306-125">When deploying containerized functions to AKS, however, you lose the built-in scaling functionality.</span></span> <span data-ttu-id="a5306-126">Per il salvataggio viene visualizzato [Kubernetes basato su eventi (Keda)](https://docs.microsoft.com/azure/azure-functions/functions-kubernetes-keda).</span><span class="sxs-lookup"><span data-stu-id="a5306-126">To the rescue comes [Kubernetes-based Event Driven (KEDA)](https://docs.microsoft.com/azure/azure-functions/functions-kubernetes-keda).</span></span> <span data-ttu-id="a5306-127">Consente la scalabilità automatica con granularità fine per `event-driven Kubernetes workloads,` includere funzioni in contenitori.</span><span class="sxs-lookup"><span data-stu-id="a5306-127">It enables fine-grained autoscaling for `event-driven Kubernetes workloads,` including containerized functions.</span></span>

<span data-ttu-id="a5306-128">KEDA fornisce la funzionalità di scalabilità guidata dagli eventi per il runtime delle funzioni in un contenitore docker.</span><span class="sxs-lookup"><span data-stu-id="a5306-128">KEDA provides event-driven scaling functionality to the Functions' runtime in a Docker container.</span></span> <span data-ttu-id="a5306-129">KEDA può essere scalato da zero istanze (se non si verificano eventi) a `n instances` , in base al carico.</span><span class="sxs-lookup"><span data-stu-id="a5306-129">KEDA can scale from zero instances (when no events are occurring) out to `n instances`, based on load.</span></span> <span data-ttu-id="a5306-130">Consente la scalabilità automatica esponendo metriche personalizzate a Kubernetes AutoScaler (Horizontal Pod AutoScaler).</span><span class="sxs-lookup"><span data-stu-id="a5306-130">It enables autoscaling by exposing custom metrics to the Kubernetes autoscaler (Horizontal Pod Autoscaler).</span></span> <span data-ttu-id="a5306-131">L'uso di contenitori di funzioni con KEDA consente di replicare le funzionalità della funzione senza server in qualsiasi cluster Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="a5306-131">Using Functions containers with KEDA makes it possible to replicate serverless function capabilities in any Kubernetes cluster.</span></span>

<span data-ttu-id="a5306-132">Vale la pena notare che il progetto KEDA è ora gestito da cloud native Computing Foundation (CNCF).</span><span class="sxs-lookup"><span data-stu-id="a5306-132">It is worth noting that the KEDA project is now managed by the Cloud Native Computing Foundation (CNCF).</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="a5306-133">[Precedente](leverage-serverless-functions.md) 
> [Avanti](deploy-containers-azure.md)</span><span class="sxs-lookup"><span data-stu-id="a5306-133">[Previous](leverage-serverless-functions.md)
[Next](deploy-containers-azure.md)</span></span>
