---
title: Comunicazione da servizio a servizio
description: Informazioni sul modo in cui i microservizi nativi del cloud back-end comunicano con altri microservizi back-end.
author: robvet
ms.date: 09/09/2019
ms.openlocfilehash: 556617a9e2df5a4d9ff9adb9d19e714ca94930ea
ms.sourcegitcommit: 957c49696eaf048c284ef8f9f8ffeb562357ad95
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/07/2020
ms.locfileid: "82895501"
---
# <a name="service-to-service-communication"></a><span data-ttu-id="59650-103">Comunicazione da servizio a servizio</span><span class="sxs-lookup"><span data-stu-id="59650-103">Service-to-service communication</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="59650-104">Con il passaggio dal client front-end, ora si affronteranno i microservizi back-end che comunicano tra loro.</span><span class="sxs-lookup"><span data-stu-id="59650-104">Moving from the front-end client, we now address back-end microservices communicate with each other.</span></span>

<span data-ttu-id="59650-105">Quando si crea un'applicazione nativa del cloud, è opportuno essere sensibili al modo in cui i servizi back-end comunicano tra loro.</span><span class="sxs-lookup"><span data-stu-id="59650-105">When constructing a cloud-native application, you'll want to be sensitive to how back-end services communicate with each other.</span></span> <span data-ttu-id="59650-106">Idealmente, migliore è la comunicazione tra i servizi.</span><span class="sxs-lookup"><span data-stu-id="59650-106">Ideally, the less inter-service communication, the better.</span></span> <span data-ttu-id="59650-107">Tuttavia, l'elusione non è sempre possibile perché i servizi back-end si basano spesso su un altro per completare un'operazione.</span><span class="sxs-lookup"><span data-stu-id="59650-107">However, avoidance isn't always possible as back-end services often rely on one another to complete an operation.</span></span>

<span data-ttu-id="59650-108">Esistono diversi approcci ampiamente accettati per l'implementazione della comunicazione tra servizi.</span><span class="sxs-lookup"><span data-stu-id="59650-108">There are several widely accepted approaches to implementing cross-service communication.</span></span> <span data-ttu-id="59650-109">Il *tipo di interazione di comunicazione* determinerà spesso l'approccio migliore.</span><span class="sxs-lookup"><span data-stu-id="59650-109">The *type of communication interaction* will often determine the best approach.</span></span>

<span data-ttu-id="59650-110">Considerare i tipi di interazione seguenti:</span><span class="sxs-lookup"><span data-stu-id="59650-110">Consider the following interaction types:</span></span>

- <span data-ttu-id="59650-111">*Query* : quando un microservizio chiamante richiede una risposta da un microservizio chiamato, ad esempio, "Hey, Give me the buyer Information for an data ID cliente".</span><span class="sxs-lookup"><span data-stu-id="59650-111">*Query* – when a calling microservice requires a response from a called microservice, such as, "Hey, give me the buyer information for a given customer Id."</span></span>

- <span data-ttu-id="59650-112">*Comando* : quando il microservizio chiamante necessita di un altro microservizio per eseguire un'azione ma non richiede una risposta, ad esempio, "Hey, è sufficiente spedire questo ordine".</span><span class="sxs-lookup"><span data-stu-id="59650-112">*Command* – when the calling microservice needs another microservice to execute an action but doesn't require a response, such as, "Hey, just ship this order."</span></span>

- <span data-ttu-id="59650-113">*Evento* : quando un microservizio, denominato server di pubblicazione, genera un evento che lo stato è stato modificato o si è verificata un'azione.</span><span class="sxs-lookup"><span data-stu-id="59650-113">*Event* – when a microservice, called the publisher, raises an event that state has changed or an action has occurred.</span></span> <span data-ttu-id="59650-114">Altri microservizi, detti Sottoscrittori, che sono interessati, possono rispondere all'evento in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="59650-114">Other microservices, called subscribers, who are interested, can react to the event appropriately.</span></span> <span data-ttu-id="59650-115">Il server di pubblicazione e i Sottoscrittori non sono consapevoli.</span><span class="sxs-lookup"><span data-stu-id="59650-115">The publisher and the subscribers aren't aware of each other.</span></span>

<span data-ttu-id="59650-116">I sistemi di microservizi utilizzano in genere una combinazione di questi tipi di interazione durante l'esecuzione di operazioni che richiedono l'interazione tra servizi.</span><span class="sxs-lookup"><span data-stu-id="59650-116">Microservice systems typically use a combination of these interaction types when executing operations that require cross-service interaction.</span></span> <span data-ttu-id="59650-117">Esaminiamo in modo approfondito ciascuno di essi e come è possibile implementarli.</span><span class="sxs-lookup"><span data-stu-id="59650-117">Let's take a close look at each and how you might implement them.</span></span>

## <a name="queries"></a><span data-ttu-id="59650-118">Query</span><span class="sxs-lookup"><span data-stu-id="59650-118">Queries</span></span>

<span data-ttu-id="59650-119">Molte volte, un microservizio potrebbe dover *eseguire una query* su un altro, richiedendo una risposta immediata per completare un'operazione.</span><span class="sxs-lookup"><span data-stu-id="59650-119">Many times, one microservice might need to *query* another, requiring an immediate response to complete an operation.</span></span> <span data-ttu-id="59650-120">Un microservizio carrello acquisti potrebbe richiedere informazioni sul prodotto e un prezzo per aggiungere un elemento al carrello.</span><span class="sxs-lookup"><span data-stu-id="59650-120">A shopping basket microservice may need product information and a price to add an item to its basket.</span></span> <span data-ttu-id="59650-121">Sono disponibili diversi approcci per l'implementazione delle operazioni di query.</span><span class="sxs-lookup"><span data-stu-id="59650-121">There are a number of approaches for implementing query operations.</span></span>

### <a name="requestresponse-messaging"></a><span data-ttu-id="59650-122">Messaggistica di tipo richiesta/risposta</span><span class="sxs-lookup"><span data-stu-id="59650-122">Request/Response Messaging</span></span>

<span data-ttu-id="59650-123">Una delle opzioni per l'implementazione di questo scenario è la chiamata del microservizio back-end per eseguire richieste HTTP dirette ai microservizi necessari per eseguire query, come illustrato nella figura 4-8.</span><span class="sxs-lookup"><span data-stu-id="59650-123">One option for implementing this scenario is for the calling back-end microservice to make direct HTTP requests to the microservices it needs to query, shown in Figure 4-8.</span></span>

![Comunicazione HTTP diretta](./media/direct-http-communication.png)

<span data-ttu-id="59650-125">**Figura 4-8**.</span><span class="sxs-lookup"><span data-stu-id="59650-125">**Figure 4-8**.</span></span> <span data-ttu-id="59650-126">Comunicazione HTTP diretta</span><span class="sxs-lookup"><span data-stu-id="59650-126">Direct HTTP communication</span></span>

<span data-ttu-id="59650-127">Sebbene le chiamate HTTP dirette tra microservizi siano relativamente semplici da implementare, è necessario prestare attenzione per ridurre al minimo questa procedura.</span><span class="sxs-lookup"><span data-stu-id="59650-127">While direct HTTP calls between microservices are relatively simple to implement, care should be taken to minimize this practice.</span></span> <span data-ttu-id="59650-128">Per iniziare, queste chiamate sono sempre *sincrone* e bloccano l'operazione fino a quando non viene restituito un risultato o si verifica il timeout della richiesta.</span><span class="sxs-lookup"><span data-stu-id="59650-128">To start, these calls are always *synchronous* and will block the operation until a result is returned or the request times outs.</span></span> <span data-ttu-id="59650-129">Ciò che era una volta indipendenti, indipendenti, in grado di evolversi in modo indipendente e distribuito di frequente, ora vengono collegati tra loro.</span><span class="sxs-lookup"><span data-stu-id="59650-129">What were once self-contained, independent services, able to evolve independently and deploy frequently, now become coupled to each other.</span></span> <span data-ttu-id="59650-130">Quando l'accoppiamento tra i microservizi aumenta, i vantaggi dell'architettura diminuiscono.</span><span class="sxs-lookup"><span data-stu-id="59650-130">As coupling among microservices increase, their architectural benefits diminish.</span></span>

<span data-ttu-id="59650-131">L'esecuzione di una richiesta non frequente che esegue una singola chiamata HTTP diretta a un altro microservizio può essere accettabile per alcuni sistemi.</span><span class="sxs-lookup"><span data-stu-id="59650-131">Executing an infrequent request that makes a single direct HTTP call to another microservice might be acceptable for some systems.</span></span> <span data-ttu-id="59650-132">Tuttavia, le chiamate di volumi elevati che richiamano chiamate HTTP dirette a più microservizi non sono consigliate.</span><span class="sxs-lookup"><span data-stu-id="59650-132">However, high-volume calls that invoke direct HTTP calls to multiple microservices aren't advisable.</span></span> <span data-ttu-id="59650-133">Possono aumentare la latenza e influire negativamente sulle prestazioni, sulla scalabilità e sulla disponibilità del sistema.</span><span class="sxs-lookup"><span data-stu-id="59650-133">They can increase latency and negatively impact the performance, scalability, and availability of your system.</span></span> <span data-ttu-id="59650-134">Ancora peggio, una serie Prolong di comunicazione HTTP diretta può condurre a catene complete e complesse di chiamate a microservizi sincroni, illustrate nella figura 4-9:</span><span class="sxs-lookup"><span data-stu-id="59650-134">Even worse, a long series of direct HTTP communication can lead to deep and complex chains of synchronous microservices calls, shown in Figure 4-9:</span></span>

![Concatenamento di query HTTP](./media/chaining-http-queries.png)

<span data-ttu-id="59650-136">**Figura 4-9**.</span><span class="sxs-lookup"><span data-stu-id="59650-136">**Figure 4-9**.</span></span> <span data-ttu-id="59650-137">Concatenamento di query HTTP</span><span class="sxs-lookup"><span data-stu-id="59650-137">Chaining HTTP queries</span></span>

<span data-ttu-id="59650-138">È certamente possibile immaginare il rischio nella progettazione mostrata nell'immagine precedente.</span><span class="sxs-lookup"><span data-stu-id="59650-138">You can certainly imagine the risk in the design shown in the previous image.</span></span> <span data-ttu-id="59650-139">Cosa accade se il \#passaggio 3 ha esito negativo?</span><span class="sxs-lookup"><span data-stu-id="59650-139">What happens if Step \#3 fails?</span></span> <span data-ttu-id="59650-140">O il \#passaggio 8 ha esito negativo?</span><span class="sxs-lookup"><span data-stu-id="59650-140">Or Step \#8 fails?</span></span> <span data-ttu-id="59650-141">Come si esegue il ripristino?</span><span class="sxs-lookup"><span data-stu-id="59650-141">How do you recover?</span></span> <span data-ttu-id="59650-142">Cosa accade se \#il passaggio 6 è lento perché il servizio sottostante è occupato?</span><span class="sxs-lookup"><span data-stu-id="59650-142">What if Step \#6 is slow because the underlying service is busy?</span></span> <span data-ttu-id="59650-143">Come continuare?</span><span class="sxs-lookup"><span data-stu-id="59650-143">How do you continue?</span></span> <span data-ttu-id="59650-144">Anche se tutto funziona correttamente, si può pensare alla latenza utilizzata da questa chiamata, ovvero la somma della latenza di ogni passaggio.</span><span class="sxs-lookup"><span data-stu-id="59650-144">Even if all works correctly, think of the latency this call would incur, which is the sum of the latency of each step.</span></span>

<span data-ttu-id="59650-145">L'elevato livello di accoppiamento nell'immagine precedente suggerisce che i servizi non sono stati modellati in modo ottimale.</span><span class="sxs-lookup"><span data-stu-id="59650-145">The large degree of coupling in the previous image suggests the services weren't optimally modeled.</span></span> <span data-ttu-id="59650-146">Behoove al team di rivedere la loro progettazione.</span><span class="sxs-lookup"><span data-stu-id="59650-146">It would behoove the team to revisit their design.</span></span>

### <a name="materialized-view-pattern"></a><span data-ttu-id="59650-147">Modello di vista materializzata</span><span class="sxs-lookup"><span data-stu-id="59650-147">Materialized View pattern</span></span>

<span data-ttu-id="59650-148">Una delle opzioni più diffuse per la rimozione dell'accoppiamento di microservizi è il [modello di vista materializzata](https://docs.microsoft.com/azure/architecture/patterns/materialized-view).</span><span class="sxs-lookup"><span data-stu-id="59650-148">A popular option for removing microservice coupling is the [Materialized View pattern](https://docs.microsoft.com/azure/architecture/patterns/materialized-view).</span></span> <span data-ttu-id="59650-149">Con questo modello, un microservizio archivia la propria copia locale e denormalizzata dei dati di proprietà di altri servizi.</span><span class="sxs-lookup"><span data-stu-id="59650-149">With this pattern, a microservice stores its own local, denormalized copy of data that's owned by other services.</span></span> <span data-ttu-id="59650-150">Invece del microservizio carrello acquisti che esegue query sul catalogo dei prodotti e sui microservizi tariffari, gestisce la propria copia locale di tali dati.</span><span class="sxs-lookup"><span data-stu-id="59650-150">Instead of the Shopping Basket microservice querying the Product Catalog and Pricing microservices, it maintains its own local copy of that data.</span></span> <span data-ttu-id="59650-151">Questo modello Elimina l'accoppiamento non necessario e migliora l'affidabilità e il tempo di risposta.</span><span class="sxs-lookup"><span data-stu-id="59650-151">This pattern eliminates unnecessary coupling and improves reliability and response time.</span></span> <span data-ttu-id="59650-152">L'intera operazione viene eseguita all'interno di un singolo processo.</span><span class="sxs-lookup"><span data-stu-id="59650-152">The entire operation executes inside a single process.</span></span> <span data-ttu-id="59650-153">Questo modello e altri problemi relativi ai dati vengono esaminati nel capitolo 5.</span><span class="sxs-lookup"><span data-stu-id="59650-153">We explore this pattern and other data concerns in Chapter 5.</span></span>

### <a name="service-aggregator-pattern"></a><span data-ttu-id="59650-154">Modello di Service aggregator</span><span class="sxs-lookup"><span data-stu-id="59650-154">Service Aggregator Pattern</span></span>

<span data-ttu-id="59650-155">Un'altra opzione per eliminare l'accoppiamento da microservizio a microservizio è un [microservizio aggregatore](https://devblogs.microsoft.com/cesardelatorre/designing-and-implementing-api-gateways-with-ocelot-in-a-microservices-and-container-based-architecture/), illustrato in viola nella figura 4-10.</span><span class="sxs-lookup"><span data-stu-id="59650-155">Another option for eliminating microservice-to-microservice coupling is an [Aggregator microservice](https://devblogs.microsoft.com/cesardelatorre/designing-and-implementing-api-gateways-with-ocelot-in-a-microservices-and-container-based-architecture/), shown in purple in Figure 4-10.</span></span>

![Servizio aggregator](./media/aggregator-service.png)

<span data-ttu-id="59650-157">**Figura 4-10**.</span><span class="sxs-lookup"><span data-stu-id="59650-157">**Figure 4-10**.</span></span> <span data-ttu-id="59650-158">Microservizio aggregator</span><span class="sxs-lookup"><span data-stu-id="59650-158">Aggregator microservice</span></span>

<span data-ttu-id="59650-159">Il modello isola un'operazione che effettua chiamate a più microservizi back-end, centralizzando la logica in un microservizio specializzato.</span><span class="sxs-lookup"><span data-stu-id="59650-159">The pattern isolates an operation that makes calls to multiple back-end microservices, centralizing its logic into a specialized microservice.</span></span>  <span data-ttu-id="59650-160">Il microservizio Purple checkout aggregator nella figura precedente Orchestra il flusso di lavoro per l'operazione di estrazione.</span><span class="sxs-lookup"><span data-stu-id="59650-160">The purple checkout aggregator microservice in the previous figure orchestrates the workflow for the Checkout operation.</span></span> <span data-ttu-id="59650-161">Include le chiamate a diversi microservizi back-end in ordine sequenziale.</span><span class="sxs-lookup"><span data-stu-id="59650-161">It includes calls to several back-end microservices in a sequenced order.</span></span> <span data-ttu-id="59650-162">I dati del flusso di lavoro vengono aggregati e restituiti al chiamante.</span><span class="sxs-lookup"><span data-stu-id="59650-162">Data from the workflow is aggregated and returned to the caller.</span></span> <span data-ttu-id="59650-163">Sebbene implementi ancora le chiamate HTTP dirette, il microservizio aggregator riduce le dipendenze dirette tra i microservizi back-end.</span><span class="sxs-lookup"><span data-stu-id="59650-163">While it still implements direct HTTP calls, the aggregator microservice reduces direct dependencies among back-end microservices.</span></span>

### <a name="requestreply-pattern"></a><span data-ttu-id="59650-164">Modello di richiesta/risposta</span><span class="sxs-lookup"><span data-stu-id="59650-164">Request/Reply Pattern</span></span>

<span data-ttu-id="59650-165">Un altro approccio per separare i messaggi HTTP sincroni è un [modello Request/Reply](https://www.enterpriseintegrationpatterns.com/patterns/messaging/RequestReply.html), che usa la comunicazione di Accodamento.</span><span class="sxs-lookup"><span data-stu-id="59650-165">Another approach for decoupling synchronous HTTP messages is a [Request-Reply Pattern](https://www.enterpriseintegrationpatterns.com/patterns/messaging/RequestReply.html), which uses queuing communication.</span></span> <span data-ttu-id="59650-166">La comunicazione con una coda è sempre un canale unidirezionale con un producer che invia il messaggio e il consumer che lo riceve.</span><span class="sxs-lookup"><span data-stu-id="59650-166">Communication using a queue is always a one-way channel, with a producer sending the message and consumer receiving it.</span></span> <span data-ttu-id="59650-167">Con questo modello, vengono implementate sia una coda di richieste che una coda di risposta, illustrate nella figura 4-11.</span><span class="sxs-lookup"><span data-stu-id="59650-167">With this pattern, both a request queue and response queue are implemented, shown in Figure 4-11.</span></span>

![Modello Request/Reply](./media/request-reply-pattern.png)

<span data-ttu-id="59650-169">**Figura 4-11**.</span><span class="sxs-lookup"><span data-stu-id="59650-169">**Figure 4-11**.</span></span> <span data-ttu-id="59650-170">Modello Request/Reply</span><span class="sxs-lookup"><span data-stu-id="59650-170">Request-reply pattern</span></span>

<span data-ttu-id="59650-171">In questo caso, il producer di messaggi crea un messaggio basato su query che contiene un ID di correlazione univoco e lo inserisce in una coda di richieste.</span><span class="sxs-lookup"><span data-stu-id="59650-171">Here, the message producer creates a query-based message that contains a unique correlation ID and places it into a request queue.</span></span> <span data-ttu-id="59650-172">Il servizio consumer rimuove dalla coda i messaggi, li elabora e inserisce la risposta nella coda di risposta con lo stesso ID di correlazione.</span><span class="sxs-lookup"><span data-stu-id="59650-172">The consuming service dequeues the messages, processes it and places the response into the response queue with the same correlation ID.</span></span> <span data-ttu-id="59650-173">Il servizio Producer rimuove il messaggio dalla coda, ne corrisponde l'ID di correlazione e continua l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="59650-173">The producer service dequeues the message, matches it with the correlation ID and continues processing.</span></span> <span data-ttu-id="59650-174">Le code sono descritte in dettaglio nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="59650-174">We cover queues in detail in the next section.</span></span>

## <a name="commands"></a><span data-ttu-id="59650-175">Comandi:</span><span class="sxs-lookup"><span data-stu-id="59650-175">Commands</span></span>

<span data-ttu-id="59650-176">Un altro tipo di interazione di comunicazione è un *comando*.</span><span class="sxs-lookup"><span data-stu-id="59650-176">Another type of communication interaction is a *command*.</span></span> <span data-ttu-id="59650-177">Un microservizio può richiedere un altro microservizio per eseguire un'azione.</span><span class="sxs-lookup"><span data-stu-id="59650-177">A microservice may need another microservice to perform an action.</span></span> <span data-ttu-id="59650-178">Il microservizio degli ordini potrebbe richiedere il microservizio shipping per creare una spedizione per un ordine approvato.</span><span class="sxs-lookup"><span data-stu-id="59650-178">The Ordering microservice may need the Shipping microservice to create a shipment for an approved order.</span></span> <span data-ttu-id="59650-179">Nella figura 4-12, un microservizio, denominato Producer, invia un messaggio a un altro microservizio, il consumer, che lo comanda per eseguire un'operazione.</span><span class="sxs-lookup"><span data-stu-id="59650-179">In Figure 4-12, one microservice, called a Producer, sends a message to another microservice, the Consumer, commanding it to do something.</span></span>

![Interazione del comando con una coda](./media/command-interaction-with-queue.png)

<span data-ttu-id="59650-181">**Figura 4-12**.</span><span class="sxs-lookup"><span data-stu-id="59650-181">**Figure 4-12**.</span></span> <span data-ttu-id="59650-182">Interazione del comando con una coda</span><span class="sxs-lookup"><span data-stu-id="59650-182">Command interaction with a queue</span></span>

<span data-ttu-id="59650-183">In genere, il producer non richiede una risposta e può *attivare e dimenticare* il messaggio.</span><span class="sxs-lookup"><span data-stu-id="59650-183">Most often, the Producer doesn't require a response and can *fire-and-forget* the message.</span></span> <span data-ttu-id="59650-184">Se è necessaria una risposta, il consumer invia un messaggio separato al producer su un altro canale.</span><span class="sxs-lookup"><span data-stu-id="59650-184">If a reply is needed, the Consumer sends a separate message back to Producer on another channel.</span></span> <span data-ttu-id="59650-185">Un messaggio di comando viene inviato meglio in modo asincrono con una coda di messaggi.</span><span class="sxs-lookup"><span data-stu-id="59650-185">A command message is best sent asynchronously with a message queue.</span></span> <span data-ttu-id="59650-186">supportato da un broker di messaggi Lightweight.</span><span class="sxs-lookup"><span data-stu-id="59650-186">supported by a lightweight message broker.</span></span> <span data-ttu-id="59650-187">Nel diagramma precedente si noti come una coda separa e separa entrambi i servizi.</span><span class="sxs-lookup"><span data-stu-id="59650-187">In the previous diagram, note how a queue separates and decouples both services.</span></span>

<span data-ttu-id="59650-188">Una coda di messaggi è un costrutto intermediario attraverso il quale un producer e un consumer passano un messaggio.</span><span class="sxs-lookup"><span data-stu-id="59650-188">A message queue is an intermediary construct through which a producer and consumer pass a message.</span></span> <span data-ttu-id="59650-189">Le code implementano un modello di messaggistica Point-to-Point asincrono.</span><span class="sxs-lookup"><span data-stu-id="59650-189">Queues implement an asynchronous, point-to-point messaging pattern.</span></span> <span data-ttu-id="59650-190">Il produttore sa dove deve essere inviato un comando e viene indirizzato in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="59650-190">The Producer knows where a command needs to be sent and routes appropriately.</span></span> <span data-ttu-id="59650-191">La coda garantisce che un messaggio venga elaborato esattamente da una delle istanze del consumer che eseguono la lettura dal canale.</span><span class="sxs-lookup"><span data-stu-id="59650-191">The queue guarantees that a message is processed by exactly one of the consumer instances that are reading from the channel.</span></span> <span data-ttu-id="59650-192">In questo scenario, il servizio Producer o consumer può essere scalato in orizzontale senza influire sull'altro.</span><span class="sxs-lookup"><span data-stu-id="59650-192">In this scenario, either the producer or consumer service can scale out without affecting the other.</span></span> <span data-ttu-id="59650-193">Inoltre, le tecnologie possono essere diversi su ogni lato, ovvero potrebbe essere presente un microservizio Java che chiama un microservizio [Golang](https://golang.org) .</span><span class="sxs-lookup"><span data-stu-id="59650-193">As well, technologies can be disparate on each side, meaning that we might have a Java microservice calling a [Golang](https://golang.org) microservice.</span></span>

<span data-ttu-id="59650-194">Nel capitolo 1, abbiamo parlato dei *servizi di supporto*.</span><span class="sxs-lookup"><span data-stu-id="59650-194">In chapter 1, we talked about *backing services*.</span></span> <span data-ttu-id="59650-195">I servizi di supporto sono risorse ausiliarie su cui dipendono i sistemi nativi del cloud.</span><span class="sxs-lookup"><span data-stu-id="59650-195">Backing services are ancillary resources upon which cloud-native systems depend.</span></span> <span data-ttu-id="59650-196">Le code di messaggi sono servizi di supporto.</span><span class="sxs-lookup"><span data-stu-id="59650-196">Message queues are backing services.</span></span> <span data-ttu-id="59650-197">Il cloud di Azure supporta due tipi di code di messaggi che possono essere utilizzati dai sistemi nativi del cloud per implementare la messaggistica dei comandi: le code di archiviazione di Azure e le code del bus di servizio di Azure.</span><span class="sxs-lookup"><span data-stu-id="59650-197">The Azure cloud supports two types of message queues that your cloud-native systems can consume to implement command messaging: Azure Storage Queues and Azure Service Bus Queues.</span></span>

### <a name="azure-storage-queues"></a><span data-ttu-id="59650-198">Code di Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="59650-198">Azure Storage Queues</span></span>

<span data-ttu-id="59650-199">Le code di archiviazione di Azure offrono una semplice infrastruttura di Accodamento, veloce, conveniente e supportata dagli account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="59650-199">Azure storage queues offer a simple queueing infrastructure that is fast, affordable, and backed by Azure storage accounts.</span></span>

<span data-ttu-id="59650-200">Le [code di archiviazione di Azure](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction) includono un meccanismo di accodamento basato su REST con messaggistica affidabile e persistente.</span><span class="sxs-lookup"><span data-stu-id="59650-200">[Azure Storage Queues](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction) feature a REST-based queuing mechanism with reliable and persistent messaging.</span></span> <span data-ttu-id="59650-201">Forniscono un set di funzionalità minime, ma sono convenienti e archiviano milioni di messaggi.</span><span class="sxs-lookup"><span data-stu-id="59650-201">They provide a minimal feature set, but are inexpensive and store millions of messages.</span></span> <span data-ttu-id="59650-202">La capacità varia fino a 500 TB.</span><span class="sxs-lookup"><span data-stu-id="59650-202">Their capacity ranges up to 500 TB.</span></span> <span data-ttu-id="59650-203">Un singolo messaggio può avere dimensioni massime di 64 KB.</span><span class="sxs-lookup"><span data-stu-id="59650-203">A single message can be up to 64 KB in size.</span></span>

<span data-ttu-id="59650-204">È possibile accedere ai messaggi da qualsiasi parte del mondo mediante chiamate autenticate tramite HTTP o HTTPS.</span><span class="sxs-lookup"><span data-stu-id="59650-204">You can access messages from anywhere in the world via authenticated calls using HTTP or HTTPS.</span></span> <span data-ttu-id="59650-205">Le code di archiviazione possono essere scalate in un numero elevato di client simultanei per gestire i picchi di traffico.</span><span class="sxs-lookup"><span data-stu-id="59650-205">Storage queues can scale out to large numbers of concurrent clients to handle traffic spikes.</span></span>

<span data-ttu-id="59650-206">Detto ciò, esistono alcune limitazioni al servizio:</span><span class="sxs-lookup"><span data-stu-id="59650-206">That said, there are limitations with the service:</span></span>

- <span data-ttu-id="59650-207">L'ordine del messaggio non è garantito.</span><span class="sxs-lookup"><span data-stu-id="59650-207">Message order isn't guaranteed.</span></span>

- <span data-ttu-id="59650-208">Un messaggio può essere mantenuto solo per sette giorni prima di essere rimosso automaticamente.</span><span class="sxs-lookup"><span data-stu-id="59650-208">A message can only persist for seven days before it's automatically removed.</span></span>

- <span data-ttu-id="59650-209">Il supporto per la gestione dello stato, il rilevamento di duplicati o le transazioni non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="59650-209">Support for state management, duplicate detection, or transactions isn't available.</span></span>

<span data-ttu-id="59650-210">La figura 4-13 Mostra la gerarchia di una coda di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="59650-210">Figure 4-13 shows the hierarchy of an Azure Storage Queue.</span></span>

![Gerarchia della coda di archiviazione](./media/storage-queue-hierarchy.png)

<span data-ttu-id="59650-212">**Figura 4-13**.</span><span class="sxs-lookup"><span data-stu-id="59650-212">**Figure 4-13**.</span></span> <span data-ttu-id="59650-213">Gerarchia della coda di archiviazione</span><span class="sxs-lookup"><span data-stu-id="59650-213">Storage queue hierarchy</span></span>

<span data-ttu-id="59650-214">Nella figura precedente si noti come le code di archiviazione archiviano i messaggi nell'account di archiviazione di Azure sottostante.</span><span class="sxs-lookup"><span data-stu-id="59650-214">In the previous figure, note how storage queues store their messages in the underlying Azure Storage account.</span></span>

<span data-ttu-id="59650-215">Per gli sviluppatori, Microsoft fornisce diverse librerie lato client e lato server per l'elaborazione delle code di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="59650-215">For developers, Microsoft provides several client and server-side libraries for Storage queue processing.</span></span> <span data-ttu-id="59650-216">Sono supportate la maggior parte delle piattaforme principali, tra cui .NET, Java, JavaScript, Ruby, Python e go.</span><span class="sxs-lookup"><span data-stu-id="59650-216">Most major platforms are supported including .NET, Java, JavaScript, Ruby, Python, and Go.</span></span> <span data-ttu-id="59650-217">Gli sviluppatori non devono mai comunicare direttamente con queste librerie.</span><span class="sxs-lookup"><span data-stu-id="59650-217">Developers should never communicate directly with these libraries.</span></span> <span data-ttu-id="59650-218">In questo modo il codice del microservizio viene abbinato al Servizio di accodamento di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="59650-218">Doing so will tightly couple your microservice code to the Azure Storage Queue service.</span></span> <span data-ttu-id="59650-219">È consigliabile isolare i dettagli di implementazione dell'API.</span><span class="sxs-lookup"><span data-stu-id="59650-219">It's a better practice to insulate the implementation details of the API.</span></span> <span data-ttu-id="59650-220">Introduce un livello di intermediazione, o un'API intermedia, che espone operazioni generiche e incapsula la libreria concreta.</span><span class="sxs-lookup"><span data-stu-id="59650-220">Introduce an intermediation layer, or intermediate API, that exposes generic operations and encapsulates the concrete library.</span></span> <span data-ttu-id="59650-221">Questo accoppiamento libero consente di scambiare un servizio di Accodamento per un altro senza dover apportare modifiche al codice del servizio principale.</span><span class="sxs-lookup"><span data-stu-id="59650-221">This loose coupling enables you to swap out one queuing service for another without having to make changes to the mainline service code.</span></span>

<span data-ttu-id="59650-222">Le code di archiviazione di Azure rappresentano un'opzione economica per implementare la messaggistica dei comandi nelle applicazioni native del cloud.</span><span class="sxs-lookup"><span data-stu-id="59650-222">Azure Storage queues are an economical option to implement command messaging in your cloud-native applications.</span></span> <span data-ttu-id="59650-223">In particolare, se le dimensioni della coda superano 80 GB o un set di funzionalità semplice è accettabile.</span><span class="sxs-lookup"><span data-stu-id="59650-223">Especially when a queue size will exceed 80 GB, or a simple feature set is acceptable.</span></span> <span data-ttu-id="59650-224">Paghi solo per l'archiviazione dei messaggi; non sono previsti addebiti orari fissi.</span><span class="sxs-lookup"><span data-stu-id="59650-224">You only pay for the storage of the messages; there are no fixed hourly charges.</span></span>

### <a name="azure-service-bus-queues"></a><span data-ttu-id="59650-225">Code del bus di servizio di Azure</span><span class="sxs-lookup"><span data-stu-id="59650-225">Azure Service Bus Queues</span></span>

<span data-ttu-id="59650-226">Per i requisiti di messaggistica più complessi, prendere in considerazione le code del bus di servizio di Azure.</span><span class="sxs-lookup"><span data-stu-id="59650-226">For more complex messaging requirements, consider Azure Service Bus queues.</span></span>

<span data-ttu-id="59650-227">Il [bus di servizio di Azure](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview) supporta un modello di *messaggistica negoziata*che si trova in cima a un'infrastruttura di messaggi affidabile.</span><span class="sxs-lookup"><span data-stu-id="59650-227">Sitting atop a robust message infrastructure, [Azure Service Bus](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview) supports a *brokered messaging model*.</span></span> <span data-ttu-id="59650-228">I messaggi vengono archiviati in modo affidabile in un broker, ovvero la coda, fino alla ricezione da parte del consumer.</span><span class="sxs-lookup"><span data-stu-id="59650-228">Messages are reliably stored in a broker (the queue) until received by the consumer.</span></span> <span data-ttu-id="59650-229">La coda garantisce il recapito dei messaggi FIFO (First-in/First-out), rispettando l'ordine in cui i messaggi sono stati aggiunti alla coda.</span><span class="sxs-lookup"><span data-stu-id="59650-229">The queue guarantees First-In/First-Out (FIFO) message delivery, respecting the order in which messages were added to the queue.</span></span>

<span data-ttu-id="59650-230">Le dimensioni di un messaggio possono essere molto più grandi, fino a 256 KB.</span><span class="sxs-lookup"><span data-stu-id="59650-230">The size of a message can be much larger, up to 256 KB.</span></span> <span data-ttu-id="59650-231">I messaggi vengono mantenuti nella coda per un periodo di tempo illimitato.</span><span class="sxs-lookup"><span data-stu-id="59650-231">Messages are persisted in the queue for an unlimited period of time.</span></span> <span data-ttu-id="59650-232">Il bus di servizio supporta non solo le chiamate basate su HTTP, ma offre anche il supporto completo per il [protocollo AMQP](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-amqp-overview).</span><span class="sxs-lookup"><span data-stu-id="59650-232">Service Bus supports not only HTTP-based calls, but also provides full support for the [AMQP protocol](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-amqp-overview).</span></span> <span data-ttu-id="59650-233">AMQP è uno standard aperto tra più fornitori che supporta un protocollo binario e livelli più elevati di affidabilità.</span><span class="sxs-lookup"><span data-stu-id="59650-233">AMQP is an open-standard across vendors that supports a binary protocol and higher degrees of reliability.</span></span>

<span data-ttu-id="59650-234">Il bus di servizio offre un set completo di funzionalità, tra cui il [supporto delle transazioni](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions) e una [funzionalità di rilevamento dei duplicati](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection).</span><span class="sxs-lookup"><span data-stu-id="59650-234">Service Bus provides a rich set of features, including [transaction support](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions) and a [duplicate detection feature](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection).</span></span> <span data-ttu-id="59650-235">La coda garantisce il recapito "al massimo" per messaggio.</span><span class="sxs-lookup"><span data-stu-id="59650-235">The queue guarantees "at most once delivery" per message.</span></span> <span data-ttu-id="59650-236">Elimina automaticamente un messaggio che è già stato inviato.</span><span class="sxs-lookup"><span data-stu-id="59650-236">It automatically discards a message that has already been sent.</span></span> <span data-ttu-id="59650-237">Se un Producer è in dubbio, può inviare nuovamente lo stesso messaggio e il bus di servizio garantisce che venga elaborata una sola copia.</span><span class="sxs-lookup"><span data-stu-id="59650-237">If a producer is in doubt, it can resend the same message, and Service Bus guarantees that only one copy will be processed.</span></span> <span data-ttu-id="59650-238">Il rilevamento dei duplicati evita di dover creare un impianto aggiuntivo di infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="59650-238">Duplicate detection frees you from  having to build additional infrastructure plumbing.</span></span>

<span data-ttu-id="59650-239">Altre due funzionalità aziendali sono il partizionamento e le sessioni.</span><span class="sxs-lookup"><span data-stu-id="59650-239">Two more enterprise features are partitioning and sessions.</span></span> <span data-ttu-id="59650-240">Una coda del bus di servizio convenzionale viene gestita da un singolo broker di messaggi e archiviato in un singolo archivio di messaggi.</span><span class="sxs-lookup"><span data-stu-id="59650-240">A conventional Service Bus queue is handled by a single message broker and stored in a single message store.</span></span> <span data-ttu-id="59650-241">Tuttavia, il [partizionamento del bus di servizio](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) suddivide la coda tra più broker di messaggi e archivi di messaggi.</span><span class="sxs-lookup"><span data-stu-id="59650-241">But, [Service Bus Partitioning](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) spreads the queue across multiple message brokers and message stores.</span></span> <span data-ttu-id="59650-242">La velocità effettiva complessiva non è più limitata dalle prestazioni di un singolo broker messaggi o archivio di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="59650-242">The overall throughput is no longer limited by the performance of a single message broker or messaging store.</span></span> <span data-ttu-id="59650-243">Un'interruzione temporanea di un archivio di messaggistica non esegue il rendering di una coda partizionata non disponibile.</span><span class="sxs-lookup"><span data-stu-id="59650-243">A temporary outage of a messaging store doesn't render a partitioned queue unavailable.</span></span>

<span data-ttu-id="59650-244">Le [sessioni del bus di servizio](https://codingcanvas.com/azure-service-bus-sessions/) forniscono un modo per raggruppare i messaggi correlati.</span><span class="sxs-lookup"><span data-stu-id="59650-244">[Service Bus Sessions](https://codingcanvas.com/azure-service-bus-sessions/) provide a way to group-related messages.</span></span> <span data-ttu-id="59650-245">Si immagini uno scenario del flusso di lavoro in cui i messaggi devono essere elaborati insieme e l'operazione è stata completata alla fine.</span><span class="sxs-lookup"><span data-stu-id="59650-245">Imagine a workflow scenario where messages must be processed together and the operation completed at the end.</span></span> <span data-ttu-id="59650-246">Per sfruttare i vantaggi, le sessioni devono essere abilitate in modo esplicito per la coda e ogni messaggio correlato deve contenere lo stesso ID di sessione.</span><span class="sxs-lookup"><span data-stu-id="59650-246">To take advantage, sessions must be explicitly enabled for the queue and each related messaged must contain the same session ID.</span></span>

<span data-ttu-id="59650-247">Tuttavia, esistono alcuni aspetti importanti: le dimensioni delle code del bus di servizio sono limitate a 80 GB, il che è molto più piccolo rispetto a quello disponibile dalle code di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="59650-247">However, there are some important caveats: Service Bus queues size is limited to 80 GB, which is much smaller than what's available from store queues.</span></span> <span data-ttu-id="59650-248">Inoltre, le code del bus di servizio incorrono un costo di base e un addebito per ogni operazione.</span><span class="sxs-lookup"><span data-stu-id="59650-248">Additionally, Service Bus queues incur a base cost and charge per operation.</span></span>

<span data-ttu-id="59650-249">La figura 4-14 illustra l'architettura di alto livello di una coda del bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="59650-249">Figure 4-14 outlines the high-level architecture of a Service Bus queue.</span></span>

![Coda del bus di servizio](./media/service-bus-queue.png)

<span data-ttu-id="59650-251">**Figura 4-14**.</span><span class="sxs-lookup"><span data-stu-id="59650-251">**Figure 4-14**.</span></span> <span data-ttu-id="59650-252">Coda del bus di servizio</span><span class="sxs-lookup"><span data-stu-id="59650-252">Service Bus queue</span></span>

<span data-ttu-id="59650-253">Nella figura precedente si noti la relazione Point-to-Point.</span><span class="sxs-lookup"><span data-stu-id="59650-253">In the previous figure, note the point-to-point relationship.</span></span> <span data-ttu-id="59650-254">Due istanze dello stesso provider accodano i messaggi in una singola coda del bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="59650-254">Two instances of the same provider are enqueuing messages into a single Service Bus queue.</span></span> <span data-ttu-id="59650-255">Ogni messaggio viene utilizzato da una sola delle tre istanze di consumer a destra.</span><span class="sxs-lookup"><span data-stu-id="59650-255">Each message is consumed by only one of three consumer instances on the right.</span></span> <span data-ttu-id="59650-256">Viene quindi illustrato come implementare la messaggistica in cui i diversi consumer possono essere tutti interessati allo stesso messaggio.</span><span class="sxs-lookup"><span data-stu-id="59650-256">Next, we discuss how to implement messaging where different consumers may all be interested the same message.</span></span>

## <a name="events"></a><span data-ttu-id="59650-257">Eventi</span><span class="sxs-lookup"><span data-stu-id="59650-257">Events</span></span>

<span data-ttu-id="59650-258">Accodamento messaggi è un modo efficace per implementare la comunicazione in cui un producer può inviare un messaggio in modo asincrono a un consumer.</span><span class="sxs-lookup"><span data-stu-id="59650-258">Message queuing is an effective way to implement communication where a producer can asynchronously send a consumer a message.</span></span> <span data-ttu-id="59650-259">Tuttavia, cosa accade quando *molti utenti diversi* sono interessati allo stesso messaggio?</span><span class="sxs-lookup"><span data-stu-id="59650-259">However, what happens when *many different consumers* are interested in the same message?</span></span> <span data-ttu-id="59650-260">Una coda di messaggi dedicata per ogni consumer non avrebbe scalato bene e sarebbe diventato difficile da gestire.</span><span class="sxs-lookup"><span data-stu-id="59650-260">A dedicated message queue for each consumer wouldn't scale well and would become difficult to manage.</span></span>

<span data-ttu-id="59650-261">Per risolvere questo scenario, si passa al terzo tipo di interazione dei messaggi, ovvero l' *evento*.</span><span class="sxs-lookup"><span data-stu-id="59650-261">To address this scenario, we move to the third type of message interaction, the *event*.</span></span> <span data-ttu-id="59650-262">Un microservizio annuncia che si è verificata un'azione.</span><span class="sxs-lookup"><span data-stu-id="59650-262">One microservice announces that an action had occurred.</span></span> <span data-ttu-id="59650-263">Altri microservizi, se interessati, reagiscono all'azione o all'evento.</span><span class="sxs-lookup"><span data-stu-id="59650-263">Other microservices, if interested, react to the action, or event.</span></span>

<span data-ttu-id="59650-264">L'evento è un processo in due passaggi.</span><span class="sxs-lookup"><span data-stu-id="59650-264">Eventing is a two-step process.</span></span> <span data-ttu-id="59650-265">Per una modifica dello stato, un microservizio pubblica un evento in un broker di messaggi, rendendolo disponibile per qualsiasi altro microservizio interessato.</span><span class="sxs-lookup"><span data-stu-id="59650-265">For a given state change, a microservice publishes an event to a message broker, making it available to any other interested microservice.</span></span> <span data-ttu-id="59650-266">Il microservizio interessato viene informato sottoscrivendo l'evento nel broker di messaggi.</span><span class="sxs-lookup"><span data-stu-id="59650-266">The interested microservice is notified by subscribing to the event in the message broker.</span></span> <span data-ttu-id="59650-267">Usare il modello di [pubblicazione/sottoscrizione](https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber) per implementare la [comunicazione basata su eventi](https://docs.microsoft.com/dotnet/standard/microservices-architecture/multi-container-microservice-net-applications/integration-event-based-microservice-communications).</span><span class="sxs-lookup"><span data-stu-id="59650-267">You use the [Publish/Subscribe](https://docs.microsoft.com/azure/architecture/patterns/publisher-subscriber) pattern to implement [event-based communication](https://docs.microsoft.com/dotnet/standard/microservices-architecture/multi-container-microservice-net-applications/integration-event-based-microservice-communications).</span></span>

<span data-ttu-id="59650-268">La figura 4-15 Mostra un microservizio carrello acquisti che pubblica un evento con altri due microservizi che li sottoscrivono.</span><span class="sxs-lookup"><span data-stu-id="59650-268">Figure 4-15 shows a shopping basket microservice publishing an event with two other microservices subscribing to it.</span></span>

![Messaggistica basata sugli eventi](./media/event-driven-messaging.png)

<span data-ttu-id="59650-270">**Figura 4-15**.</span><span class="sxs-lookup"><span data-stu-id="59650-270">**Figure 4-15**.</span></span> <span data-ttu-id="59650-271">Messaggistica basata sugli eventi</span><span class="sxs-lookup"><span data-stu-id="59650-271">Event-Driven messaging</span></span>

<span data-ttu-id="59650-272">Si noti il componente *bus di eventi* che si trova al centro del canale di comunicazione.</span><span class="sxs-lookup"><span data-stu-id="59650-272">Note the *event bus* component that sits in the middle of the communication channel.</span></span> <span data-ttu-id="59650-273">Si tratta di una classe personalizzata che incapsula il broker di messaggi e lo separa dall'applicazione sottostante.</span><span class="sxs-lookup"><span data-stu-id="59650-273">It's a custom class that encapsulates the message broker and decouples it from the underlying application.</span></span> <span data-ttu-id="59650-274">I microservizi di ordinamento e inventario operano in modo indipendente sull'evento senza alcuna conoscenza dell'altro, né nel microservizio acquisti.</span><span class="sxs-lookup"><span data-stu-id="59650-274">The ordering and inventory microservices independently operate the event with no knowledge of each other, nor the shopping basket microservice.</span></span> <span data-ttu-id="59650-275">Quando l'evento registrato viene pubblicato nel bus di eventi, agisce su di esso.</span><span class="sxs-lookup"><span data-stu-id="59650-275">When the registered event is published to the event bus, they act upon it.</span></span>

<span data-ttu-id="59650-276">Con la gestione degli eventi, la tecnologia di Accodamento viene spostata *negli argomenti*.</span><span class="sxs-lookup"><span data-stu-id="59650-276">With eventing, we move from queuing technology to *topics*.</span></span> <span data-ttu-id="59650-277">Un [argomento](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions) è simile a una coda, ma supporta un modello di messaggistica uno-a-molti.</span><span class="sxs-lookup"><span data-stu-id="59650-277">A [topic](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions) is similar to a queue, but supports a one-to-many messaging pattern.</span></span> <span data-ttu-id="59650-278">Un microservizio pubblica un messaggio.</span><span class="sxs-lookup"><span data-stu-id="59650-278">One microservice publishes a message.</span></span> <span data-ttu-id="59650-279">Più microservizi di sottoscrizione possono scegliere di ricevere e agire sul messaggio.</span><span class="sxs-lookup"><span data-stu-id="59650-279">Multiple subscribing microservices can choose to receive and act upon that message.</span></span> <span data-ttu-id="59650-280">La figura 4-16 illustra l'architettura di un argomento.</span><span class="sxs-lookup"><span data-stu-id="59650-280">Figure 4-16 shows a topic architecture.</span></span>

![Architettura degli argomenti](./media/topic-architecture.png)

<span data-ttu-id="59650-282">**Figura 4-16**.</span><span class="sxs-lookup"><span data-stu-id="59650-282">**Figure 4-16**.</span></span> <span data-ttu-id="59650-283">Architettura degli argomenti</span><span class="sxs-lookup"><span data-stu-id="59650-283">Topic architecture</span></span>

<span data-ttu-id="59650-284">Nella figura precedente, i Publisher inviano messaggi all'argomento.</span><span class="sxs-lookup"><span data-stu-id="59650-284">In the previous figure, publishers send messages to the topic.</span></span> <span data-ttu-id="59650-285">Al termine, i sottoscrittori ricevono messaggi dalle sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="59650-285">At the end, subscribers receive messages from subscriptions.</span></span> <span data-ttu-id="59650-286">Al centro, l'argomento invia messaggi alle sottoscrizioni in base a un set di *regole*, visualizzate in caselle blu scuro.</span><span class="sxs-lookup"><span data-stu-id="59650-286">In the middle, the topic forwards messages to subscriptions based on a set of *rules*, shown in dark blue boxes.</span></span> <span data-ttu-id="59650-287">Le regole fungono da filtro che trasmette messaggi specifici a una sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="59650-287">Rules act as a filter that forward specific messages to a subscription.</span></span> <span data-ttu-id="59650-288">Qui viene inviato un evento "CreateOrder" alla sottoscrizione \#1 e alla sottoscrizione \#3, ma non alla sottoscrizione \#2.</span><span class="sxs-lookup"><span data-stu-id="59650-288">Here, a "CreateOrder" event would be sent to Subscription \#1 and Subscription \#3, but not to Subscription \#2.</span></span> <span data-ttu-id="59650-289">Un evento "OrderCompleted" verrebbe inviato alla sottoscrizione \#2 e alla sottoscrizione \#3.</span><span class="sxs-lookup"><span data-stu-id="59650-289">An "OrderCompleted" event would be sent to Subscription \#2 and Subscription \#3.</span></span>

<span data-ttu-id="59650-290">Il cloud di Azure supporta due servizi di argomento diversi: gli argomenti del bus di servizio di Azure e Azure EventGrid.</span><span class="sxs-lookup"><span data-stu-id="59650-290">The Azure cloud supports two different topic services: Azure Service Bus Topics and Azure EventGrid.</span></span>

### <a name="azure-service-bus-topics"></a><span data-ttu-id="59650-291">Argomenti del bus di servizio di Azure</span><span class="sxs-lookup"><span data-stu-id="59650-291">Azure Service Bus Topics</span></span>

<span data-ttu-id="59650-292">Gli [argomenti del bus](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions)di servizio di Azure si trovano sopra lo stesso modello di messaggio negoziato affidabile delle code del bus di servizio di Azure.</span><span class="sxs-lookup"><span data-stu-id="59650-292">Sitting on top of the same robust brokered message model of Azure Service Bus queues are [Azure Service Bus Topics](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-dotnet-how-to-use-topics-subscriptions).</span></span> <span data-ttu-id="59650-293">Un argomento può ricevere messaggi da più autori indipendenti e inviare messaggi a un massimo di 2.000 sottoscrittori.</span><span class="sxs-lookup"><span data-stu-id="59650-293">A topic can receive messages from multiple independent publishers and send messages to up to 2,000 subscribers.</span></span> <span data-ttu-id="59650-294">Le sottoscrizioni possono essere aggiunte o rimosse dinamicamente in fase di esecuzione senza arrestare il sistema o ricreare l'argomento.</span><span class="sxs-lookup"><span data-stu-id="59650-294">Subscriptions can be dynamically added or removed at runtime without stopping the system or recreating the topic.</span></span>

<span data-ttu-id="59650-295">Per gli argomenti sono disponibili anche molte funzionalità avanzate delle code del bus di servizio di Azure, tra cui il [rilevamento dei duplicati](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection) e il [supporto delle transazioni](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions).</span><span class="sxs-lookup"><span data-stu-id="59650-295">Many advanced features from Azure Service Bus queues are also available for topics, including [Duplicate Detection](https://docs.microsoft.com/azure/service-bus-messaging/duplicate-detection) and [Transaction support](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-transactions).</span></span> <span data-ttu-id="59650-296">Per impostazione predefinita, gli argomenti del bus di servizio vengono gestiti da un singolo broker di messaggi e archiviati in un singolo archivio di messaggi.</span><span class="sxs-lookup"><span data-stu-id="59650-296">By default, Service Bus topics are handled by a single message broker and stored in a single message store.</span></span> <span data-ttu-id="59650-297">Il [partizionamento del bus di servizio](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) , tuttavia, consente di ridimensionare un argomento distribuendo questo argomento tra molti broker di messaggi e archivi di messaggi.</span><span class="sxs-lookup"><span data-stu-id="59650-297">But, [Service Bus Partitioning](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-partitioning) scales a topic by spreading it across many message brokers and message stores.</span></span>

<span data-ttu-id="59650-298">Il [recapito dei messaggi pianificato](https://docs.microsoft.com/azure/service-bus-messaging/message-sequencing) contrassegna un messaggio con una data e un'ora specifiche per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="59650-298">[Scheduled Message Delivery](https://docs.microsoft.com/azure/service-bus-messaging/message-sequencing) tags a message with a specific time for processing.</span></span> <span data-ttu-id="59650-299">Il messaggio non verrà visualizzato nell'argomento prima di tale ora.</span><span class="sxs-lookup"><span data-stu-id="59650-299">The message won't appear in the topic before that time.</span></span> <span data-ttu-id="59650-300">Il [rinvio dei messaggi](https://docs.microsoft.com/azure/service-bus-messaging/message-deferral) consente di rinviare un recupero di un messaggio a un momento successivo.</span><span class="sxs-lookup"><span data-stu-id="59650-300">[Message Deferral](https://docs.microsoft.com/azure/service-bus-messaging/message-deferral) enables you to defer a retrieval of a message to a later time.</span></span> <span data-ttu-id="59650-301">Entrambi sono comunemente usati negli scenari di elaborazione del flusso di lavoro in cui le operazioni vengono elaborate in un ordine particolare.</span><span class="sxs-lookup"><span data-stu-id="59650-301">Both are commonly used in workflow processing scenarios where operations are processed in a particular order.</span></span> <span data-ttu-id="59650-302">È possibile posticipare l'elaborazione dei messaggi ricevuti fino al completamento del lavoro precedente.</span><span class="sxs-lookup"><span data-stu-id="59650-302">You can postpone processing of received messages until prior work has been completed.</span></span>

<span data-ttu-id="59650-303">Gli argomenti del bus di servizio sono una tecnologia solida e collaudata per l'abilitazione della comunicazione di pubblicazione/sottoscrizione nei sistemi nativi del cloud.</span><span class="sxs-lookup"><span data-stu-id="59650-303">Service Bus topics are a robust and proven technology for enabling publish/subscribe communication in your cloud-native systems.</span></span>

### <a name="azure-event-grid"></a><span data-ttu-id="59650-304">Griglia di eventi di Azure</span><span class="sxs-lookup"><span data-stu-id="59650-304">Azure Event Grid</span></span>

<span data-ttu-id="59650-305">Mentre il bus di servizio di Azure è un broker di messaggistica collaudato con un set completo di funzionalità aziendali, [griglia di eventi di Azure](https://docs.microsoft.com/azure/event-grid/overview) è il nuovo bambino nel blocco.</span><span class="sxs-lookup"><span data-stu-id="59650-305">While Azure Service Bus is a battle-tested messaging broker with a full set of enterprise features, [Azure Event Grid](https://docs.microsoft.com/azure/event-grid/overview) is the new kid on the block.</span></span>

<span data-ttu-id="59650-306">A prima vista, griglia di eventi può essere simile a un altro sistema di messaggistica basato su argomenti.</span><span class="sxs-lookup"><span data-stu-id="59650-306">At first glance, Event Grid may look like just another topic-based messaging system.</span></span> <span data-ttu-id="59650-307">Tuttavia, è diverso in molti modi.</span><span class="sxs-lookup"><span data-stu-id="59650-307">However, it's different in many ways.</span></span> <span data-ttu-id="59650-308">Con particolare attenzione ai carichi di lavoro basati su eventi, consente l'elaborazione di eventi in tempo reale, l'integrazione con Azure approfondita e una piattaforma open-all su un'infrastruttura senza server.</span><span class="sxs-lookup"><span data-stu-id="59650-308">Focused on event-driven workloads, it enables real-time event processing, deep Azure integration, and an open-platform - all on serverless infrastructure.</span></span> <span data-ttu-id="59650-309">È progettato per applicazioni moderne native del cloud e senza server</span><span class="sxs-lookup"><span data-stu-id="59650-309">It's designed for contemporary cloud-native and serverless applications</span></span>

<span data-ttu-id="59650-310">Come backplane centralizzato degli *eventi*, o pipe, griglia di eventi reagisce agli eventi all'interno delle risorse di Azure e dai propri servizi.</span><span class="sxs-lookup"><span data-stu-id="59650-310">As a centralized *eventing backplane*, or pipe, Event Grid reacts to events inside Azure resources and from your own services.</span></span>

<span data-ttu-id="59650-311">Le notifiche degli eventi vengono pubblicate in un argomento di griglia di eventi, che, a sua volta, instrada ogni evento a una sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="59650-311">Event notifications are published to an Event Grid Topic, which, in turn, routes each event to a subscription.</span></span> <span data-ttu-id="59650-312">I sottoscrittori vengono mappati alle sottoscrizioni e utilizzano gli eventi.</span><span class="sxs-lookup"><span data-stu-id="59650-312">Subscribers map to subscriptions and consume the events.</span></span> <span data-ttu-id="59650-313">Analogamente al bus di servizio, griglia di eventi supporta un *modello di Sottoscrittore filtrato* in cui una sottoscrizione imposta la regola per gli eventi che si desidera ricevere.</span><span class="sxs-lookup"><span data-stu-id="59650-313">Like Service Bus, Event Grid supports a *filtered subscriber model* where a subscription sets rule for the events it wishes to receive.</span></span> <span data-ttu-id="59650-314">Griglia di eventi offre una velocità effettiva rapida con una garanzia di 10 milioni eventi al secondo che consentono il recapito quasi in tempo reale, molto più di quanto può generare il bus di servizio di Azure.</span><span class="sxs-lookup"><span data-stu-id="59650-314">Event Grid provides fast throughput with a guarantee of 10 million events per second enabling near real-time delivery - far more than what Azure Service Bus can generate.</span></span>

<span data-ttu-id="59650-315">Una soluzione ideale per griglia di eventi è l'integrazione completa nell'infrastruttura di Azure.</span><span class="sxs-lookup"><span data-stu-id="59650-315">A sweet spot for Event Grid is its deep integration into the fabric of Azure infrastructure.</span></span> <span data-ttu-id="59650-316">Una risorsa di Azure, ad esempio Cosmos DB, può pubblicare eventi predefiniti direttamente in altre risorse di Azure interessate, senza la necessità di codice personalizzato.</span><span class="sxs-lookup"><span data-stu-id="59650-316">An Azure resource, such as Cosmos DB, can publish built-in events directly to other interested Azure resources - without the need for custom code.</span></span> <span data-ttu-id="59650-317">Griglia di eventi può pubblicare eventi da una sottoscrizione, un gruppo di risorse o un servizio di Azure, offrendo agli sviluppatori un controllo granulare del ciclo di vita delle risorse cloud.</span><span class="sxs-lookup"><span data-stu-id="59650-317">Event Grid can publish events from an Azure Subscription, Resource Group, or Service, giving developers fine-grained control over the lifecycle of cloud resources.</span></span> <span data-ttu-id="59650-318">Tuttavia, griglia di eventi non è limitata ad Azure.</span><span class="sxs-lookup"><span data-stu-id="59650-318">However, Event Grid isn't limited to Azure.</span></span> <span data-ttu-id="59650-319">Si tratta di una piattaforma aperta che può utilizzare eventi HTTP personalizzati pubblicati da applicazioni o servizi di terze parti e indirizzare gli eventi a sottoscrittori esterni.</span><span class="sxs-lookup"><span data-stu-id="59650-319">It's an open platform that can consume custom HTTP events published from applications or third-party services and route events to external subscribers.</span></span>

<span data-ttu-id="59650-320">Quando si pubblicano e sottoscrivono eventi nativi dalle risorse di Azure, non è necessaria alcuna codifica.</span><span class="sxs-lookup"><span data-stu-id="59650-320">When publishing and subscribing to native events from Azure resources, no coding is required.</span></span> <span data-ttu-id="59650-321">Con la semplice configurazione è possibile integrare gli eventi da una risorsa di Azure a un'altra sfruttando il plumbing integrato per gli argomenti e le sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="59650-321">With simple configuration, you can integrate events from one Azure resource to another leveraging built-in plumbing for Topics and Subscriptions.</span></span> <span data-ttu-id="59650-322">La figura 4-17 illustra l'anatomia di griglia di eventi.</span><span class="sxs-lookup"><span data-stu-id="59650-322">Figure 4-17 shows the anatomy of Event Grid.</span></span>

![Anatomia griglia di eventi](./media/event-grid-anatomy.png)

<span data-ttu-id="59650-324">**Figura 4-17**.</span><span class="sxs-lookup"><span data-stu-id="59650-324">**Figure 4-17**.</span></span> <span data-ttu-id="59650-325">Anatomia griglia di eventi</span><span class="sxs-lookup"><span data-stu-id="59650-325">Event Grid anatomy</span></span>

<span data-ttu-id="59650-326">Una differenza principale tra EventGrid e il bus di servizio è il *modello di scambio dei messaggi*sottostante.</span><span class="sxs-lookup"><span data-stu-id="59650-326">A major difference between EventGrid and Service Bus is the underlying *message exchange pattern*.</span></span>

<span data-ttu-id="59650-327">Il bus di servizio implementa un *modello pull* di tipo obsoleto in cui il Sottoscrittore downstream esegue attivamente il polling della sottoscrizione dell'argomento per i nuovi messaggi.</span><span class="sxs-lookup"><span data-stu-id="59650-327">Service Bus implements an older style *pull model* in which the downstream subscriber actively polls the topic subscription for new messages.</span></span> <span data-ttu-id="59650-328">Questo approccio offre al Sottoscrittore il controllo completo della velocità di elaborazione dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="59650-328">On the upside, this approach gives the subscriber full control of the pace at which it processes messages.</span></span> <span data-ttu-id="59650-329">Consente di controllare il momento e il numero di messaggi da elaborare in un determinato momento.</span><span class="sxs-lookup"><span data-stu-id="59650-329">It controls when and how many messages to process at any given time.</span></span> <span data-ttu-id="59650-330">I messaggi non letti rimangono nella sottoscrizione fino a quando non vengono elaborati.</span><span class="sxs-lookup"><span data-stu-id="59650-330">Unread messages remain in the subscription until processed.</span></span> <span data-ttu-id="59650-331">Un difetto significativo è la latenza tra il momento in cui viene generato l'evento e l'operazione di polling che effettua il pull del messaggio nel Sottoscrittore per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="59650-331">A significant shortcoming is the latency between the time the event is generated and the polling operation that pulls that message to the subscriber for processing.</span></span> <span data-ttu-id="59650-332">Inoltre, l'overhead del polling costante per l'evento successivo utilizza risorse e denaro.</span><span class="sxs-lookup"><span data-stu-id="59650-332">Also, the overhead of constant polling for the next event consumes resources and money.</span></span>

<span data-ttu-id="59650-333">EventGrid, tuttavia, è diverso.</span><span class="sxs-lookup"><span data-stu-id="59650-333">EventGrid, however, is different.</span></span> <span data-ttu-id="59650-334">Implementa un *modello push* in cui gli eventi vengono inviati agli EventHandler come ricevuti, offrendo il recapito di eventi quasi in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="59650-334">It implements a *push model* in which events are sent to the EventHandlers as received, giving near real-time event delivery.</span></span> <span data-ttu-id="59650-335">Riduce inoltre i costi quando il servizio viene attivato solo quando è necessario per l'utilizzo di un evento, non sempre come per il polling.</span><span class="sxs-lookup"><span data-stu-id="59650-335">It also reduces cost as the service is triggered only when it's needed to consume an event – not continually as with polling.</span></span> <span data-ttu-id="59650-336">Detto questo, un gestore eventi deve gestire il carico in ingresso e fornire meccanismi di limitazione delle richieste per proteggersi dal sovraccarico.</span><span class="sxs-lookup"><span data-stu-id="59650-336">That said, an event handler must handle the incoming load and provide throttling mechanisms to protect itself from becoming overwhelmed.</span></span> <span data-ttu-id="59650-337">Molti servizi di Azure che usano questi eventi, ad esempio funzioni di Azure e app per la logica, offrono funzionalità di scalabilità automatica automatica per gestire carichi maggiori.</span><span class="sxs-lookup"><span data-stu-id="59650-337">Many Azure services that consume these events, such as Azure Functions and Logic Apps provide automatic autoscaling capabilities to handle increased loads.</span></span>  

<span data-ttu-id="59650-338">Griglia di eventi è un servizio cloud senza server completamente gestito.</span><span class="sxs-lookup"><span data-stu-id="59650-338">Event Grid is a fully managed serverless cloud service.</span></span> <span data-ttu-id="59650-339">Viene scalato dinamicamente in base al traffico e viene addebitato solo per l'utilizzo effettivo, non per la capacità preacquistata.</span><span class="sxs-lookup"><span data-stu-id="59650-339">It dynamically scales based on your traffic and charges you only for your actual usage, not pre-purchased capacity.</span></span> <span data-ttu-id="59650-340">Le prime 100.000 operazioni al mese sono gratuite, ovvero le operazioni definite come ingresso di eventi (notifiche degli eventi in ingresso), i tentativi di recapito delle sottoscrizioni, le chiamate di gestione e il filtraggio in base all'oggetto.</span><span class="sxs-lookup"><span data-stu-id="59650-340">The first 100,000 operations per month are free – operations being defined as event ingress (incoming event notifications), subscription delivery attempts, management calls, and filtering by subject.</span></span> <span data-ttu-id="59650-341">Con la disponibilità del 99,99%, EventGrid garantisce la consegna di un evento entro un periodo di 24 ore, con funzionalità di ripetizione dei tentativi predefinite per il recapito non riuscito.</span><span class="sxs-lookup"><span data-stu-id="59650-341">With 99.99% availability, EventGrid guarantees the delivery of an event within a 24-hour period, with built-in retry functionality for unsuccessful delivery.</span></span> <span data-ttu-id="59650-342">I messaggi non recapitati possono essere spostati in una coda di "Dead-Letter" per la risoluzione.</span><span class="sxs-lookup"><span data-stu-id="59650-342">Undelivered messages can be moved to a "dead-letter" queue for resolution.</span></span>  <span data-ttu-id="59650-343">A differenza del bus di servizio di Azure, griglia di eventi è ottimizzata per prestazioni rapide e non supporta funzionalità quali messaggistica ordinata, transazioni e sessioni.</span><span class="sxs-lookup"><span data-stu-id="59650-343">Unlike Azure Service Bus, Event Grid is tuned for fast performance and doesn't support features like ordered messaging, transactions, and sessions.</span></span>

### <a name="streaming-messages-in-the-azure-cloud"></a><span data-ttu-id="59650-344">Streaming di messaggi nel cloud di Azure</span><span class="sxs-lookup"><span data-stu-id="59650-344">Streaming messages in the Azure cloud</span></span>

<span data-ttu-id="59650-345">Il bus di servizio e griglia di eventi di Azure offrono un supporto eccezionale per le applicazioni che espongono singoli eventi discreti, ad esempio un nuovo documento inserito in un Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="59650-345">Azure Service Bus and Event Grid provide great support for applications that expose single, discrete events like a new document has been inserted into a Cosmos DB.</span></span> <span data-ttu-id="59650-346">Tuttavia, cosa accade se il sistema nativo del cloud deve elaborare un *flusso di eventi correlati*?</span><span class="sxs-lookup"><span data-stu-id="59650-346">But, what if your cloud-native system needs to process a *stream of related events*?</span></span> <span data-ttu-id="59650-347">I [flussi di eventi](https://docs.microsoft.com/archive/msdn-magazine/2015/february/microsoft-azure-the-rise-of-event-stream-oriented-systems) sono più complessi.</span><span class="sxs-lookup"><span data-stu-id="59650-347">[Event streams](https://docs.microsoft.com/archive/msdn-magazine/2015/february/microsoft-azure-the-rise-of-event-stream-oriented-systems) are more complex.</span></span> <span data-ttu-id="59650-348">In genere sono ordinati in termini di tempo, intercorrelati e devono essere elaborati come un gruppo.</span><span class="sxs-lookup"><span data-stu-id="59650-348">They're typically time-ordered, interrelated, and must be processed as a group.</span></span>

<span data-ttu-id="59650-349">[Hub eventi di Azure](https://azure.microsoft.com/services/event-hubs/) è una piattaforma di streaming di dati e un servizio di inserimento di eventi che raccoglie, trasforma e archivia gli eventi.</span><span class="sxs-lookup"><span data-stu-id="59650-349">[Azure Event Hub](https://azure.microsoft.com/services/event-hubs/) is a data streaming platform and event ingestion service that collects, transforms, and stores events.</span></span> <span data-ttu-id="59650-350">È ottimizzato per acquisire i dati di streaming, ad esempio le notifiche di eventi continui emesse da un contesto di telemetria.</span><span class="sxs-lookup"><span data-stu-id="59650-350">It's fine-tuned to capture streaming data, such as continuous event notifications emitted from a telemetry context.</span></span> <span data-ttu-id="59650-351">Il servizio è altamente scalabile e può archiviare ed [elaborare milioni di eventi al secondo](https://docs.microsoft.com/azure/event-hubs/event-hubs-about).</span><span class="sxs-lookup"><span data-stu-id="59650-351">The service is highly scalable and can store and [process millions of events per second](https://docs.microsoft.com/azure/event-hubs/event-hubs-about).</span></span> <span data-ttu-id="59650-352">Come illustrato nella figura 4-18, spesso si tratta di una porta anteriore per una pipeline di eventi, disaccoppiando il flusso di inserimento dal consumo di eventi.</span><span class="sxs-lookup"><span data-stu-id="59650-352">Shown in Figure 4-18, it's often a front door for an event pipeline, decoupling ingest stream from event consumption.</span></span>

![Hub eventi di Azure](./media/azure-event-hub.png)

<span data-ttu-id="59650-354">**Figura 4-18**.</span><span class="sxs-lookup"><span data-stu-id="59650-354">**Figure 4-18**.</span></span> <span data-ttu-id="59650-355">Hub eventi di Azure</span><span class="sxs-lookup"><span data-stu-id="59650-355">Azure Event Hub</span></span>

<span data-ttu-id="59650-356">Hub eventi supporta la bassa latenza e la conservazione dell'ora configurabile.</span><span class="sxs-lookup"><span data-stu-id="59650-356">Event Hub supports low latency and configurable time retention.</span></span> <span data-ttu-id="59650-357">A differenza delle code e degli argomenti, Hub eventi mantiene i dati degli eventi dopo che è stato letto da un consumer.</span><span class="sxs-lookup"><span data-stu-id="59650-357">Unlike queues and topics, Event Hubs keep event data after it's been read by a consumer.</span></span> <span data-ttu-id="59650-358">Questa funzionalità consente ad altri servizi di analisi dei dati, sia interni che esterni, di riprodurre i dati per un'ulteriore analisi.</span><span class="sxs-lookup"><span data-stu-id="59650-358">This feature enables other data analytic services, both internal and external, to replay the data for further analysis.</span></span> <span data-ttu-id="59650-359">Gli eventi archiviati nell'hub eventi vengono eliminati solo dopo la scadenza del periodo di memorizzazione, che è un giorno per impostazione predefinita, ma configurabile.</span><span class="sxs-lookup"><span data-stu-id="59650-359">Events stored in event hub are only deleted upon expiration of the retention period, which is one day by default, but configurable.</span></span>

<span data-ttu-id="59650-360">Hub eventi supporta i protocolli comuni di pubblicazione degli eventi, inclusi HTTPS e AMQP.</span><span class="sxs-lookup"><span data-stu-id="59650-360">Event Hub supports common event publishing protocols including HTTPS and AMQP.</span></span> <span data-ttu-id="59650-361">Supporta anche Kafka 1,0.</span><span class="sxs-lookup"><span data-stu-id="59650-361">It also supports Kafka 1.0.</span></span> <span data-ttu-id="59650-362">Le [applicazioni Kafka esistenti possono comunicare con l'hub eventi](https://docs.microsoft.com/azure/event-hubs/event-hubs-for-kafka-ecosystem-overview) usando il protocollo Kafka offrendo un'alternativa alla gestione di cluster Kafka di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="59650-362">[Existing Kafka applications can communicate with Event Hub](https://docs.microsoft.com/azure/event-hubs/event-hubs-for-kafka-ecosystem-overview) using the Kafka protocol providing an alternative to managing large Kafka clusters.</span></span> <span data-ttu-id="59650-363">Molti sistemi open source Cloud nativi adottano Kafka.</span><span class="sxs-lookup"><span data-stu-id="59650-363">Many open-source cloud-native systems embrace Kafka.</span></span>

<span data-ttu-id="59650-364">Hub eventi implementa lo streaming di messaggi tramite un [modello consumer partizionato](https://docs.microsoft.com/azure/event-hubs/event-hubs-features) in cui ogni consumer legge solo uno specifico subset, o partizione, del flusso di messaggi.</span><span class="sxs-lookup"><span data-stu-id="59650-364">Event Hubs implements message streaming through a [partitioned consumer model](https://docs.microsoft.com/azure/event-hubs/event-hubs-features) in which each consumer only reads a specific subset, or partition, of the message stream.</span></span> <span data-ttu-id="59650-365">Questo modello consente notevole scalabilità orizzontale per l'elaborazione di eventi e fornisce altre funzionalità incentrate sui flussi che non sono disponibili in code e argomenti.</span><span class="sxs-lookup"><span data-stu-id="59650-365">This pattern enables tremendous horizontal scale for event processing and provides other stream-focused features that are unavailable in queues and topics.</span></span> <span data-ttu-id="59650-366">Una partizione è una sequenza ordinata di eventi contenuta in un hub eventi.</span><span class="sxs-lookup"><span data-stu-id="59650-366">A partition is an ordered sequence of events that is held in an event hub.</span></span> <span data-ttu-id="59650-367">Man mano che arrivano gli eventi più recenti, vengono aggiunti alla fine di questa sequenza.</span><span class="sxs-lookup"><span data-stu-id="59650-367">As newer events arrive, they're added to the end of this sequence.</span></span><span data-ttu-id="59650-368">La figura 4-19 illustra il partizionamento in un hub eventi.</span><span class="sxs-lookup"><span data-stu-id="59650-368"> Figure 4-19 shows partitioning in an Event Hub.</span></span>

![Partizionamento dell'hub eventi](./media/event-hub-partitioning.png)

<span data-ttu-id="59650-370">**Figura 4-19**.</span><span class="sxs-lookup"><span data-stu-id="59650-370">**Figure 4-19**.</span></span> <span data-ttu-id="59650-371">Partizionamento dell'hub eventi</span><span class="sxs-lookup"><span data-stu-id="59650-371">Event Hub partitioning</span></span>

<span data-ttu-id="59650-372">Anziché leggere dalla stessa risorsa, ogni gruppo di consumer viene letto in un subset, o partizione, del flusso di messaggi.</span><span class="sxs-lookup"><span data-stu-id="59650-372">Instead of reading from the same resource, each consumer group reads across a subset, or partition, of the message stream.</span></span>

<span data-ttu-id="59650-373">Per le applicazioni native del cloud che devono trasmettere un numero elevato di eventi, Hub eventi di Azure può essere una soluzione affidabile e conveniente.</span><span class="sxs-lookup"><span data-stu-id="59650-373">For cloud-native applications that must stream large numbers of events, Azure Event Hub can be a robust and affordable solution.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="59650-374">[Precedente](front-end-communication.md)
>[successivo](grpc.md)</span><span class="sxs-lookup"><span data-stu-id="59650-374">[Previous](front-end-communication.md)
[Next](grpc.md)</span></span>
