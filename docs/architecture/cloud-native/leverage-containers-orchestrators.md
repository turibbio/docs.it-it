---
title: Uso di contenitori e agenti di orchestrazione
description: Uso dei contenitori Docker e degli agenti di orchestrazione Kubernetes in Azure
ms.date: 04/13/2020
ms.openlocfilehash: 64c6c0666398d9ccbc87efad18017bf278568fc4
ms.sourcegitcommit: 957c49696eaf048c284ef8f9f8ffeb562357ad95
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/07/2020
ms.locfileid: "82895555"
---
# <a name="leveraging-containers-and-orchestrators"></a><span data-ttu-id="0fe5f-103">Uso di contenitori e agenti di orchestrazione</span><span class="sxs-lookup"><span data-stu-id="0fe5f-103">Leveraging containers and orchestrators</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="0fe5f-104">I contenitori e gli agenti di orchestrazione sono progettati per risolvere i problemi comuni agli approcci di distribuzione monolitica.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-104">Containers and orchestrators are designed to solve problems common to monolithic deployment approaches.</span></span>

## <a name="challenges-with-monolithic-deployments"></a><span data-ttu-id="0fe5f-105">Problemi con le distribuzioni monolitiche</span><span class="sxs-lookup"><span data-stu-id="0fe5f-105">Challenges with monolithic deployments</span></span>

<span data-ttu-id="0fe5f-106">Tradizionalmente, la maggior parte delle applicazioni è stata distribuita come singola unità.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-106">Traditionally, most applications have been deployed as a single unit.</span></span> <span data-ttu-id="0fe5f-107">Tali applicazioni sono definite monolitiche.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-107">Such applications are referred to as a monolith.</span></span> <span data-ttu-id="0fe5f-108">Questo approccio generale per la distribuzione di applicazioni come unità singole, anche se sono costituite da più moduli o assembly, è noto come architettura monolitica, come illustrato nella figura 3-1.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-108">This general approach of deploying applications as single units even if they're composed of multiple modules or assemblies is known as monolithic architecture, as shown in Figure 3-1.</span></span>

![Architettura monolitica.](./media/monolithic-architecture.png)

<span data-ttu-id="0fe5f-110">**Figura 3-1**.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-110">**Figure 3-1**.</span></span> <span data-ttu-id="0fe5f-111">Architettura monolitica.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-111">Monolithic architecture.</span></span>

<span data-ttu-id="0fe5f-112">Anche se hanno il vantaggio di semplicità, le architetture monolitiche affrontano una serie di problemi:</span><span class="sxs-lookup"><span data-stu-id="0fe5f-112">Although they have the benefit of simplicity, monolithic architectures face a number of challenges:</span></span>

### <a name="deployment"></a><span data-ttu-id="0fe5f-113">Distribuzione</span><span class="sxs-lookup"><span data-stu-id="0fe5f-113">Deployment</span></span>

<span data-ttu-id="0fe5f-114">Le applicazioni monolitiche richiedono una distribuzione completa dell'intera applicazione, anche se è stata apportata solo una piccola modifica.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-114">Monolithic applications require a full deployment of the entire application, even if only a small change has been made.</span></span> <span data-ttu-id="0fe5f-115">Le distribuzioni complete possono essere costose e soggette a errori.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-115">Full deployments can be expensive and error prone.</span></span> <span data-ttu-id="0fe5f-116">Inoltre, richiedono il riavvio dell'applicazione, che influisca temporaneamente sull'indisponibilità.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-116">Additionally, they require a restart of the application, which temporarily impacts unavailability.</span></span>

### <a name="scaling"></a><span data-ttu-id="0fe5f-117">Scalabilità</span><span class="sxs-lookup"><span data-stu-id="0fe5f-117">Scaling</span></span>

<span data-ttu-id="0fe5f-118">Un'applicazione monolitica è ospitata interamente in una singola istanza del computer, spesso richiedendo hardware ad alta capacità.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-118">A monolithic application is hosted entirely on a single machine instance, often requiring high-capability hardware.</span></span> <span data-ttu-id="0fe5f-119">Se una parte del monolito richiede la scalabilità, un'altra copia dell'intera applicazione deve essere distribuita in un altro computer.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-119">If any part of the monolith requires scaling, another copy of the entire application must be deployed to another machine.</span></span> <span data-ttu-id="0fe5f-120">Con un Monolith, non è possibile ridimensionare singolarmente i componenti dell'applicazione, perché sono tutti o nulla.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-120">With a monolith, you can't scale application components individually - it's all or nothing.</span></span> <span data-ttu-id="0fe5f-121">Il ridimensionamento di componenti che non richiedono la scalabilità comporta un uso inefficiente e costoso delle risorse.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-121">Scaling components that don't require scaling results in inefficient and costly resource usage.</span></span>

### <a name="environment"></a><span data-ttu-id="0fe5f-122">Ambiente</span><span class="sxs-lookup"><span data-stu-id="0fe5f-122">Environment</span></span>

<span data-ttu-id="0fe5f-123">Le applicazioni monolitiche vengono in genere distribuite in un ambiente host con un sistema operativo preinstallato, un runtime e dipendenze di libreria.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-123">Monolithic applications are typically deployed to a hosting environment with a pre-installed operating system, runtime, and library dependencies.</span></span> <span data-ttu-id="0fe5f-124">Questo ambiente potrebbe non corrispondere a quello in cui l'applicazione è stata sviluppata o testata.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-124">This environment may not match that upon which the application was developed or tested.</span></span> <span data-ttu-id="0fe5f-125">Le incoerenze negli ambienti applicativi rappresentano una fonte comune di problemi per le distribuzioni monolitiche.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-125">Inconsistencies across application environments are a common source of problems for monolithic deployments.</span></span>

### <a name="coupling"></a><span data-ttu-id="0fe5f-126">Accoppiamento</span><span class="sxs-lookup"><span data-stu-id="0fe5f-126">Coupling</span></span>

<span data-ttu-id="0fe5f-127">È probabile che un'applicazione monolitica riscontri un accoppiamento elevato tra i componenti funzionali.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-127">A monolithic application is likely to experience high coupling across its functional components.</span></span> <span data-ttu-id="0fe5f-128">Senza limiti rigidi, le modifiche apportate al sistema spesso generano effetti collaterali indesiderati e costosi.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-128">Without hard boundaries, system changes often result in unintended and costly side effects.</span></span> <span data-ttu-id="0fe5f-129">Le nuove funzionalità e correzioni diventano difficili da implementare e dispendiose in termini di tempo.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-129">New features/fixes become tricky, time-consuming, and expensive to implement.</span></span> <span data-ttu-id="0fe5f-130">Gli aggiornamenti richiedono test completi.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-130">Updates require extensive testing.</span></span> <span data-ttu-id="0fe5f-131">L'accoppiamento rende anche difficile effettuare il refactoring dei componenti o scambiare in implementazioni alternative.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-131">Coupling also makes it difficult to refactor components or swap in alternative implementations.</span></span> <span data-ttu-id="0fe5f-132">Anche se costruita con una stretta separazione dei problemi, l'erosione dell'architettura si imposta in, in quanto la codebase monolitica si deteriora con "casi speciali" senza terminazione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-132">Even when constructed with a strict separation of concerns, architectural erosion sets in as the monolithic code base deteriorates with never-ending "special cases."</span></span>

### <a name="platform-lock-in"></a><span data-ttu-id="0fe5f-133">Blocco della piattaforma</span><span class="sxs-lookup"><span data-stu-id="0fe5f-133">Platform lock-in</span></span>

<span data-ttu-id="0fe5f-134">Un'applicazione monolitica è costruita con un singolo stack di tecnologie.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-134">A monolithic application is constructed with a single technology stack.</span></span> <span data-ttu-id="0fe5f-135">Pur offrendo uniformità, questo impegno può diventare un ostacolo per l'innovazione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-135">While offering uniformity, this commitment can become a barrier to innovation.</span></span> <span data-ttu-id="0fe5f-136">Le nuove funzionalità e i nuovi componenti verranno creati usando lo stack corrente dell'applicazione, anche quando le tecnologie più moderne possono essere la scelta migliore.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-136">New features and components will be built using the application's current stack - even when more modern technologies may be a better choice.</span></span> <span data-ttu-id="0fe5f-137">Un rischio a lungo termine è che lo stack di tecnologie diventa obsoleto e obsoleto.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-137">A longer-term risk is your technology stack becoming outdated and obsolete.</span></span> <span data-ttu-id="0fe5f-138">La riprogettazione di un'intera applicazione in una nuova piattaforma più moderna è molto costosa e rischiosa.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-138">Rearchitecting an entire application to a new, more modern platform is at best expensive and risky.</span></span>

## <a name="what-are-the-benefits-of-containers-and-orchestrators"></a><span data-ttu-id="0fe5f-139">Quali sono i vantaggi dei contenitori e degli agenti di orchestrazione?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-139">What are the benefits of containers and orchestrators?</span></span>

<span data-ttu-id="0fe5f-140">Nel capitolo 1 sono stati introdotti i contenitori.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-140">We introduced containers in Chapter 1.</span></span> <span data-ttu-id="0fe5f-141">È stato evidenziato il modo in cui il cloud native Computing Foundation (CNCF) classifica la contenitori come primo passaggio della [mappa dei percorsi nativa del cloud](https://raw.githubusercontent.com/cncf/trailmap/master/CNCF_TrailMap_latest.png) : linee guida per le aziende che iniziano il percorso nativo del cloud.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-141">We highlighted how the Cloud Native Computing Foundation (CNCF) ranks containerization as the first step in their [Cloud-Native Trail Map](https://raw.githubusercontent.com/cncf/trailmap/master/CNCF_TrailMap_latest.png) - guidance for enterprises beginning their cloud-native journey.</span></span> <span data-ttu-id="0fe5f-142">In questa sezione vengono illustrati i vantaggi dei contenitori.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-142">In this section, we discuss the benefits of containers.</span></span>

<span data-ttu-id="0fe5f-143">Docker è la piattaforma di gestione dei contenitori più diffusa.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-143">Docker is the most popular container management platform.</span></span> <span data-ttu-id="0fe5f-144">Funziona con i contenitori in Linux o Windows.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-144">It works with containers on both Linux or Windows.</span></span> <span data-ttu-id="0fe5f-145">I contenitori offrono ambienti applicativi distinti ma riproducibili che funzionano allo stesso modo in qualsiasi sistema.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-145">Containers provide separate but reproducible application environments that run the same way on any system.</span></span> <span data-ttu-id="0fe5f-146">Questo aspetto li rende perfetti per lo sviluppo e l'hosting di servizi nativi del cloud.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-146">This aspect makes them perfect for developing and hosting cloud-native services.</span></span> <span data-ttu-id="0fe5f-147">I contenitori sono isolati l'uno dall'altro.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-147">Containers are isolated from one another.</span></span> <span data-ttu-id="0fe5f-148">Due contenitori nello stesso hardware host possono avere versioni diverse del software, senza causare conflitti.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-148">Two containers on the same host hardware can have different versions of software, without causing conflicts.</span></span>

<span data-ttu-id="0fe5f-149">I contenitori vengono definiti da semplici file basati su testo che diventano elementi del progetto e vengono archiviati nel controllo del codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-149">Containers are defined by simple text-based files that become project artifacts and are checked into source control.</span></span> <span data-ttu-id="0fe5f-150">Sebbene i server completi e le macchine virtuali richiedano interventi manuali per l'aggiornamento, i contenitori sono facilmente controllati dalla versione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-150">While full servers and virtual machines require manual effort to update, containers are easily version-controlled.</span></span> <span data-ttu-id="0fe5f-151">Le app compilate per l'esecuzione nei contenitori possono essere sviluppate, testate e distribuite usando strumenti automatici come parte di una pipeline di compilazione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-151">Apps built to run in containers can be developed, tested, and deployed using automated tools as part of a build pipeline.</span></span>

<span data-ttu-id="0fe5f-152">I contenitori non sono modificabili.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-152">Containers are immutable.</span></span> <span data-ttu-id="0fe5f-153">Una volta definito un contenitore, è possibile ricrearlo ed eseguirlo esattamente allo stesso modo.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-153">Once you define a container, you can recreate and run it exactly the same way.</span></span> <span data-ttu-id="0fe5f-154">Questa immutabilità si presta alla progettazione basata su componenti.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-154">This immutability lends itself to component-based design.</span></span> <span data-ttu-id="0fe5f-155">Se alcune parti di un'applicazione si evolvono in modo diverso rispetto ad altre, perché ridistribuire l'intera applicazione quando è possibile distribuire solo le parti che cambiano più di frequente?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-155">If some parts of an application evolve differently than others, why redeploy the entire app when you can just deploy the parts that change most frequently?</span></span> <span data-ttu-id="0fe5f-156">Diverse funzionalità e problematiche trasversali di un'app possono essere suddivise in unità separate.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-156">Different features and cross-cutting concerns of an app can be broken up into separate units.</span></span> <span data-ttu-id="0fe5f-157">La figura 3-2 Mostra come un'app monolitica può sfruttare i vantaggi di contenitori e microservizi delegando determinate funzionalità o funzionalità.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-157">Figure 3-2 shows how a monolithic app can take advantage of containers and microservices by delegating certain features or functionality.</span></span> <span data-ttu-id="0fe5f-158">Anche le funzionalità rimanenti nell'app sono state incluse nel contenitore.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-158">The remaining functionality in the app itself has also been containerized.</span></span>

<span data-ttu-id="0fe5f-159">I contenitori non sono modificabili.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-159">Containers are immutable.</span></span> <span data-ttu-id="0fe5f-160">Una volta definito un contenitore, è possibile ricrearlo ed eseguirlo esattamente allo stesso modo.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-160">Once you define a container, you can recreate and run it exactly the same way.</span></span> <span data-ttu-id="0fe5f-161">Questa immutabilità si presta alla progettazione basata su componenti.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-161">This immutability lends itself to component-based design.</span></span> <span data-ttu-id="0fe5f-162">Se alcune parti di un'applicazione si evolvono in modo diverso rispetto ad altre, perché ridistribuire l'intera applicazione quando è possibile distribuire solo le parti che cambiano più di frequente?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-162">If some parts of an application evolve differently than others, why redeploy the entire app when you can just deploy the parts that change most frequently?</span></span> <span data-ttu-id="0fe5f-163">Diverse funzionalità e problematiche trasversali di un'app possono essere suddivise in unità separate.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-163">Different features and cross-cutting concerns of an app can be broken up into separate units.</span></span> <span data-ttu-id="0fe5f-164">La figura 3-2 Mostra come un'app monolitica può sfruttare i vantaggi di contenitori e microservizi delegando determinate funzionalità o funzionalità.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-164">Figure 3-2 shows how a monolithic app can take advantage of containers and microservices by delegating certain features or functionality.</span></span> <span data-ttu-id="0fe5f-165">Anche le funzionalità rimanenti nell'app sono state incluse nel contenitore.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-165">The remaining functionality in the app itself has also been containerized.</span></span>

<span data-ttu-id="0fe5f-166">![Suddivisione di un'app monolitica per l'uso di microservizi nel back-end. ](./media/breaking-up-monolith-with-backend-microservices.png)
 **Figura 3-2**.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-166">![Breaking up a monolithic app to use microservices in the back end.](./media/breaking-up-monolith-with-backend-microservices.png)
**Figure 3-2**.</span></span> <span data-ttu-id="0fe5f-167">Suddivisione di un'app monolitica per l'uso di microservizi nel back-end.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-167">Breaking up a monolithic app to use microservices in the back end.</span></span>

<span data-ttu-id="0fe5f-168">Ogni servizio nativo del cloud viene compilato e distribuito in un contenitore separato.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-168">Each cloud-native service is built and deployed in a separate container.</span></span> <span data-ttu-id="0fe5f-169">Ogni può aggiornare in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-169">Each can update as needed.</span></span> <span data-ttu-id="0fe5f-170">I singoli servizi possono essere ospitati in nodi con risorse appropriate per ogni servizio.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-170">Individual services can be hosted on nodes with resources appropriate to each service.</span></span> <span data-ttu-id="0fe5f-171">L'ambiente in cui viene eseguito ogni servizio non è modificabile, è condiviso tra ambienti di sviluppo, test e produzione e con facilità di controllo delle versioni.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-171">The environment each service runs in is immutable, shared across dev, test, and production environments, and easily versioned.</span></span> <span data-ttu-id="0fe5f-172">L'accoppiamento tra aree diverse dell'applicazione si verifica in modo esplicito come chiamate o messaggi tra servizi, non dipendenze in fase di compilazione all'interno di Monolith.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-172">Coupling between different areas of the application occurs explicitly as calls or messages between services, not compile-time dependencies within the monolith.</span></span> <span data-ttu-id="0fe5f-173">È anche possibile scegliere la tecnologia più adatta a una determinata funzionalità senza richiedere modifiche al resto dell'app.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-173">You can also choose the technology that best suites a given capability without requiring changes to the rest of the app.</span></span>

<span data-ttu-id="0fe5f-174">I servizi in contenitori richiedono la gestione automatica.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-174">Containerized services require automated management.</span></span> <span data-ttu-id="0fe5f-175">Non sarebbe possibile amministrare manualmente un ampio set di contenitori distribuiti in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-175">It wouldn't be feasible to manually administer a large set of independently deployed containers.</span></span> <span data-ttu-id="0fe5f-176">Si considerino, ad esempio, le attività seguenti:</span><span class="sxs-lookup"><span data-stu-id="0fe5f-176">For example, consider the following tasks:</span></span>

- <span data-ttu-id="0fe5f-177">Come verrà effettuato il provisioning delle istanze di contenitore in un cluster di molti computer?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-177">How will container instances be provisioned across a cluster of many machines?</span></span>
- <span data-ttu-id="0fe5f-178">Dopo la distribuzione, in che modo i contenitori rileveranno e comunicheranno tra loro?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-178">Once deployed, how will containers discover and communicate with each other?</span></span>
- <span data-ttu-id="0fe5f-179">In che modo i contenitori possono aumentare o ridurre la scalabilità su richiesta?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-179">How can containers scale in or out on-demand?</span></span>
- <span data-ttu-id="0fe5f-180">Come è possibile monitorare l'integrità di ogni contenitore?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-180">How do you monitor the health of each container?</span></span>
- <span data-ttu-id="0fe5f-181">In che modo è possibile proteggere un contenitore da errori hardware e software?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-181">How do you protect a container against hardware and software failures?</span></span>
- <span data-ttu-id="0fe5f-182">Come si aggiornano i contenitori per un'applicazione dinamica senza tempi di inattività?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-182">How do upgrade containers for a live application with zero downtime?</span></span>

<span data-ttu-id="0fe5f-183">Gli agenti di orchestrazione dei contenitori indirizzano e automatizzano queste e altre problematiche.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-183">Container orchestrators address and automate these and other concerns.</span></span>

<span data-ttu-id="0fe5f-184">Nel sistema eco-nativo del cloud, Kubernetes è diventato l'agente di orchestrazione del contenitore de facto.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-184">In the cloud-native eco-system, Kubernetes has become the de facto container orchestrator.</span></span> <span data-ttu-id="0fe5f-185">Si tratta di una piattaforma open source gestita da cloud native Computing Foundation (CNCF).</span><span class="sxs-lookup"><span data-stu-id="0fe5f-185">It's an open-source platform managed by the Cloud Native Computing Foundation (CNCF).</span></span> <span data-ttu-id="0fe5f-186">Kubernetes automatizza la distribuzione, il ridimensionamento e i problemi operativi dei carichi di lavoro in contenitori in un cluster di computer.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-186">Kubernetes automates the deployment, scaling, and operational concerns of containerized workloads across a machine cluster.</span></span> <span data-ttu-id="0fe5f-187">Tuttavia, l'installazione e la gestione di Kubernetes è notoriamente complessa.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-187">However, installing and managing Kubernetes is notoriously complex.</span></span>

<span data-ttu-id="0fe5f-188">Un approccio molto migliore consiste nell'utilizzare Kubernetes come servizio gestito da un fornitore di cloud.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-188">A much better approach is to leverage Kubernetes as a managed service from a cloud vendor.</span></span> <span data-ttu-id="0fe5f-189">Il cloud di Azure offre una piattaforma Kubernetes completamente gestita denominata [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span><span class="sxs-lookup"><span data-stu-id="0fe5f-189">The Azure cloud features a fully managed Kubernetes platform entitled [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span></span> <span data-ttu-id="0fe5f-190">AKS astrae la complessità e il sovraccarico operativo della gestione di Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-190">AKS abstracts the complexity and operational overhead of managing Kubernetes.</span></span> <span data-ttu-id="0fe5f-191">Si usa Kubernetes come servizio cloud; Microsoft si assume la responsabilità di gestirla e supportarla.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-191">You consume Kubernetes as a cloud service; Microsoft takes responsibility for managing and supporting it.</span></span> <span data-ttu-id="0fe5f-192">AKS si integra inoltre strettamente con altri servizi e strumenti di sviluppo di Azure.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-192">AKS also tightly integrates with other Azure services and dev tools.</span></span>

<span data-ttu-id="0fe5f-193">AKS è una tecnologia basata su cluster.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-193">AKS is a cluster-based technology.</span></span> <span data-ttu-id="0fe5f-194">Un pool di macchine virtuali federate, o nodi, viene distribuito nel cloud di Azure.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-194">A pool of federated virtual machines, or nodes, is deployed to the Azure cloud.</span></span> <span data-ttu-id="0fe5f-195">Insieme formano un ambiente a disponibilità elevata o un cluster.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-195">Together they form a highly available environment, or cluster.</span></span> <span data-ttu-id="0fe5f-196">Il cluster viene visualizzato come una singola entità semplice per l'applicazione nativa del cloud.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-196">The cluster appears as a seamless, single entity to your cloud-native application.</span></span> <span data-ttu-id="0fe5f-197">Dietro le quinte, AKS distribuisce i servizi in contenitori in questi nodi seguendo una strategia predefinita che distribuisce il carico in modo uniforme.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-197">Under the hood, AKS deploys your containerized services across these nodes following a predefined strategy that evenly distributes the load.</span></span>

<span data-ttu-id="0fe5f-198">I servizi in contenitori richiedono la gestione automatica.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-198">Containerized services require automated management.</span></span> <span data-ttu-id="0fe5f-199">Non sarebbe possibile amministrare manualmente un ampio set di contenitori distribuiti in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-199">It wouldn't be feasible to manually administer a large set of independently deployed containers.</span></span> <span data-ttu-id="0fe5f-200">Si considerino, ad esempio, le attività seguenti:</span><span class="sxs-lookup"><span data-stu-id="0fe5f-200">For example, consider the following tasks:</span></span>

- <span data-ttu-id="0fe5f-201">Come verrà effettuato il provisioning delle istanze di contenitore in un cluster di molti computer?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-201">How will container instances be provisioned across a cluster of many machines?</span></span>
- <span data-ttu-id="0fe5f-202">Dopo la distribuzione, in che modo i contenitori rileveranno e comunicheranno tra loro?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-202">Once deployed, how will containers discover and communicate with each other?</span></span>
- <span data-ttu-id="0fe5f-203">In che modo i contenitori possono aumentare o ridurre la scalabilità su richiesta?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-203">How can containers scale in or out on-demand?</span></span>
- <span data-ttu-id="0fe5f-204">Come è possibile monitorare l'integrità di ogni contenitore?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-204">How do you monitor the health of each container?</span></span>
- <span data-ttu-id="0fe5f-205">In che modo è possibile proteggere un contenitore da errori hardware e software?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-205">How do you protect a container against hardware and software failures?</span></span>
- <span data-ttu-id="0fe5f-206">Come si aggiornano i contenitori per un'applicazione dinamica senza tempi di inattività?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-206">How do upgrade containers for a live application with zero downtime?</span></span>

<span data-ttu-id="0fe5f-207">Gli agenti di orchestrazione dei contenitori indirizzano e automatizzano queste e altre problematiche.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-207">Container orchestrators address and automate these and other concerns.</span></span>

<span data-ttu-id="0fe5f-208">Nel sistema eco-nativo del cloud, Kubernetes è diventato l'agente di orchestrazione del contenitore de facto.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-208">In the cloud-native eco-system, Kubernetes has become the de facto container orchestrator.</span></span> <span data-ttu-id="0fe5f-209">Si tratta di una piattaforma open source gestita da cloud native Computing Foundation (CNCF).</span><span class="sxs-lookup"><span data-stu-id="0fe5f-209">It's an open-source platform managed by the Cloud Native Computing Foundation (CNCF).</span></span> <span data-ttu-id="0fe5f-210">Kubernetes automatizza la distribuzione, il ridimensionamento e i problemi operativi dei carichi di lavoro in contenitori in un cluster di computer.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-210">Kubernetes automates the deployment, scaling, and operational concerns of containerized workloads across a machine cluster.</span></span> <span data-ttu-id="0fe5f-211">Tuttavia, l'installazione e la gestione di Kubernetes è notoriamente complessa.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-211">However, installing and managing Kubernetes is notoriously complex.</span></span>

<span data-ttu-id="0fe5f-212">Un approccio molto migliore consiste nell'utilizzare Kubernetes come servizio gestito da un fornitore di cloud.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-212">A much better approach is to leverage Kubernetes as a managed service from a cloud vendor.</span></span> <span data-ttu-id="0fe5f-213">Il cloud di Azure offre una piattaforma Kubernetes completamente gestita denominata [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span><span class="sxs-lookup"><span data-stu-id="0fe5f-213">The Azure cloud features a fully managed Kubernetes platform entitled [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span></span> <span data-ttu-id="0fe5f-214">AKS astrae la complessità e il sovraccarico operativo della gestione di Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-214">AKS abstracts the complexity and operational overhead of managing Kubernetes.</span></span> <span data-ttu-id="0fe5f-215">Si usa Kubernetes come servizio cloud; Microsoft si assume la responsabilità di gestirla e supportarla.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-215">You consume Kubernetes as a cloud service; Microsoft takes responsibility for managing and supporting it.</span></span> <span data-ttu-id="0fe5f-216">AKS si integra inoltre strettamente con altri servizi e strumenti di sviluppo di Azure.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-216">AKS also tightly integrates with other Azure services and dev tools.</span></span>

<span data-ttu-id="0fe5f-217">AKS è una tecnologia basata su cluster.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-217">AKS is a cluster-based technology.</span></span> <span data-ttu-id="0fe5f-218">Un pool di macchine virtuali federate, o nodi, viene distribuito nel cloud di Azure.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-218">A pool of federated virtual machines, or nodes, is deployed to the Azure cloud.</span></span> <span data-ttu-id="0fe5f-219">Insieme formano un ambiente a disponibilità elevata o un cluster.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-219">Together they form a highly available environment, or cluster.</span></span> <span data-ttu-id="0fe5f-220">Il cluster viene visualizzato come una singola entità semplice per l'applicazione nativa del cloud.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-220">The cluster appears as a seamless, single entity to your cloud-native application.</span></span> <span data-ttu-id="0fe5f-221">Dietro le quinte, AKS distribuisce i servizi in contenitori in questi nodi seguendo una strategia predefinita che distribuisce il carico in modo uniforme.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-221">Under the hood, AKS deploys your containerized services across these nodes following a predefined strategy that evenly distributes the load.</span></span>

## <a name="what-are-the-scaling-benefits"></a><span data-ttu-id="0fe5f-222">Quali sono i vantaggi di scalabilità?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-222">What are the scaling benefits?</span></span>

<span data-ttu-id="0fe5f-223">I servizi basati sui contenitori possono sfruttare i vantaggi di scalabilità offerti dagli strumenti di orchestrazione, ad esempio Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-223">Services built on containers can leverage scaling benefits provided by orchestration tools like Kubernetes.</span></span> <span data-ttu-id="0fe5f-224">I contenitori di progettazione conoscono solo se stessi.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-224">By design containers only know about themselves.</span></span> <span data-ttu-id="0fe5f-225">Quando si dispone di più contenitori che devono collaborare, è necessario organizzarli a un livello superiore.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-225">Once you have multiple containers that need to work together, you should organize them at a higher level.</span></span> <span data-ttu-id="0fe5f-226">Per organizzare un numero elevato di contenitori e le relative dipendenze condivise, ad esempio la configurazione di rete, sono disponibili gli strumenti di orchestrazione per salvare il giorno.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-226">Organizing large numbers of containers and their shared dependencies, such as network configuration, is where orchestration tools come in to save the day!</span></span> <span data-ttu-id="0fe5f-227">Kubernetes crea un livello di astrazione su gruppi di contenitori e li organizza in *baccelli*.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-227">Kubernetes creates an abstraction layer over groups of containers and organizes them into *pods*.</span></span> <span data-ttu-id="0fe5f-228">I pod vengono eseguiti nei computer di lavoro denominati *nodi*.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-228">Pods run on worker machines referred to as *nodes*.</span></span> <span data-ttu-id="0fe5f-229">Questa struttura organizzata è detta *cluster*.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-229">This organized structure is referred to as a *cluster*.</span></span> <span data-ttu-id="0fe5f-230">La figura 3-3 Mostra i diversi componenti di un cluster Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-230">Figure 3-3 shows the different components of a Kubernetes cluster.</span></span>

<span data-ttu-id="0fe5f-231">![Componenti cluster Kubernetes. ](./media/kubernetes-cluster-components.png)
 **Figura 3-3**.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-231">![Kubernetes cluster components.](./media/kubernetes-cluster-components.png)
**Figure 3-3**.</span></span> <span data-ttu-id="0fe5f-232">Componenti cluster Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-232">Kubernetes cluster components.</span></span>

<span data-ttu-id="0fe5f-233">La scalabilità dei carichi di lavoro in contenitori è una funzionalità chiave degli agenti di orchestrazione dei contenitori.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-233">Scaling containerized workloads is a key feature of container orchestrators.</span></span> <span data-ttu-id="0fe5f-234">AKS supporta il ridimensionamento automatico tra due dimensioni: istanze di contenitore e nodi di calcolo.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-234">AKS supports automatic scaling across two dimensions: Container instances and compute nodes.</span></span> <span data-ttu-id="0fe5f-235">Insieme offrono a AKS la possibilità di rispondere in modo rapido ed efficiente ai picchi di richiesta e di aggiungere altre risorse.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-235">Together they give AKS the ability to quickly and efficiently respond to spikes in demand and add additional resources.</span></span> <span data-ttu-id="0fe5f-236">Più avanti in questo capitolo viene illustrato il ridimensionamento in AKS.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-236">We discuss scaling in AKS later in this chapter.</span></span>

### <a name="declarative-versus-imperative"></a><span data-ttu-id="0fe5f-237">Dichiarativo e imperativo</span><span class="sxs-lookup"><span data-stu-id="0fe5f-237">Declarative versus imperative</span></span>

<span data-ttu-id="0fe5f-238">Kubernetes supporta sia la configurazione dichiarativa che imperativa.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-238">Kubernetes supports both declarative and imperative configuration.</span></span> <span data-ttu-id="0fe5f-239">L'approccio imperativo prevede l'esecuzione di diversi comandi che indicano a Kubernetes cosa eseguire ogni passaggio del processo.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-239">The imperative approach involves running various commands that tell Kubernetes what to do each step of the way.</span></span> <span data-ttu-id="0fe5f-240">Eseguire questa immagine.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-240">Run this image.</span></span> <span data-ttu-id="0fe5f-241">Eliminare questo pod.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-241">Delete this pod.</span></span> <span data-ttu-id="0fe5f-242">Esporre questa porta.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-242">Expose this port.</span></span> <span data-ttu-id="0fe5f-243">Con l'approccio dichiarativo, si crea un file di configurazione, denominato manifesto, per descrivere cosa si vuole, anziché come procedere.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-243">With the declarative approach, you create a configuration file, called a manifest, to describe what you want instead of what to do.</span></span> <span data-ttu-id="0fe5f-244">Kubernetes legge il manifesto e trasforma lo stato finale desiderato nello stato finale effettivo.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-244">Kubernetes reads the manifest and transforms your desired end state into actual end state.</span></span>

<span data-ttu-id="0fe5f-245">I comandi imperativi sono ottimi per l'apprendimento e la sperimentazione interattiva.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-245">Imperative commands are great for learning and interactive experimentation.</span></span> <span data-ttu-id="0fe5f-246">Tuttavia, è opportuno creare in modo dichiarativo i file manifesto Kubernetes per adottare un'infrastruttura come approccio al codice, fornendo distribuzioni affidabili e ripetibili.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-246">However, you'll want to declaratively create Kubernetes manifest files to embrace an infrastructure as code approach, providing for reliable and repeatable deployments.</span></span> <span data-ttu-id="0fe5f-247">Il file manifesto diventa un elemento del progetto e viene usato nella pipeline CI/CD per l'automazione delle distribuzioni Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-247">The manifest file becomes a project artifact and is used in your CI/CD pipeline for automating Kubernetes deployments.</span></span>

<span data-ttu-id="0fe5f-248">Se il cluster è già stato configurato usando i comandi imperativi, è possibile esportare un manifesto `kubectl get svc SERVICENAME -o yaml > service.yaml`dichiarativo usando.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-248">If you've already configured your cluster using imperative commands, you can export a declarative manifest by using `kubectl get svc SERVICENAME -o yaml > service.yaml`.</span></span> <span data-ttu-id="0fe5f-249">Questo comando genera un manifesto simile a quello riportato di seguito:</span><span class="sxs-lookup"><span data-stu-id="0fe5f-249">This command produces a manifest similar to one shown below:</span></span>

```yaml
apiVersion: v1
kind: Service
metadata:
  creationTimestamp: "2019-09-13T13:58:47Z"
  labels:
    component: apiserver
    provider: kubernetes
  name: kubernetes
  namespace: default
  resourceVersion: "153"
  selfLink: /api/v1/namespaces/default/services/kubernetes
  uid: 9b1fac62-d62e-11e9-8968-00155d38010d
spec:
  clusterIP: 10.96.0.1
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: 6443
  sessionAffinity: None
  type: ClusterIP
status:
  loadBalancer: {}
```

<span data-ttu-id="0fe5f-250">Quando si usa la configurazione dichiarativa, è possibile visualizzare in anteprima le modifiche che verranno apportate prima di eseguirne il commit usando `kubectl diff -f FOLDERNAME` la cartella in cui si trovano i file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-250">When using declarative configuration, you can preview the changes that will be made before committing them by using `kubectl diff -f FOLDERNAME` against the folder where your configuration files are located.</span></span> <span data-ttu-id="0fe5f-251">Quando si è certi di voler applicare le modifiche, eseguire `kubectl apply -f FOLDERNAME`.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-251">Once you're sure you want to apply the changes, run `kubectl apply -f FOLDERNAME`.</span></span> <span data-ttu-id="0fe5f-252">Aggiungere `-R` per elaborare in modo ricorsivo una gerarchia di cartelle.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-252">Add `-R` to recursively process a folder hierarchy.</span></span>

<span data-ttu-id="0fe5f-253">È anche possibile usare la configurazione dichiarativa con altre funzionalità di Kubernetes, tra cui le distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-253">You can also use declarative configuration with other Kubernetes features, one of which being deployments.</span></span> <span data-ttu-id="0fe5f-254">Le distribuzioni dichiarative consentono di gestire versioni, aggiornamenti e scalabilità.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-254">Declarative deployments help manage releases, updates, and scaling.</span></span> <span data-ttu-id="0fe5f-255">Indicano al controller di distribuzione Kubernetes di distribuire nuove modifiche, aumentare il carico o eseguire il rollback a una revisione precedente.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-255">They instruct the Kubernetes deployment controller on how to deploy new changes, scale out load, or roll back to a previous revision.</span></span> <span data-ttu-id="0fe5f-256">Se un cluster è instabile, una distribuzione dichiarativa restituirà automaticamente il cluster allo stato desiderato.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-256">If a cluster is unstable, a declarative deployment will automatically return the cluster back to a desired state.</span></span> <span data-ttu-id="0fe5f-257">Se ad esempio un nodo si arresta in modo anomalo, il meccanismo di distribuzione ridistribuirà una sostituzione per ottenere lo stato desiderato</span><span class="sxs-lookup"><span data-stu-id="0fe5f-257">For example, if a node should crash, the deployment mechanism will redeploy a replacement to achieve your desired state</span></span>

<span data-ttu-id="0fe5f-258">L'uso della configurazione dichiarativa consente la rappresentazione dell'infrastruttura come codice che può essere archiviato e sottoposto a controllo delle versioni insieme al codice dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-258">Using declarative configuration allows infrastructure to be represented as code that can be checked in and versioned alongside the application code.</span></span> <span data-ttu-id="0fe5f-259">Fornisce un miglioramento del controllo delle modifiche e un supporto migliore per la distribuzione continua tramite una pipeline di compilazione e distribuzione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-259">It provides improved change control and better support for continuous deployment using a build and deploy pipeline.</span></span>

## <a name="what-scenarios-are-ideal-for-containers-and-orchestrators"></a><span data-ttu-id="0fe5f-260">Quali scenari sono ideali per i contenitori e gli agenti di orchestrazione?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-260">What scenarios are ideal for containers and orchestrators?</span></span>

<span data-ttu-id="0fe5f-261">Gli scenari seguenti sono ideali per l'uso dei contenitori e degli agenti di orchestrazione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-261">The following scenarios are ideal for using containers and orchestrators.</span></span>

### <a name="applications-requiring-high-uptime-and-scalability"></a><span data-ttu-id="0fe5f-262">Applicazioni che richiedono tempi di esecuzione elevati e scalabilità</span><span class="sxs-lookup"><span data-stu-id="0fe5f-262">Applications requiring high uptime and scalability</span></span>

<span data-ttu-id="0fe5f-263">Le singole applicazioni con requisiti di scalabilità e tempi di esecuzione elevati sono candidati ideali per architetture cloud native che usano microservizi, contenitori e agenti di orchestrazione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-263">Individual applications that have high uptime and scalability requirements are ideal candidates for cloud-native architectures using microservices, containers, and orchestrators.</span></span> <span data-ttu-id="0fe5f-264">Possono essere sviluppate in contenitori, testati in ambienti con versioni diverse e distribuiti in produzione senza tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-264">They can be developed in containers, tested across versioned environments, and deployed into production with zero downtime.</span></span> <span data-ttu-id="0fe5f-265">L'uso di cluster Kubernetes garantisce che tali app possano anche essere ridimensionate su richiesta e ripristinate automaticamente dagli errori dei nodi.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-265">The use of Kubernetes clusters ensures such apps can also scale on demand and recover automatically from node failures.</span></span>

### <a name="large-numbers-of-applications"></a><span data-ttu-id="0fe5f-266">Un numero elevato di applicazioni</span><span class="sxs-lookup"><span data-stu-id="0fe5f-266">Large numbers of applications</span></span>

<span data-ttu-id="0fe5f-267">Le organizzazioni che distribuiscono e gestiscono un numero elevato di applicazioni traggono vantaggio da contenitori e agenti di orchestrazione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-267">Organizations that deploy and maintain large numbers of applications benefit from containers and orchestrators.</span></span> <span data-ttu-id="0fe5f-268">Il primo sforzo per configurare gli ambienti in contenitori e i cluster Kubernetes è principalmente un costo fisso.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-268">The up front effort of setting up containerized environments and Kubernetes clusters is primarily a fixed cost.</span></span> <span data-ttu-id="0fe5f-269">La distribuzione, la gestione e l'aggiornamento delle singole applicazioni hanno un costo che varia in base al numero di applicazioni.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-269">Deploying, maintaining, and updating individual applications has a cost that varies with the number of applications.</span></span> <span data-ttu-id="0fe5f-270">Oltre a un numero ridotto di applicazioni, la complessità della gestione manuale delle applicazioni personalizzate supera il costo di implementazione di una soluzione tramite contenitori e agenti di orchestrazione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-270">Beyond a small number of applications, the complexity of maintaining custom applications manually exceeds the cost of implementing a solution using containers and orchestrators.</span></span>

## <a name="when-should-you-avoid-using-containers-and-orchestrators"></a><span data-ttu-id="0fe5f-271">Quando è consigliabile evitare di usare i contenitori e gli agenti di orchestrazione?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-271">When should you avoid using containers and orchestrators?</span></span>

<span data-ttu-id="0fe5f-272">Se non si è in grado di compilare l'applicazione in base ai principi dell'app a dodici fattori, è consigliabile evitare i contenitori e gli agenti di orchestrazione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-272">If you're unable to build your application following the Twelve-Factor App principles, you should consider avoiding containers and orchestrators.</span></span> <span data-ttu-id="0fe5f-273">In questi casi, si consideri una piattaforma di hosting basata su VM o eventualmente un sistema ibrido.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-273">In these cases, consider a VM-based hosting platform, or possibly some hybrid system.</span></span> <span data-ttu-id="0fe5f-274">Con esso, è sempre possibile disattivare determinate parti di funzionalità in contenitori distinti o anche funzioni senza server.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-274">With it, you can always spin off certain pieces of functionality into separate containers or even serverless functions.</span></span>

## <a name="development-resources"></a><span data-ttu-id="0fe5f-275">Risorse di sviluppo</span><span class="sxs-lookup"><span data-stu-id="0fe5f-275">Development resources</span></span>

<span data-ttu-id="0fe5f-276">Questa sezione presenta un breve elenco di risorse di sviluppo che possono essere utili per iniziare a usare i contenitori e gli agenti di orchestrazione per l'applicazione successiva.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-276">This section shows a short list of development resources that may help you get started using containers and orchestrators for your next application.</span></span> <span data-ttu-id="0fe5f-277">Per informazioni aggiuntive su come progettare un'app per l'architettura di microservizi nativa del cloud, vedere l'articolo complementare [per i microservizi .NET di questo libro: architettura per le applicazioni .NET in contenitori](https://dotnet.microsoft.com/download/thank-you/microservices-architecture-ebook).</span><span class="sxs-lookup"><span data-stu-id="0fe5f-277">If you're looking for guidance on how to design your cloud-native microservices architecture app, read this book's companion, [.NET Microservices: Architecture for Containerized .NET Applications](https://dotnet.microsoft.com/download/thank-you/microservices-architecture-ebook).</span></span>

### <a name="local-kubernetes-development"></a><span data-ttu-id="0fe5f-278">Sviluppo Kubernetes locale</span><span class="sxs-lookup"><span data-stu-id="0fe5f-278">Local Kubernetes Development</span></span>

<span data-ttu-id="0fe5f-279">Le distribuzioni Kubernetes offrono un notevole valore negli ambienti di produzione, ma possono anche essere eseguite localmente nel computer di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-279">Kubernetes deployments provide great value in production environments, but can also run locally on your development machine.</span></span> <span data-ttu-id="0fe5f-280">Sebbene sia possibile lavorare su singoli microservizi in modo indipendente, in alcuni casi è necessario eseguire l'intero sistema localmente, così come verrà eseguito quando viene distribuito in produzione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-280">While you may work on individual microservices independently, there may be times when you'll need to run the entire system locally - just as it will run when deployed to production.</span></span> <span data-ttu-id="0fe5f-281">Sono disponibili diversi strumenti che possono essere utili: Minikube e Docker desktop.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-281">There are several tools that can help: Minikube and Docker Desktop.</span></span> <span data-ttu-id="0fe5f-282">Visual Studio fornisce anche gli strumenti per lo sviluppo di Docker.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-282">Visual Studio also provides tooling for Docker development.</span></span>

### <a name="minikube"></a><span data-ttu-id="0fe5f-283">Minikube</span><span class="sxs-lookup"><span data-stu-id="0fe5f-283">Minikube</span></span>

<span data-ttu-id="0fe5f-284">Che cos'è Minikube?</span><span class="sxs-lookup"><span data-stu-id="0fe5f-284">What is Minikube?</span></span> <span data-ttu-id="0fe5f-285">Il progetto Minikube indica che Minikube implementa un cluster Kubernetes locale in macOS, Linux e Windows.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-285">The Minikube project says "Minikube implements a local Kubernetes cluster on macOS, Linux, and Windows."</span></span> <span data-ttu-id="0fe5f-286">Gli obiettivi principali sono "come lo strumento migliore per lo sviluppo di applicazioni Kubernetes locali e per supportare tutte le funzionalità di Kubernetes che soddisfano".</span><span class="sxs-lookup"><span data-stu-id="0fe5f-286">Its primary goals are "to be the best tool for local Kubernetes application development and to support all Kubernetes features that fit."</span></span> <span data-ttu-id="0fe5f-287">L'installazione di Minikube è separata da Docker, ma Minikube supporta hypervisor diversi rispetto al supporto per desktop docker.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-287">Installing Minikube is separate from Docker, but Minikube supports different hypervisors than Docker Desktop supports.</span></span> <span data-ttu-id="0fe5f-288">Le funzionalità di Kubernetes seguenti sono attualmente supportate da Minikube:</span><span class="sxs-lookup"><span data-stu-id="0fe5f-288">The following Kubernetes features are currently supported by Minikube:</span></span>

- <span data-ttu-id="0fe5f-289">DNS</span><span class="sxs-lookup"><span data-stu-id="0fe5f-289">DNS</span></span>
- <span data-ttu-id="0fe5f-290">Deports</span><span class="sxs-lookup"><span data-stu-id="0fe5f-290">NodePorts</span></span>
- <span data-ttu-id="0fe5f-291">ConfigMaps e segreti</span><span class="sxs-lookup"><span data-stu-id="0fe5f-291">ConfigMaps and secrets</span></span>
- <span data-ttu-id="0fe5f-292">Dashboard</span><span class="sxs-lookup"><span data-stu-id="0fe5f-292">Dashboards</span></span>
- <span data-ttu-id="0fe5f-293">Runtime del contenitore: Docker, RKT, CRI-O e contenitori</span><span class="sxs-lookup"><span data-stu-id="0fe5f-293">Container runtimes: Docker, rkt, CRI-O, and containerd</span></span>
- <span data-ttu-id="0fe5f-294">Abilitazione di CNI (container Network Interface)</span><span class="sxs-lookup"><span data-stu-id="0fe5f-294">Enabling Container Network Interface (CNI)</span></span>
- <span data-ttu-id="0fe5f-295">Dati in ingresso</span><span class="sxs-lookup"><span data-stu-id="0fe5f-295">Ingress</span></span>

<span data-ttu-id="0fe5f-296">Dopo l'installazione di Minikube, è possibile iniziare a usarla rapidamente `minikube start` eseguendo il comando, che Scarica un'immagine e avvia il cluster Kubernetes locale.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-296">After installing Minikube, you can quickly start using it by running the `minikube start` command, which downloads an image and start the local Kubernetes cluster.</span></span> <span data-ttu-id="0fe5f-297">Una volta avviato il cluster, è possibile interagire con esso usando i comandi `kubectl` Kubernetes standard.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-297">Once the cluster is started, you interact with it using the standard Kubernetes `kubectl` commands.</span></span>

### <a name="docker-desktop"></a><span data-ttu-id="0fe5f-298">Docker Desktop</span><span class="sxs-lookup"><span data-stu-id="0fe5f-298">Docker Desktop</span></span>

<span data-ttu-id="0fe5f-299">È anche possibile usare Kubernetes direttamente da Docker desktop in Windows.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-299">You can also work with Kubernetes directly from Docker Desktop on Windows.</span></span> <span data-ttu-id="0fe5f-300">Si tratta dell'unica opzione se si usano i contenitori di Windows ed è un'ottima scelta anche per i contenitori non Windows.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-300">It is your only option if you're using Windows Containers, and is a great choice for non-Windows containers as well.</span></span> <span data-ttu-id="0fe5f-301">La figura 3-4 illustra come abilitare il supporto Kubernetes locale durante l'esecuzione di Docker desktop.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-301">Figure 3-4 shows how to enable local Kubernetes support when running Docker Desktop.</span></span>

![Configurazione di Kubernetes in Docker desktop](./media/docker-desktop-kubernetes.png)

<span data-ttu-id="0fe5f-303">**Figura 3-4**.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-303">**Figure 3-4**.</span></span> <span data-ttu-id="0fe5f-304">Configurazione di Kubernetes in Docker desktop.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-304">Configuring Kubernetes in Docker Desktop.</span></span>

<span data-ttu-id="0fe5f-305">Docker desktop è lo strumento più diffuso per la configurazione e l'esecuzione di app in contenitori in locale.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-305">Docker Desktop is the most popular tool for configuring and running containerized apps locally.</span></span> <span data-ttu-id="0fe5f-306">Quando si lavora con Docker desktop, è possibile eseguire lo sviluppo localmente con lo stesso set di immagini del contenitore Docker da distribuire nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-306">When you work with Docker Desktop, you can develop locally against the exact same set of Docker container images that you'll deploy to production.</span></span> <span data-ttu-id="0fe5f-307">Docker desktop è progettato per creare, testare e distribuire le app in contenitori in locale.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-307">Docker Desktop is designed to "build, test, and ship" containerized apps locally.</span></span> <span data-ttu-id="0fe5f-308">Supporta i contenitori sia Linux che Windows.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-308">It supports both Linux and Windows containers.</span></span> <span data-ttu-id="0fe5f-309">Quando si esegue il push delle immagini in un registro immagini, ad esempio Azure Container Registry o Docker Hub, AKS può effettuare il pull e la distribuzione nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-309">Once you push your images to an image registry, like Azure Container Registry or Docker Hub, AKS can pull and deploy them to production.</span></span>

### <a name="visual-studio-docker-tooling"></a><span data-ttu-id="0fe5f-310">Strumenti Docker per Visual Studio</span><span class="sxs-lookup"><span data-stu-id="0fe5f-310">Visual Studio Docker Tooling</span></span>

<span data-ttu-id="0fe5f-311">Visual Studio supporta lo sviluppo di Docker per le applicazioni basate sul Web.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-311">Visual Studio supports Docker development for web-based applications.</span></span> <span data-ttu-id="0fe5f-312">Quando si crea una nuova applicazione ASP.NET Core, è possibile configurarla con il supporto di Docker, come illustrato nella figura 3-5.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-312">When you create a new ASP.NET Core application, you have an option to configure it with Docker support, as shown in Figure 3-5.</span></span>

![Abilitazione del supporto Docker in Visual Studio](./media/visual-studio-enable-docker-support.png)

<span data-ttu-id="0fe5f-314">**Figura 3-5**.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-314">**Figure 3-5**.</span></span> <span data-ttu-id="0fe5f-315">Abilitazione del supporto Docker in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="0fe5f-315">Visual Studio Enable Docker Support</span></span>

<span data-ttu-id="0fe5f-316">Quando questa opzione è selezionata, il progetto viene creato con `Dockerfile` nella relativa radice, che può essere usato per compilare e ospitare l'app in un contenitore docker.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-316">When this option is selected, the project is created with a `Dockerfile` in its root, which can be used to build and host the app in a Docker container.</span></span> <span data-ttu-id="0fe5f-317">Un esempio di Dockerfile è illustrato nella figura 3 6. git</span><span class="sxs-lookup"><span data-stu-id="0fe5f-317">An example Dockerfile is shown in Figure 3-6.git</span></span>

```docker
FROM mcr.microsoft.com/dotnet/core/aspnet:3.0-stretch-slim AS base
WORKDIR /app
EXPOSE 80
EXPOSE 443

FROM mcr.microsoft.com/dotnet/core/sdk:3.0-stretch AS build
WORKDIR /src
COPY ["WebApplication3/WebApplication3.csproj", "WebApplication3/"]
RUN dotnet restore "WebApplication3/WebApplication3.csproj"
COPY . .
WORKDIR "/src/WebApplication3"
RUN dotnet build "WebApplication3.csproj" -c Release -o /app

FROM build AS publish
RUN dotnet publish "WebApplication3.csproj" -c Release -o /app

FROM base AS final
WORKDIR /app
COPY --from=publish /app .
ENTRYPOINT ["dotnet", "WebApplication3.dll"]
```

<span data-ttu-id="0fe5f-318">**Figura 3-6**.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-318">**Figure 3-6**.</span></span> <span data-ttu-id="0fe5f-319">Dockerfile generato da Visual Studio</span><span class="sxs-lookup"><span data-stu-id="0fe5f-319">Visual Studio generated Dockerfile</span></span>

<span data-ttu-id="0fe5f-320">Il comportamento predefinito quando viene eseguita l'app è configurato anche per l'uso di Docker.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-320">The default behavior when the app runs is configured to use Docker as well.</span></span> <span data-ttu-id="0fe5f-321">La figura 3-7 Mostra le diverse opzioni di esecuzione disponibili da un nuovo progetto ASP.NET Core creato con il supporto Docker aggiunto.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-321">Figure 3-7 shows the different run options available from a new ASP.NET Core project created with Docker support added.</span></span>

![Opzioni di esecuzione di Docker per Visual Studio](./media/visual-studio-docker-run-options.png)

<span data-ttu-id="0fe5f-323">**Figura 3-7**.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-323">**Figure 3-7**.</span></span> <span data-ttu-id="0fe5f-324">Opzioni di esecuzione di Docker per Visual Studio</span><span class="sxs-lookup"><span data-stu-id="0fe5f-324">Visual Studio Docker Run Options</span></span>

<span data-ttu-id="0fe5f-325">Oltre allo sviluppo locale, [Azure Dev Spaces](https://docs.microsoft.com/azure/dev-spaces/) offre un modo pratico per consentire a più sviluppatori di lavorare con le proprie configurazioni Kubernetes all'interno di Azure.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-325">In addition to local development, [Azure Dev Spaces](https://docs.microsoft.com/azure/dev-spaces/) provides a convenient way for multiple developers to work with their own Kubernetes configurations within Azure.</span></span> <span data-ttu-id="0fe5f-326">Come si può vedere nella figura 3-7, è anche possibile eseguire l'applicazione in Azure Dev Spaces.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-326">As you can see in Figure 3-7, you can also run the application in Azure Dev Spaces.</span></span>

<span data-ttu-id="0fe5f-327">Inoltre, in qualsiasi momento è possibile aggiungere il supporto di Docker a un'applicazione ASP.NET Core esistente.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-327">Also, at any time you can add Docker support to an existing ASP.NET Core application.</span></span> <span data-ttu-id="0fe5f-328">Dalla Esplora soluzioni di Visual Studio, fare clic con il pulsante destro del mouse sul progetto e **aggiungere** > il**supporto di Docker**, come illustrato nella figura 3-8.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-328">From the Visual Studio Solution Explorer, right click on the project and **Add** > **Docker Support**, as shown in Figure 3-8.</span></span>

<span data-ttu-id="0fe5f-329">**Figura 3-8**.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-329">**Figure 3-8**.</span></span> <span data-ttu-id="0fe5f-330">Aggiunta del supporto Docker a Visual Studio</span><span class="sxs-lookup"><span data-stu-id="0fe5f-330">Adding Docker support to Visual Studio</span></span>

<span data-ttu-id="0fe5f-331">È anche possibile aggiungere il supporto dell'orchestrazione del contenitore, illustrato nella figura 3-8.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-331">You can also add Container Orchestration Support, also shown in Figure 3-8.</span></span> <span data-ttu-id="0fe5f-332">Per impostazione predefinita, l'agente di orchestrazione USA Kubernetes e Helm.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-332">By default, the orchestrator uses Kubernetes and Helm.</span></span> <span data-ttu-id="0fe5f-333">Dopo aver scelto l'agente di orchestrazione `azds.yaml` , viene aggiunto un file alla radice del progetto `charts` e viene aggiunta una cartella contenente i grafici Helm usati per configurare e distribuire l'applicazione in Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-333">Once you've chosen the orchestrator, a `azds.yaml` file is added to the project root and a `charts` folder is added containing the Helm charts used to configure and deploy the application to Kubernetes.</span></span> <span data-ttu-id="0fe5f-334">La figura 3-9 Mostra i file risultanti in un nuovo progetto.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-334">Figure 3-9 shows the resulting files in a new project.</span></span>

<span data-ttu-id="0fe5f-335">È anche possibile aggiungere il supporto dell'orchestrazione del contenitore, illustrato nella figura 3-8.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-335">You can also add Container Orchestration Support, also shown in Figure 3-8.</span></span> <span data-ttu-id="0fe5f-336">Per impostazione predefinita, l'agente di orchestrazione USA Kubernetes e Helm.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-336">By default, the orchestrator uses Kubernetes and Helm.</span></span> <span data-ttu-id="0fe5f-337">Dopo aver scelto l'agente di orchestrazione `azds.yaml` , viene aggiunto un file alla radice del progetto `charts` e viene aggiunta una cartella contenente i grafici Helm usati per configurare e distribuire l'applicazione in Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-337">Once you've chosen the orchestrator, a `azds.yaml` file is added to the project root and a `charts` folder is added containing the Helm charts used to configure and deploy the application to Kubernetes.</span></span> <span data-ttu-id="0fe5f-338">La figura 3-9 Mostra i file risultanti in un nuovo progetto.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-338">Figure 3-9 shows the resulting files in a new project.</span></span>

<span data-ttu-id="0fe5f-339">**Figura 3-9**.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-339">**Figure 3-9**.</span></span> <span data-ttu-id="0fe5f-340">Aggiunta del supporto dell'orchestrazione a Visual Studio</span><span class="sxs-lookup"><span data-stu-id="0fe5f-340">Adding orchestration support to Visual Studio</span></span>

### <a name="visual-studio-code-docker-tooling"></a><span data-ttu-id="0fe5f-341">Strumenti Docker Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="0fe5f-341">Visual Studio Code Docker Tooling</span></span>

<span data-ttu-id="0fe5f-342">Sono disponibili numerose estensioni per Visual Studio Code che supportano lo sviluppo di Docker.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-342">There are a number of extensions available for Visual Studio Code that support Docker development.</span></span>

<span data-ttu-id="0fe5f-343">Microsoft fornisce l' [estensione Docker per Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker).</span><span class="sxs-lookup"><span data-stu-id="0fe5f-343">Microsoft provides the [Docker for Visual Studio Code extension](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker).</span></span> <span data-ttu-id="0fe5f-344">Questa estensione semplifica il processo di aggiunta del supporto del contenitore alle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-344">This extension simplifies the process of adding container support to applications.</span></span> <span data-ttu-id="0fe5f-345">Esegue l'impalcatura dei file necessari, compila le immagini Docker e consente di eseguire il debug dell'app all'interno di un contenitore.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-345">It scaffolds required files, builds Docker images, and enables you to debug your app inside a container.</span></span> <span data-ttu-id="0fe5f-346">L'estensione include una finestra di esplorazione visiva che semplifica l'esecuzione di azioni su contenitori e immagini, ad esempio avvio, arresto, ispezione, rimozione e altro ancora.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-346">The extension features a visual explorer that makes it easy to take actions on containers and images such as start, stop, inspect, remove, and more.</span></span> <span data-ttu-id="0fe5f-347">L'estensione supporta inoltre Docker Compose consentendo di gestire più contenitori in esecuzione come una singola unità.</span><span class="sxs-lookup"><span data-stu-id="0fe5f-347">The extension also supports Docker Compose enabling you to manage multiple running containers as a single unit.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="0fe5f-348">[Precedente](scale-applications.md)
>[successivo](leverage-serverless-functions.md)</span><span class="sxs-lookup"><span data-stu-id="0fe5f-348">[Previous](scale-applications.md)
[Next](leverage-serverless-functions.md)</span></span>
