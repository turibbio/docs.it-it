---
title: gRPC (informazioni in base al t
description: Informazioni su gRPC, il suo ruolo nelle applicazioni native cloud e su come differisce dalla comunicazione HTTP RESTful.
author: robvet
ms.date: 03/31/2020
ms.openlocfilehash: 28a07ad5ec105d3fc5b65e4cf0ac0cd85eb16627
ms.sourcegitcommit: 79b0dd8bfc63f33a02137121dd23475887ecefda
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/01/2020
ms.locfileid: "80524173"
---
# <a name="grpc"></a><span data-ttu-id="0f1c1-103">gRPC (informazioni in base al t</span><span class="sxs-lookup"><span data-stu-id="0f1c1-103">gRPC</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="0f1c1-104">Finora, in questo libro, ci siamo concentrati sulla comunicazione basata su [REST.](https://docs.microsoft.com/azure/architecture/best-practices/api-design)</span><span class="sxs-lookup"><span data-stu-id="0f1c1-104">So far in this book, we've focused on [REST-based](https://docs.microsoft.com/azure/architecture/best-practices/api-design) communication.</span></span> <span data-ttu-id="0f1c1-105">Abbiamo visto che REST è uno stile architettonico flessibile che definisce le operazioni basate su CRUD sulle risorse dell'entità.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-105">We've seen that REST is a flexible architectural style that defines CRUD-based operations against entity resources.</span></span> <span data-ttu-id="0f1c1-106">I client interagiscono con le risorse tramite HTTP con un modello di comunicazione richiesta/risposta.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-106">Clients interact with resources across HTTP with a request/response communication model.</span></span> <span data-ttu-id="0f1c1-107">Mentre REST è ampiamente implementato, una tecnologia di comunicazione più recente, gRPC, ha guadagnato enorme slancio in tutta la comunità cloud-nativa.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-107">While REST is widely implemented, a newer communication technology, gRPC, has gained tremendous momentum across the cloud-native community.</span></span>

## <a name="what-is-grpc"></a><span data-ttu-id="0f1c1-108">Che cos'è gRPC?</span><span class="sxs-lookup"><span data-stu-id="0f1c1-108">What is gRPC?</span></span>

<span data-ttu-id="0f1c1-109">gRPC è un framework moderno e ad alte prestazioni che evolve il protocollo [RPC (Remote Procedure Call)](https://en.wikipedia.org/wiki/Remote_procedure_call) secolare.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-109">gRPC is a modern, high-performance framework that evolves the age-old [remote procedure call (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) protocol.</span></span> <span data-ttu-id="0f1c1-110">A livello di applicazione, gRPC semplifica la messaggistica tra client e servizi back-end.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-110">At the application level, gRPC streamlines messaging between clients and back-end services.</span></span> <span data-ttu-id="0f1c1-111">Originario di Google, gRPC è open source e fa parte dell'ecosistema [Cloud Native Computing Foundation (CNCF)](https://www.cncf.io/) delle offerte cloud native.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-111">Originating from Google, gRPC is open source and part of the  [Cloud Native Computing Foundation (CNCF)](https://www.cncf.io/) ecosystem of cloud-native offerings.</span></span> <span data-ttu-id="0f1c1-112">CNCF considera gRPC un [progetto di incubazione](https://github.com/cncf/toc/blob/master/process/graduation_criteria.adoc).</span><span class="sxs-lookup"><span data-stu-id="0f1c1-112">CNCF considers gRPC an [incubating project](https://github.com/cncf/toc/blob/master/process/graduation_criteria.adoc).</span></span> <span data-ttu-id="0f1c1-113">L'incubazione significa che gli utenti finali utilizzano la tecnologia nelle applicazioni di produzione e il progetto ha un numero sano di contributori.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-113">Incubating means end users are using the technology in production applications, and the project has a healthy number of contributors.</span></span>

<span data-ttu-id="0f1c1-114">Una tipica applicazione client gRPC esporrà una funzione locale in-process che implementa un'operazione aziendale.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-114">A typical gRPC client app will expose a local, in-process function that implements a business operation.</span></span> <span data-ttu-id="0f1c1-115">Sotto le coperte, tale funzione locale richiama un'altra funzione su un computer remoto.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-115">Under the covers, that local function invokes another function on a remote machine.</span></span> <span data-ttu-id="0f1c1-116">Quella che sembra essere una chiamata locale diventa essenzialmente una chiamata out-of-process trasparente a un servizio remoto.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-116">What appears to be a local call essentially becomes a transparent out-of-process call to a remote service.</span></span> <span data-ttu-id="0f1c1-117">L'impianto idraulico RPC astrae la comunicazione di rete point-to-point, la serializzazione e l'esecuzione tra i computer.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-117">The RPC plumbing abstracts the point-to-point networking communication, serialization, and execution between computers.</span></span>

<span data-ttu-id="0f1c1-118">Nelle applicazioni native del cloud, gli sviluppatori spesso lavorano tra linguaggi di programmazione, framework e tecnologie.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-118">In cloud-native applications, developers often work across programming languages, frameworks, and technologies.</span></span> <span data-ttu-id="0f1c1-119">Questa *interoperabilità* complica i contratti di messaggio e l'impianto idraulico necessario per la comunicazione multipiattaforma.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-119">This *interoperability* complicates message contracts and the plumbing required for cross-platform communication.</span></span>  <span data-ttu-id="0f1c1-120">gRPC fornisce uno "strato orizzontale uniforme" che astrae questi problemi.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-120">gRPC provides a "uniform horizontal layer" that abstracts these concerns.</span></span> <span data-ttu-id="0f1c1-121">Il codice degli sviluppatori nella loro piattaforma nativa si concentra sulle funzionalità aziendali, mentre gRPC gestisce l'impianto idraulico di comunicazione.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-121">Developers code in their native platform focused on business functionality, while gRPC handles communication plumbing.</span></span>

<span data-ttu-id="0f1c1-122">gRPC offre un supporto completo per la maggior parte degli stack di sviluppo più diffusi, tra cui Java, JavaScript, C,, Go, Swift e NodeJS.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-122">gRPC offers comprehensive support across most popular development stacks, including Java, JavaScript, C#, Go, Swift, and NodeJS.</span></span>

## <a name="grpc-benefits"></a><span data-ttu-id="0f1c1-123">Vantaggi gRPC</span><span class="sxs-lookup"><span data-stu-id="0f1c1-123">gRPC Benefits</span></span>

<span data-ttu-id="0f1c1-124">gRPC utilizza HTTP/2 per il protocollo di trasporto.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-124">gRPC uses HTTP/2 for its transport protocol.</span></span> <span data-ttu-id="0f1c1-125">Sebbene sia compatibile con HTTP 1.1, HTTP/2 offre molte funzionalità avanzate:</span><span class="sxs-lookup"><span data-stu-id="0f1c1-125">While compatible with HTTP 1.1, HTTP/2 features many advanced capabilities:</span></span>

- <span data-ttu-id="0f1c1-126">Protocollo binario per il trasporto dei dati, a differenza di HTTP 1.1, che invia i dati come testo non crittografato.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-126">A binary protocol for data transport - unlike HTTP 1.1, which sends data as clear text.</span></span>
- <span data-ttu-id="0f1c1-127">Supporto multiplexing per l'invio di più richieste parallele sulla stessa connessione - HTTP 1.1 limita l'elaborazione a un messaggio di richiesta/risposta alla volta.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-127">Multiplexing support for sending multiple parallel requests over the same connection - HTTP 1.1 limits processing to one request/response message at a time.</span></span>
- <span data-ttu-id="0f1c1-128">Comunicazione full-duplex bidirezionale per l'invio simultaneo di richieste client e risposte del server.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-128">Bidirectional full-duplex communication for sending both client requests and server responses simultaneously.</span></span>
- <span data-ttu-id="0f1c1-129">Streaming integrato che consente richieste e risposte per trasmettere in modo asincrono set di dati di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-129">Built-in streaming enabling requests and responses to asynchronously stream large data sets.</span></span>

<span data-ttu-id="0f1c1-130">gRPC è leggero e altamente performante.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-130">gRPC is lightweight and highly performant.</span></span> <span data-ttu-id="0f1c1-131">Può essere fino a 8 volte più veloce della serializzazione JSON con messaggi di dimensioni inferiori del 60-80%.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-131">It can be up to 8x faster than JSON serialization with messages 60-80% smaller.</span></span> <span data-ttu-id="0f1c1-132">Nel linguaggio di linguaggio Microsoft [Windows Communication Foundation (WCF),](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) le prestazioni gRPC superano la velocità e l'efficienza delle associazioni NetTCP altamente [ottimizzate.](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8)</span><span class="sxs-lookup"><span data-stu-id="0f1c1-132">In Microsoft [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) parlance, gRPC performance exceeds the speed and efficiency of the highly optimized [NetTCP bindings](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span></span> <span data-ttu-id="0f1c1-133">A differenza di NetTCP, che favorisce lo stack Microsoft, gRPC è multipiattaforma.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-133">Unlike NetTCP, which favors the Microsoft stack, gRPC is cross-platform.</span></span>

## <a name="protocol-buffers"></a><span data-ttu-id="0f1c1-134">Buffer di protocollo</span><span class="sxs-lookup"><span data-stu-id="0f1c1-134">Protocol Buffers</span></span>

<span data-ttu-id="0f1c1-135">gRPC adotta una tecnologia open source denominata [Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview).</span><span class="sxs-lookup"><span data-stu-id="0f1c1-135">gRPC embraces an open-source technology called [Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview).</span></span> <span data-ttu-id="0f1c1-136">Forniscono un formato di serializzazione altamente efficiente e indipendente dalla piattaforma per la serializzazione di messaggi strutturati che i servizi vengono inviati tra loro.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-136">They provide a highly efficient and platform-neutral serialization format for serializing structured messages that services send to each other.</span></span> <span data-ttu-id="0f1c1-137">Utilizzando un IDL (Interface Definition Language) multipiattaforma, gli sviluppatori definiscono un contratto di servizio per ogni microservizio.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-137">Using a cross-platform Interface Definition Language (IDL), developers define a service contract for each microservice.</span></span> <span data-ttu-id="0f1c1-138">Il contratto, implementato come `.proto` file basato su testo, descrive i metodi, gli input e gli output per ogni servizio.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-138">The contract, implemented as a text-based `.proto` file, describes the methods, inputs, and outputs for each service.</span></span> <span data-ttu-id="0f1c1-139">Lo stesso file di contratto può essere utilizzato per client e servizi gRPC basati su piattaforme di sviluppo diverse.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-139">The same contract file can be used for gRPC clients and services built on different development platforms.</span></span>

<span data-ttu-id="0f1c1-140">Utilizzando il file proto, il compilatore Protobuf, `protoc`, genera codice client e servizio per la piattaforma di destinazione.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-140">Using the proto file, the Protobuf compiler, `protoc`, generates both client and service code for your target platform.</span></span> <span data-ttu-id="0f1c1-141">Il codice include i seguenti componenti:</span><span class="sxs-lookup"><span data-stu-id="0f1c1-141">The code includes the following components:</span></span>

- <span data-ttu-id="0f1c1-142">Oggetti fortemente tipizzati, condivisi dal client e dal servizio, che rappresentano le operazioni del servizio e gli elementi di dati per un messaggio.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-142">Strongly-typed objects, shared by the client and service, that represent the service operations and data elements for a message.</span></span>
- <span data-ttu-id="0f1c1-143">Classe base fortemente tipizzata con l'impianto idraulico di rete richiesto che il servizio gRPC remoto può ereditare ed estendere.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-143">A strongly-typed base class with the required network plumbing that the remote gRPC service can inherit and extend.</span></span>
- <span data-ttu-id="0f1c1-144">Uno stub client che contiene l'impianto idraulico necessario per richiamare il servizio gRPC remoto.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-144">A client stub that contains the required plumbing to invoke the remote gRPC service.</span></span>

<span data-ttu-id="0f1c1-145">In fase di esecuzione, ogni messaggio viene serializzato come rappresentazione Protobuf standard e scambiato tra il client e il servizio remoto.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-145">At runtime, each message is serialized as a standard Protobuf representation and exchanged between the client and remote service.</span></span> <span data-ttu-id="0f1c1-146">A differenza di JSON o XML, i messaggi Protobuf vengono serializzati come byte binari compilati.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-146">Unlike JSON or XML, Protobuf messages are serialized as compiled binary bytes.</span></span>

<span data-ttu-id="0f1c1-147">Il libro, [gRPC per gli sviluppatori WCF](https://docs.microsoft.com/dotnet/architecture/grpc-for-wcf-developers/), disponibile nel sito Microsoft Architecture , fornisce una copertura approfondita dei buffer gRPC e protocollo.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-147">The book, [gRPC for WCF Developers](https://docs.microsoft.com/dotnet/architecture/grpc-for-wcf-developers/), available from the Microsoft Architecture site, provides in-depth coverage of gRPC and Protocol Buffers.</span></span>

## <a name="grpc-support-in-net"></a><span data-ttu-id="0f1c1-148">Supporto gRPC in .NET</span><span class="sxs-lookup"><span data-stu-id="0f1c1-148">gRPC support in .NET</span></span>

<span data-ttu-id="0f1c1-149">gRPC è integrato in .NET Core 3.0 SDK o versione successiva.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-149">gRPC is integrated into .NET Core 3.0 SDK or later.</span></span> <span data-ttu-id="0f1c1-150">I seguenti strumenti lo supportano:</span><span class="sxs-lookup"><span data-stu-id="0f1c1-150">The following tools support it:</span></span>

- <span data-ttu-id="0f1c1-151">Visual Studio 2019, versione 16.3 o successiva, con il carico di lavoro di sviluppo Web installato.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-151">Visual Studio 2019, version 16.3 or later, with the web development workload installed.</span></span>
- <span data-ttu-id="0f1c1-152">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="0f1c1-152">Visual Studio Code</span></span>
- <span data-ttu-id="0f1c1-153">il dotnet CLI</span><span class="sxs-lookup"><span data-stu-id="0f1c1-153">the dotnet CLI</span></span>

<span data-ttu-id="0f1c1-154">L'SDK include strumenti per il routing degli endpoint, l'IoC incorporato e la registrazione.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-154">The SDK includes tooling for endpoint routing, built-in IoC, and logging.</span></span> <span data-ttu-id="0f1c1-155">Il server Web Kestrel open-source supporta le connessioni HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-155">The open-source Kestrel web server supports HTTP/2 connections.</span></span> <span data-ttu-id="0f1c1-156">Figura 4-20 Mostra un modello di Visual Studio 2019 che esegue lo scaffolding di un progetto di scheletro per un servizio gRPC.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-156">Figure 4-20 shows a Visual Studio 2019 template that scaffolds a skeleton project for a gRPC service.</span></span> <span data-ttu-id="0f1c1-157">Tieni presente che .NET Core supporta completamente Windows, Linux e macOS.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-157">Note how .NET Core fully supports Windows, Linux, and macOS.</span></span>

![Supporto gRPC in Visual Studio 2019](./media/visual-studio-2019-grpc-template.png)

<span data-ttu-id="0f1c1-159">**Figura 4-20**.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-159">**Figure 4-20**.</span></span> <span data-ttu-id="0f1c1-160">Supporto gRPC in Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="0f1c1-160">gRPC support in Visual Studio 2019</span></span>
  
<span data-ttu-id="0f1c1-161">Figura 4-21 Mostra lo scheletro servizio gRPC generato dallo scaffolding incorporato incluso in Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-161">Figure 4-21 shows the skeleton gRPC service generated from the built-in scaffolding included in Visual Studio 2019.</span></span>  

![Progetto gRPC in Visual Studio 2019](./media/grpc-project.png  )

<span data-ttu-id="0f1c1-163">**Figura 4-21**.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-163">**Figure 4-21**.</span></span> <span data-ttu-id="0f1c1-164">Progetto gRPC in Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="0f1c1-164">gRPC project in Visual Studio 2019</span></span>

<span data-ttu-id="0f1c1-165">Nella figura precedente, prendere nota del file di descrizione proto e del codice del servizio.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-165">In the previous figure, note the proto description file and service code.</span></span> <span data-ttu-id="0f1c1-166">Come si vedrà a breve, Visual Studio genera una configurazione aggiuntiva sia nella classe Startup e nel file di progetto sottostante.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-166">As you'll see shortly, Visual Studio generates additional configuration in both the Startup class and underlying project file.</span></span>

## <a name="grpc-usage"></a><span data-ttu-id="0f1c1-167">Utilizzo gRPC</span><span class="sxs-lookup"><span data-stu-id="0f1c1-167">gRPC usage</span></span>

<span data-ttu-id="0f1c1-168">Favor gRPC per i seguenti scenari:</span><span class="sxs-lookup"><span data-stu-id="0f1c1-168">Favor gRPC for the following scenarios:</span></span>

- <span data-ttu-id="0f1c1-169">Comunicazione sincrona tra microservizi di back-end e microservizio in cui è necessaria una risposta immediata per continuare l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-169">Synchronous backend microservice-to-microservice communication where an immediate response is required to continue processing.</span></span>
- <span data-ttu-id="0f1c1-170">Ambienti poliglotta che devono supportare piattaforme di programmazione miste.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-170">Polyglot environments that need to support mixed programming platforms.</span></span>
- <span data-ttu-id="0f1c1-171">Bassa latenza e comunicazione ad alta velocità effettiva in cui le prestazioni sono critiche.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-171">Low latency and high throughput communication where performance is critical.</span></span>
- <span data-ttu-id="0f1c1-172">Comunicazione point-to-point in tempo reale - gRPC può spingere i messaggi in tempo reale senza polling e ha un eccellente supporto per lo streaming bidirezionale.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-172">Point-to-point real-time communication - gRPC can push messages in real time without polling and has excellent support for bi-directional streaming.</span></span>
- <span data-ttu-id="0f1c1-173">Ambienti vincolati di rete: i messaggi gRPC binari sono sempre più piccoli di un messaggio JSON basato su testo equivalente.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-173">Network constrained environments – binary gRPC messages are always smaller than an equivalent text-based JSON message.</span></span>

<span data-ttu-id="0f1c1-174">Al momento, di questa scrittura, gRPC viene utilizzato principalmente con i servizi back-end.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-174">At the time, of this writing, gRPC is primarily used with backend services.</span></span> <span data-ttu-id="0f1c1-175">La maggior parte dei browser moderni non è in grado di fornire il livello di controllo HTTP/2 necessario per supportare un client gRPC front-end.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-175">Most modern browsers can't provide the level of HTTP/2 control required to support a front-end gRPC client.</span></span> <span data-ttu-id="0f1c1-176">Detto questo, c'è una [prima iniziativa](https://devblogs.microsoft.com/aspnet/grpc-web-experiment/) che consente la comunicazione gRPC da applicazioni basate su browser create con JavaScript o Blazor WebAssembly tecnologie.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-176">That said, there's an [early initiative](https://devblogs.microsoft.com/aspnet/grpc-web-experiment/) that enables gRPC communication from browser-based apps built with JavaScript or Blazor WebAssembly technologies.</span></span> <span data-ttu-id="0f1c1-177">[Il gRPC-Web per .NET](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md) consente a un'app gRPC ASP.NET Core di supportare le funzionalità gRPC nelle app browser:</span><span class="sxs-lookup"><span data-stu-id="0f1c1-177">The  [gRPC-Web for .NET](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md) enables an ASP.NET Core gRPC app to support gRPC features in browser apps:</span></span>

- <span data-ttu-id="0f1c1-178">Client generati codice fortemente tipizzato</span><span class="sxs-lookup"><span data-stu-id="0f1c1-178">Strongly-typed code-generated clients</span></span>
- <span data-ttu-id="0f1c1-179">Messaggi Protobuf compatti</span><span class="sxs-lookup"><span data-stu-id="0f1c1-179">Compact Protobuf messages</span></span>
- <span data-ttu-id="0f1c1-180">Streaming server</span><span class="sxs-lookup"><span data-stu-id="0f1c1-180">Server streaming</span></span>

## <a name="grpc-implementation"></a><span data-ttu-id="0f1c1-181">Implementazione gRPC</span><span class="sxs-lookup"><span data-stu-id="0f1c1-181">gRPC implementation</span></span>

<span data-ttu-id="0f1c1-182">L'architettura di riferimento dei microservizi, [eShop su container](https://github.com/dotnet-architecture/eShopOnContainers), di Microsoft, mostra come implementare i servizi gRPC nelle applicazioni .NET Core.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-182">The microservice reference architecture, [eShop on Containers](https://github.com/dotnet-architecture/eShopOnContainers), from Microsoft, shows how to implement gRPC services in .NET Core applications.</span></span> <span data-ttu-id="0f1c1-183">La figura 4-22 presenta l'architettura back-end.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-183">Figure 4-22 presents the back-end architecture.</span></span>

![Architettura back-end per eShop nei contenitoriBackend architecture for eShop on Containers](./media/eshop-with-aggregators.png)

<span data-ttu-id="0f1c1-185">**Figura 4-22**.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-185">**Figure 4-22**.</span></span> <span data-ttu-id="0f1c1-186">Architettura back-end per eShop nei contenitoriBackend architecture for eShop on Containers</span><span class="sxs-lookup"><span data-stu-id="0f1c1-186">Backend architecture for eShop on Containers</span></span>

<span data-ttu-id="0f1c1-187">Nella figura precedente, notare come eShop abbraccia il [modello Backend for Frontends](https://docs.microsoft.com/azure/architecture/patterns/backends-for-frontends) (BFF) esponendo più gateway API.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-187">In the previous figure, note how eShop embraces the [Backend for Frontends pattern](https://docs.microsoft.com/azure/architecture/patterns/backends-for-frontends) (BFF) by exposing multiple API gateways.</span></span> <span data-ttu-id="0f1c1-188">Abbiamo discusso il modello BFF in precedenza in questo capitolo.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-188">We discussed the BFF pattern earlier in this chapter.</span></span> <span data-ttu-id="0f1c1-189">Prestare particolare attenzione al microservizio Aggregator (in grigio) che si trova tra il gateway API Web-Shopping e i microservizi di shopping back-end.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-189">Pay close attention to the Aggregator microservice (in gray) that sits between the Web-Shopping API Gateway and backend Shopping microservices.</span></span> <span data-ttu-id="0f1c1-190">L'aggregatore riceve una singola richiesta da un client, la invia a vari microservizi, li aggrega i risultati e li invia al client richiedente.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-190">The Aggregator receives a single request from a client, dispatches it to various microservices, aggregates the results, and sends them back to the requesting client.</span></span> <span data-ttu-id="0f1c1-191">Tali operazioni richiedono in genere una comunicazione sincrona per produrre una risposta immediata.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-191">Such operations typically require synchronous communication as to produce an immediate response.</span></span> <span data-ttu-id="0f1c1-192">In eShop, le chiamate back-end dall'aggregatore vengono eseguite utilizzando gRPC come illustrato nella Figura 4-23.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-192">In eShop, backend calls from the Aggregator are performed using gRPC as shown in Figure 4-23.</span></span>

![gRPC in eShop su contenitori](./media/grpc-implementation.png)

<span data-ttu-id="0f1c1-194">**Figura 4-23**.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-194">**Figure 4-23**.</span></span> <span data-ttu-id="0f1c1-195">gRPC in eShop su contenitori</span><span class="sxs-lookup"><span data-stu-id="0f1c1-195">gRPC in eShop on Containers</span></span>

<span data-ttu-id="0f1c1-196">La comunicazione gRPC richiede componenti client e server.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-196">gRPC communication requires both client and server components.</span></span> <span data-ttu-id="0f1c1-197">Nella figura precedente, si noti come l'aggregatore shopping implementa un client gRPC.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-197">In the previous figure, note how the Shopping Aggregator implements a gRPC client.</span></span> <span data-ttu-id="0f1c1-198">Il client effettua chiamate gRPC sincrone (in rosso) ai microservizi back-end, ognuna delle quali implementa un server gRPC.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-198">The client makes synchronous gRPC calls (in red) to backend microservices, each of which implement a gRPC server.</span></span> <span data-ttu-id="0f1c1-199">Sia il client che il server sfruttano l'impianto idraulico gRPC incorporato di .NET Core 3.0 SDK.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-199">Both the client and server take advantage of the built-in gRPC plumbing from the .NET Core 3.0 SDK.</span></span> <span data-ttu-id="0f1c1-200">Gli *stub* lato client forniscono l'impianto idraulico per richiamare chiamate gRPC remote.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-200">Client-side *stubs* provide the plumbing to invoke remote gRPC calls.</span></span> <span data-ttu-id="0f1c1-201">I componenti lato server forniscono l'impianto idraulico gRPC che le classi di servizi personalizzate possono ereditare e utilizzare.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-201">Server-side components provide gRPC plumbing that custom service classes can inherit and consume.</span></span>

<span data-ttu-id="0f1c1-202">I microservizi che espongono sia un'API RESTful che una comunicazione gRPC richiedono più endpoint per gestire il traffico.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-202">Microservices that expose both a RESTful API and gRPC communication require multiple endpoints to manage traffic.</span></span> <span data-ttu-id="0f1c1-203">Si aprirebbe un endpoint in ascolto del traffico HTTP per le chiamate RESTful e un altro per le chiamate gRPC.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-203">You would open an endpoint that listens for HTTP traffic for the RESTful calls and another for gRPC calls.</span></span> <span data-ttu-id="0f1c1-204">L'endpoint gRPC deve essere configurato per il protocollo HTTP/2 necessario per la comunicazione gRPC.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-204">The gRPC endpoint must be configured for the HTTP/2 protocol that is required for gRPC communication.</span></span>

<span data-ttu-id="0f1c1-205">Mentre ci sforziamo di disaccoppiare i microservizi con modelli di comunicazione asincrona, alcune operazioni richiedono chiamate dirette.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-205">While we strive to decouple microservices with asynchronous communication patterns, some operations require direct calls.</span></span> <span data-ttu-id="0f1c1-206">gRPC dovrebbe essere la scelta principale per la comunicazione sincrona diretta tra microservizi.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-206">gRPC should be the primary choice for direct synchronous communication between microservices.</span></span> <span data-ttu-id="0f1c1-207">Il suo protocollo di comunicazione ad alte prestazioni, basato su HTTP/2 e buffer di protocollo, lo rendono una scelta perfetta.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-207">Its high-performance communication protocol, based on HTTP/2 and protocol buffers, make it a perfect choice.</span></span>

## <a name="looking-ahead"></a><span data-ttu-id="0f1c1-208">Guardare al futuro</span><span class="sxs-lookup"><span data-stu-id="0f1c1-208">Looking ahead</span></span>

<span data-ttu-id="0f1c1-209">Guardando al futuro, gRPC continuerà a guadagnare trazione per i sistemi cloud-native.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-209">Looking ahead, gRPC will continue to gain traction for cloud-native systems.</span></span> <span data-ttu-id="0f1c1-210">I vantaggi in termini di prestazioni e la facilità di sviluppo sono convincenti.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-210">The performance benefits and ease of development are compelling.</span></span> <span data-ttu-id="0f1c1-211">Tuttavia, REST sarà probabilmente in giro per un lungo periodo di tempo.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-211">However, REST will likely be around for a long time.</span></span> <span data-ttu-id="0f1c1-212">Eccellente per le API esposte pubblicamente e per motivi di compatibilità con le versioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="0f1c1-212">It excels for publicly exposed APIs and for backward compatibility reasons.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="0f1c1-213">[Successivo](service-to-service-communication.md)
>[precedente](service-mesh-communication-infrastructure.md)</span><span class="sxs-lookup"><span data-stu-id="0f1c1-213">[Previous](service-to-service-communication.md)
[Next](service-mesh-communication-infrastructure.md)</span></span>
