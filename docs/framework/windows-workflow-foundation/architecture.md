---
title: Architettura del flusso di lavoro di Windows
description: Windows Workflow Foundation incapsula unità di lavoro come attività, che vengono eseguite in un ambiente con controllo di flusso, gestione delle eccezioni e altre funzionalità.
ms.date: 03/30/2017
ms.assetid: 1d4c6495-d64a-46d0-896a-3a01fac90aa9
ms.openlocfilehash: 22ebeb7d95342ad6843e0721da8b213ed4a4d9b6
ms.sourcegitcommit: 9a4488a3625866335e83a20da5e9c5286b1f034c
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/15/2020
ms.locfileid: "83420136"
---
# <a name="windows-workflow-architecture"></a><span data-ttu-id="b9d31-103">Architettura del flusso di lavoro di Windows</span><span class="sxs-lookup"><span data-stu-id="b9d31-103">Windows Workflow Architecture</span></span>
<span data-ttu-id="b9d31-104">Windows Workflow Foundation (WF) eleva il livello di astrazione per lo sviluppo di applicazioni interattive a esecuzione prolungata.</span><span class="sxs-lookup"><span data-stu-id="b9d31-104">Windows Workflow Foundation (WF) raises the abstraction level for developing interactive long-running applications.</span></span> <span data-ttu-id="b9d31-105">Le unità di lavoro vengono incapsulate come attività.</span><span class="sxs-lookup"><span data-stu-id="b9d31-105">Units of work are encapsulated as activities.</span></span> <span data-ttu-id="b9d31-106">Le attività vengono eseguite in un ambiente che fornisce funzionalità per il controllo del flusso, gestione delle eccezioni, propagazione degli errori, persistenza dei dati relativi allo stato, caricamento e scaricamento di flussi di lavoro in corso dalla memoria, rilevamento e flusso della transazione.</span><span class="sxs-lookup"><span data-stu-id="b9d31-106">Activities run in an environment that provides facilities for flow control, exception handling, fault propagation, persistence of state data, loading and unloading of in-progress workflows from memory, tracking, and transaction flow.</span></span>  
  
## <a name="activity-architecture"></a><span data-ttu-id="b9d31-107">Architettura dell'attività</span><span class="sxs-lookup"><span data-stu-id="b9d31-107">Activity Architecture</span></span>  
 <span data-ttu-id="b9d31-108">Le attività vengono sviluppate come tipi CLR che derivano dall'oggetto <xref:System.Activities.Activity>, <xref:System.Activities.CodeActivity>, <xref:System.Activities.AsyncCodeActivity> o <xref:System.Activities.NativeActivity> oppure dalle relative varianti che restituiscono un valore, <xref:System.Activities.Activity%601>, <xref:System.Activities.CodeActivity%601>, <xref:System.Activities.AsyncCodeActivity%601> o <xref:System.Activities.NativeActivity%601>.</span><span class="sxs-lookup"><span data-stu-id="b9d31-108">Activities are developed as CLR types that derive from either <xref:System.Activities.Activity>, <xref:System.Activities.CodeActivity>, <xref:System.Activities.AsyncCodeActivity>, or <xref:System.Activities.NativeActivity>, or their variants that return a value, <xref:System.Activities.Activity%601>, <xref:System.Activities.CodeActivity%601>, <xref:System.Activities.AsyncCodeActivity%601>, or <xref:System.Activities.NativeActivity%601>.</span></span> <span data-ttu-id="b9d31-109">Lo sviluppo di attività che derivano dall'oggetto <xref:System.Activities.Activity> consente all'utente di assemblare attività preesistenti per creare rapidamente unità di lavoro che vengono eseguite nell'ambiente del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="b9d31-109">Developing activities that derive from <xref:System.Activities.Activity> allows the user to assemble pre-existing activities to quickly create units of work that execute in the workflow environment.</span></span> <span data-ttu-id="b9d31-110">L'oggetto <xref:System.Activities.CodeActivity>, d'altra parte, consente la creazione della logica di esecuzione nel codice gestito usando l'oggetto <xref:System.Activities.CodeActivityContext> principalmente per accedere agli argomenti delle attività.</span><span class="sxs-lookup"><span data-stu-id="b9d31-110"><xref:System.Activities.CodeActivity>, on the other hand, enables execution logic to be authored in managed code using <xref:System.Activities.CodeActivityContext> primarily for access to activity arguments.</span></span> <span data-ttu-id="b9d31-111">L'oggetto <xref:System.Activities.AsyncCodeActivity> è simile a <xref:System.Activities.CodeActivity> con la differenza che può essere usato per implementare attività asincrone.</span><span class="sxs-lookup"><span data-stu-id="b9d31-111"><xref:System.Activities.AsyncCodeActivity> is similar to <xref:System.Activities.CodeActivity> except that it can be used to implement asynchronous tasks.</span></span> <span data-ttu-id="b9d31-112">Lo sviluppo di attività che derivano dall'oggetto <xref:System.Activities.NativeActivity> consente agli utenti di accedere al runtime tramite l'oggetto <xref:System.Activities.NativeActivityContext> per funzionalità quali la pianificazione di elementi figlio, la creazione di segnalibri, il richiamo di lavori asincroni, la registrazione di transazioni e così via.</span><span class="sxs-lookup"><span data-stu-id="b9d31-112">Developing activities that derive from <xref:System.Activities.NativeActivity> allows users to access the runtime through the <xref:System.Activities.NativeActivityContext> for functionality like scheduling children, creating bookmarks, invoking asynchronous work, registering transactions, and more.</span></span>  
  
 <span data-ttu-id="b9d31-113">La creazione di attività che derivano dall'oggetto <xref:System.Activities.Activity> è dichiarativa e questa attività possono essere create in XAML.</span><span class="sxs-lookup"><span data-stu-id="b9d31-113">Authoring activities that derive from <xref:System.Activities.Activity> is declarative and these activities can be authored in XAML.</span></span> <span data-ttu-id="b9d31-114">Nell'esempio seguente viene creata un'attività denominata `Prompt` usando altre attività per il corpo dell'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="b9d31-114">In the following example, an activity called `Prompt` is created using other activities for the execution body.</span></span>  
  
```xml  
<Activity x:Class='Prompt'  
  xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'  
    xmlns:z='http://schemas.microsoft.com/netfx/2008/xaml/schema'  
xmlns:my='clr-namespace:XAMLActivityDefinition;assembly=XAMLActivityDefinition'  
xmlns:s="clr-namespace:System;assembly=mscorlib"  
xmlns="http://schemas.microsoft.com/2009/workflow">  
<z:SchemaType.Members>  
    <z:SchemaType.SchemaProperty Name='Text' Type=' InArgument(s:String)' />  
  <z:SchemaType.SchemaProperty Name='Response' Type='OutArgument(s:String)' />  
</z:SchemaType.Members>  
  <Sequence>  
    <my:WriteLine Text='[Text]' />  
    <my:ReadLine BookmarkName='r1' Result='[Response]' />  
  </Sequence>  
</Activity>  
```  
  
## <a name="activity-context"></a><span data-ttu-id="b9d31-115">Contesto dell'attività</span><span class="sxs-lookup"><span data-stu-id="b9d31-115">Activity Context</span></span>  
 <span data-ttu-id="b9d31-116">L'oggetto <xref:System.Activities.ActivityContext> rappresenta l'interfaccia tra l'autore di attività e l'esecuzione del flusso di lavoro e fornisce l'accesso alle numerose funzionalità di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="b9d31-116">The <xref:System.Activities.ActivityContext> is the activity author's interface to the workflow runtime and provides access to the runtime's wealth of features.</span></span> <span data-ttu-id="b9d31-117">Nell'esempio seguente viene definita un'attività che usa il contesto di esecuzione per creare un segnalibro (meccanismo che consente a un'attività di registrare un punto di continuazione nella relativa esecuzione che può essere ripresa da un host che passa dati all'attività).</span><span class="sxs-lookup"><span data-stu-id="b9d31-117">In the following example, an activity is defined that uses the execution context to create a bookmark (the mechanism that allows an activity to register a continuation point in its execution that can be resumed by a host passing data into the activity).</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#15](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#15)]  
  
## <a name="activity-life-cycle"></a><span data-ttu-id="b9d31-118">Ciclo di vita dell'attività</span><span class="sxs-lookup"><span data-stu-id="b9d31-118">Activity Life Cycle</span></span>  
 <span data-ttu-id="b9d31-119">Un'istanza di un'attività viene avviata nello stato <xref:System.Activities.ActivityInstanceState.Executing>.</span><span class="sxs-lookup"><span data-stu-id="b9d31-119">An instance of an activity starts out in the <xref:System.Activities.ActivityInstanceState.Executing> state.</span></span> <span data-ttu-id="b9d31-120">A meno che non si verifichino eccezioni, rimane in questo stato finché non vengono completati l'esecuzione di tutte le attività figlio e qualsiasi altro lavoro in sospeso (ad esempio gli oggetti <xref:System.Activities.Bookmark>); a questo punto passa allo stato <xref:System.Activities.ActivityInstanceState.Closed>.</span><span class="sxs-lookup"><span data-stu-id="b9d31-120">Unless exceptions are encountered, it remains in this state until all child activities are finished executing and any other pending work (<xref:System.Activities.Bookmark> objects, for instance) is completed, at which point it transitions to the <xref:System.Activities.ActivityInstanceState.Closed> state.</span></span> <span data-ttu-id="b9d31-121">L'elemento padre di un istanza dell'attività può richiedere l'annullamento di un elemento figlio. Se quest'ultimo può essere annullato, viene completato nello stato <xref:System.Activities.ActivityInstanceState.Canceled>.</span><span class="sxs-lookup"><span data-stu-id="b9d31-121">The parent of an activity instance can request a child to cancel; if the child is able to be canceled it completes in the <xref:System.Activities.ActivityInstanceState.Canceled> state.</span></span> <span data-ttu-id="b9d31-122">Se durante l'esecuzione viene generata un'eccezione, il runtime inserisce l'attività nello stato <xref:System.Activities.ActivityInstanceState.Faulted> e propaga l'eccezione fino alla catena di attività padre.</span><span class="sxs-lookup"><span data-stu-id="b9d31-122">If an exception is thrown during execution, the runtime puts the activity into the <xref:System.Activities.ActivityInstanceState.Faulted> state and propagates the exception up the parent chain of activities.</span></span> <span data-ttu-id="b9d31-123">Di seguito sono riportati i tre stati di completamento di un'attività:</span><span class="sxs-lookup"><span data-stu-id="b9d31-123">The following are the three completion states of an activity:</span></span>
  
- <span data-ttu-id="b9d31-124">**Chiuso:** L'attività ha completato il proprio lavoro ed è stata chiusa.</span><span class="sxs-lookup"><span data-stu-id="b9d31-124">**Closed:** The activity has completed its work and exited.</span></span>  
  
- <span data-ttu-id="b9d31-125">Operazione **annullata:** L'attività ha abbandonato normalmente il lavoro ed è stata chiusa.</span><span class="sxs-lookup"><span data-stu-id="b9d31-125">**Canceled:** The activity has gracefully abandoned its work and exited.</span></span> <span data-ttu-id="b9d31-126">Quando viene immesso questo stato, il lavoro non viene sottoposto a rollback in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="b9d31-126">Work is not explicitly rolled back when this state is entered.</span></span>  
  
- <span data-ttu-id="b9d31-127">**Errore:** L'attività ha rilevato un errore ed è stata chiusa senza completare il lavoro.</span><span class="sxs-lookup"><span data-stu-id="b9d31-127">**Faulted:** The activity has encountered an error and has exited without completing its work.</span></span>  
  
 <span data-ttu-id="b9d31-128">Le attività rimangono nello stato <xref:System.Activities.ActivityInstanceState.Executing> quando vengono rese persistenti o scaricate.</span><span class="sxs-lookup"><span data-stu-id="b9d31-128">Activities remain in the <xref:System.Activities.ActivityInstanceState.Executing> state when they are persisted or unloaded.</span></span>
