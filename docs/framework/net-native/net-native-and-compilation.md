---
title: Compilazione e .NET Native
ms.date: 03/30/2017
ms.assetid: e38ae4f3-3e3d-42c3-a4b8-db1aa9d84f85
ms.openlocfilehash: cf5c9f05b2f2cb4ca15e4add5b53bc9bdca757a3
ms.sourcegitcommit: b16c00371ea06398859ecd157defc81301c9070f
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/06/2020
ms.locfileid: "73128251"
---
# <a name="net-native-and-compilation"></a><span data-ttu-id="cfcb1-102">Compilazione e .NET Native</span><span class="sxs-lookup"><span data-stu-id="cfcb1-102">.NET Native and Compilation</span></span>

<span data-ttu-id="cfcb1-103">Le applicazioni Windows 8.1 e Windows Desktop destinate a .NET Framework vengono per lo più scritte in un determinato linguaggio di programmazione e compilate in linguaggio intermedio (IL).</span><span class="sxs-lookup"><span data-stu-id="cfcb1-103">Windows 8.1 applications and Windows Desktop applications that target the.NET Framework are written in a particular programming language and compiled into intermediate language (IL).</span></span> <span data-ttu-id="cfcb1-104">In fase di esecuzione, un compilatore JIT è responsabile della compilazione del linguaggio intermedio in codice nativo per il computer locale prima che un metodo venga eseguito per la prima volta.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-104">At runtime, a just-in-time (JIT) compiler is responsible for compiling the IL into native code for the local machine just before a method is executed for the first time.</span></span> <span data-ttu-id="cfcb1-105">Al contrario, la catena di strumenti .NET Native converte il codice sorgente in codice nativo in fase di compilazione.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-105">In contrast, the .NET Native tool chain converts source code to native code at compile time.</span></span> <span data-ttu-id="cfcb1-106">Questo argomento confronta .NET Native con altre tecnologie di compilazione disponibili per le app .NET Framework e fornisce una panoramica pratica del modo in cui .NET Native produce codice nativo, utile a comprendere il motivo per cui le eccezioni che si verificano nel codice compilato con .NET Native non si verificano nel codice con compilazione JIT.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-106">This topic compares .NET Native with other compilation technologies available for .NET Framework apps, and also provides a practical overview of how .NET Native produces native code that can help you understand why exceptions that occur in code compiled with .NET Native do not occur in JIT-compiled code.</span></span>

## <a name="net-native-generating-native-binaries"></a><span data-ttu-id="cfcb1-107">.NET Native: generazione di file binari nativi</span><span class="sxs-lookup"><span data-stu-id="cfcb1-107">.NET Native: Generating native binaries</span></span>

<span data-ttu-id="cfcb1-108">Un'applicazione destinata a .NET Framework e non compilata mediante la catena di strumenti .NET Native è costituita dall'assembly dell'applicazione, che include quanto segue:</span><span class="sxs-lookup"><span data-stu-id="cfcb1-108">An application that targets the .NET Framework and that is not compiled by using the .NET Native tool chain consists of your application assembly, which includes the following:</span></span>

- <span data-ttu-id="cfcb1-109">[Metadati](../../standard/metadata-and-self-describing-components.md) che descrivono l'assembly, le relative dipendenze, i tipi che contiene e i relativi membri.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-109">[Metadata](../../standard/metadata-and-self-describing-components.md) that describes the assembly, its dependencies, the types it contains, and their members.</span></span> <span data-ttu-id="cfcb1-110">Metadati usati per la reflection, l'accesso ad associazione tardiva e in alcuni casi dal compilatore e dagli strumenti di compilazione.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-110">The metadata is used for reflection and late-bound access, and in some cases by compiler and build tools as well.</span></span>

- <span data-ttu-id="cfcb1-111">Codice di implementazione.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-111">Implementation code.</span></span> <span data-ttu-id="cfcb1-112">È costituito dai codici operativi del linguaggio intermedio (IL).</span><span class="sxs-lookup"><span data-stu-id="cfcb1-112">This consists of intermediate language (IL) opcodes.</span></span> <span data-ttu-id="cfcb1-113">In fase di esecuzione, il compilatore JIT lo converte in codice nativo per la piattaforma di destinazione.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-113">At runtime, the just-in-time (JIT) compiler translates it into native code for the target platform.</span></span>

 <span data-ttu-id="cfcb1-114">Oltre all'assembly principale dell'applicazione, un'app richiede la presenza di quanto segue:</span><span class="sxs-lookup"><span data-stu-id="cfcb1-114">In addition to your main application assembly, an app requires that the following be present:</span></span>

- <span data-ttu-id="cfcb1-115">Qualsiasi libreria di classi aggiuntiva o assembly di terze parti necessario.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-115">Any additional class libraries or third-party assemblies that are required by your app.</span></span> <span data-ttu-id="cfcb1-116">Allo stesso modo, questi assembly includono i metadati che lo descrivono, i relativi tipi e membri, nonché il linguaggio intermedio che implementa tutti i membri del tipo.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-116">These assemblies similarly include metadata that describes the assembly, its types, and their members, as well as the IL that implements all type members.</span></span>

- <span data-ttu-id="cfcb1-117">Libreria di classi .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-117">The .NET Framework Class Library.</span></span> <span data-ttu-id="cfcb1-118">Si tratta di una raccolta di assembly installata nel sistema locale insieme a .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-118">This is a collection of assemblies that is installed on the local system with the .NET Framework installation.</span></span> <span data-ttu-id="cfcb1-119">Gli assembly inclusi nella libreria di classi .NET Framework contengono un set completo di metadati e codice di implementazione.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-119">The assemblies included in the .NET Framework Class Library include a complete set of metadata and implementation code.</span></span>

- <span data-ttu-id="cfcb1-120">Common Language Runtime</span><span class="sxs-lookup"><span data-stu-id="cfcb1-120">The common language runtime.</span></span> <span data-ttu-id="cfcb1-121">Si tratta di una raccolta di librerie a collegamento dinamico che eseguono servizi quali caricamento di assembly, gestione della memoria e Garbage Collection, gestione delle eccezioni, compilazione JIT, comunicazione remota e interoperabilità.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-121">This is a collection of dynamic link libraries that perform such services as assembly loading, memory management and garbage collection, exception handling, just-in-time compilation, remoting, and interop.</span></span> <span data-ttu-id="cfcb1-122">Come la libreria di classi, il runtime viene installato nel sistema locale come parte dell'installazione di .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-122">Like the class library, the runtime is installed on the local system as part of the .NET Framework installation.</span></span>

<span data-ttu-id="cfcb1-123">Per l'esecuzione corretta dell'app devono essere presenti l'intero CLR, così come i metadati e il linguaggio intermedio per tutti i tipi in assembly specifici dell'applicazione, assembly di terze parti e assemby di sistema.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-123">Note that the entire common language runtime, as well as metadata and IL for all types in application-specific assemblies, third-party assemblies, and system assemblies must be present for the app to execute successfully.</span></span>

## <a name="net-native-and-just-in-time-compilation"></a><span data-ttu-id="cfcb1-124">Compilazione .NET Native e JIT</span><span class="sxs-lookup"><span data-stu-id="cfcb1-124">.NET Native and just-in-time compilation</span></span>

<span data-ttu-id="cfcb1-125">L'input per la catena di strumenti .NET Native è l'app di Windows Store generata dal compilatore C# o Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-125">The input for the .NET Native tool chain is the Windows store app built by the C# or Visual Basic compiler.</span></span> <span data-ttu-id="cfcb1-126">In altre parole, la catena di strumenti .NET Native inizia l'esecuzione quando il compilatore del linguaggio ha terminato la compilazione di un'app di Windows Store.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-126">In other words, the .NET Native tool chain begins execution when the language compiler has finished compilation of a Windows Store app.</span></span>

> [!TIP]
> <span data-ttu-id="cfcb1-127">Poiché l'input per .NET Native è rappresentato dal linguaggio intermedio e dai metadati scritti negli assembly gestiti, è comunque possibile eseguire la generazione di codice personalizzato o altre operazioni personalizzate usando gli eventi di pre-compilazione o post-compilazione oppure modificando il file di progetto MSBuild.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-127">Because the input to .NET Native is the IL and metadata written to managed assemblies, you can still perform custom code generation or other custom operations by using pre-build or post-build events or by modifying the MSBuild project file.</span></span>
>
> <span data-ttu-id="cfcb1-128">Tuttavia, le categorie di strumenti che modificano il linguaggio intermedio e dunque impediscono alla catena di strumenti .NET Native di analizzare il linguaggio intermedio dell'app non sono supportati.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-128">However, categories of tools that modify IL and thereby prevent the .NET tool chain from analyzing an app's IL are not supported.</span></span> <span data-ttu-id="cfcb1-129">Le soluzioni di offuscamento rappresentano i principali strumenti di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-129">Obfuscators are the most notable tools of this type.</span></span>

<span data-ttu-id="cfcb1-130">Durante la conversione di un'app dal linguaggio intermedio al codice nativo, la catena di strumenti .NET Native esegue operazioni simili alle seguenti:</span><span class="sxs-lookup"><span data-stu-id="cfcb1-130">In the course of converting an app from IL to native code, the .NET Native tool chain performs operations like the following:</span></span>

- <span data-ttu-id="cfcb1-131">Per alcuni percorsi di codice, sostituisce il codice basato sulla reflection e i metadati con codice nativo statico.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-131">For certain code paths, it replaces code that relies on reflection and metadata with static native code.</span></span> <span data-ttu-id="cfcb1-132">Ad esempio, se un tipo di valore non esegue l'override del metodo <xref:System.ValueType.Equals%2A?displayProperty=nameWithType>, il test predefinito per verificare l'uguaglianza usa la reflection per recuperare gli oggetti <xref:System.Reflection.FieldInfo> che rappresentano i campi del tipo di valore, quindi confronta i valori di campo di due istanze.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-132">For example, if a value type does not override the <xref:System.ValueType.Equals%2A?displayProperty=nameWithType> method, the default test for equality uses reflection to retrieve <xref:System.Reflection.FieldInfo> objects that represent the value type's fields, then compares the field values of two instances.</span></span> <span data-ttu-id="cfcb1-133">Durante la compilazione in codice nativo, la catena di strumenti .NET Native sostituisce il codice di reflection e i metadati con un confronto statico tra i valori dei campi.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-133">When compiling to native code, the .NET Native tool chain replaces the reflection code and metadata with a static comparison of the field values.</span></span>

- <span data-ttu-id="cfcb1-134">Ove possibile, tenta di eliminare tutti i metadati.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-134">Where possible, it attempts to eliminate all metadata.</span></span>

- <span data-ttu-id="cfcb1-135">Include negli assembly finali dell'app solo il codice di implementazione effettivamente richiamato dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-135">It includes in the final app assemblies only the implementation code that is actually invoked by the app.</span></span> <span data-ttu-id="cfcb1-136">Questo incide in particolare sul codice nelle librerie di terze parti e nella libreria di classi .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-136">This particularly affects code in third-party libraries and in the .NET Framework Class Library.</span></span> <span data-ttu-id="cfcb1-137">Di conseguenza, un'app non dipende più da librerie di terze parti o dall'intera libreria di classi .NET Framework Class; infatti, il codice di terze parti e le librerie di classi .NET Framework sono ora locali rispetto all'app.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-137">As a result, an application no longer depends on either third-party libraries or the full .NET Framework Class Library; instead, code in third-party and .NET Framework class libraries is now local to the app.</span></span>

- <span data-ttu-id="cfcb1-138">Sostituisce il CLR completo con un runtime sottoposto a refactoring che contiene principalmente il Garbage Collector.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-138">It replaces the full CLR with a refactored runtime that primarily contains the garbage collector.</span></span> <span data-ttu-id="cfcb1-139">Il runtime con refactoring si trova in una libreria denominata mrt100_app.dll, locale dell'app e di dimensioni pari a poche centinaia di KB.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-139">The refactored runtime is found in a library named mrt100_app.dll that is local to the app and is only a few hundred kilobytes in size.</span></span> <span data-ttu-id="cfcb1-140">Questo è possibile perché il collegamento statico elimina la necessità di molti dei servizi eseguiti dal CLR.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-140">This is possible because static linking eliminates the need for many of the services performed by the common language runtime.</span></span>

  > [!NOTE]
  > <span data-ttu-id="cfcb1-141">.NET Native usa lo stesso Garbage Collector del CLR standard.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-141">.NET Native uses the same garbage collector as the standard common language runtime.</span></span> <span data-ttu-id="cfcb1-142">Nel Garbage Collector di.NET Native la Garbage Collection in background è abilitata per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-142">In the .NET Native garbage collector, background garbage collection is enabled by default.</span></span> <span data-ttu-id="cfcb1-143">Per altre informazioni sulla Garbage Collection, vedere [Principi fondamentali di Garbage Collection](../../standard/garbage-collection/fundamentals.md).</span><span class="sxs-lookup"><span data-stu-id="cfcb1-143">For more information about garbage collection, see [Fundamentals of Garbage Collection](../../standard/garbage-collection/fundamentals.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="cfcb1-144">.NET Native compila un'intera applicazione in un'applicazione nativa.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-144">.NET Native compiles an entire application to a native application.</span></span> <span data-ttu-id="cfcb1-145">Non consente di compilare in codice nativo un singolo assembly che contiene una libreria di classi in modo che sia possibile chiamarlo indipendentemente dal codice gestito.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-145">It does not allow you to compile a single assembly that contains a class library to native code so that it can be called independently from managed code.</span></span>

<span data-ttu-id="cfcb1-146">L'app risultante prodotta dalla catena di strumenti .NET Native viene scritta in una directory denominata ilc.out nella directory Debug o Release del progetto.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-146">The resulting app that is produced by the .NET Native tool chain is written to a directory named ilc.out in the Debug or Release directory of your project directory.</span></span> <span data-ttu-id="cfcb1-147">È costituita dai file seguenti:</span><span class="sxs-lookup"><span data-stu-id="cfcb1-147">It consists of the following files:</span></span>

- <span data-ttu-id="cfcb1-148">*\<appName>*. exe, un eseguibile stub che trasferisce semplicemente il controllo a un' `Main` esportazione speciale in *\<appName>* . dll.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-148">*\<appName>*.exe, a stub executable that simply transfers control to a special `Main` export in *\<appName>*.dll.</span></span>

- <span data-ttu-id="cfcb1-149">*\<appName>*. dll, una libreria a collegamento dinamico di Windows che contiene tutto il codice dell'applicazione, nonché il codice della .NET Framework libreria di classi e le librerie di terze parti da cui dipende una dipendenza.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-149">*\<appName>*.dll, a Windows dynamic link library that contains all your application code, as well as code from the .NET Framework Class Library and any third-party libraries that you have a dependency on.</span></span>  <span data-ttu-id="cfcb1-150">Contiene anche codice di supporto, ad esempio il codice necessario per l'interoperabilità con Windows e per serializzare gli oggetti nell'app.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-150">It also contains support code, such as the code necessary to interoperate with Windows and to serialize objects in your app.</span></span>

- <span data-ttu-id="cfcb1-151">mrt100_app.dll, un runtime sottoposto a refactoring che fornisce servizi di runtime, ad esempio Garbage Collection.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-151">mrt100_app.dll, a refactored runtime that provides runtime services such as garbage collection.</span></span>

 <span data-ttu-id="cfcb1-152">Tutte le dipendenze vengono acquisite dal manifesto APPX dell'app.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-152">All dependencies are captured by the app's APPX manifest.</span></span>  <span data-ttu-id="cfcb1-153">Oltre al file eseguibile dell'applicazione, alla DLL e a mrt100_app.dll, che sono inclusi direttamente nel pacchetto appx, include altri due file:</span><span class="sxs-lookup"><span data-stu-id="cfcb1-153">In addition to the application exe, dll, and mrt100_app.dll, which are bundled directly in the appx package, this includes two more files:</span></span>

- <span data-ttu-id="cfcb1-154">msvcr140_app.dll, la libreria run-time C (CRT) usata da mrt100_app.dll.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-154">msvcr140_app.dll, the C run-time (CRT) library used by mrt100_app.dll.</span></span> <span data-ttu-id="cfcb1-155">Il file è incluso da un riferimento di framework nel pacchetto.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-155">It is included by a framework reference in the package.</span></span>

- <span data-ttu-id="cfcb1-156">mrt100.dll.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-156">mrt100.dll.</span></span> <span data-ttu-id="cfcb1-157">Questa libreria include funzioni che consentono di migliorare le prestazioni di mrt100_app.dll, anche se la sua assenza non impedisce il funzionamento di mrt100_app.dll.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-157">This library includes functions that can improve the performance of mrt100_app.dll, although its absence does not prevent mrt100_app.dll from functioning.</span></span> <span data-ttu-id="cfcb1-158">Viene caricata dalla directory system32 sul computer locale, se presente.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-158">It is loaded from the system32 directory on the local machine, if it is present.</span></span>

<span data-ttu-id="cfcb1-159">Poiché la catena di strumenti .NET Native collega il codice di implementazione nell'app solo se sa che l'applicazione richiama effettivamente tale codice, è possibile non includere nell'applicazione i metadati o il codice di implementazione necessari negli scenari seguenti:</span><span class="sxs-lookup"><span data-stu-id="cfcb1-159">Because the .NET Native tool chain links implementation code into your app only if it knows that your app actually invokes that code, either the metadata or the implementation code required in the following scenarios may not be included with your app:</span></span>

- <span data-ttu-id="cfcb1-160">Reflection.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-160">Reflection.</span></span>

- <span data-ttu-id="cfcb1-161">Chiamata dinamica o ad associazione tardiva.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-161">Dynamic or late-bound invocation.</span></span>

- <span data-ttu-id="cfcb1-162">Serializzazione e deserializzazione.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-162">Serialization and deserialization.</span></span>

- <span data-ttu-id="cfcb1-163">Interoperabilità COM.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-163">COM interop.</span></span>

<span data-ttu-id="cfcb1-164">In mancanza del codice di implementazione o dei metadati necessari, il runtime .NET Native genera un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-164">If the necessary metadata or implementation code is absent at runtime, the .NET Native runtime throws an exception.</span></span> <span data-ttu-id="cfcb1-165">È possibile evitare queste eccezioni e assicurarsi che la catena di strumenti .NET Native includa i metadati e il codice di implementazione necessari usando un [file di direttive di runtime](runtime-directives-rd-xml-configuration-file-reference.md). Si tratta di un file XML che specifica gli elementi di programma il cui codice di implementazione e i cui metadati devono essere disponibili in fase di esecuzione e assegna loro criteri di runtime.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-165">You can prevent these exceptions, and ensure that the .NET Native tool chain includes the required metadata and implementation code, by using a [runtime directives file](runtime-directives-rd-xml-configuration-file-reference.md), an XML file that designates the program elements whose metadata or implementation code must be available at runtime and assigns a runtime policy to them.</span></span> <span data-ttu-id="cfcb1-166">Di seguito è riportato il file delle direttive di runtime predefinito che viene aggiunto a un progetto Windows Store compilato dalla catena di strumenti .NET Native:</span><span class="sxs-lookup"><span data-stu-id="cfcb1-166">The following is the default runtime directives file that is added to a Windows Store project that is compiled by the .NET Native tool chain:</span></span>

```xml
<Directives xmlns="http://schemas.microsoft.com/netfx/2013/01/metadata">
  <Application>
    <Assembly Name="*Application*" Dynamic="Required All" />
  </Application>
</Directives>
```

<span data-ttu-id="cfcb1-167">Questo abilita per la reflection e la chiamata dinamica tutti i tipi, nonché i relativi membri, in tutti gli assembly nel pacchetto dell'app.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-167">This enables all the types, as well as all their members, in all the assemblies in your app package for reflection and dynamic invocation.</span></span> <span data-ttu-id="cfcb1-168">Non abilita però la reflection o l'attivazione dinamica dei tipi negli assembly della libreria di classi .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-168">However, it does not enable reflection or dynamic activation of types in .NET Framework Class Library assemblies.</span></span> <span data-ttu-id="cfcb1-169">In molti casi, questo è sufficiente.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-169">In many cases, this is adequate.</span></span>

## <a name="net-native-and-ngen"></a><span data-ttu-id="cfcb1-170">.NET Native e NGEN</span><span class="sxs-lookup"><span data-stu-id="cfcb1-170">.NET Native and NGEN</span></span>

<span data-ttu-id="cfcb1-171">Il [generatore di immagini native](../tools/ngen-exe-native-image-generator.md) (NGEN) compila gli assembly in codice nativo e li installa nella cache delle immagini native nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-171">The [(Native Image Generator](../tools/ngen-exe-native-image-generator.md) (NGEN) compiles assemblies to native code and installs them in the native image cache on the local computer.</span></span> <span data-ttu-id="cfcb1-172">Tuttavia, anche se NGEN, come .NET Native, produce codice nativo, presenta alcune differenze significative rispetto a quest'ultimo:</span><span class="sxs-lookup"><span data-stu-id="cfcb1-172">However, although NGEN, like .NET Native, produces native code, it differs from .NET Native in some significant ways:</span></span>

- <span data-ttu-id="cfcb1-173">Se per un particolare metodo non sono disponibili immagini native, NGEN ricorre alla compilazione JIT del codice.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-173">If no native image is available for a particular method, NGEN falls back to JITing code.</span></span> <span data-ttu-id="cfcb1-174">Questo vuol dire che le immagini native devono continuare a includere i metadati e il linguaggio intermedio nel caso in cui NGEN debba eseguire il fallback alla compilazione JIT.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-174">This means that native images must continue to include metadata and IL in the event that NGEN needs to fall back to JIT compilation.</span></span> <span data-ttu-id="cfcb1-175">.NET Native produce solo immagini native e non esegue il fallback alla compilazione JIT.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-175">In contrast, .NET Native produces only native images and does not fall back to JIT compilation.</span></span> <span data-ttu-id="cfcb1-176">Di conseguenza, è necessario mantenere solo i metadati necessari per alcuni scenari di interoperabilità, serializzazione e reflection.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-176">As a result, only metadata required for some reflection, serialization, and interop scenarios must be preserved.</span></span>

- <span data-ttu-id="cfcb1-177">NGEN continua a basarsi sul CLR completo per servizi quali caricamento degli assembly, comunicazione remota, interoperabilità, gestione della memoria, Garbage Collection e, se necessario, compilazione JIT.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-177">NGEN continues to rely on the full common language runtime for services such as assembly loading, remoting, interop, memory management, garbage collection, and, if necessary, JIT compilation.</span></span> <span data-ttu-id="cfcb1-178">In .NET Native molti di questi servizi non sono necessari (compilazione JIT) o vengono risolti in fase di compilazione e incorporati nell'assembly dell'app.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-178">In .NET Native, many of these services are either unnecessary (JIT compilation) or are resolved at build-time and incorporated in the app assembly.</span></span> <span data-ttu-id="cfcb1-179">Gli altri servizi, il più importante dei quali è la Garbage Collection, sono inclusi in un runtime molto più piccolo, sottoposto a refactoring, denominato mrt100_app.dll.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-179">The remaining services, the most important of which is garbage collection, are included in a much smaller, refactored runtime named mrt100_app.dll.</span></span>

- <span data-ttu-id="cfcb1-180">Le immagini NGEN tendono a essere fragili.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-180">NGEN images tend to be fragile.</span></span> <span data-ttu-id="cfcb1-181">Ad esempio, in seguito all'applicazione di una patch o alla modifica di una dipendenza, in genere è necessario ripetere la generazione di immagini native per gli assembly che se ne servono.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-181">For example, a patch or change to a dependency typically requires that the assemblies that use it also be re-NGENed.</span></span> <span data-ttu-id="cfcb1-182">Ciò è particolarmente vero per gli assembly di sistema nella libreria di classi .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-182">This is particularly true of system assemblies in the .NET Framework Class Library.</span></span> <span data-ttu-id="cfcb1-183">Al contrario, .NET Native consente alle applicazioni di essere servite indipendentemente le une dalle altre.</span><span class="sxs-lookup"><span data-stu-id="cfcb1-183">In contrast, .NET Native allows applications to be served independently of one another.</span></span>

## <a name="see-also"></a><span data-ttu-id="cfcb1-184">Vedi anche</span><span class="sxs-lookup"><span data-stu-id="cfcb1-184">See also</span></span>

- [<span data-ttu-id="cfcb1-185">Metadati e componenti auto-descrittivi</span><span class="sxs-lookup"><span data-stu-id="cfcb1-185">Metadata and Self-Describing Components</span></span>](../../standard/metadata-and-self-describing-components.md)
- [<span data-ttu-id="cfcb1-186">Inside .NET Native (video di Channel 9)</span><span class="sxs-lookup"><span data-stu-id="cfcb1-186">Inside .NET Native (Channel 9 Video)</span></span>](https://channel9.msdn.com/Shows/Going+Deep/Inside-NET-Native)
- [<span data-ttu-id="cfcb1-187">Reflection e .NET Native</span><span class="sxs-lookup"><span data-stu-id="cfcb1-187">Reflection and .NET Native</span></span>](reflection-and-net-native.md)
- [<span data-ttu-id="cfcb1-188">Risoluzione dei problemi generale per .NET Native</span><span class="sxs-lookup"><span data-stu-id="cfcb1-188">.NET Native General Troubleshooting</span></span>](net-native-general-troubleshooting.md)
