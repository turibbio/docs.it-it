---
title: Protezione di WCF Data Services
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- securing application [WCF Data Services]
- WCF Data Services, security
ms.assetid: 99fc2baa-a040-4549-bc4d-f683d60298af
ms.openlocfilehash: 4dbfe286099ebd0da269ca7ec6e4587d0d8b2e03
ms.sourcegitcommit: 5988e9a29cedb8757320817deda3c08c6f44a6aa
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/28/2020
ms.locfileid: "82200067"
---
# <a name="securing-wcf-data-services"></a><span data-ttu-id="77782-102">Protezione di WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="77782-102">Securing WCF Data Services</span></span>

<span data-ttu-id="77782-103">Questo articolo descrive le considerazioni sulla sicurezza specifiche per lo sviluppo, la distribuzione e l'esecuzione di WCF Data Services e applicazioni che accedono ai servizi che supportano l'Open Data Protocol (OData).</span><span class="sxs-lookup"><span data-stu-id="77782-103">This article describes security considerations that are specific to developing, deploying, and running WCF Data Services and applications that access services that support the Open Data Protocol (OData).</span></span> <span data-ttu-id="77782-104">È inoltre consigliabile seguire le indicazioni per la creazione di applicazioni .NET Framework protette.</span><span class="sxs-lookup"><span data-stu-id="77782-104">You should also follow recommendations for creating secure .NET Framework applications.</span></span>  
  
<span data-ttu-id="77782-105">Quando si pianifica come proteggere un servizio OData basato su WCF Data Services, è necessario risolvere sia l'autenticazione, il processo di individuazione e verifica dell'identità di un'entità, sia l'autorizzazione, il processo che consente di determinare se un'entità autenticata è autorizzata ad accedere alle risorse richieste.</span><span class="sxs-lookup"><span data-stu-id="77782-105">When planning how to secure a WCF Data Services-based OData service, you must address both authentication, the process of discovering and verifying the identity of a principal, and authorization, the process of determining whether an authenticated principal is allowed to access the requested resources.</span></span> <span data-ttu-id="77782-106">Valutare inoltre se crittografare il messaggio tramite SSL.</span><span class="sxs-lookup"><span data-stu-id="77782-106">Also consider whether to encrypt the message by using SSL.</span></span>  
  
## <a name="authenticating-client-requests"></a><span data-ttu-id="77782-107">Autenticazione di richieste del client</span><span class="sxs-lookup"><span data-stu-id="77782-107">Authenticating Client Requests</span></span>  
<span data-ttu-id="77782-108">WCF Data Services non implementa alcun tipo di autenticazione, ma si basa invece sulle disposizioni di autenticazione dell'host del servizio dati.</span><span class="sxs-lookup"><span data-stu-id="77782-108">WCF Data Services does not implement any kind of authentication of its own, but rather relies on the authentication provisions of the data service host.</span></span> <span data-ttu-id="77782-109">Ciò significa che il servizio presuppone che qualsiasi richiesta ricevuta sia già stata autenticata dall'host di rete e che l'host abbia identificato correttamente il principio della richiesta tramite le interfacce fornite da WCF Data Services.</span><span class="sxs-lookup"><span data-stu-id="77782-109">This means that the service assumes that any request that it receives has already been authenticated by the network host and that the host has correctly identified the principle for the request appropriately via the interfaces provided by WCF Data Services.</span></span> <span data-ttu-id="77782-110">Questi approcci e opzioni di autenticazione sono descritti in dettaglio nella [serie di autenticazione e OData](https://devblogs.microsoft.com/odata/?s=%22OData+and+authentication%22)multiparte.</span><span class="sxs-lookup"><span data-stu-id="77782-110">These authentication options and approaches are detailed in the multipart [OData and Authentication series](https://devblogs.microsoft.com/odata/?s=%22OData+and+authentication%22).</span></span>  
  
### <a name="authentication-options-for-a-wcf-data-service"></a><span data-ttu-id="77782-111">Opzioni di autenticazione per un servizio dati WCF</span><span class="sxs-lookup"><span data-stu-id="77782-111">Authentication Options for a WCF Data Service</span></span>  
 <span data-ttu-id="77782-112">Nella tabella seguente vengono elencati alcuni dei meccanismi di autenticazione che sono disponibili per facilitare l'autenticazione delle richieste a un servizio dati WCF.</span><span class="sxs-lookup"><span data-stu-id="77782-112">The following table lists some of the authentication mechanisms that are available to help you authenticate requests to a WCF Data Service.</span></span>  
  
|<span data-ttu-id="77782-113">Opzioni di autenticazione</span><span class="sxs-lookup"><span data-stu-id="77782-113">Authentication Options</span></span>|<span data-ttu-id="77782-114">Descrizione</span><span class="sxs-lookup"><span data-stu-id="77782-114">Description</span></span>|  
|----------------------------|-----------------|  
|<span data-ttu-id="77782-115">Autenticazione anonima</span><span class="sxs-lookup"><span data-stu-id="77782-115">Anonymous authentication</span></span>|<span data-ttu-id="77782-116">Quando l'autenticazione anonima HTTP è abilitata, qualsiasi principio è in grado di connettersi al servizio dati.</span><span class="sxs-lookup"><span data-stu-id="77782-116">When HTTP anonymous authentication is enabled, any principle is able to connect to the data service.</span></span> <span data-ttu-id="77782-117">Le credenziali non sono richieste per l'accesso anonimo.</span><span class="sxs-lookup"><span data-stu-id="77782-117">Credentials are not required for anonymous access.</span></span> <span data-ttu-id="77782-118">Usare questa opzione solo quando si desidera consentire a chiunque l'accesso al servizio dati.</span><span class="sxs-lookup"><span data-stu-id="77782-118">Use this option only when you want to allow anyone to access the data service.</span></span>|  
|<span data-ttu-id="77782-119">Autenticazione di base e digest</span><span class="sxs-lookup"><span data-stu-id="77782-119">Basic and digest authentication</span></span>|<span data-ttu-id="77782-120">Le credenziali composte da un nome utente e da una password sono richieste per l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="77782-120">Credentials consisting of a user name and password are required for authentication.</span></span> <span data-ttu-id="77782-121">Supporta l'autenticazione di client non Windows.</span><span class="sxs-lookup"><span data-stu-id="77782-121">Supports authentication of non-Windows clients.</span></span> <span data-ttu-id="77782-122">**Nota sulla sicurezza:**  Le credenziali di autenticazione di base (nome utente e password) vengono inviate in chiaro e possono essere intercettate.</span><span class="sxs-lookup"><span data-stu-id="77782-122">**Security Note:**  Basic authentication credentials (user name and password) are sent in the clear and can be intercepted.</span></span> <span data-ttu-id="77782-123">L'autenticazione digest invia un hash basato sulle credenziali fornite che la rende più sicura dell'autenticazione di base.</span><span class="sxs-lookup"><span data-stu-id="77782-123">Digest authentication sends a hash based-on the supplied credentials, which makes it more secure than basic authentication.</span></span> <span data-ttu-id="77782-124">Entrambe le autenticazioni sono vulnerabili agli attacchi man-in-the-middle.</span><span class="sxs-lookup"><span data-stu-id="77782-124">Both are susceptible to man-in-the-middle attacks.</span></span> <span data-ttu-id="77782-125">Quando si usano questi metodi di autenticazione, è necessario considerare di crittografare le comunicazione fra il client e il servizio dati tramite Secure Sockets Layer (SSL).</span><span class="sxs-lookup"><span data-stu-id="77782-125">When using these authentication methods, you should consider encrypting communication between client and the data service by using the Secure Sockets Layer (SSL).</span></span> <br /><br /> <span data-ttu-id="77782-126">Microsoft Internet Information Services (IIS) fornisce un'implementazione dell'autenticazione di base e del digest per le richieste HTTP in un'applicazione ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="77782-126">Microsoft Internet Information Services (IIS) provides an implementation of both basic and digest authentication for HTTP requests in an ASP.NET application.</span></span> <span data-ttu-id="77782-127">Questa implementazione del provider di Autenticazione di Windows consente a un'applicazione client .NET Framework di fornire le credenziali nell'intestazione HTTP della richiesta al servizio dati per negoziare con facilità l'autenticazione di un utente Windows.</span><span class="sxs-lookup"><span data-stu-id="77782-127">This Windows Authentication Provider implementation enables a .NET Framework client application to supply credentials in the HTTP header of the request to the data service to seamlessly negotiate authentication of a Windows user.</span></span> <span data-ttu-id="77782-128">Per ulteriori informazioni, vedere [riferimento tecnico per l'autenticazione del digest](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc782794(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="77782-128">For more information, see [Digest Authentication Technical Reference](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc782794(v=ws.10)).</span></span><br /><br /> <span data-ttu-id="77782-129">Quando si vuole che il servizio dati usi l'autenticazione di base in base a un servizio di autenticazione personalizzato e non alle credenziali di Windows, è necessario implementare un modulo HTTP ADP.NET personalizzato per l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="77782-129">When you want to have your data service use basic authentication based on some custom authentication service and not Windows credentials, you must implement a custom ADP.NET HTTP Module for authentication.</span></span><br /><br /> <span data-ttu-id="77782-130">Per un esempio di come usare uno schema di autenticazione di base personalizzato con WCF Data Services, vedere il post di Blog [OData e autenticazione-parte 6-autenticazione di base personalizzata](https://devblogs.microsoft.com/odata/odata-and-authentication-part-6-custom-basic-authentication/).</span><span class="sxs-lookup"><span data-stu-id="77782-130">For an example of how to use a custom basic authentication scheme with WCF Data Services, see the blog post [OData and Authentication – Part 6 – Custom Basic Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-6-custom-basic-authentication/).</span></span>|  
|<span data-ttu-id="77782-131">Autenticazione di Windows</span><span class="sxs-lookup"><span data-stu-id="77782-131">Windows authentication</span></span>|<span data-ttu-id="77782-132">Le credenziali basate su Windows vengono scambiate tramite NTLM o Kerberos.</span><span class="sxs-lookup"><span data-stu-id="77782-132">Windows-based credentials are exchanged by using NTLM or Kerberos.</span></span> <span data-ttu-id="77782-133">Questo meccanismo è più sicuro rispetto all'autenticazione di base o digest, ma richiede che il client sia un'applicazione basata su Windows.</span><span class="sxs-lookup"><span data-stu-id="77782-133">This mechanism is more secure than basic or digest authentication, but it requires that the client be a Windows-based application.</span></span> <span data-ttu-id="77782-134">IIS fornisce inoltre un'implementazione dell'autenticazione di Windows per le richieste HTTP in un'applicazione ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="77782-134">IIS also provides an implementation of Windows authentication for HTTP requests in an ASP.NET application.</span></span> <span data-ttu-id="77782-135">Per altre informazioni, vedere [Panoramica dell'autenticazione basata su form ASP.NET](https://docs.microsoft.com/previous-versions/aspnet/7t6b43z4(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="77782-135">For more information, see [ASP.NET Forms Authentication Overview](https://docs.microsoft.com/previous-versions/aspnet/7t6b43z4(v=vs.100)).</span></span><br /><br /> <span data-ttu-id="77782-136">Per un esempio di come usare l'autenticazione di Windows con WCF Data Services, vedere il post di Blog relativo a [OData e autenticazione-parte 2-autenticazione di Windows](https://devblogs.microsoft.com/odata/odata-and-authentication-part-2-windows-authentication/).</span><span class="sxs-lookup"><span data-stu-id="77782-136">For an example of how to use Windows authentication with WCF Data Services, see the blog post [OData and Authentication – Part 2 – Windows Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-2-windows-authentication/).</span></span>|  
|<span data-ttu-id="77782-137">Autenticazione basata su form ASP.NET</span><span class="sxs-lookup"><span data-stu-id="77782-137">ASP.NET forms authentication</span></span>|<span data-ttu-id="77782-138">L'autenticazione basata su form consente di autenticare gli utenti mediante un codice personalizzato e di gestire un token di autenticazione in un cookie o nell'URL di pagina.</span><span class="sxs-lookup"><span data-stu-id="77782-138">Forms authentication lets you authenticate users by using your own code and then maintain an authentication token in a cookie or in the page URL.</span></span> <span data-ttu-id="77782-139">Viene eseguita l'autenticazione del nome utente e della password degli utenti usando un form di accesso creato dall'utente.</span><span class="sxs-lookup"><span data-stu-id="77782-139">You authenticate the user name and password of your users using a login form that you create.</span></span> <span data-ttu-id="77782-140">Le richieste non autenticate vengono reindirizzate a una pagina di accesso, dove l'utente fornisce le credenziali e invia il form.</span><span class="sxs-lookup"><span data-stu-id="77782-140">Unauthenticated requests are redirected to a login page, where the user provides credentials and submits the form.</span></span> <span data-ttu-id="77782-141">Se l'applicazione autentica la richiesta, il sistema elabora un ticket contenente una chiave per la ridefinizione dell'identità per le richieste successive.</span><span class="sxs-lookup"><span data-stu-id="77782-141">If the application authenticates the request, the system issues a ticket that contains a key for reestablishing the identity for subsequent requests.</span></span> <span data-ttu-id="77782-142">Per ulteriori informazioni, vedere [provider di autenticazione basata su form](https://docs.microsoft.com/previous-versions/aspnet/9wff0kyh(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="77782-142">For more information, see [Forms Authentication Provider](https://docs.microsoft.com/previous-versions/aspnet/9wff0kyh(v=vs.100)).</span></span> <span data-ttu-id="77782-143">**Nota sulla sicurezza:**  Per impostazione predefinita, il cookie che contiene il ticket di autenticazione basata su form non è protetto quando si usa l'autenticazione basata su form in un'applicazione Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="77782-143">**Security Note:**  By default, the cookie that contains the forms authentication ticket is not secured when you use forms authentication in a ASP.NET Web application.</span></span> <span data-ttu-id="77782-144">È opportuno richiedere SSL per proteggere il ticket di autenticazione e le credenziali di accesso iniziale.</span><span class="sxs-lookup"><span data-stu-id="77782-144">You should consider requiring SSL to protect both the authentication ticket and the initial login credentials.</span></span> <br /><br /> <span data-ttu-id="77782-145">Per un esempio di come usare l'autenticazione basata su form con WCF Data Services, vedere il post di Blog relativo all'autenticazione basata su [OData e sull'autenticazione, parte 7](https://devblogs.microsoft.com/odata/odata-and-authentication-part-7-forms-authentication/).</span><span class="sxs-lookup"><span data-stu-id="77782-145">For an example of how to use forms authentication with WCF Data Services, see the blog post [OData and Authentication – Part 7 – Forms Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-7-forms-authentication/).</span></span>|  
|<span data-ttu-id="77782-146">Autenticazione basata sulle attestazioni</span><span class="sxs-lookup"><span data-stu-id="77782-146">Claims-based authentication</span></span>|<span data-ttu-id="77782-147">Nell'autenticazione basata sulle attestazioni, il servizio dati si basa su un servizio del provider di identità "di terze parti" attendibile per autenticare l'utente.</span><span class="sxs-lookup"><span data-stu-id="77782-147">In claims-based authentication, the data service relies on a trusted "third-party" identity provider service to authenticate the user.</span></span> <span data-ttu-id="77782-148">Il provider di identità autentica positivamente l'utente che sta richiedendo l'accesso alle risorse del servizio dati e rilascia un token che concede l'accesso alle risorse richieste.</span><span class="sxs-lookup"><span data-stu-id="77782-148">The identity provider positively authenticates the user that is requesting access to data service resources and issues a token that grants access to the requested resources.</span></span> <span data-ttu-id="77782-149">Questo token viene quindi presentato al servizio dati che concede l'accesso all'utente in base alla relazione di trust con il servizio di identità che ha rilasciato il token di accesso.</span><span class="sxs-lookup"><span data-stu-id="77782-149">This token is then presented to the data service, which then grants access to the user based on the trust relationship with the identity service that issued the access token.</span></span><br /><br /> <span data-ttu-id="77782-150">Il provider di autenticazione basato sulle attestazioni risulta conveniente perché può essere usato per autenticare vari tipi di client tra i vari domini trust.</span><span class="sxs-lookup"><span data-stu-id="77782-150">The benefit of using a claims-based authentication provider is that they can be used to authenticate various types of clients across trust domains.</span></span> <span data-ttu-id="77782-151">Usando un provider di terze parti di questo tipo, il servizio dati può scaricare i requisiti di gestione e autenticazione degli utenti.</span><span class="sxs-lookup"><span data-stu-id="77782-151">By employing such a third-party provider, a data service can offload the requirements of maintaining and authenticating users.</span></span> <span data-ttu-id="77782-152">OAuth 2,0 è un protocollo di autenticazione basato sulle attestazioni supportato dal controllo di accesso di Azure AppFabric per l'autorizzazione federata come servizio.</span><span class="sxs-lookup"><span data-stu-id="77782-152">OAuth 2.0 is a claims-based authentication protocol that is supported by Azure AppFabric Access Control for federated authorization as a service.</span></span> <span data-ttu-id="77782-153">Questo protocollo supporta i servizi basati sul REST.</span><span class="sxs-lookup"><span data-stu-id="77782-153">This protocol supports REST-based services.</span></span> <span data-ttu-id="77782-154">Per un esempio di come usare OAuth 2,0 con WCF Data Services, vedere il post di Blog relativo a [OData e autenticazione-parte 8-OAuth WRAP](https://devblogs.microsoft.com/odata/odata-and-authentication-part-8-oauth-wrap/).</span><span class="sxs-lookup"><span data-stu-id="77782-154">For an example of how to use OAuth 2.0 with WCF Data Services, see the blog post [OData and Authentication – Part 8 – OAuth WRAP](https://devblogs.microsoft.com/odata/odata-and-authentication-part-8-oauth-wrap/).</span></span>|  
  
<a name="clientAuthentication"></a>
### <a name="authentication-in-the-client-library"></a><span data-ttu-id="77782-155">Autenticazione nella libreria client</span><span class="sxs-lookup"><span data-stu-id="77782-155">Authentication in the Client Library</span></span>  
 <span data-ttu-id="77782-156">Per impostazione predefinita, la libreria client di WCF Data Services non fornisce le credenziali quando si effettua una richiesta a un servizio OData.</span><span class="sxs-lookup"><span data-stu-id="77782-156">By default, the WCF Data Services client library does not supply credentials when making a request to an OData service.</span></span> <span data-ttu-id="77782-157">Quando le credenziali di accesso sono richieste dal servizio dati per autenticare un utente, è possibile fornire queste credenziali in un elemento <xref:System.Net.NetworkCredential> a cui accede la proprietà <xref:System.Data.Services.Client.DataServiceContext.Credentials%2A> di <xref:System.Data.Services.Client.DataServiceContext>, come nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="77782-157">When login credentials are required by the data service to authenticate a user, these credentials can be supplied in a <xref:System.Net.NetworkCredential> accessed from the <xref:System.Data.Services.Client.DataServiceContext.Credentials%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>, as in the following example:</span></span>  
  
```csharp  
// Set the client authentication credentials.  
context.Credentials =  
    new NetworkCredential(userName, password, domain);  
```  
  
```vb  
' Set the client authentication credentials.  
context.Credentials = _  
    New NetworkCredential(userName, password, domain)  
```  
  
 <span data-ttu-id="77782-158">Per altre informazioni, vedere [procedura: specificare le credenziali client per una richiesta del servizio dati](specify-client-creds-for-a-data-service-request-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="77782-158">For more information, see [How to: Specify Client Credentials for a Data Service Request](specify-client-creds-for-a-data-service-request-wcf.md).</span></span>  
  
 <span data-ttu-id="77782-159">Quando il servizio dati richiede credenziali di accesso che non possono essere specificate tramite un oggetto <xref:System.Net.NetworkCredential>, ad esempio un cookie o un token basato sulle attestazioni, è necessario impostare manualmente le intestazioni nella richiesta HTTP, generalmente le intestazioni `Authorization` e `Cookie`.</span><span class="sxs-lookup"><span data-stu-id="77782-159">When the data service requires login credentials that cannot be specified by using a <xref:System.Net.NetworkCredential> object, such as a claims-based token or cookie, you must manually set headers in the HTTP request, usually the `Authorization` and `Cookie` headers.</span></span> <span data-ttu-id="77782-160">Per ulteriori informazioni su questo tipo di scenario di autenticazione, vedere il post di Blog [OData e autenticazione-parte 3-Hook lato client](https://devblogs.microsoft.com/odata/odata-and-authentication-part-3-clientside-hooks/).</span><span class="sxs-lookup"><span data-stu-id="77782-160">For more information about this kind of authentication scenario, see the blog post [ OData and Authentication – Part 3 – ClientSide Hooks](https://devblogs.microsoft.com/odata/odata-and-authentication-part-3-clientside-hooks/).</span></span> <span data-ttu-id="77782-161">Per un esempio di come impostare le intestazioni HTTP in un messaggio di richiesta, vedere [procedura: impostare le intestazioni nella richiesta client](how-to-set-headers-in-the-client-request-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="77782-161">For an example of how to set HTTP headers in a request message, see [How to: Set Headers in the Client Request](how-to-set-headers-in-the-client-request-wcf-data-services.md).</span></span>  
  
## <a name="impersonation"></a><span data-ttu-id="77782-162">Rappresentazione</span><span class="sxs-lookup"><span data-stu-id="77782-162">Impersonation</span></span>  
 <span data-ttu-id="77782-163">Generalmente il servizio dati accede alle risorse richieste, ad esempio i file sul server o un database, tramite le credenziali del processo di lavoro che ospita il servizio dati.</span><span class="sxs-lookup"><span data-stu-id="77782-163">Generally, the data service accesses required resources, such as files on the server or a database, by using the credentials of the worker process that is hosting the data service.</span></span> <span data-ttu-id="77782-164">Quando si usa la rappresentazione, le applicazioni ASP.NET possono essere eseguite con l'identità Windows (account utente) dell'utente che effettua la richiesta.</span><span class="sxs-lookup"><span data-stu-id="77782-164">When using impersonation, ASP.NET applications can execute with the Windows identity (user account) of the user making the request.</span></span> <span data-ttu-id="77782-165">La rappresentazione è di utilizzo comune in applicazioni che si basano su IIS per autenticare l'utente e le credenziali di questo principio sono usate per accedere alle risorse richieste.</span><span class="sxs-lookup"><span data-stu-id="77782-165">Impersonation is commonly used in applications that rely on IIS to authenticate the user, and the credentials of this principle are used to access the required resources.</span></span> <span data-ttu-id="77782-166">Per ulteriori informazioni, vedere [rappresentazione ASP.NET](https://docs.microsoft.com/previous-versions/aspnet/xh507fc5(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="77782-166">For more information, see [ASP.NET Impersonation](https://docs.microsoft.com/previous-versions/aspnet/xh507fc5(v=vs.100)).</span></span>  
  
## <a name="configuring-data-service-authorization"></a><span data-ttu-id="77782-167">Configurazione dell'autorizzazione del servizio dati</span><span class="sxs-lookup"><span data-stu-id="77782-167">Configuring Data Service Authorization</span></span>  
 <span data-ttu-id="77782-168">L'autorizzazione è il conferimento dell'accesso alle risorse dell'applicazione concesso a un principio o un processo identificato in base a un'autenticazione precedentemente riuscita.</span><span class="sxs-lookup"><span data-stu-id="77782-168">Authorization is the granting of access to application resources to a principle or process that is identified based on a previously successful authentication.</span></span> <span data-ttu-id="77782-169">Come regola generale, è opportuno concedere agli utenti del servizio dati solo i diritti sufficienti per eseguire le operazioni richieste dalle applicazioni client.</span><span class="sxs-lookup"><span data-stu-id="77782-169">As a general practice, you should only grant sufficient rights to users of the data service to perform the operations required by client applications.</span></span>  
  
### <a name="restrict-access-to-data-service-resources"></a><span data-ttu-id="77782-170">Restrizione dell'accesso alle risorse del servizio dati</span><span class="sxs-lookup"><span data-stu-id="77782-170">Restrict Access to Data Service Resources</span></span>  
 <span data-ttu-id="77782-171">Per impostazione predefinita, WCF Data Services consente di concedere l'accesso comune in lettura e scrittura alle risorse del servizio dati (set di entità e operazioni del servizio) a qualsiasi utente in grado di accedere al servizio dati.</span><span class="sxs-lookup"><span data-stu-id="77782-171">By default, WCF Data Services enables you to grant common read and write access against data service resources (entity set and service operations) to any user that is able to access the data service.</span></span> <span data-ttu-id="77782-172">Le regole che definiscono l'accesso in lettura e scrittura possono essere specificate separatamente per ogni set di entità esposto dal servizio dati così come per qualsiasi operazione del servizio.</span><span class="sxs-lookup"><span data-stu-id="77782-172">Rules that define read and write access can be defined separately for each entity set exposed by the data service, as well as to any service operations.</span></span> <span data-ttu-id="77782-173">Si consiglia di limitare l'accesso in lettura e scrittura solo alle risorse richieste dall'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="77782-173">We recommend limiting both read and write access to only the resources required by the client application.</span></span> <span data-ttu-id="77782-174">Per altre informazioni, vedere [requisiti minimi di accesso alle risorse](configuring-the-data-service-wcf-data-services.md#accessRequirements).</span><span class="sxs-lookup"><span data-stu-id="77782-174">For more information, see [Minimum Resource Access Requirements](configuring-the-data-service-wcf-data-services.md#accessRequirements).</span></span>  
  
### <a name="implement-role-based-interceptors"></a><span data-ttu-id="77782-175">Intercettori basati sulla regola di implementazione</span><span class="sxs-lookup"><span data-stu-id="77782-175">Implement Role-Based Interceptors</span></span>  
 <span data-ttu-id="77782-176">Gli intercettori consentono di intercettare le richieste delle risorse del servizio dati prima che vengano elaborate dal servizio dati.</span><span class="sxs-lookup"><span data-stu-id="77782-176">Interceptors enable you to intercept requests against data service resources before they are acted on by the data service.</span></span> <span data-ttu-id="77782-177">Per ulteriori informazioni, vedere [intercettori](interceptors-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="77782-177">For more information, see [Interceptors](interceptors-wcf-data-services.md).</span></span> <span data-ttu-id="77782-178">Gli intercettori consentono di concedere l'autorizzazione in base all'utente autenticato che effettua la richiesta.</span><span class="sxs-lookup"><span data-stu-id="77782-178">Interceptors enable you to make authorization decisions based the authenticated user that is making the request.</span></span> <span data-ttu-id="77782-179">Per un esempio di come limitare l'accesso alle risorse del servizio dati in base a un'identità utente autenticata, vedere [procedura: intercettare i messaggi del servizio dati](how-to-intercept-data-service-messages-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="77782-179">For an example of how to restrict access to data service resources based on an authenticated user identity, see [How to: Intercept Data Service Messages](how-to-intercept-data-service-messages-wcf-data-services.md).</span></span>  
  
### <a name="restrict-access-to-the-persisted-data-store-and-local-resources"></a><span data-ttu-id="77782-180">Restrizione dell'accesso all'archivio dati persistente e alle risorse locali</span><span class="sxs-lookup"><span data-stu-id="77782-180">Restrict Access to the Persisted Data Store and Local Resources</span></span>  
 <span data-ttu-id="77782-181">È opportuno concedere agli account usati per accedere all'archivio persistente solo i diritti in un database o nel file system sufficienti a supportare i requisiti del servizio dati.</span><span class="sxs-lookup"><span data-stu-id="77782-181">The accounts that are used to access the persisted store should be granted only enough rights in a database or the file system to support the requirements of the data service.</span></span> <span data-ttu-id="77782-182">Quando viene usata l'autenticazione anonima, questo è l'account usato per eseguire l'applicazione hosting.</span><span class="sxs-lookup"><span data-stu-id="77782-182">When anonymous authentication is used, this is the account used to run the hosting application.</span></span> <span data-ttu-id="77782-183">Per altre informazioni, vedere [How to: Develop a WCF Data Service Running on IIS](how-to-develop-a-wcf-data-service-running-on-iis.md).</span><span class="sxs-lookup"><span data-stu-id="77782-183">For more information, see [How to: Develop a WCF Data Service Running on IIS](how-to-develop-a-wcf-data-service-running-on-iis.md).</span></span> <span data-ttu-id="77782-184">Quando viene usata la rappresentazione, agli utenti autenticati deve essere concesso l'accesso alle risorse, generalmente come parte di un gruppo di Windows.</span><span class="sxs-lookup"><span data-stu-id="77782-184">When impersonation is used, authenticated users must be granted access to these resources, usually as part of a Windows group.</span></span>  
  
## <a name="other-security-considerations"></a><span data-ttu-id="77782-185">Altre considerazioni sulla sicurezza</span><span class="sxs-lookup"><span data-stu-id="77782-185">Other Security Considerations</span></span>  
  
### <a name="secure-the-data-in-the-payload"></a><span data-ttu-id="77782-186">Protezione dei dati nel payload</span><span class="sxs-lookup"><span data-stu-id="77782-186">Secure the Data in the Payload</span></span>  
<span data-ttu-id="77782-187">OData si basa sul protocollo HTTP.</span><span class="sxs-lookup"><span data-stu-id="77782-187">OData is based on the HTTP protocol.</span></span> <span data-ttu-id="77782-188">In un messaggio HTTP, è possibile che l'intestazione contenga credenziali dell'utente rilevanti, a seconda dell'autenticazione implementata dal servizio dati.</span><span class="sxs-lookup"><span data-stu-id="77782-188">In an HTTP message, the header may contain valuable user credentials, depending on the authentication implemented by the data service.</span></span> <span data-ttu-id="77782-189">È possibile che anche il corpo del messaggio contenga dati del cliente rilevanti che devono essere protetti.</span><span class="sxs-lookup"><span data-stu-id="77782-189">The message body may also contain valuable customer data that must be protected.</span></span> <span data-ttu-id="77782-190">In entrambi i casi, si consiglia di usare SSL per proteggere queste informazioni in rete.</span><span class="sxs-lookup"><span data-stu-id="77782-190">In both of these cases, we recommend that you use SSL to protect this information over the wire.</span></span>  
  
### <a name="ignored-message-headers-and-cookies"></a><span data-ttu-id="77782-191">Intestazioni dei messaggi e cookie ignorati</span><span class="sxs-lookup"><span data-stu-id="77782-191">Ignored Message Headers and Cookies</span></span>  
 <span data-ttu-id="77782-192">Le intestazioni delle richieste HTTP, diverse da quelle che dichiarano i tipi di contenuto e i percorsi delle risorse, vengono ignorate e non vengono mai impostate dal servizio dati.</span><span class="sxs-lookup"><span data-stu-id="77782-192">HTTP request headers, other than those that declare content types and resource locations, are ignored and are never set by the data service.</span></span>  
  
 <span data-ttu-id="77782-193">I cookie possono essere usati come parte di uno schema di autenticazione, ad esempio con l'autenticazione basata su form ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="77782-193">Cookies can be used as part of an authentication scheme, such as with ASP.NET Forms Authentication.</span></span> <span data-ttu-id="77782-194">Tuttavia, tutti i cookie HTTP impostati in una richiesta in ingresso vengono ignorati dai servizi WCF DataService.</span><span class="sxs-lookup"><span data-stu-id="77782-194">However, any HTTP cookies set on an incoming request are ignored by WCF DataServices.</span></span> <span data-ttu-id="77782-195">L'host di un servizio dati può elaborare il cookie, ma il runtime WCF Data Services non analizza né restituisce cookie.</span><span class="sxs-lookup"><span data-stu-id="77782-195">The host of a data service may process the cookie, but the WCF Data Services runtime never analyzes or returns cookies.</span></span> <span data-ttu-id="77782-196">Anche la libreria client di WCF Data Services non elabora i cookie inviati nella risposta.</span><span class="sxs-lookup"><span data-stu-id="77782-196">The WCF Data Services client library also does not process cookies sent in the response.</span></span>  
  
### <a name="custom-hosting-requirements"></a><span data-ttu-id="77782-197">Requisiti dell'hosting personalizzato</span><span class="sxs-lookup"><span data-stu-id="77782-197">Custom Hosting Requirements</span></span>  
 <span data-ttu-id="77782-198">Per impostazione predefinita, WCF Data Services viene creata come applicazione ASP.NET ospitata in IIS.</span><span class="sxs-lookup"><span data-stu-id="77782-198">By default, WCF Data Services is created as an ASP.NET application hosted in IIS.</span></span> <span data-ttu-id="77782-199">In tal modo il servizio dati potrà usare i comportamenti sicuri della piattaforma.</span><span class="sxs-lookup"><span data-stu-id="77782-199">This enables the data service to leverage the secure behaviors of this platform.</span></span> <span data-ttu-id="77782-200">È possibile definire WCF Data Services ospitati da un host personalizzato.</span><span class="sxs-lookup"><span data-stu-id="77782-200">You can define WCF Data Services that are hosted by a custom host.</span></span> <span data-ttu-id="77782-201">Per ulteriori informazioni, vedere [hosting del servizio dati](hosting-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="77782-201">For more information, see [Hosting the Data Service](hosting-the-data-service-wcf-data-services.md).</span></span> <span data-ttu-id="77782-202">I componenti e la piattaforma che ospitano un servizio dati devono assicurare i seguenti comportamenti di sicurezza per impedire attacchi sul servizio dati:</span><span class="sxs-lookup"><span data-stu-id="77782-202">The components and platform hosting a data service must ensure the following security behaviors to prevent attacks on the data service:</span></span>  
  
- <span data-ttu-id="77782-203">Limitare la lunghezza dell'URI accettata in una richiesta del servizio dati per tutte le possibili operazioni.</span><span class="sxs-lookup"><span data-stu-id="77782-203">Limit the length of the URI accepted in a data service request for all possible operations.</span></span>  
  
- <span data-ttu-id="77782-204">Limitare la dimensione dei messaggi HTTP in ingresso e in uscita.</span><span class="sxs-lookup"><span data-stu-id="77782-204">Limit the size of both incoming and outgoing HTTP messages.</span></span>  
  
- <span data-ttu-id="77782-205">Limitare il numero totale di richieste in sospeso in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="77782-205">Limit the total number of outstanding requests at any given time.</span></span>  
  
- <span data-ttu-id="77782-206">Limitare le dimensioni delle intestazioni HTTP e i relativi valori e fornire WCF Data Services accesso ai dati di intestazione.</span><span class="sxs-lookup"><span data-stu-id="77782-206">Limit the size of HTTP headers and their values, and provide WCF Data Services access to header data.</span></span>  
  
- <span data-ttu-id="77782-207">Rilevare e contrastare gli attacchi noti, ad esempio attacchi di tipo riproduzione di messaggi e SYN TCP.</span><span class="sxs-lookup"><span data-stu-id="77782-207">Detect and counter known attacks, such as TCP SYN and message replay attacks.</span></span>  
  
### <a name="values-are-not-further-encoded"></a><span data-ttu-id="77782-208">Valori non ulteriormente codificati</span><span class="sxs-lookup"><span data-stu-id="77782-208">Values Are Not Further Encoded</span></span>  
 <span data-ttu-id="77782-209">I valori delle proprietà inviati al servizio dati non vengono codificati ulteriormente dal runtime di WCF Data Services.</span><span class="sxs-lookup"><span data-stu-id="77782-209">Property values sent to the data service are not further encoded by the WCF Data Services runtime.</span></span> <span data-ttu-id="77782-210">Ad esempio, quando una proprietà di stringa di un'entità contiene contenuto HTML formattato, i tag non vengono codificati nel formato HTML dal servizio dati.</span><span class="sxs-lookup"><span data-stu-id="77782-210">For example, when a string property of an entity contains formatted HTML content, the tags are not HTML encoded by the data service.</span></span> <span data-ttu-id="77782-211">Il servizio dati non codifica ulteriormente neanche i valori di proprietà nella risposta.</span><span class="sxs-lookup"><span data-stu-id="77782-211">The data service also does not further encode property values in the response.</span></span> <span data-ttu-id="77782-212">La libreria client inoltre non esegue nessuna codifica aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="77782-212">The client library also does not perform any additional encoding.</span></span>  
  
### <a name="considerations-for-client-applications"></a><span data-ttu-id="77782-213">Considerazioni per le applicazioni client</span><span class="sxs-lookup"><span data-stu-id="77782-213">Considerations for Client Applications</span></span>  
 <span data-ttu-id="77782-214">Le seguenti considerazioni sulla sicurezza si applicano alle applicazioni che utilizzano il client WCF Data Services per accedere ai servizi OData:</span><span class="sxs-lookup"><span data-stu-id="77782-214">The following security considerations apply to applications that use the WCF Data Services client to access OData services:</span></span>  
  
- <span data-ttu-id="77782-215">La libreria client presuppone che i protocolli usati per accedere al servizio dati forniscano un livello di sicurezza appropriato.</span><span class="sxs-lookup"><span data-stu-id="77782-215">The client library assumes that the protocols used to access the data service provide an appropriate level of security.</span></span>  
  
- <span data-ttu-id="77782-216">La libreria client usa tutti i valori predefiniti per i timeout e le opzioni di analisi degli stack di trasporto forniti dalla piattaforma sottostante.</span><span class="sxs-lookup"><span data-stu-id="77782-216">The client library uses all the default values for timeouts and parsing options of the underlying platform-provided transport stacks.</span></span>  
  
- <span data-ttu-id="77782-217">La libreria client non legge le impostazioni dai file di configurazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="77782-217">The client library does not read any settings from application configuration files.</span></span>  
  
- <span data-ttu-id="77782-218">La libreria client non implementa alcun meccanismo di accesso tra domini.</span><span class="sxs-lookup"><span data-stu-id="77782-218">The client library does not implement any cross domain access mechanisms.</span></span> <span data-ttu-id="77782-219">Al contrario, usa i meccanismi forniti dallo stack HTTP sottostante.</span><span class="sxs-lookup"><span data-stu-id="77782-219">Instead, it relies on the mechanisms provided by the underlying HTTP stack.</span></span>  
  
- <span data-ttu-id="77782-220">La libreria client non dispone di elementi dell'interfaccia utente e non visualizza i dati né esegue il rendering dei dati che riceve o invia.</span><span class="sxs-lookup"><span data-stu-id="77782-220">The client library has no user interface elements, and it never tries to display or render the data that it receives or sends.</span></span>  
  
- <span data-ttu-id="77782-221">È opportuno che le applicazioni client convalidino sempre l'input dell'utente e i dati accettati da servizi non attendibili.</span><span class="sxs-lookup"><span data-stu-id="77782-221">We recommend that client applications always validate user input as well as data accepted from untrusted services.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="77782-222">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="77782-222">See also</span></span>

- [<span data-ttu-id="77782-223">Definizione di WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="77782-223">Defining WCF Data Services</span></span>](defining-wcf-data-services.md)
- [<span data-ttu-id="77782-224">Libreria client WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="77782-224">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
