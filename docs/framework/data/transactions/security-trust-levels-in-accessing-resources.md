---
title: Restrizioni di accesso alle risorse in base ai livelli di attendibilità di sicurezza
description: Comprendere i livelli di attendibilità di sicurezza nell'accesso alle risorse in .NET. Sono disponibili 3 livelli principali di attendibilità per System. Transactions.
ms.date: 03/30/2017
ms.assetid: fb5be924-317d-4d69-b33a-3d18ecfb9d6e
ms.openlocfilehash: 64f298460bde99181ab8dc8be13ae95aaa846299
ms.sourcegitcommit: 6219b1e1feccb16d88656444210fed3297f5611e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/22/2020
ms.locfileid: "85141952"
---
# <a name="security-trust-levels-in-accessing-resources"></a><span data-ttu-id="6eb5f-104">Restrizioni di accesso alle risorse in base ai livelli di attendibilità di sicurezza</span><span class="sxs-lookup"><span data-stu-id="6eb5f-104">Security Trust Levels in Accessing Resources</span></span>
<span data-ttu-id="6eb5f-105">Questo argomento descrive le restrizioni di accesso ai tipi di risorse esposti dallo spazio dei nomi <xref:System.Transactions>.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-105">This topic discusses how access is restricted on the types of resources that <xref:System.Transactions> exposes.</span></span>  
  
 <span data-ttu-id="6eb5f-106">Nello spazio dei nomi <xref:System.Transactions> esistono tre livelli principali di attendibilità.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-106">There are three main levels of trust for <xref:System.Transactions>.</span></span> <span data-ttu-id="6eb5f-107">I livelli di attendibilità sono definiti in base ai tipi di risorse esposti dallo spazio dei nomi <xref:System.Transactions> e in base al livello di attendibilità necessario ad accedere a tali risorse.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-107">The trust levels are defined based on the types of resources that <xref:System.Transactions> exposes, and the level of trust that should be required to access those resources.</span></span> <span data-ttu-id="6eb5f-108">Le risorse a cui lo spazio dei nomi <xref:System.Transactions> consente di accedere sono la memoria di sistema, le risorse a livello di processo condivise e le risorse a livello di sistema.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-108">The resources that <xref:System.Transactions> provides access to are system memory, shared process wide resources, and system wide resources.</span></span> <span data-ttu-id="6eb5f-109">I livelli sono:</span><span class="sxs-lookup"><span data-stu-id="6eb5f-109">The levels are:</span></span>  
  
- <span data-ttu-id="6eb5f-110">**AllowPartiallyTrustedCallers** (APTCA) per le applicazioni che utilizzano transazioni all'interno di un singolo dominio applicazione.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-110">**AllowPartiallyTrustedCallers** (APTCA) for applications using transactions within a single application domain.</span></span>  
  
- <span data-ttu-id="6eb5f-111">**DistributedTransactionPermission** (DTP) per le applicazioni che usano transazioni distribuite.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-111">**DistributedTransactionPermission** (DTP) for applications using distributed transactions.</span></span>  
  
- <span data-ttu-id="6eb5f-112">Per le risorse durevoli, le applicazioni di gestione della configurazione e le applicazioni di interoperabilità legacy.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-112">Full trust for durable resources, configuration management applications, and legacy interop applications.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="6eb5f-113">Evitare di utilizzare contesti rappresentati per chiamare le interfacce di integrazione.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-113">You should not call any of the enlistment interfaces with impersonated contexts.</span></span>  
  
## <a name="trust-levels"></a><span data-ttu-id="6eb5f-114">Livelli di attendibilità</span><span class="sxs-lookup"><span data-stu-id="6eb5f-114">Trust Levels</span></span>  
  
### <a name="aptca-partial-trust"></a><span data-ttu-id="6eb5f-115">AllowPartiallyTrustedCallers (attendibilità parziale)</span><span class="sxs-lookup"><span data-stu-id="6eb5f-115">APTCA (Partial Trust)</span></span>  
 <span data-ttu-id="6eb5f-116">L' <xref:System.Transactions> assembly può essere chiamato da codice parzialmente attendibile perché è stato contrassegnato con l'attributo **ALLOWPARTIALLYTRUSTEDCALLERS** (APTCA).</span><span class="sxs-lookup"><span data-stu-id="6eb5f-116">The <xref:System.Transactions> assembly can be called by partially trusted code because it has been marked with the **AllowPartiallyTrustedCallers** attribute (APTCA).</span></span> <span data-ttu-id="6eb5f-117">Questo attributo rimuove essenzialmente l'oggetto implicito <xref:System.Security.Permissions.SecurityAction.LinkDemand> per il set di autorizzazioni **FullTrust** che in caso contrario viene inserito automaticamente in ogni metodo accessibile pubblicamente in ogni tipo.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-117">This attribute essentially removes the implicit <xref:System.Security.Permissions.SecurityAction.LinkDemand> for the **FullTrust** permission set that is otherwise automatically placed on each publicly accessible method in each type.</span></span> <span data-ttu-id="6eb5f-118">Tuttavia, alcuni tipi e membri richiedono comunque autorizzazioni di livello superiore.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-118">However, some types and members still require stronger permissions.</span></span>  
  
 <span data-ttu-id="6eb5f-119">L'attributo APTCA consente alle applicazioni di utilizzare transazioni in un contesto di attendibilità parziale all'interno di un solo dominio applicazione.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-119">The APTCA attribute enables applications to use transactions in partial trust within a single application domain.</span></span> <span data-ttu-id="6eb5f-120">Ciò consente di utilizzare le transazioni per cui non è stata eseguita l'escalation nonché le integrazioni volatili allo scopo di eseguire la gestione degli errori.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-120">This enables non-escalated transactions and volatile enlistments that can be used for error handling.</span></span> <span data-ttu-id="6eb5f-121">Si consideri ad esempio un'applicazione che utilizza una tabella hash transazionale.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-121">One example of this is a transacted hash table and an application that uses it.</span></span> <span data-ttu-id="6eb5f-122">I dati possono essere aggiunti e rimossi dalla tabella hash mediante un'unica transazione.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-122">Data can be added to and removed from the hash table under a single transaction.</span></span> <span data-ttu-id="6eb5f-123">Se in seguito viene eseguito il rollback della transazione, tutte le modifiche apportate alla tabella hash tramite tale transazione possono essere annullate.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-123">If the transaction is later rolled back, all of the changes made to the hash table under that transaction can be undone.</span></span>  
  
### <a name="distributedtransactionpermission-dtp"></a><span data-ttu-id="6eb5f-124">DistributedTransactionPermission</span><span class="sxs-lookup"><span data-stu-id="6eb5f-124">DistributedTransactionPermission (DTP)</span></span>  
 <span data-ttu-id="6eb5f-125">Quando viene eseguita l'escalation di una transazione dello spazio dei nomi <xref:System.Transactions> in modo che venga gestita mediante il gestore MSDTC, lo spazio dei nomi <xref:System.Transactions> richiede l'autorizzazione <xref:System.Transactions.DistributedTransactionPermission> per creare la transazione distribuita.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-125">When a <xref:System.Transactions> transaction is escalated to be managed by MSDTC, <xref:System.Transactions> demands the <xref:System.Transactions.DistributedTransactionPermission> (DTP) to create the distributed transaction.</span></span> <span data-ttu-id="6eb5f-126">Ciò significa che il codice che ha causato l'escalation della transazione (ad esempio tramite la serializzazione o l'aggiunta di integrazioni durevoli) deve disporre dell'autorizzazione DTP.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-126">This means that the code that causes the transaction to be escalated (such as through serialization or additional durable enlistments) would need to be granted DTP.</span></span> <span data-ttu-id="6eb5f-127">Non è necessario che il codice che ha creato la transazione dello spazio dei nomi <xref:System.Transactions> disponga di questa autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-127">The code that originally created the <xref:System.Transactions> transaction does not necessarily need to possess this permission.</span></span>  
  
### <a name="fulltrust-link-demands"></a><span data-ttu-id="6eb5f-128">FullTrust (attendibilità totale)</span><span class="sxs-lookup"><span data-stu-id="6eb5f-128">FullTrust Link Demands</span></span>  
 <span data-ttu-id="6eb5f-129">Questo livello di autorizzazione viene utilizzato per applicare restrizioni alle applicazioni che modificano risorse durevoli.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-129">This permission level is intended to restrict applications that are writing to durable resources.</span></span> <span data-ttu-id="6eb5f-130">In caso di errore, l'applicazione deve essere in grado di interagire con la gestione transazioni per eseguire il ripristino allo scopo di determinare il risultato finale della transazione e quindi aggiornare i dati definitivi.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-130">Upon failure, the application needs to be able to recover with the transaction manager to determine the final outcome of the transaction, so that it can update permanent data.</span></span> <span data-ttu-id="6eb5f-131">Questo tipo di applicazione è detto gestore di risorse durevole.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-131">This type of application is known as a durable source manager.</span></span> <span data-ttu-id="6eb5f-132">Un classico esempio di questo tipo di applicazione è SQL.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-132">A classic example of this type of application is SQL.</span></span>  
  
 <span data-ttu-id="6eb5f-133">Per consentire il ripristino, questo tipo di applicazione è in grado di utilizzare le risorse di sistema in modo definitivo.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-133">To enable recovery, this type of application has the ability to permanently consume system resources.</span></span> <span data-ttu-id="6eb5f-134">Ciò è dovuto al fatto che il gestore delle transazioni recuperabili deve ricordare le transazioni di cui è stato eseguito il commit finché non è in grado di confermare che tutti i gestori di risorse durevoli integrati nella transazione siano stati informati in merito al risultato.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-134">This is because the recoverable transaction manager must remember transactions that have committed until it can confirm that all durable resource managers that are participating in the transaction have received the outcome.</span></span> <span data-ttu-id="6eb5f-135">Pertanto, questo tipo di applicazione richiede attendibilità totale e deve essere eseguito solo se dispone del livello di attendibilità FullTrust.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-135">Therefore, this type of application requires full trust and should not be run unless that level of trust has been granted.</span></span>  
  
 <span data-ttu-id="6eb5f-136">Per ulteriori informazioni sulle integrazioni durevoli e sul ripristino, vedere la pagina relativa all' [integrazione delle risorse come partecipanti in una transazione](enlisting-resources-as-participants-in-a-transaction.md) e l' [esecuzione del ripristino](performing-recovery.md) .</span><span class="sxs-lookup"><span data-stu-id="6eb5f-136">For more information on durable enlistments and recovery, see the [Enlisting Resources as Participants in a Transaction](enlisting-resources-as-participants-in-a-transaction.md) and [Performing Recovery](performing-recovery.md) topics.</span></span>  
  
 <span data-ttu-id="6eb5f-137">L'autorizzazione FullTrust deve essere concessa anche alle applicazioni che eseguono operazioni di interoperabilità legacy con COM+.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-137">Applications that perform legacy interop work with COM+ are also required to have full trust.</span></span>  
  
 <span data-ttu-id="6eb5f-138">Di seguito è riportato un elenco di tipi e membri che non possono essere richiamati da codice parzialmente attendibile perché sono decorati con l'attributo di sicurezza dichiarativo **FullTrust** :</span><span class="sxs-lookup"><span data-stu-id="6eb5f-138">The following is a list of types and members that are not callable by partially trusted code because they are decorated with the **FullTrust** declarative security attribute:</span></span>  
  
 `PermissionSetAttribute(SecurityAction.LinkDemand, Name := "FullTrust")`  
  
- <xref:System.Transactions.Transaction.EnlistDurable%2A?displayProperty=nameWithType>  
  
- <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A>  
  
- <xref:System.Transactions.TransactionInterop>  
  
- <xref:System.Transactions.TransactionManager.DistributedTransactionStarted>  
  
- <xref:System.Transactions.HostCurrentTransactionCallback>  
  
- <xref:System.Transactions.TransactionManager.Reenlist%2A>  
  
- <xref:System.Transactions.TransactionManager.RecoveryComplete%2A>  
  
- <xref:System.Transactions.TransactionScope.%23ctor%28System.Transactions.TransactionScopeOption%2CSystem.Transactions.TransactionOptions%2CSystem.Transactions.EnterpriseServicesInteropOption%29>  
  
 <span data-ttu-id="6eb5f-139">Solo il chiamante immediato deve possedere il set di autorizzazioni **FullTrust** per usare i tipi o i metodi descritti in precedenza.</span><span class="sxs-lookup"><span data-stu-id="6eb5f-139">Only the immediate caller is required to possess the **FullTrust** permission set to use the above types or methods.</span></span>
