---
title: Autorizzazioni in SQL Server
description: Informazioni su come concedere in modo esplicito le autorizzazioni per rendere gli oggetti di database creati accessibili agli utenti in SQL Server con ADO.NET.
ms.date: 03/30/2017
ms.assetid: d340405c-91f4-4837-a3cc-a238ee89888a
ms.openlocfilehash: eb01e29b36da5e1793b9176301a968a42115d19c
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/02/2020
ms.locfileid: "84286533"
---
# <a name="authorization-and-permissions-in-sql-server"></a><span data-ttu-id="33d77-103">Autorizzazioni in SQL Server</span><span class="sxs-lookup"><span data-stu-id="33d77-103">Authorization and Permissions in SQL Server</span></span>
<span data-ttu-id="33d77-104">Quando si creano oggetti di database, è necessario concedere in modo esplicito le autorizzazioni per renderli accessibili agli utenti.</span><span class="sxs-lookup"><span data-stu-id="33d77-104">When you create database objects, you must explicitly grant permissions to make them accessible to users.</span></span> <span data-ttu-id="33d77-105">Ogni oggetto a protezione diretta dispone di autorizzazioni che possono essere concesse a un'entità di sicurezza usando istruzioni di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="33d77-105">Every securable object has permissions that can be granted to a principal using permission statements.</span></span>  
  
## <a name="the-principle-of-least-privilege"></a><span data-ttu-id="33d77-106">Principio dei privilegi minimi</span><span class="sxs-lookup"><span data-stu-id="33d77-106">The Principle of Least Privilege</span></span>  
 <span data-ttu-id="33d77-107">Lo sviluppo di un'applicazione usando un approccio basato su un account utente con privilegi minimi rappresenta una parte importante di una strategia difensiva dettagliata per fronteggiare i rischi per la sicurezza.</span><span class="sxs-lookup"><span data-stu-id="33d77-107">Developing an application using a least-privileged user account (LUA) approach is an important part of a defensive, in-depth strategy for countering security threats.</span></span> <span data-ttu-id="33d77-108">Tale approccio assicura infatti che gli utenti seguano il principio dei privilegi minimi ed effettuino sempre l'accesso con account utente limitati.</span><span class="sxs-lookup"><span data-stu-id="33d77-108">The LUA approach ensures that users follow the principle of least privilege and always log on with limited user accounts.</span></span> <span data-ttu-id="33d77-109">Le attività amministrative vengono suddivise usando i ruoli predefiniti del server, tuttavia l'uso del ruolo predefinito del server `sysadmin` presenta particolari restrizioni.</span><span class="sxs-lookup"><span data-stu-id="33d77-109">Administrative tasks are broken out using fixed server roles, and the use of the `sysadmin` fixed server role is severely restricted.</span></span>  
  
 <span data-ttu-id="33d77-110">Attenersi sempre al principio dei privilegi minimi quando si concedono autorizzazioni agli utenti del database.</span><span class="sxs-lookup"><span data-stu-id="33d77-110">Always follow the principle of least privilege when granting permissions to database users.</span></span> <span data-ttu-id="33d77-111">Concedere le autorizzazioni minime necessarie per consentire a un utente o a un ruolo di eseguire una determinata attività.</span><span class="sxs-lookup"><span data-stu-id="33d77-111">Grant the minimum permissions necessary to a user or role to accomplish a given task.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="33d77-112">Lo sviluppo e il test di un'applicazione per la quale è stato usato l'approccio basato su un account utente con privilegi minimi implica maggiori difficoltà durante il processo di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="33d77-112">Developing and testing an application using the LUA approach adds a degree of difficulty to the development process.</span></span> <span data-ttu-id="33d77-113">È infatti più agevole creare oggetti e scrivere codice quando si è connessi come amministratore di sistema o proprietario del database rispetto a quando si usa un account con privilegi minimi.</span><span class="sxs-lookup"><span data-stu-id="33d77-113">It is easier to create objects and write code while logged on as a system administrator or database owner than it is using a LUA account.</span></span> <span data-ttu-id="33d77-114">Tuttavia, lo sviluppo di applicazioni con un account dotato di privilegi maggiori può offuscare l'impatto di funzionalità ridotte quando utenti con privilegi minimi tentano di eseguire un'applicazione per il cui corretto funzionamento sono richieste autorizzazioni elevate.</span><span class="sxs-lookup"><span data-stu-id="33d77-114">However, developing applications using a highly privileged account can obfuscate the impact of reduced functionality when least privileged users attempt to run an application that requires elevated permissions in order to function correctly.</span></span> <span data-ttu-id="33d77-115">D'altro canto, concedere agli utenti autorizzazioni eccessive per consentire loro di disporre nuovamente delle funzionalità perse può esporre l'applicazione a potenziali attacchi.</span><span class="sxs-lookup"><span data-stu-id="33d77-115">Granting excessive permissions to users in order to reacquire lost functionality can leave your application vulnerable to attack.</span></span> <span data-ttu-id="33d77-116">La progettazione, lo sviluppo e il test dell'applicazione per il cui accesso viene usato un account con privilegi minimi consentono invece di applicare un approccio disciplinato alla pianificazione della sicurezza, eliminando sorprese sgradite ed impedendo di cedere alla tentazione di concedere privilegi elevati per risolvere rapidamente il problema.</span><span class="sxs-lookup"><span data-stu-id="33d77-116">Designing, developing and testing your application logged on with a LUA account enforces a disciplined approach to security planning that eliminates unpleasant surprises and the temptation to grant elevated privileges as a quick fix.</span></span> <span data-ttu-id="33d77-117">Per il test è possibile usare un account di accesso SQL Server anche se per la distribuzione dell'applicazione si intende usare l'autenticazione di Windows.</span><span class="sxs-lookup"><span data-stu-id="33d77-117">You can use a SQL Server login for testing even if your application is intended to deploy using Windows authentication.</span></span>  
  
## <a name="role-based-permissions"></a><span data-ttu-id="33d77-118">Autorizzazioni basate sui ruoli</span><span class="sxs-lookup"><span data-stu-id="33d77-118">Role-Based Permissions</span></span>  
 <span data-ttu-id="33d77-119">La concessione delle autorizzazioni ai ruoli anziché agli utenti consente di semplificare l'amministrazione della sicurezza.</span><span class="sxs-lookup"><span data-stu-id="33d77-119">Granting permissions to roles rather than to users simplifies security administration.</span></span> <span data-ttu-id="33d77-120">I set di autorizzazioni assegnati ai ruoli vengono ereditati da tutti i membri del ruolo.</span><span class="sxs-lookup"><span data-stu-id="33d77-120">Permission sets that are assigned to roles are inherited by all members of the role.</span></span> <span data-ttu-id="33d77-121">È più semplice aggiungere o rimuovere utenti da un ruolo anziché ricreare set di autorizzazioni distinti per i singoli utenti.</span><span class="sxs-lookup"><span data-stu-id="33d77-121">It is easier to add or remove users from a role than it is to recreate separate permission sets for individual users.</span></span> <span data-ttu-id="33d77-122">I ruoli possono essere annidati, tuttavia un numero eccessivo di livelli di annidamento può comportare problemi di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="33d77-122">Roles can be nested; however, too many levels of nesting can degrade performance.</span></span> <span data-ttu-id="33d77-123">Per semplificare l'assegnazione delle autorizzazioni, è inoltre possibile aggiungere utenti a ruoli predefiniti del database.</span><span class="sxs-lookup"><span data-stu-id="33d77-123">You can also add users to fixed database roles to simplify assigning permissions.</span></span>  
  
 <span data-ttu-id="33d77-124">È possibile concedere autorizzazioni a livello di schema.</span><span class="sxs-lookup"><span data-stu-id="33d77-124">You can grant permissions at the schema level.</span></span> <span data-ttu-id="33d77-125">Gli utenti ereditano automaticamente autorizzazioni su tutti i nuovi oggetti creati nello schema, pertanto non è necessario concedere autorizzazioni quando vengono creati nuovi oggetti.</span><span class="sxs-lookup"><span data-stu-id="33d77-125">Users automatically inherit permissions on all new objects created in the schema; you do not need to grant permissions as new objects are created.</span></span>  
  
## <a name="permissions-through-procedural-code"></a><span data-ttu-id="33d77-126">Autorizzazioni tramite codice procedurale</span><span class="sxs-lookup"><span data-stu-id="33d77-126">Permissions Through Procedural Code</span></span>  
 <span data-ttu-id="33d77-127">L'incapsulamento dell'accesso ai dati tramite moduli, ad esempio stored procedure e funzioni definite dall'utente, consente di definire un ulteriore livello di protezione per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="33d77-127">Encapsulating data access through modules such as stored procedures and user-defined functions provides an additional layer of protection around your application.</span></span> <span data-ttu-id="33d77-128">È possibile impedire agli utenti di interagire direttamente con oggetti di database concedendo autorizzazioni solo a stored procedure o funzioni e negandole agli oggetti sottostanti, ad esempio le tabelle.</span><span class="sxs-lookup"><span data-stu-id="33d77-128">You can prevent users from directly interacting with database objects by granting permissions only to stored procedures or functions while denying permissions to underlying objects such as tables.</span></span> <span data-ttu-id="33d77-129">In SQL Server è possibile eseguire questa operazione tramite il concatenamento della proprietà.</span><span class="sxs-lookup"><span data-stu-id="33d77-129">SQL Server achieves this by ownership chaining.</span></span>  
  
## <a name="permission-statements"></a><span data-ttu-id="33d77-130">Istruzioni di autorizzazione</span><span class="sxs-lookup"><span data-stu-id="33d77-130">Permission Statements</span></span>  
 <span data-ttu-id="33d77-131">La tabella seguente descrive le tre istruzioni di autorizzazione Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="33d77-131">The three Transact-SQL permission statements are described in the following table.</span></span>  
  
|<span data-ttu-id="33d77-132">Istruzione di autorizzazione</span><span class="sxs-lookup"><span data-stu-id="33d77-132">Permission Statement</span></span>|<span data-ttu-id="33d77-133">Descrizione</span><span class="sxs-lookup"><span data-stu-id="33d77-133">Description</span></span>|  
|--------------------------|-----------------|  
|<span data-ttu-id="33d77-134">GRANT</span><span class="sxs-lookup"><span data-stu-id="33d77-134">GRANT</span></span>|<span data-ttu-id="33d77-135">Consente di concedere un'autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="33d77-135">Grants a permission.</span></span>|  
|<span data-ttu-id="33d77-136">REVOKE</span><span class="sxs-lookup"><span data-stu-id="33d77-136">REVOKE</span></span>|<span data-ttu-id="33d77-137">Consente di revocare un'autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="33d77-137">Revokes a permission.</span></span> <span data-ttu-id="33d77-138">Corrisponde allo stato predefinito di un nuovo oggetto.</span><span class="sxs-lookup"><span data-stu-id="33d77-138">This is the default state of a new object.</span></span> <span data-ttu-id="33d77-139">Un'autorizzazione revocata a un utente o a un ruolo può tuttavia ancora essere ereditata da altri gruppi o ruoli a cui è assegnata l'entità di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="33d77-139">A permission revoked from a user or role can still be inherited from other groups or roles to which the principal is assigned.</span></span>|  
|<span data-ttu-id="33d77-140">NEGA</span><span class="sxs-lookup"><span data-stu-id="33d77-140">DENY</span></span>|<span data-ttu-id="33d77-141">Consente di revocare un'autorizzazione in modo che non possa essere ereditata.</span><span class="sxs-lookup"><span data-stu-id="33d77-141">DENY revokes a permission so that it cannot be inherited.</span></span> <span data-ttu-id="33d77-142">Ha la precedenza su tutte le autorizzazioni, ma non si applica a proprietari di oggetti o a membri di `sysadmin`.</span><span class="sxs-lookup"><span data-stu-id="33d77-142">DENY takes precedence over all permissions, except DENY does not apply to object owners or members of `sysadmin`.</span></span> <span data-ttu-id="33d77-143">Se si usa DENY per negare le autorizzazioni su un oggetto al ruolo `public`, le autorizzazioni verranno negate a tutti gli utenti e ruoli, ad eccezione dei parte proprietari dell'oggetto e dei membri di `sysadmin`.</span><span class="sxs-lookup"><span data-stu-id="33d77-143">If you DENY permissions on an object to the `public` role it is denied to all users and roles except for object owners and `sysadmin` members.</span></span>|  
  
- <span data-ttu-id="33d77-144">L'istruzione GRANT consente di assegnare a un gruppo o un ruolo autorizzazioni che possono essere ereditate dagli utenti del database.</span><span class="sxs-lookup"><span data-stu-id="33d77-144">The GRANT statement can assign permissions to a group or role that can be inherited by database users.</span></span> <span data-ttu-id="33d77-145">Tuttavia, poiché l'istruzione DENY ha la precedenza su tutte le altre istruzioni di autorizzazione,</span><span class="sxs-lookup"><span data-stu-id="33d77-145">However, the DENY statement takes precedence over all other permission statements.</span></span> <span data-ttu-id="33d77-146">un utente al quale è stata negata un'autorizzazione non può ereditarla da un altro ruolo.</span><span class="sxs-lookup"><span data-stu-id="33d77-146">Therefore, a user who has been denied a permission cannot inherit it from another role.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="33d77-147">Non è possibile negare autorizzazioni ai membri del ruolo predefinito del server `sysadmin` e ai proprietari dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="33d77-147">Members of the `sysadmin` fixed server role and object owners cannot be denied permissions.</span></span>  
  
## <a name="ownership-chains"></a><span data-ttu-id="33d77-148">Catene di proprietà</span><span class="sxs-lookup"><span data-stu-id="33d77-148">Ownership Chains</span></span>  
 <span data-ttu-id="33d77-149">SQL Server assicura che l'accesso agli oggetti sia consentito solo alle entità di sicurezza cui è stata concessa l'autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="33d77-149">SQL Server ensures that only principals that have been granted permission can access objects.</span></span> <span data-ttu-id="33d77-150">Se più oggetti di database accedono ad altri oggetti di database, la sequenza viene denominata catena.</span><span class="sxs-lookup"><span data-stu-id="33d77-150">When multiple database objects access each other, the sequence is known as a chain.</span></span> <span data-ttu-id="33d77-151">Quando SQL Server attraversa i collegamenti della catena, valuta le autorizzazioni in modo diverso rispetto a quanto avviene durante l'accesso a singoli elementi.</span><span class="sxs-lookup"><span data-stu-id="33d77-151">When SQL Server is traversing the links in the chain, it evaluates permissions differently than it would if it were accessing each item separately.</span></span> <span data-ttu-id="33d77-152">Quando l'accesso a un oggetto avviene tramite una catena, SQL Server confronta dapprima il proprietario dell'oggetto con il proprietario dell'oggetto chiamante, ovvero il collegamento precedente nella catena.</span><span class="sxs-lookup"><span data-stu-id="33d77-152">When an object is accessed through a chain, SQL Server first compares the object's owner to the owner of the calling object (the previous link in the chain).</span></span> <span data-ttu-id="33d77-153">Se il proprietario di entrambi oggetti è lo stesso, le autorizzazioni sull'oggetto a cui viene fatto riferimento non vengono controllate.</span><span class="sxs-lookup"><span data-stu-id="33d77-153">If both objects have the same owner, permissions on the referenced object are not checked.</span></span> <span data-ttu-id="33d77-154">Ogni volta che un oggetto accede a un altro oggetto il cui proprietario è diverso, la catena di proprietà viene interrotta e SQL Server deve controllare il contesto di sicurezza del chiamante.</span><span class="sxs-lookup"><span data-stu-id="33d77-154">Whenever an object accesses another object that has a different owner, the ownership chain is broken and SQL Server must check the caller's security context.</span></span>  
  
## <a name="procedural-code-and-ownership-chaining"></a><span data-ttu-id="33d77-155">Codice procedurale e concatenamento delle proprietà</span><span class="sxs-lookup"><span data-stu-id="33d77-155">Procedural Code and Ownership Chaining</span></span>  
 <span data-ttu-id="33d77-156">Si supponga che un utente siano concesse autorizzazioni di esecuzione su una stored procedure che seleziona dati da una tabella.</span><span class="sxs-lookup"><span data-stu-id="33d77-156">Suppose that a user is granted execute permissions on a stored procedure that selects data from a table.</span></span> <span data-ttu-id="33d77-157">Se il proprietario della stored procedure e della tabella è lo stesso, non è necessario che all'utente vengano concesse autorizzazioni sulla tabella ed è persino possibile negarle.</span><span class="sxs-lookup"><span data-stu-id="33d77-157">If the stored procedure and the table have the same owner, the user doesn't need to be granted any permissions on the table and can even be denied permissions.</span></span> <span data-ttu-id="33d77-158">Tuttavia, se i proprietari della stored procedure e della tabella sono diversi, SQL Server deve controllare le autorizzazioni dell'utente sulla tabella prima di consentire l'accesso ai dati.</span><span class="sxs-lookup"><span data-stu-id="33d77-158">However, if the stored procedure and the table have different owners, SQL Server must check the user's permissions on the table before allowing access to the data.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="33d77-159">Il concatenamento delle proprietà non si applica nel caso di istruzioni SQL dinamiche.</span><span class="sxs-lookup"><span data-stu-id="33d77-159">Ownership chaining does not apply in the case of dynamic SQL statements.</span></span> <span data-ttu-id="33d77-160">Per chiamare una procedura che esegue un'istruzione SQL, è necessario che al chiamante siano concesse autorizzazioni sulle tabelle sottostanti, esponendo in tal l'applicazione ad attacchi SQL injection.</span><span class="sxs-lookup"><span data-stu-id="33d77-160">To call a procedure that executes an SQL statement, the caller must be granted permissions on the underlying tables, leaving your application vulnerable to SQL Injection attack.</span></span> <span data-ttu-id="33d77-161">In SQL Server vengono forniti nuovi meccanismi, ad esempio la rappresentazione e la firma di moduli con i certificati, per i quali non è richiesta la concessione di autorizzazioni sulle tabelle sottostanti</span><span class="sxs-lookup"><span data-stu-id="33d77-161">SQL Server provides new mechanisms, such as impersonation and signing modules with certificates, that do not require granting permissions on the underlying tables.</span></span> <span data-ttu-id="33d77-162">e che possono essere usati anche con stored procedure CLR.</span><span class="sxs-lookup"><span data-stu-id="33d77-162">These can also be used with CLR stored procedures.</span></span>  
  
## <a name="external-resources"></a><span data-ttu-id="33d77-163">Risorse esterne</span><span class="sxs-lookup"><span data-stu-id="33d77-163">External Resources</span></span>  
 <span data-ttu-id="33d77-164">Per ulteriori informazioni, vedere le risorse seguenti.</span><span class="sxs-lookup"><span data-stu-id="33d77-164">For more information, see the following resources.</span></span>  
  
|<span data-ttu-id="33d77-165">Resource</span><span class="sxs-lookup"><span data-stu-id="33d77-165">Resource</span></span>|<span data-ttu-id="33d77-166">Descrizione</span><span class="sxs-lookup"><span data-stu-id="33d77-166">Description</span></span>|  
|--------------|-----------------|  
|[<span data-ttu-id="33d77-167">Autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="33d77-167">Permissions</span></span>](/sql/relational-databases/security/permissions-database-engine)|<span data-ttu-id="33d77-168">Contiene argomenti che illustrano la gerarchia delle autorizzazioni, le viste del catalogo e le autorizzazioni dei ruoli predefiniti del server e del database.</span><span class="sxs-lookup"><span data-stu-id="33d77-168">Contains topics describing permissions hierarchy, catalog views, and permissions of fixed server and database roles.</span></span>|
  
## <a name="see-also"></a><span data-ttu-id="33d77-169">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="33d77-169">See also</span></span>

- [<span data-ttu-id="33d77-170">Protezione delle applicazioni ADO.NET</span><span class="sxs-lookup"><span data-stu-id="33d77-170">Securing ADO.NET Applications</span></span>](../securing-ado-net-applications.md)
- [<span data-ttu-id="33d77-171">Scenari di sicurezza delle applicazioni in SQL Server</span><span class="sxs-lookup"><span data-stu-id="33d77-171">Application Security Scenarios in SQL Server</span></span>](application-security-scenarios-in-sql-server.md)
- [<span data-ttu-id="33d77-172">Autenticazione in SQL Server</span><span class="sxs-lookup"><span data-stu-id="33d77-172">Authentication in SQL Server</span></span>](authentication-in-sql-server.md)
- [<span data-ttu-id="33d77-173">Ruoli server e database in SQL Server</span><span class="sxs-lookup"><span data-stu-id="33d77-173">Server and Database Roles in SQL Server</span></span>](server-and-database-roles-in-sql-server.md)
- [<span data-ttu-id="33d77-174">Proprietà e separazione tra schemi e utenti in SQL Server</span><span class="sxs-lookup"><span data-stu-id="33d77-174">Ownership and User-Schema Separation in SQL Server</span></span>](ownership-and-user-schema-separation-in-sql-server.md)
- [<span data-ttu-id="33d77-175">Panoramica di ADO.NET</span><span class="sxs-lookup"><span data-stu-id="33d77-175">ADO.NET Overview</span></span>](../ado-net-overview.md)
