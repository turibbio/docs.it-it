---
title: Profilatura runtime
description: Esplorare la profilatura di runtime in .NET, ovvero un metodo per raccogliere dati sulle prestazioni in qualsiasi scenario di sviluppo o distribuzione.
ms.date: 03/30/2017
helpviewer_keywords:
- performance counters
- common language runtime, profiling
- Perfmon.exe
- System Monitor
- profiling
- runtime, profiling
- profiling applications
- Performance Console
ms.assetid: ccd68284-f3a8-47b8-bc3f-92e5fe3a1640
ms.openlocfilehash: fc88cc5c7c7655cf03573bae3935498a05496cc2
ms.sourcegitcommit: c23d9666ec75b91741da43ee3d91c317d68c7327
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/01/2020
ms.locfileid: "85803586"
---
# <a name="runtime-profiling"></a><span data-ttu-id="5108d-103">Profilatura runtime</span><span class="sxs-lookup"><span data-stu-id="5108d-103">Runtime Profiling</span></span>
<span data-ttu-id="5108d-104">La profilatura è un metodo di raccolta dei dati sulle prestazioni in qualsiasi scenario di sviluppo o distribuzione.</span><span class="sxs-lookup"><span data-stu-id="5108d-104">Profiling is a method of gathering performance data in any development or deployment scenario.</span></span> <span data-ttu-id="5108d-105">Questa sezione è destinata agli sviluppatori e agli amministratori di sistema che vogliono raccogliere le informazioni sulle prestazioni delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="5108d-105">This section is for developers and system administrators who want to gather information about application performance.</span></span>  
  
## <a name="tracking-performance-using-the-performance-monitor-perfmonexe"></a><span data-ttu-id="5108d-106">Rilevamento delle prestazioni con Performance Monitor (Perfmon.exe)</span><span class="sxs-lookup"><span data-stu-id="5108d-106">Tracking Performance Using the Performance Monitor (Perfmon.exe)</span></span>  
 <span data-ttu-id="5108d-107">Performance Monitor è lo strumento più semplice da usare per profilare l'applicazione .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="5108d-107">The Performance Monitor is the easiest tool to use to profile your .NET Framework application.</span></span> <span data-ttu-id="5108d-108">Performance Monitor rappresenta graficamente i dati trovati nei contatori delle prestazioni .NET Framework installati con i Common Language Runtime e il Windows SDK.</span><span class="sxs-lookup"><span data-stu-id="5108d-108">The Performance Monitor graphically represents data found in the .NET Framework performance counters that are installed with the common language runtime and the Windows SDK.</span></span> <span data-ttu-id="5108d-109">Questi contatori possono essere usati per monitorare una serie di attività, dalla gestione della memoria alle prestazioni del compilatore JIT.</span><span class="sxs-lookup"><span data-stu-id="5108d-109">These counters can be used to monitor everything from memory management to just-in-time (JIT) compiler performance.</span></span> <span data-ttu-id="5108d-110">Forniscono informazioni sulle risorse usate dall'applicazione, che indirettamente misurano le prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5108d-110">They tell you about the resources your application uses, which is an indirect measure of your application's performance.</span></span> <span data-ttu-id="5108d-111">Usare questi contatori per comprendere il funzionamento interno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5108d-111">Use these counters to understand how your application works internally.</span></span>  
  
#### <a name="to-run-perfmonexe-on-windows-vista-and-later-versions"></a><span data-ttu-id="5108d-112">Per eseguire Perfmon.exe in Windows Vista e versioni successive</span><span class="sxs-lookup"><span data-stu-id="5108d-112">To run Perfmon.exe on Windows Vista and later versions</span></span>  
  
1. <span data-ttu-id="5108d-113">Al prompt dei comandi digitare **perfmon**.</span><span class="sxs-lookup"><span data-stu-id="5108d-113">At the command prompt, type **perfmon**.</span></span> <span data-ttu-id="5108d-114">Viene visualizzata la console di **Performance Monitor** .</span><span class="sxs-lookup"><span data-stu-id="5108d-114">The **Performance Monitor** console appears.</span></span>  
  
2. <span data-ttu-id="5108d-115">Nella cartella **Strumenti di monitoraggio** fare clic su **Performance Monitor**.</span><span class="sxs-lookup"><span data-stu-id="5108d-115">In the **Monitoring Tools** folder, click **Performance Monitor**.</span></span>  
  
3. <span data-ttu-id="5108d-116">Nella barra degli strumenti di Performance Monitor fare clic sull'icona **Aggiungi** (il segno di addizione), se presente.</span><span class="sxs-lookup"><span data-stu-id="5108d-116">In the Performance Monitor toolbar, click the **Add** icon (the plus sign), if it is present.</span></span> <span data-ttu-id="5108d-117">Se non è presente, fare clic con il pulsante destro del mouse nella finestra di monitoraggio e selezionare l'opzione **Aggiungi contatori** .</span><span class="sxs-lookup"><span data-stu-id="5108d-117">If it is not present, right-click in the monitor window and select the **Add Counters** option.</span></span>  
  
     <span data-ttu-id="5108d-118">Viene aperta la finestra di dialogo **Aggiungi contatori** .</span><span class="sxs-lookup"><span data-stu-id="5108d-118">This opens the **Add Counters** dialog box.</span></span> <span data-ttu-id="5108d-119">La casella di riepilogo **Contatori disponibili** visualizza gli oggetti prestazione disponibili.</span><span class="sxs-lookup"><span data-stu-id="5108d-119">The **Available counters** list box displays the available performance objects.</span></span> <span data-ttu-id="5108d-120">Esistono diversi oggetti predefiniti per le applicazioni .NET Framework, inclusi quelli per la gestione della memoria (**Memoria CLR .NET**), per l'interoperabilità (**Interoperabilità CLR .NET**), per la gestione delle eccezioni (**Eccezioni CLR .NET**) e per il multithreading (**LocksAndThreads CLR .NET**).</span><span class="sxs-lookup"><span data-stu-id="5108d-120">There are a number of predefined objects for .NET Framework applications, including those for memory management (**.NET CLR Memory**), interoperability (**.NET CLR Interop**), exception handling (**.NET CLR Exceptions**), and multithreading (**.NET CLR LocksAndThreads**).</span></span> <span data-ttu-id="5108d-121">Ogni oggetto prestazione include diversi contatori delle prestazioni singoli.</span><span class="sxs-lookup"><span data-stu-id="5108d-121">Each performance object includes a number of individual performance counters.</span></span> <span data-ttu-id="5108d-122">Per un elenco dei contatori delle prestazioni disponibili in Performance Monitor, vedere [Performance Counters](performance-counters.md).</span><span class="sxs-lookup"><span data-stu-id="5108d-122">For a list of the performance counters available in Performance Monitor, see [Performance Counters](performance-counters.md).</span></span>  
  
4. <span data-ttu-id="5108d-123">Selezionare la casella di controllo accanto al nome di un oggetto prestazione per visualizzare l'elenco dei singoli contatori delle prestazioni che supporta.</span><span class="sxs-lookup"><span data-stu-id="5108d-123">Select the check box next to a performance object's name to view the list of individual performance counters that it supports.</span></span>  
  
5. <span data-ttu-id="5108d-124">Fare clic sul contatore delle prestazioni da visualizzare:</span><span class="sxs-lookup"><span data-stu-id="5108d-124">Click the performance counter you want to view.</span></span>  
  
6. <span data-ttu-id="5108d-125">Nella casella **di riepilogo istanze dell'oggetto selezionato** fare clic **\<All instances>** per specificare che si desidera monitorare il contatore delle prestazioni per il Common Language Runtime a livello globale, ovvero a livello di sistema.</span><span class="sxs-lookup"><span data-stu-id="5108d-125">In the **Instances of selected object** list box, click **\<All instances>** to specify that you want to monitor the performance counter for the common language runtime globally (that is, on a system-wide basis).</span></span>  
  
     <span data-ttu-id="5108d-126">-oppure-</span><span class="sxs-lookup"><span data-stu-id="5108d-126">-or-</span></span>  
  
     <span data-ttu-id="5108d-127">Nella casella di riepilogo **Istanze dell'oggetto selezionato** fare clic su un nome dell'applicazione per monitorare il relativo contatore delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="5108d-127">In the **Instances of selected object** list box, click an application name to monitor the performance counter for that application.</span></span>  
  
     <span data-ttu-id="5108d-128">Per differenziare più versioni di runtime o per evitare ambiguità tra più applicazioni con lo stesso nome, è necessario modificare anche una chiave del Registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="5108d-128">To differentiate multiple versions of the runtime, or to disambiguate multiple applications with the same name, you must also modify a registry key.</span></span> <span data-ttu-id="5108d-129">Per altre informazioni, vedere [Performance Counters and In-Process Side-By-Side Applications](performance-counters-and-in-process-side-by-side-applications.md).</span><span class="sxs-lookup"><span data-stu-id="5108d-129">For more information, see [Performance Counters and In-Process Side-By-Side Applications](performance-counters-and-in-process-side-by-side-applications.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="5108d-130">Quando vengono installati nuovi contatori delle prestazioni mentre è in esecuzione la console prestazioni, arrestare e riavviare la console per rendere visibili i nuovi contatori.</span><span class="sxs-lookup"><span data-stu-id="5108d-130">When new performance counters are installed while the Performance console is running, stop and restart the Performance console to make the new counters visible.</span></span>  
  
 <span data-ttu-id="5108d-131">Per profilare un assembly esistente in un'area o in una condivisione remota, assicurarsi che l'assembly remoto sia totalmente attendibile nel computer che esegue i contatori delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="5108d-131">If you want to profile an assembly that exists in a zone or on a remote share, make sure that the remote assembly has full trust on the computer that runs the performance counters.</span></span> <span data-ttu-id="5108d-132">Se l'assembly non ha l'attendibilità totale, i contatori delle prestazioni non funzioneranno.</span><span class="sxs-lookup"><span data-stu-id="5108d-132">If the assembly does not have sufficient trust, the performance counters will not work.</span></span> <span data-ttu-id="5108d-133">Per informazioni sulla concessione dell'attendibilità alle diverse aree, vedere [Caspol.exe (strumento per i criteri di sicurezza dall'accesso di codice)](../tools/caspol-exe-code-access-security-policy-tool.md).</span><span class="sxs-lookup"><span data-stu-id="5108d-133">For information about granting trust to different zones, see [Caspol.exe (Code Access Security Policy Tool)](../tools/caspol-exe-code-access-security-policy-tool.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="5108d-134">Nei sistemi in cui è installato il .NET Framework 4, performance monitor potrebbe non visualizzare i dati per i contatori delle prestazioni in alcune categorie, ad esempio **dati CLR .NET** e **rete CLR .NET**, per le applicazioni sviluppate con il .NET Framework 1,1.</span><span class="sxs-lookup"><span data-stu-id="5108d-134">On systems on which the .NET Framework 4 is installed, the Performance Monitor may not display data for performance counters in some categories, such as **.NET CLR Data** and **.NET CLR Networking**, for applications that were developed using the .NET Framework 1.1.</span></span> <span data-ttu-id="5108d-135">In tal caso, è possibile configurare Performance Monitor per visualizzare questi dati aggiungendo l' [\<forcePerformanceCounterUniqueSharedMemoryReads>](../configure-apps/file-schema/runtime/forceperformancecounteruniquesharedmemoryreads-element.md) elemento al file di configurazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5108d-135">If this is the case, you can configure Performance Monitor to display this data by adding the [\<forcePerformanceCounterUniqueSharedMemoryReads>](../configure-apps/file-schema/runtime/forceperformancecounteruniquesharedmemoryreads-element.md) element to the application's configuration file.</span></span>  
  
## <a name="reading-and-creating-performance-counters-programmatically"></a><span data-ttu-id="5108d-136">Lettura e creazione di contatori delle prestazioni a livello di codice</span><span class="sxs-lookup"><span data-stu-id="5108d-136">Reading and Creating Performance Counters Programmatically</span></span>  
 <span data-ttu-id="5108d-137">Il .NET Framework fornisce le classi che è possibile utilizzare per accedere a livello di codice alle stesse informazioni sulle prestazioni disponibili nella console prestazioni.</span><span class="sxs-lookup"><span data-stu-id="5108d-137">The .NET Framework provides classes you can use to programmatically access the same performance information that is available in the Performance console.</span></span> <span data-ttu-id="5108d-138">È anche possibile usare queste classi per creare contatori delle prestazioni personalizzati.</span><span class="sxs-lookup"><span data-stu-id="5108d-138">You can also use these classes to create custom performance counters.</span></span> <span data-ttu-id="5108d-139">Nella tabella seguente vengono descritte alcune delle classi di monitoraggio delle prestazioni fornite nel .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="5108d-139">The following table describes some of the performance monitoring classes that are provided in the .NET Framework.</span></span>  
  
|<span data-ttu-id="5108d-140">Classe</span><span class="sxs-lookup"><span data-stu-id="5108d-140">Class</span></span>|<span data-ttu-id="5108d-141">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5108d-141">Description</span></span>|  
|-----------|-----------------|  
|<xref:System.Diagnostics.PerformanceCounter?displayProperty=nameWithType>|<span data-ttu-id="5108d-142">Rappresenta un componente del contatore delle prestazioni di Windows NT.</span><span class="sxs-lookup"><span data-stu-id="5108d-142">Represents a Windows NT performance counter component.</span></span> <span data-ttu-id="5108d-143">Usare questa classe per leggere i contatori predefiniti o personalizzati esistenti e pubblicare i dati sulle prestazioni (scrittura) nei contatori personalizzati.</span><span class="sxs-lookup"><span data-stu-id="5108d-143">Use this class to read existing predefined or custom counters and publish (write) performance data to custom counters.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterCategory?displayProperty=nameWithType>|<span data-ttu-id="5108d-144">Fornisce diversi metodi per interagire con i contatori e le categorie di contatori del computer.</span><span class="sxs-lookup"><span data-stu-id="5108d-144">Provides several methods for interacting with counters and categories of counters on the computer.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterInstaller?displayProperty=nameWithType>|<span data-ttu-id="5108d-145">Specifica un programma di installazione per il componente `PerformanceCounter` .</span><span class="sxs-lookup"><span data-stu-id="5108d-145">Specifies an installer for the `PerformanceCounter` component.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterType?displayProperty=nameWithType>|<span data-ttu-id="5108d-146">Specifica la formula per calcolare il metodo `NextValue` per `PerformanceCounter`.</span><span class="sxs-lookup"><span data-stu-id="5108d-146">Specifies the formula to calculate the `NextValue` method for a `PerformanceCounter`.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="5108d-147">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="5108d-147">See also</span></span>

- [<span data-ttu-id="5108d-148">Contatori delle prestazioni</span><span class="sxs-lookup"><span data-stu-id="5108d-148">Performance Counters</span></span>](performance-counters.md)
