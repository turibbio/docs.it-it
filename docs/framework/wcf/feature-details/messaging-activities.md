---
title: Attività di messaggistica
ms.date: 03/30/2017
ms.assetid: 8498f215-1823-4aba-a6e1-391407f8c273
ms.openlocfilehash: 69a0e9a415b10d9c58d04eac27e48b1ed6a78064
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/09/2020
ms.locfileid: "84576395"
---
# <a name="messaging-activities"></a><span data-ttu-id="9a913-102">Attività di messaggistica</span><span class="sxs-lookup"><span data-stu-id="9a913-102">Messaging activities</span></span>

<span data-ttu-id="9a913-103">Le attività di messaggistica consentono ai flussi di lavoro di inviare e ricevere messaggi WCF.</span><span class="sxs-lookup"><span data-stu-id="9a913-103">Messaging activities allow workflows to send and receive WCF messages.</span></span> <span data-ttu-id="9a913-104">Aggiungendo attività di messaggistica a un flusso di lavoro, è possibile modellare qualsiasi modello di scambio dei messaggi con la complessità desiderata.</span><span class="sxs-lookup"><span data-stu-id="9a913-104">By adding messaging activities to a workflow you can model any arbitrarily complex message exchange patterns (MEP).</span></span>

## <a name="message-exchange-patterns"></a><span data-ttu-id="9a913-105">Modelli di scambio di messaggi</span><span class="sxs-lookup"><span data-stu-id="9a913-105">Message exchange patterns</span></span>

<span data-ttu-id="9a913-106">Esistono tre modelli di scambio dei messaggi di base.</span><span class="sxs-lookup"><span data-stu-id="9a913-106">There are three basic message exchange patterns:</span></span>

- <span data-ttu-id="9a913-107">**Datagramma** : quando si usa il MEP datagramma, il client invia un messaggio al servizio, ma il servizio non risponde.</span><span class="sxs-lookup"><span data-stu-id="9a913-107">**Datagram** - When using the datagram MEP the client sends a message to the service, but the service does not respond.</span></span> <span data-ttu-id="9a913-108">Questo tipo di modello è talvolta denominato "Fire and Forget".</span><span class="sxs-lookup"><span data-stu-id="9a913-108">This is sometimes called "fire and forget".</span></span> <span data-ttu-id="9a913-109">Tale scambio richiede una conferma fuori banda di recapito con esito positivo.</span><span class="sxs-lookup"><span data-stu-id="9a913-109">A fire and forget exchange is one that requires out-of-band confirmation of successful delivery.</span></span> <span data-ttu-id="9a913-110">Il messaggio potrebbe infatti andare perso durante il transito e non raggiungere mai il servizio.</span><span class="sxs-lookup"><span data-stu-id="9a913-110">The message might be lost in transit and never reach the service.</span></span> <span data-ttu-id="9a913-111">Se il client invia correttamente un messaggio, non c'è garanzia che esso sia stato ricevuto dal servizio.</span><span class="sxs-lookup"><span data-stu-id="9a913-111">If the client successfully sends a message, it does not guarantee that the service has received the message.</span></span> <span data-ttu-id="9a913-112">Il datagramma è un blocco predefinito fondamentale per la messaggistica in quanto è possibile compilare modelli di scambio dei messaggi personalizzati sulla base di esso.</span><span class="sxs-lookup"><span data-stu-id="9a913-112">The datagram is a fundamental building block for messaging, as you can build your own MEPs on top of it.</span></span>

- <span data-ttu-id="9a913-113">**Richiesta-risposta** : quando si usa il MEP di richiesta-risposta, il client invia un messaggio al servizio, il servizio esegue l'elaborazione necessaria e quindi invia una risposta al client.</span><span class="sxs-lookup"><span data-stu-id="9a913-113">**Request-Response** - When using the request-response MEP the client sends a message to the service, the service does the required processing, and then sends a response back to the client.</span></span> <span data-ttu-id="9a913-114">Il modello è costituito da coppie richiesta-risposta.</span><span class="sxs-lookup"><span data-stu-id="9a913-114">The pattern consists of request-response pairs.</span></span> <span data-ttu-id="9a913-115">Esempi di chiamate richiesta-risposta sono le chiamate RPC (Remote Procedure Call) e le richieste GET del browser.</span><span class="sxs-lookup"><span data-stu-id="9a913-115">Examples of request-response calls are remote procedure calls (RPC) and browser GET requests.</span></span> <span data-ttu-id="9a913-116">Questo modello è anche noto come half-duplex.</span><span class="sxs-lookup"><span data-stu-id="9a913-116">This pattern is also known as half-duplex.</span></span>

- <span data-ttu-id="9a913-117">**Duplex** : quando si usa il MEP duplex, il client e il servizio possono inviare messaggi l'uno all'altro in qualsiasi ordine.</span><span class="sxs-lookup"><span data-stu-id="9a913-117">**Duplex** - When using the duplex MEP the client and service can send messages to each other in any order.</span></span> <span data-ttu-id="9a913-118">Tale modello è simile a una conversazione telefonica, in cui ogni parola pronunciata è un messaggio.</span><span class="sxs-lookup"><span data-stu-id="9a913-118">The duplex MEP is like a phone conversation, where each word being spoken is a message.</span></span>

<span data-ttu-id="9a913-119">Le attività di messaggistica consentono di implementare uno o più dei modelli di scambio dei messaggi di base nonché modelli di qualsiasi complessità.</span><span class="sxs-lookup"><span data-stu-id="9a913-119">The messaging activities allow you to implement any of these basic MEPs as well as any arbitrarily complex MEP.</span></span>

## <a name="messaging-activities"></a><span data-ttu-id="9a913-120">Attività di messaggistica</span><span class="sxs-lookup"><span data-stu-id="9a913-120">Messaging activities</span></span>

<span data-ttu-id="9a913-121">[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] definisce le attività di messaggistica seguenti:</span><span class="sxs-lookup"><span data-stu-id="9a913-121">The [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] defines the following messaging activities:</span></span>

- <span data-ttu-id="9a913-122"><xref:System.ServiceModel.Activities.Send>- Utilizzare l'attività <xref:System.ServiceModel.Activities.Send> per inviare un messaggio.</span><span class="sxs-lookup"><span data-stu-id="9a913-122"><xref:System.ServiceModel.Activities.Send>- Use the <xref:System.ServiceModel.Activities.Send> activity to send a message.</span></span>

- <span data-ttu-id="9a913-123"><xref:System.ServiceModel.Activities.SendReply> - Utilizzare l'attività <xref:System.ServiceModel.Activities.SendReply> per inviare una risposta a un messaggio ricevuto.</span><span class="sxs-lookup"><span data-stu-id="9a913-123"><xref:System.ServiceModel.Activities.SendReply> - Use the <xref:System.ServiceModel.Activities.SendReply> activity to send a response to a received message.</span></span> <span data-ttu-id="9a913-124">Questa attività viene utilizzata dai servizi flusso di lavoro in caso di implementazione di un modello di scambio dei messaggi di tipo request/reply.</span><span class="sxs-lookup"><span data-stu-id="9a913-124">This activity is used by workflow services when implementing a request/reply MEP.</span></span>

- <span data-ttu-id="9a913-125"><xref:System.ServiceModel.Activities.Receive>- Utilizzare l'attività <xref:System.ServiceModel.Activities.Receive> per ricevere un messaggio.</span><span class="sxs-lookup"><span data-stu-id="9a913-125"><xref:System.ServiceModel.Activities.Receive>- Use the <xref:System.ServiceModel.Activities.Receive> activity to receive a message.</span></span>

- <span data-ttu-id="9a913-126"><xref:System.ServiceModel.Activities.ReceiveReply>- Utilizzare l'attività <xref:System.ServiceModel.Activities.ReceiveReply> per ricevere un messaggio di risposta.</span><span class="sxs-lookup"><span data-stu-id="9a913-126"><xref:System.ServiceModel.Activities.ReceiveReply> - Use the <xref:System.ServiceModel.Activities.ReceiveReply> activity to receive a reply message.</span></span> <span data-ttu-id="9a913-127">Questa attività viene utilizzata dai client dei servizi flusso di lavoro in caso di implementazione di un modello di scambio dei messaggi di tipo request/reply.</span><span class="sxs-lookup"><span data-stu-id="9a913-127">This activity is used by workflow service clients when implementing a request/reply MEP.</span></span>

## <a name="messaging-activities-and-message-exchange-patterns"></a><span data-ttu-id="9a913-128">Attività di messaggistica e modelli di scambio di messaggi</span><span class="sxs-lookup"><span data-stu-id="9a913-128">Messaging activities and message exchange patterns</span></span>

<span data-ttu-id="9a913-129">Un modello di scambio dei messaggi di tipo datagramma prevede l'invio di un messaggio da parte di un client e la ricezione del messaggio da parte di un servizio.</span><span class="sxs-lookup"><span data-stu-id="9a913-129">A datagram MEP involves a client sending a message and a service receiving the message.</span></span> <span data-ttu-id="9a913-130">Se il client è un flusso di lavoro, utilizzare un'attività <xref:System.ServiceModel.Activities.Send> per inviare il messaggio.</span><span class="sxs-lookup"><span data-stu-id="9a913-130">If the client is a workflow use a <xref:System.ServiceModel.Activities.Send> activity to send the message.</span></span> <span data-ttu-id="9a913-131">Per ricevere il messaggio in un flusso di lavoro, utilizzare un'attività <xref:System.ServiceModel.Activities.Receive>.</span><span class="sxs-lookup"><span data-stu-id="9a913-131">To receive that message in a workflow, use a <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <span data-ttu-id="9a913-132">Le attività <xref:System.ServiceModel.Activities.Send> e <xref:System.ServiceModel.Activities.Receive> dispongono ognuna di una proprietà denominata `Content`.</span><span class="sxs-lookup"><span data-stu-id="9a913-132">The <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> activities each have a property named `Content`.</span></span> <span data-ttu-id="9a913-133">Questa proprietà contiene i dati che vengono inviati o ricevuti.</span><span class="sxs-lookup"><span data-stu-id="9a913-133">This property contains the data being sent or received.</span></span> <span data-ttu-id="9a913-134">Quando si implementa il modello di scambio dei messaggi di tipo richiesta-risposta, sia il client che il servizio utilizzano coppie di attività.</span><span class="sxs-lookup"><span data-stu-id="9a913-134">When implementing the request-response MEP both the client and the service use pairs of activities.</span></span> <span data-ttu-id="9a913-135">Il client utilizza un'attività <xref:System.ServiceModel.Activities.Send> per inviare il messaggio e un'attività <xref:System.ServiceModel.Activities.ReceiveReply> per ricevere la risposta dal servizio.</span><span class="sxs-lookup"><span data-stu-id="9a913-135">The client uses a <xref:System.ServiceModel.Activities.Send> activity to send the message and a <xref:System.ServiceModel.Activities.ReceiveReply> activity to receive the response from the service.</span></span> <span data-ttu-id="9a913-136">Queste due attività sono associate tra loro mediante la proprietà <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A>.</span><span class="sxs-lookup"><span data-stu-id="9a913-136">These two activities are associated with each other by the <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> property.</span></span> <span data-ttu-id="9a913-137">Questa proprietà viene impostata sull'attività <xref:System.ServiceModel.Activities.Send> che ha inviato il messaggio originale.</span><span class="sxs-lookup"><span data-stu-id="9a913-137">This property is set to the <xref:System.ServiceModel.Activities.Send> activity that sent the original message.</span></span> <span data-ttu-id="9a913-138">Il servizio utilizza inoltre una coppia di attività associate: <xref:System.ServiceModel.Activities.Receive> e <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="9a913-138">The service also uses a pair of associated activities: <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply>.</span></span> <span data-ttu-id="9a913-139">Queste due attività sono associate mediante la proprietà <xref:System.ServiceModel.Activities.SendReply.Request%2A>.</span><span class="sxs-lookup"><span data-stu-id="9a913-139">These two activities are associated by the <xref:System.ServiceModel.Activities.SendReply.Request%2A> property.</span></span> <span data-ttu-id="9a913-140">Questa proprietà viene impostata sull'attività <xref:System.ServiceModel.Activities.Receive> che ha ricevuto il messaggio originale.</span><span class="sxs-lookup"><span data-stu-id="9a913-140">This property is set to the <xref:System.ServiceModel.Activities.Receive> activity that received the original message.</span></span> <span data-ttu-id="9a913-141">Le attività <xref:System.ServiceModel.Activities.ReceiveReply> e <xref:System.ServiceModel.Activities.SendReply>, come <xref:System.ServiceModel.Activities.Send> e <xref:System.ServiceModel.Activities.Receive>, consentono di inviare un'istanza di <xref:System.ServiceModel.Channels.Message> o un tipo di contratto di messaggio.</span><span class="sxs-lookup"><span data-stu-id="9a913-141">The <xref:System.ServiceModel.Activities.ReceiveReply> and <xref:System.ServiceModel.Activities.SendReply> activities, like <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> allow you to send a <xref:System.ServiceModel.Channels.Message> instance or a message contract type.</span></span>

<span data-ttu-id="9a913-142">Poiché i flussi di lavoro sono a esecuzione prolungata, è importante che il modello di comunicazione di tipo duplex supporti anche le conversazioni con esecuzione prolungata.</span><span class="sxs-lookup"><span data-stu-id="9a913-142">Because of the long-running nature of workflows, it is important for the duplex pattern of communication to also support long-running conversations.</span></span> <span data-ttu-id="9a913-143">Per supportare questo tipo di conversazioni, i client che iniziano la conversazione devono fornire al servizio una possibilità di richiamarlo in un secondo momento quando i dati diventano disponibili.</span><span class="sxs-lookup"><span data-stu-id="9a913-143">To support long-running conversations, clients who initiate the conversation must provide the service with an opportunity to call it back at a later time when the data becomes available.</span></span> <span data-ttu-id="9a913-144">Ad esempio, una richiesta di ordine di acquisto viene inviata per l'approvazione da parte del responsabile, tuttavia potrebbe essere elaborata per un giorno, una settimana o perfino un anno. Il flusso di lavoro che gestisce l'approvazione degli ordini di acquisto deve poter riprendere una volta ottenuta l'approvazione.</span><span class="sxs-lookup"><span data-stu-id="9a913-144">For example, a purchase order request is submitted for manager approval, but it might not be processed for a day, a week, or even a year; the workflow that manages the purchase order approval must know to resume after the approval is given.</span></span> <span data-ttu-id="9a913-145">Questo modello di comunicazione di tipo duplex è supportato in flussi di lavoro che utilizzano la correlazione.</span><span class="sxs-lookup"><span data-stu-id="9a913-145">This pattern of duplex communication is supported in workflows using correlation.</span></span> <span data-ttu-id="9a913-146">Per implementare un modello duplex, usare le attività <xref:System.ServiceModel.Activities.Send> e <xref:System.ServiceModel.Activities.Receive>.</span><span class="sxs-lookup"><span data-stu-id="9a913-146">To implement a duplex pattern, use <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> activities.</span></span> <span data-ttu-id="9a913-147">Nell' <xref:System.ServiceModel.Activities.Receive> attività inizializzare una correlazione usando <xref:System.ServiceModel.Activities.CorrelationHandle> .</span><span class="sxs-lookup"><span data-stu-id="9a913-147">On the <xref:System.ServiceModel.Activities.Receive> activity, initialize a correlation using <xref:System.ServiceModel.Activities.CorrelationHandle>.</span></span> <span data-ttu-id="9a913-148">Nell'attività <xref:System.ServiceModel.Activities.Send> impostare l'handle di correlazione in questione come valore della proprietà <xref:System.ServiceModel.Activities.Send.CorrelatesWith%2A>.</span><span class="sxs-lookup"><span data-stu-id="9a913-148">On the <xref:System.ServiceModel.Activities.Send> activity set that correlation handle as the <xref:System.ServiceModel.Activities.Send.CorrelatesWith%2A> property value.</span></span> <span data-ttu-id="9a913-149">Per altre informazioni, vedere [duplex durevole](durable-duplex-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="9a913-149">For more information, see [Durable Duplex](durable-duplex-correlation.md).</span></span>

> [!NOTE]
> <span data-ttu-id="9a913-150">L'implementazione del flusso di lavoro di duplex mediante una correlazione di callback ("durevole duplex") è destinata alle conversazioni con esecuzione prolungata.</span><span class="sxs-lookup"><span data-stu-id="9a913-150">Workflow’s implementation of duplex using a callback correlation ("Durable Duplex") is intended for long-running conversations.</span></span> <span data-ttu-id="9a913-151">Si tratta di un'implementazione diversa dal duplex WCF con contratti di callback, in cui la conversione è con esecuzione breve.</span><span class="sxs-lookup"><span data-stu-id="9a913-151">This is not the same as WCF duplex with callback contracts where the conversation is short-running (the lifetime of the channel).</span></span>

## <a name="message-formatting-and-messaging-activities"></a><span data-ttu-id="9a913-152">Formattazione del messaggio e attività di messaggistica</span><span class="sxs-lookup"><span data-stu-id="9a913-152">Message formatting and messaging activities</span></span>

<span data-ttu-id="9a913-153">Le attività <xref:System.ServiceModel.Activities.Receive> e <xref:System.ServiceModel.Activities.ReceiveReply> dispongono di una proprietà denominata `Content`.</span><span class="sxs-lookup"><span data-stu-id="9a913-153">The <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.ReceiveReply> activities have a property named `Content`.</span></span> <span data-ttu-id="9a913-154">Questa proprietà è di tipo <xref:System.ServiceModel.Activities.ReceiveContent> e rappresenta dati ricevuti dall'attività <xref:System.ServiceModel.Activities.Receive> o <xref:System.ServiceModel.Activities.ReceiveReply>.</span><span class="sxs-lookup"><span data-stu-id="9a913-154">This property is of type <xref:System.ServiceModel.Activities.ReceiveContent> and represents data the <xref:System.ServiceModel.Activities.Receive> or <xref:System.ServiceModel.Activities.ReceiveReply> activity receives.</span></span> <span data-ttu-id="9a913-155">.NET Framework definisce due classi correlate chiamate <xref:System.ServiceModel.Activities.ReceiveMessageContent> e <xref:System.ServiceModel.Activities.ReceiveParametersContent>, le quali derivano entrambe da <xref:System.ServiceModel.Activities.ReceiveContent>.</span><span class="sxs-lookup"><span data-stu-id="9a913-155">The .NET Framework defines two related classes called <xref:System.ServiceModel.Activities.ReceiveMessageContent> and <xref:System.ServiceModel.Activities.ReceiveParametersContent> both of which are derived from <xref:System.ServiceModel.Activities.ReceiveContent>.</span></span> <span data-ttu-id="9a913-156">Nell'attività <xref:System.ServiceModel.Activities.Receive> o <xref:System.ServiceModel.Activities.ReceiveReply> impostare la proprietà `Content` su un'istanza di uno di questi tipi per ricevere i dati in un servizio flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="9a913-156">Set the <xref:System.ServiceModel.Activities.Receive> or <xref:System.ServiceModel.Activities.ReceiveReply> activity’s `Content` property to an instance of one of these types to receive data into a workflow service.</span></span> <span data-ttu-id="9a913-157">Il tipo da utilizzare dipende da quello dei dati ricevuti dall'attività.</span><span class="sxs-lookup"><span data-stu-id="9a913-157">The type to use depends upon the type of data the activity receives.</span></span> <span data-ttu-id="9a913-158">Se l'attività riceve un oggetto `Message` o un tipo di contratto di messaggio, utilizzare <xref:System.ServiceModel.Activities.ReceiveMessageContent>.</span><span class="sxs-lookup"><span data-stu-id="9a913-158">If the activity receives a `Message` object or a message contract type, use <xref:System.ServiceModel.Activities.ReceiveMessageContent>.</span></span> <span data-ttu-id="9a913-159">Se l'attività riceve un set di tipi XML o di contratto dati serializzabili, utilizzare <xref:System.ServiceModel.Activities.ReceiveParametersContent>.</span><span class="sxs-lookup"><span data-stu-id="9a913-159">If the activity receives a set of data contract or XML types that can be serialized, use <xref:System.ServiceModel.Activities.ReceiveParametersContent>.</span></span> <span data-ttu-id="9a913-160"><xref:System.ServiceModel.Activities.ReceiveParametersContent> consente di inviare più parametri, mentre <xref:System.ServiceModel.Activities.ReceiveMessageContent> consente di inviare un solo oggetto, il messaggio (o il tipo di contratto di messaggio).</span><span class="sxs-lookup"><span data-stu-id="9a913-160"><xref:System.ServiceModel.Activities.ReceiveParametersContent> allows you to send multiple parameters, whereas <xref:System.ServiceModel.Activities.ReceiveMessageContent> only allows you to send one object, the message (or message contract type).</span></span>

> [!NOTE]
> <span data-ttu-id="9a913-161"><xref:System.ServiceModel.Activities.ReceiveMessageContent> può essere inoltre utilizzato con un singolo tipo XML o di contratto dati serializzabile.</span><span class="sxs-lookup"><span data-stu-id="9a913-161"><xref:System.ServiceModel.Activities.ReceiveMessageContent> can also be used with a single data contract or XML type that can be serialized.</span></span> <span data-ttu-id="9a913-162">La differenza tra l'utilizzo di <xref:System.ServiceModel.Activities.ReceiveParametersContent> con un solo parametro e l'oggetto passato direttamente a <xref:System.ServiceModel.Activities.ReceiveMessageContent> è rappresentata dal formato wire.</span><span class="sxs-lookup"><span data-stu-id="9a913-162">The difference between using <xref:System.ServiceModel.Activities.ReceiveParametersContent> with a single parameter and the object passed directly to <xref:System.ServiceModel.Activities.ReceiveMessageContent> is the wire-format.</span></span> <span data-ttu-id="9a913-163">Viene eseguito il wrapping del contenuto del parametro in un elemento XML corrispondente al nome dell'operazione, nonché il wrapping dell'oggetto serializzato in un elemento XML utilizzando il nome del parametro (ad esempio, `<Echo><msg>Hello, World</msg></Echo>`).</span><span class="sxs-lookup"><span data-stu-id="9a913-163">The parameter’s content is wrapped in an XML element that corresponds to the operation name and the serialized object is wrapped in an XML element using the parameter name (for example, `<Echo><msg>Hello, World</msg></Echo>`).</span></span> <span data-ttu-id="9a913-164">Non viene eseguito il wrapping del contenuto del messaggio in base al nome dell'operazione.</span><span class="sxs-lookup"><span data-stu-id="9a913-164">The message content is not wrapped by the operation name.</span></span> <span data-ttu-id="9a913-165">Al contrario, l'oggetto serializzato viene inserito in un elemento XML che utilizza il nome del tipo XML qualificato (ad esempio, `<string>Hello, World</string>`).</span><span class="sxs-lookup"><span data-stu-id="9a913-165">Instead, the serialized object is placed within an XML element using the XML-qualified type name (for example, `<string>Hello, World</string>`).</span></span>

<span data-ttu-id="9a913-166">Le attività <xref:System.ServiceModel.Activities.Send> e <xref:System.ServiceModel.Activities.SendReply> dispongono inoltre di una proprietà denominata `Content`.</span><span class="sxs-lookup"><span data-stu-id="9a913-166">The <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.SendReply> activities also have a property named `Content`.</span></span> <span data-ttu-id="9a913-167">Questa proprietà è di tipo <xref:System.ServiceModel.Activities.SendContent> e rappresenta dati inviati dall'attività <xref:System.ServiceModel.Activities.Send> o <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="9a913-167">This property is of type <xref:System.ServiceModel.Activities.SendContent> and represents data the <xref:System.ServiceModel.Activities.Send> or <xref:System.ServiceModel.Activities.SendReply> activity sends.</span></span> <span data-ttu-id="9a913-168">.NET Framework definisce due tipi correlati chiamati <xref:System.ServiceModel.Activities.SendMessageContent> e <xref:System.ServiceModel.Activities.SendParametersContent>, i quali derivano entrambi da <xref:System.ServiceModel.Activities.SendContent>.</span><span class="sxs-lookup"><span data-stu-id="9a913-168">The .NET Framework defines two related types called <xref:System.ServiceModel.Activities.SendMessageContent> and <xref:System.ServiceModel.Activities.SendParametersContent> both of which are derived from <xref:System.ServiceModel.Activities.SendContent>.</span></span> <span data-ttu-id="9a913-169">Nell'attività <xref:System.ServiceModel.Activities.Send> o <xref:System.ServiceModel.Activities.SendReply> impostare la proprietà `Content` su un'istanza di uno di questi tipi per inviare dati da un servizio flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="9a913-169">Set the <xref:System.ServiceModel.Activities.Send> or <xref:System.ServiceModel.Activities.SendReply> activity’s `Content` property to an instance of one of these types to send data from a workflow service.</span></span> <span data-ttu-id="9a913-170">Il tipo da utilizzare dipende da quello dei dati inviati dall'attività.</span><span class="sxs-lookup"><span data-stu-id="9a913-170">The type to use depends upon the type of data the activity sends.</span></span> <span data-ttu-id="9a913-171">Se l'attività invia un oggetto `Message` o un tipo di contratto di messaggio, utilizzare <xref:System.ServiceModel.Activities.SendMessageContent>.</span><span class="sxs-lookup"><span data-stu-id="9a913-171">If the activity sends a `Message` object or a message contract type, use <xref:System.ServiceModel.Activities.SendMessageContent>.</span></span> <span data-ttu-id="9a913-172">Se l'attività invia un tipo di contratto dati, utilizzare <xref:System.ServiceModel.Activities.SendParametersContent>.</span><span class="sxs-lookup"><span data-stu-id="9a913-172">If the activity sends a data contract type use <xref:System.ServiceModel.Activities.SendParametersContent>.</span></span> <span data-ttu-id="9a913-173"><xref:System.ServiceModel.Activities.SendParametersContent> consente di inviare più parametri, mentre <xref:System.ServiceModel.Activities.SendMessageContent> consente di inviare un solo oggetto, il messaggio (o il tipo di contratto di messaggio).</span><span class="sxs-lookup"><span data-stu-id="9a913-173"><xref:System.ServiceModel.Activities.SendParametersContent> allows you to send multiple parameters, whereas <xref:System.ServiceModel.Activities.SendMessageContent> only allows you to send one object, the message (or the message contract type).</span></span>

<span data-ttu-id="9a913-174">Ai fini della programmazione in modo imperativo con le attività di messaggistica, si utilizzano gli elementi generici <xref:System.Activities.InArgument%601> e <xref:System.Activities.OutArgument%601> per eseguire il wrapping degli oggetti assegnati al messaggio o alle proprietà dei parametri delle attività <xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.SendReply>, <xref:System.ServiceModel.Activities.Receive> e <xref:System.ServiceModel.Activities.ReceiveReply>.</span><span class="sxs-lookup"><span data-stu-id="9a913-174">When programming imperatively with the messaging activities, you use the generic <xref:System.Activities.InArgument%601> and <xref:System.Activities.OutArgument%601> to wrap the objects you assign to the message or parameters properties of the <xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.SendReply>, <xref:System.ServiceModel.Activities.Receive>, and <xref:System.ServiceModel.Activities.ReceiveReply> activities.</span></span> <span data-ttu-id="9a913-175">Utilizzare <xref:System.Activities.InArgument%601> per le <xref:System.ServiceModel.Activities.Send> <xref:System.ServiceModel.Activities.SendReply> attività e e <xref:System.Activities.OutArgument%601> per <xref:System.ServiceModel.Activities.Receive> le <xref:System.ServiceModel.Activities.ReceiveReply> attività e.</span><span class="sxs-lookup"><span data-stu-id="9a913-175">Use <xref:System.Activities.InArgument%601> for the <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.SendReply> activities and <xref:System.Activities.OutArgument%601> for <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.ReceiveReply> activities.</span></span> <span data-ttu-id="9a913-176">Con le attività di invio vengono utilizzati gli argomenti `In` perché i dati vengono passati nelle attività.</span><span class="sxs-lookup"><span data-stu-id="9a913-176">`In` arguments are used with the send activities because the data is being passed into the activities.</span></span> <span data-ttu-id="9a913-177">Con le attività di ricezione vengono utilizzati gli argomenti `Out` perché i dati vengono passati all'esterno delle attività, come illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="9a913-177">`Out` arguments are used with the receive activities because data is being passed out of the activities, as shown in the following example.</span></span>

```csharp
Receive reserveSeat = new Receive
{
    ...
    Content = new ReceiveParametersContent
    {
        Parameters =
        {
            { "ReservationInfo", new OutArgument<ReservationRequest>(reservationInfo) }
        }
    }
};
SendReply reserveSeat = new SendReply
{
    ...
    Request = reserveSeat,
    Content = new SendParametersContent
    {
        Parameters =
        {
            { "ReservationId", new InArgument<string>(reservationId) }
        }
    },
};
```

<span data-ttu-id="9a913-178">Quando si implementa un servizio flusso di lavoro che definisce un'operazione di richiesta-risposta che restituisce void, è necessario creare un'istanza di un'attività <xref:System.ServiceModel.Activities.SendReply> e impostare la proprietà <xref:System.ServiceModel.Activities.SendReply.Content%2A> su un'istanza vuota di uno dei tipi di contenuto (<xref:System.ServiceModel.Activities.SendMessageContent> o <xref:System.ServiceModel.Activities.SendParametersContent>), come illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="9a913-178">When implementing a workflow service that defines a request/response operation that returns void, you must instantiate a <xref:System.ServiceModel.Activities.SendReply> activity and set the <xref:System.ServiceModel.Activities.SendReply.Content%2A> property to an empty instance of one of the content types (<xref:System.ServiceModel.Activities.SendMessageContent> or <xref:System.ServiceModel.Activities.SendParametersContent>) as shown in the following example.</span></span>

```csharp
Receive rcv = new Receive()
{
ServiceContractName = "IService",
OperationName = "NullReturningContract",
Content = new ReceiveParametersContent( new Dictionary<string, OutArgument>() { { "message", new OutArgument<string>() } } )
};
SendReply sr = new SendReply()
{
Request = rcv
   Content = new SendParametersContent();
};
```

## <a name="add-service-reference"></a><span data-ttu-id="9a913-179">Aggiungi riferimento al servizio</span><span class="sxs-lookup"><span data-stu-id="9a913-179">Add service reference</span></span>

<span data-ttu-id="9a913-180">Quando si chiama un servizio del flusso di lavoro da un'applicazione flusso di lavoro, Visual Studio 2012 genera attività di messaggistica personalizzate che incapsulano le consuete <xref:System.ServiceModel.Activities.Send> <xref:System.ServiceModel.Activities.ReceiveReply> attività e usate in un MEP Request/Reply.</span><span class="sxs-lookup"><span data-stu-id="9a913-180">When calling a workflow service from a workflow application, Visual Studio 2012 generates custom messaging activities that encapsulate the usual <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.ReceiveReply> activities used in a request/reply MEP.</span></span> <span data-ttu-id="9a913-181">Per usare questa funzionalità, fare clic con il pulsante destro del mouse sul progetto client in Visual Studio e scegliere **Aggiungi**  >  **riferimento al servizio**.</span><span class="sxs-lookup"><span data-stu-id="9a913-181">To use this feature, right-click the client project in Visual Studio and select **Add** > **Service Reference**.</span></span> <span data-ttu-id="9a913-182">Digitare l'indirizzo di base del servizio nell'apposita casella e fare clic su Vai.</span><span class="sxs-lookup"><span data-stu-id="9a913-182">Type the base address of the service in the address box and click Go.</span></span> <span data-ttu-id="9a913-183">I servizi disponibili vengono visualizzati nella casella **Services:** .</span><span class="sxs-lookup"><span data-stu-id="9a913-183">The available services are displayed in the **Services:** box.</span></span> <span data-ttu-id="9a913-184">Espandere il nodo del servizio per visualizzare i contratti supportati.</span><span class="sxs-lookup"><span data-stu-id="9a913-184">Expand the service node to display the contracts supported.</span></span> <span data-ttu-id="9a913-185">Selezionare il contratto che si desidera chiamare e l'elenco delle operazioni disponibili viene visualizzato nella casella **operazioni** .</span><span class="sxs-lookup"><span data-stu-id="9a913-185">Select the contract you want to call and the list of available operations is displayed in the **Operations** box.</span></span> <span data-ttu-id="9a913-186">È quindi possibile specificare lo spazio dei nomi per l'attività generata e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="9a913-186">You can then specify the namespace for the generated activity and click **OK**.</span></span> <span data-ttu-id="9a913-187">Verrà visualizzata una finestra di dialogo indicante che l'operazione è stata completata correttamente e che le attività personalizzate generate verranno inserite nella casella degli strumenti dopo aver ricompilato il progetto.</span><span class="sxs-lookup"><span data-stu-id="9a913-187">You then see a dialog that says the operation completed successfully and that the generated custom activities are in the toolbox after you have rebuilt the project.</span></span> <span data-ttu-id="9a913-188">Esiste una attività per ogni operazione definita nel contratto di servizio.</span><span class="sxs-lookup"><span data-stu-id="9a913-188">There is one activity for each operation defined on the service contract.</span></span> <span data-ttu-id="9a913-189">Dopo avere ricompilato il progetto è possibile trascinare e rilasciare le attività personalizzate nel flusso di lavoro e impostare le eventuali proprietà necessarie nell'apposita finestra.</span><span class="sxs-lookup"><span data-stu-id="9a913-189">After rebuilding the project you can drag and drop the custom activities onto your workflow and set any required properties in the properties window.</span></span>

## <a name="messaging-activity-templates"></a><span data-ttu-id="9a913-190">Modelli di attività di messaggistica</span><span class="sxs-lookup"><span data-stu-id="9a913-190">Messaging activity templates</span></span>

<span data-ttu-id="9a913-191">Per semplificare la configurazione di un MEP di richiesta/risposta nel client e nel servizio, Visual Studio 2012 fornisce due modelli di attività di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="9a913-191">To make setting up a request/response MEP on the client and service easier, Visual Studio 2012 provides two messaging activity templates.</span></span> <span data-ttu-id="9a913-192">`System.ServiceModel.Activities.Design.ReceiveAndSendReply` è utilizzato per il servizio e `System.ServiceModel.Activities.Design.SendAndReceiveReply` per il client.</span><span class="sxs-lookup"><span data-stu-id="9a913-192">`System.ServiceModel.Activities.Design.ReceiveAndSendReply` is used on the service and `System.ServiceModel.Activities.Design.SendAndReceiveReply` is used on the client.</span></span> <span data-ttu-id="9a913-193">In entrambi i casi i modelli aggiungono le attività di messaggistica appropriate al flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="9a913-193">In both cases the templates add the appropriate messaging activities to your workflow.</span></span> <span data-ttu-id="9a913-194">Nel servizio, `System.ServiceModel.Activities.Design.ReceiveAndSendReply` aggiunge un'attività <xref:System.ServiceModel.Activities.Receive> seguita da un'attività <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="9a913-194">On the service, the `System.ServiceModel.Activities.Design.ReceiveAndSendReply` adds a <xref:System.ServiceModel.Activities.Receive> activity followed by a <xref:System.ServiceModel.Activities.SendReply> activity.</span></span> <span data-ttu-id="9a913-195">La proprietà <xref:System.ServiceModel.Activities.SendReply.Request> viene impostata automaticamente sull'attività <xref:System.ServiceModel.Activities.Receive>.</span><span class="sxs-lookup"><span data-stu-id="9a913-195">The <xref:System.ServiceModel.Activities.SendReply.Request> property is automatically set to the <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <span data-ttu-id="9a913-196">Nel client, `System.ServiceModel.Activities.Design.SendAndReceiveReply` aggiunge un'attività <xref:System.ServiceModel.Activities.Send> seguita da un'attività <xref:System.ServiceModel.Activities.ReceiveReply>.</span><span class="sxs-lookup"><span data-stu-id="9a913-196">On the client, the `System.ServiceModel.Activities.Design.SendAndReceiveReply` adds a <xref:System.ServiceModel.Activities.Send> activity followed by a <xref:System.ServiceModel.Activities.ReceiveReply>.</span></span> <span data-ttu-id="9a913-197">La proprietà <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> viene impostata automaticamente sull'attività <xref:System.ServiceModel.Activities.Send>.</span><span class="sxs-lookup"><span data-stu-id="9a913-197">The <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> property is automatically set to the <xref:System.ServiceModel.Activities.Send> activity.</span></span> <span data-ttu-id="9a913-198">Per utilizzare questi modelli, è sufficiente trascinare e rilasciare il modello appropriato nel flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="9a913-198">To use these templates, just drag and drop the appropriate template onto your workflow.</span></span>

## <a name="messaging-activities-and-transactions"></a><span data-ttu-id="9a913-199">Attività e transazioni di messaggistica</span><span class="sxs-lookup"><span data-stu-id="9a913-199">Messaging activities and transactions</span></span>

<span data-ttu-id="9a913-200">Quando si effettua una chiamata a un servizio flusso di lavoro potrebbe essere utile propagare una transazione all'operazione del servizio.</span><span class="sxs-lookup"><span data-stu-id="9a913-200">When a call is made to a workflow service you may want to flow a transaction to the service operation.</span></span> <span data-ttu-id="9a913-201">A tale scopo, inserire l'attività <xref:System.ServiceModel.Activities.Receive> all'interno di un'attività <xref:System.ServiceModel.Activities.TransactedReceiveScope>.</span><span class="sxs-lookup"><span data-stu-id="9a913-201">To do this place the <xref:System.ServiceModel.Activities.Receive> activity within a <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity.</span></span> <span data-ttu-id="9a913-202">L'attività <xref:System.ServiceModel.Activities.TransactedReceiveScope> contiene un'attività `Receive` e un corpo.</span><span class="sxs-lookup"><span data-stu-id="9a913-202">The <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity contains a `Receive` activity and a body.</span></span> <span data-ttu-id="9a913-203">La transazione propagata al servizio rimane di ambiente in tutta l'esecuzione del corpo di <xref:System.ServiceModel.Activities.TransactedReceiveScope>.</span><span class="sxs-lookup"><span data-stu-id="9a913-203">The transaction flowed to the service remains ambient throughout the execution of the body of the <xref:System.ServiceModel.Activities.TransactedReceiveScope>.</span></span> <span data-ttu-id="9a913-204">La transazione viene completata quando viene completata l'esecuzione del corpo.</span><span class="sxs-lookup"><span data-stu-id="9a913-204">The transaction is completed when the body finishes executing.</span></span> <span data-ttu-id="9a913-205">Per ulteriori informazioni sui flussi di lavoro e sulle transazioni, vedere [transazioni del flusso di lavoro](../../windows-workflow-foundation/workflow-transactions.md).</span><span class="sxs-lookup"><span data-stu-id="9a913-205">For more information about workflows and transactions see [Workflow Transactions](../../windows-workflow-foundation/workflow-transactions.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="9a913-206">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="9a913-206">See also</span></span>

- [<span data-ttu-id="9a913-207">Come inviare e ricevere errori nei servizi di flusso di lavoro</span><span class="sxs-lookup"><span data-stu-id="9a913-207">How to Send and Receive Faults in Workflow Services</span></span>](https://go.microsoft.com/fwlink/?LinkId=189151)
- [<span data-ttu-id="9a913-208">Creazione di un servizio flusso di lavoro a esecuzione prolungata</span><span class="sxs-lookup"><span data-stu-id="9a913-208">Creating a Long-running Workflow Service</span></span>](creating-a-long-running-workflow-service.md)
