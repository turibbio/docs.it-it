---
title: Hosting in un'applicazione di servizio Windows
ms.date: 03/30/2017
ms.assetid: f4199998-27f3-4dd9-aee4-0a4addfa9f24
ms.openlocfilehash: ba49d123508ceb8da677d1e9c67721e4f86aa7c3
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/09/2020
ms.locfileid: "84597332"
---
# <a name="hosting-in-a-windows-service-application"></a><span data-ttu-id="3b077-102">Hosting in un'applicazione di servizio Windows</span><span class="sxs-lookup"><span data-stu-id="3b077-102">Hosting in a Windows Service Application</span></span>
<span data-ttu-id="3b077-103">I servizi Windows, precedentemente noti come servizi Windows NT, offrono un modello di processo particolarmente adatto ad applicazioni che devono risiedere in un eseguibile a esecuzione prolungata e che non visualizzano alcuna forma di interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="3b077-103">Windows services (formerly known as Windows NT services) provide a process model particularly suited to applications that must live in a long-running executable and do not display any form of user interface.</span></span> <span data-ttu-id="3b077-104">La durata del processo di un'applicazione di servizio Windows viene gestita da Gestione controllo servizi (SCM), che consente di avviare, interrompere e sospendere le applicazioni di servizio Windows.</span><span class="sxs-lookup"><span data-stu-id="3b077-104">The process lifetime of a Windows service application is managed by the service control manager (SCM), which allows you to start, stop, and pause Windows service applications.</span></span> <span data-ttu-id="3b077-105">È possibile configurare un processo del servizio Windows per l'avvio automatico all'avvio del computer, rendendolo un ambiente host appropriato per le applicazioni "always on".</span><span class="sxs-lookup"><span data-stu-id="3b077-105">You can configure a Windows service process to start automatically when the computer starts, making it a suitable hosting environment for "always on" applications.</span></span> <span data-ttu-id="3b077-106">Per ulteriori informazioni sulle applicazioni di servizio Windows, vedere [applicazioni di servizio Windows](https://go.microsoft.com/fwlink/?LinkId=89450).</span><span class="sxs-lookup"><span data-stu-id="3b077-106">For more information about Windows service applications, see [Windows Service Applications](https://go.microsoft.com/fwlink/?LinkId=89450).</span></span>  
  
 <span data-ttu-id="3b077-107">Le applicazioni che ospitano servizi di Windows Communication Foundation a esecuzione prolungata (WCF) condividono molte caratteristiche con i servizi Windows.</span><span class="sxs-lookup"><span data-stu-id="3b077-107">Applications that host long-running Windows Communication Foundation (WCF) services share many characteristics with Windows services.</span></span> <span data-ttu-id="3b077-108">In particolare, i servizi WCF sono file eseguibili server con esecuzione prolungata che non interagiscono direttamente con l'utente e pertanto non implementano alcuna forma di interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="3b077-108">In particular, WCF services are long-running server executables that do not interact directly with the user and therefore do not implement any form of user interface.</span></span> <span data-ttu-id="3b077-109">Di conseguenza, l'hosting dei servizi WCF all'interno di un'applicazione di servizio Windows è un'opzione per la creazione di applicazioni WCF affidabili e a esecuzione prolungata.</span><span class="sxs-lookup"><span data-stu-id="3b077-109">As such, hosting WCF services inside of a Windows service application is one option for building robust, long-running, WCF applications.</span></span>  
  
 <span data-ttu-id="3b077-110">Spesso gli sviluppatori WCF devono decidere se ospitare l'applicazione WCF all'interno di un'applicazione di servizio Windows o all'interno dell'ambiente di hosting di Internet Information Services (IIS) o del servizio Attivazione processo Windows (WAS).</span><span class="sxs-lookup"><span data-stu-id="3b077-110">Often, WCF developers must decide whether to host their WCF application inside of a Windows service application or inside of the Internet Information Services (IIS) or Windows Process Activation Service (WAS) hosting environment.</span></span> <span data-ttu-id="3b077-111">È consigliabile considerare l'uso di applicazioni di servizio Windows alle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="3b077-111">You should consider using Windows service applications under the following conditions:</span></span>  
  
- <span data-ttu-id="3b077-112">L'applicazione richiede l'attivazione esplicita.</span><span class="sxs-lookup"><span data-stu-id="3b077-112">Your application requires explicit activation.</span></span> <span data-ttu-id="3b077-113">È, ad esempio, consigliabile usare servizi Windows quando l'applicazione deve essere avviata automaticamente all'avvio del server, invece di essere avviata dinamicamente in risposta al primo messaggio in ingresso.</span><span class="sxs-lookup"><span data-stu-id="3b077-113">For example, you should use Windows services when your application must start automatically when the server starts instead of being dynamically started in response to the first incoming message.</span></span>  
  
- <span data-ttu-id="3b077-114">Il processo che ospita l'applicazione deve restare in esecuzione una volta avviato.</span><span class="sxs-lookup"><span data-stu-id="3b077-114">The process that hosts your application must remain running once started.</span></span> <span data-ttu-id="3b077-115">Una volta avviato, un processo di servizio Windows resta in esecuzione, a meno che non venga esplicitamente interrotto da un amministratore del server tramite Gestione controllo servizi.</span><span class="sxs-lookup"><span data-stu-id="3b077-115">Once started, a Windows service process remains running unless explicitly shut down by a server administrator using the service control manager.</span></span> <span data-ttu-id="3b077-116">Le applicazioni ospitate in IIS o WAS possono essere avviate e interrotte dinamicamente, per usare le risorse di sistema in modo ottimale.</span><span class="sxs-lookup"><span data-stu-id="3b077-116">Applications hosted in IIS or WAS may be started and stopped dynamically to make optimal use of system resources.</span></span> <span data-ttu-id="3b077-117">Le applicazioni che richiedono il controllo esplicito sulla durata del processo host dovrebbero usare servizi Windows invece di IIS o WAS.</span><span class="sxs-lookup"><span data-stu-id="3b077-117">Applications that require explicit control over the lifetime of their hosting process should use Windows services instead of IIS or WAS.</span></span>  
  
- <span data-ttu-id="3b077-118">Il servizio WCF deve essere eseguito in Windows Server 2003 e utilizzare trasporti diversi da HTTP.</span><span class="sxs-lookup"><span data-stu-id="3b077-118">Your WCF service must run on Windows Server 2003 and use transports other than HTTP.</span></span> <span data-ttu-id="3b077-119">In Windows Server 2003, l'ambiente di hosting di IIS 6,0 è limitato solo alla comunicazione HTTP.</span><span class="sxs-lookup"><span data-stu-id="3b077-119">On Windows Server 2003, the IIS 6.0 hosting environment is restricted to HTTP communication only.</span></span> <span data-ttu-id="3b077-120">Le applicazioni di servizio Windows non sono soggette a questa restrizione e possono utilizzare qualsiasi trasporto supportato da WCF, tra cui NET. TCP, NET. pipe e NET. MSMQ.</span><span class="sxs-lookup"><span data-stu-id="3b077-120">Windows service applications are not subject to this restriction and can use any transport WCF supports, including net.tcp, net.pipe, and net.msmq.</span></span>  
  
### <a name="to-host-wcf-inside-of-a-windows-service-application"></a><span data-ttu-id="3b077-121">Per ospitare WCF in un'applicazione di servizio Windows</span><span class="sxs-lookup"><span data-stu-id="3b077-121">To host WCF inside of a Windows service application</span></span>  
  
1. <span data-ttu-id="3b077-122">Creare un'applicazione di servizio Windows.</span><span class="sxs-lookup"><span data-stu-id="3b077-122">Create a Windows service application.</span></span> <span data-ttu-id="3b077-123">È possibile scrivere applicazioni di servizio Windows in codice gestito usando le classi nello spazio dei nomi <xref:System.ServiceProcess>.</span><span class="sxs-lookup"><span data-stu-id="3b077-123">You can write Windows service applications in managed code using the classes in the <xref:System.ServiceProcess> namespace.</span></span> <span data-ttu-id="3b077-124">Questa applicazione deve includere una classe che eredita da <xref:System.ServiceProcess.ServiceBase>.</span><span class="sxs-lookup"><span data-stu-id="3b077-124">This application must include one class that inherits from <xref:System.ServiceProcess.ServiceBase>.</span></span>  
  
2. <span data-ttu-id="3b077-125">Collegare la durata dei servizi WCF alla durata dell'applicazione di servizio Windows.</span><span class="sxs-lookup"><span data-stu-id="3b077-125">Link the lifetime of the WCF services to the lifetime of the Windows service application.</span></span> <span data-ttu-id="3b077-126">In genere, si desidera che i servizi WCF ospitati in un'applicazione di servizio Windows diventino attivi all'avvio del servizio di hosting, interrompano l'ascolto dei messaggi quando il servizio di hosting viene arrestato e arrestano il processo di hosting quando il servizio WCF rileva un errore.</span><span class="sxs-lookup"><span data-stu-id="3b077-126">Typically, you want WCF services hosted in a Windows service application to become active when the hosting service starts, stop listening for messages when the hosting service is stopped, and shut down the hosting process when the WCF service encounters an error.</span></span> <span data-ttu-id="3b077-127">Per ottenere questo risultato, è possibile procedere come segue:</span><span class="sxs-lookup"><span data-stu-id="3b077-127">This can be accomplished as follows:</span></span>  
  
    - <span data-ttu-id="3b077-128">Eseguire l'override di <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> per aprire una o più istanze di <xref:System.ServiceModel.ServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="3b077-128">Override <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> to open one or more instances of <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="3b077-129">Una singola applicazione di servizio Windows può ospitare più servizi WCF che si avviano e si arrestano come gruppo.</span><span class="sxs-lookup"><span data-stu-id="3b077-129">A single Windows service application can host multiple WCF services that start and stop as a group.</span></span>  
  
    - <span data-ttu-id="3b077-130">Eseguire l'override <xref:System.ServiceProcess.ServiceBase.OnStop%2A> di per chiamare <xref:System.ServiceModel.Channels.CommunicationObject.Closed> su <xref:System.ServiceModel.ServiceHost> tutti i servizi WCF in esecuzione avviati durante <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> .</span><span class="sxs-lookup"><span data-stu-id="3b077-130">Override <xref:System.ServiceProcess.ServiceBase.OnStop%2A> to call <xref:System.ServiceModel.Channels.CommunicationObject.Closed> on the <xref:System.ServiceModel.ServiceHost> any running WCF services that were started during <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span></span>  
  
    - <span data-ttu-id="3b077-131">Eseguire la sottoscrizione all'evento <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> di <xref:System.ServiceModel.ServiceHost> e usare la classe <xref:System.ServiceProcess.ServiceController> per arrestare l'applicazione di servizio Windows in caso di errore.</span><span class="sxs-lookup"><span data-stu-id="3b077-131">Subscribe to the <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> event of <xref:System.ServiceModel.ServiceHost> and use the <xref:System.ServiceProcess.ServiceController> class to shut down the Windows service application in case of error.</span></span>  
  
     <span data-ttu-id="3b077-132">Le applicazioni di servizio Windows che ospitano servizi WCF vengono distribuite e gestite allo stesso modo delle applicazioni di servizio Windows che non utilizzano WCF.</span><span class="sxs-lookup"><span data-stu-id="3b077-132">Windows service applications that host WCF services are deployed and managed in the same way as Windows service applications that do not make use of WCF.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3b077-133">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="3b077-133">See also</span></span>

- <xref:System.ServiceProcess>
- [<span data-ttu-id="3b077-134">Procedura dettagliata: creazione di un'applicazione di servizio Windows in Progettazione componenti</span><span class="sxs-lookup"><span data-stu-id="3b077-134">Walkthrough: Creating a Windows Service Application in the Component Designer</span></span>](https://go.microsoft.com/fwlink/?LinkId=94875)
- [<span data-ttu-id="3b077-135">Procedura: ospitare un servizio WCF in un servizio Windows gestito</span><span class="sxs-lookup"><span data-stu-id="3b077-135">How to: Host a WCF Service in a Managed Windows Service</span></span>](how-to-host-a-wcf-service-in-a-managed-windows-service.md)
- [<span data-ttu-id="3b077-136">Host del servizio Windows</span><span class="sxs-lookup"><span data-stu-id="3b077-136">Windows Service Host</span></span>](../samples/windows-service-host.md)
- [<span data-ttu-id="3b077-137">Architettura di programmazione delle applicazioni di servizio</span><span class="sxs-lookup"><span data-stu-id="3b077-137">Service Application Programming Architecture</span></span>](https://go.microsoft.com/fwlink/?LinkId=94876)
- <span data-ttu-id="3b077-138">[Funzionalità di hosting di Windows Server AppFabric](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="3b077-138">[Windows Server App Fabric Hosting Features](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span></span>
