---
title: Configurazione di HTTP e HTTPS
description: Informazioni su come configurare HTTP/HTTPS per consentire la comunicazione tra i servizi e i client WCF. Configurare una registrazione URL e un'eccezione firewall usando Netsh.exe.
ms.date: 04/08/2019
helpviewer_keywords:
- configuring HTTP [WCF]
ms.assetid: b0c29a86-bc0c-41b3-bc1e-4eb5bb5714d4
ms.openlocfilehash: fbff78ff8e2c5c4fa73a56a3fdc15163596aa985
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/23/2020
ms.locfileid: "85245141"
---
# <a name="configuring-http-and-https"></a><span data-ttu-id="7ba2f-104">Configurazione di HTTP e HTTPS</span><span class="sxs-lookup"><span data-stu-id="7ba2f-104">Configuring HTTP and HTTPS</span></span>

<span data-ttu-id="7ba2f-105">I client e i servizi WCF possono comunicare su HTTP e HTTPS.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-105">WCF services and clients can communicate over HTTP and HTTPS.</span></span> <span data-ttu-id="7ba2f-106">Le impostazioni HTTP/HTTPS vengono configurate tramite Internet Information Services (IIS) o tramite l'utilizzo di uno strumento da riga di comando.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-106">The HTTP/HTTPS settings are configured by using Internet Information Services (IIS) or through the use of a command-line tool.</span></span> <span data-ttu-id="7ba2f-107">Quando un servizio WCF è ospitato in IIS è possibile configurare le impostazioni HTTP o HTTPS in IIS utilizzando lo strumento inetmgr.exe.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-107">When a WCF service is hosted under IIS HTTP or HTTPS settings can be configured within IIS (using the inetmgr.exe tool).</span></span> <span data-ttu-id="7ba2f-108">Se un servizio WCF è indipendente, le impostazioni HTTP o HTTPS vengono configurate tramite uno strumento da riga di comando.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-108">If a WCF service is self-hosted, HTTP or HTTPS settings are configured by using a command-line tool.</span></span>

<span data-ttu-id="7ba2f-109">Come minimo, si vuole configurare una registrazione URL e aggiungere un'eccezione del firewall per l'URL che verrà usato dal servizio.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-109">At a minimum, you want to configure a URL registration and add a Firewall exception for the URL your service will be using.</span></span> <span data-ttu-id="7ba2f-110">È possibile configurare queste impostazioni con lo strumento Netsh.exe.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-110">You can configure these settings with the Netsh.exe tool.</span></span>

## <a name="configuring-namespace-reservations"></a><span data-ttu-id="7ba2f-111">Configurazione delle prenotazioni degli spazi dei nomi</span><span class="sxs-lookup"><span data-stu-id="7ba2f-111">Configuring namespace reservations</span></span>

<span data-ttu-id="7ba2f-112">La prenotazione dello spazio dei nomi assegna i diritti per una parte dello spazio dei nomi URL HTTP a un particolare gruppo di utenti.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-112">Namespace reservation assigns the rights for a portion of the HTTP URL namespace to a particular group of users.</span></span> <span data-ttu-id="7ba2f-113">Una prenotazione concede a quegli utenti il diritto di creare servizi in ascolto sulla parte dello spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-113">A reservation gives those users the right to create services that listen on that portion of the namespace.</span></span> <span data-ttu-id="7ba2f-114">Le prenotazioni sono prefissi URL, vale a dire che la prenotazione copre tutti i sottopercorsi del percorso di prenotazione.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-114">Reservations are URL prefixes, meaning that the reservation covers all subpaths of the reservation path.</span></span> <span data-ttu-id="7ba2f-115">Le prenotazioni dello spazio dei nomi permettono due modalità per utilizzare caratteri jolly.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-115">Namespace reservations permit two ways to use wildcards.</span></span> <span data-ttu-id="7ba2f-116">La documentazione dell'API del server HTTP descrive l' [ordine di risoluzione tra le attestazioni dello spazio dei nomi che coinvolgono caratteri jolly](/windows/desktop/Http/routing-incoming-requests).</span><span class="sxs-lookup"><span data-stu-id="7ba2f-116">The HTTP Server API documentation describes the [order of resolution between namespace claims that involve wildcards](/windows/desktop/Http/routing-incoming-requests).</span></span>

<span data-ttu-id="7ba2f-117">Un'applicazione in esecuzione può creare una richiesta simile per aggiungere registrazioni dello spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-117">A running application can create a similar request to add namespace registrations.</span></span> <span data-ttu-id="7ba2f-118">Registrazioni e prenotazioni competono per parti dello spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-118">Registrations and reservations compete for portions of the namespace.</span></span> <span data-ttu-id="7ba2f-119">Una prenotazione può avere la precedenza rispetto a una registrazione in base all'ordine di risoluzione specificato nell' [ordine di risoluzione tra le attestazioni dello spazio dei nomi che coinvolgono caratteri jolly](/windows/desktop/Http/routing-incoming-requests).</span><span class="sxs-lookup"><span data-stu-id="7ba2f-119">A reservation may have precedence over a registration according to the order of resolution given in the [order of resolution between namespace claims that involve wildcards](/windows/desktop/Http/routing-incoming-requests).</span></span> <span data-ttu-id="7ba2f-120">In questo caso, la prenotazione blocca la ricezione delle richieste da parte dell'applicazione in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-120">In this case, the reservation blocks the running application from receiving requests.</span></span>

<span data-ttu-id="7ba2f-121">Nell'esempio seguente viene usato lo strumento Netsh.exe:</span><span class="sxs-lookup"><span data-stu-id="7ba2f-121">The following example uses the Netsh.exe tool:</span></span>

```console
netsh http add urlacl url=http://+:80/MyUri user=DOMAIN\user
```

<span data-ttu-id="7ba2f-122">Questo comando aggiunge una prenotazione URL per lo spazio dei nomi URL specificato per l'account dominio\utente.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-122">This command adds a URL reservation for the specified URL namespace for the DOMAIN\user account.</span></span> <span data-ttu-id="7ba2f-123">Per ulteriori informazioni sull'utilizzo del comando netsh, digitare `netsh http add urlacl /?` un prompt dei comandi e premere INVIO.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-123">For more information on using the netsh command, type `netsh http add urlacl /?` in a command-prompt and press Enter.</span></span>

## <a name="configuring-a-firewall-exception"></a><span data-ttu-id="7ba2f-124">Configurazione di un'eccezione del firewall</span><span class="sxs-lookup"><span data-stu-id="7ba2f-124">Configuring a firewall exception</span></span>

<span data-ttu-id="7ba2f-125">In caso di un servizio WCF self-hosted che comunica tramite HTTP, è necessario aggiungere un'eccezione alla configurazione del firewall per consentire connessioni in ingresso tramite un particolare URL.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-125">When self-hosting a WCF service that communicates over HTTP, an exception must be added to the firewall configuration to allow inbound connections using a particular URL.</span></span>

## <a name="configuring-ssl-certificates"></a><span data-ttu-id="7ba2f-126">Configurazione dei certificati SSL</span><span class="sxs-lookup"><span data-stu-id="7ba2f-126">Configuring SSL certificates</span></span>

<span data-ttu-id="7ba2f-127">Il protocollo SSL (Secure Sockets Layer) utilizza certificati nel client e nel server per memorizzare le chiavi di crittografia.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-127">The Secure Sockets Layer (SSL) protocol uses certificates on the client and server to store encryption keys.</span></span> <span data-ttu-id="7ba2f-128">Il server fornisce il proprio certificato SSL quando viene stabilita una connessione, in modo che il client possa verificare l'identità del server.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-128">The server provides its SSL certificate when a connection is made so that the client can verify the server identity.</span></span> <span data-ttu-id="7ba2f-129">Il server può inoltre richiedere un certificato dal client, per fornire l'autenticazione reciproca di entrambi i lati della connessione.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-129">The server can also request a certificate from the client to provide mutual authentication of both sides of the connection.</span></span>

<span data-ttu-id="7ba2f-130">I certificati vengono memorizzati in un archivio centralizzato in base all'indirizzo IP e al numero di porta della connessione.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-130">Certificates are stored in a centralized store according to the IP address and port number of the connection.</span></span> <span data-ttu-id="7ba2f-131">L'indirizzo IP speciale 0.0.0.0 corrisponde a qualsiasi indirizzo IP del computer locale.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-131">The special IP address 0.0.0.0 matches any IP address for the local machine.</span></span> <span data-ttu-id="7ba2f-132">Si noti che l'archivio certificati non distingue gli URL in base al percorso.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-132">Note that the certificate store doesn't distinguish URLs based on the path.</span></span> <span data-ttu-id="7ba2f-133">I servizi con la stessa combinazione di indirizzo IP e porta deve condividere certificati anche se il percorso nell'URL dei servizi è diverso.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-133">Services with the same IP address and port combination must share certificates even if the path in the URL for the services is different.</span></span>

<span data-ttu-id="7ba2f-134">Per istruzioni dettagliate, vedere [procedura: configurare una porta con un certificato SSL](how-to-configure-a-port-with-an-ssl-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="7ba2f-134">For step-by-step instructions, see [How to: Configure a Port with an SSL Certificate](how-to-configure-a-port-with-an-ssl-certificate.md).</span></span>

## <a name="configuring-the-ip-listen-list"></a><span data-ttu-id="7ba2f-135">Configurazione dell'elenco di ascolto IP</span><span class="sxs-lookup"><span data-stu-id="7ba2f-135">Configuring the IP Listen List</span></span>

<span data-ttu-id="7ba2f-136">L'API server HTTP viene associata a un indirizzo IP e a una porta solo quando un utente registra un URL.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-136">The HTTP Server API only binds to an IP address and port once a user registers a URL.</span></span> <span data-ttu-id="7ba2f-137">Per impostazione predefinita, l'API server HTTP viene associata alla porta nell'URL per tutti gli indirizzi IP del computer.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-137">By default, the HTTP Server API binds to the port in the URL for all of the IP addresses of the machine.</span></span> <span data-ttu-id="7ba2f-138">Si verifica un conflitto se un'applicazione che non utilizza l'API del server HTTP è stata precedentemente associata a tale combinazione di indirizzo IP e porta.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-138">A conflict arises if an application that doesn't use the HTTP Server API has previously bound to that combination of IP address and port.</span></span> <span data-ttu-id="7ba2f-139">L'elenco di ascolto IP consente ai servizi WCF di coesistere con le applicazioni che usano una porta per alcuni degli indirizzi IP del computer.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-139">The IP Listen List allows WCF services to coexist with applications that use a port for some of the IP addresses of the machine.</span></span> <span data-ttu-id="7ba2f-140">Se l'elenco di ascolto IP contiene voci, l'API server HTTP viene associata solo agli indirizzi IP specificati nell'elenco.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-140">If the IP Listen List contains any entries, the HTTP Server API only binds to those IP addresses that the list specifies.</span></span> <span data-ttu-id="7ba2f-141">La modifica dell'elenco di ascolto IP richiede privilegi amministrativi.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-141">Modifying the IP Listen List requires administrative privileges.</span></span>

<span data-ttu-id="7ba2f-142">Usare lo strumento Netsh per modificare l'elenco di ascolto IP, come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="7ba2f-142">Use the netsh tool to modify the IP Listen List, as shown in the following example:</span></span>

```console
netsh http add iplisten ipaddress=0.0.0.0:8000
```

## <a name="other-configuration-settings"></a><span data-ttu-id="7ba2f-143">Altre impostazioni di configurazione</span><span class="sxs-lookup"><span data-stu-id="7ba2f-143">Other configuration settings</span></span>

<span data-ttu-id="7ba2f-144">Quando si utilizza <xref:System.ServiceModel.WSDualHttpBinding>, la connessione client utilizza impostazioni predefinite compatibili con le prenotazioni dello spazio dei nomi e il firewall Windows.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-144">When using <xref:System.ServiceModel.WSDualHttpBinding>, the client connection uses defaults that are compatible with namespace reservations and the Windows firewall.</span></span> <span data-ttu-id="7ba2f-145">Se si sceglie di personalizzare l'indirizzo client di base di una connessione doppia, è necessario configurare anche queste impostazioni HTTP sul client per farle corrispondere al nuovo indirizzo.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-145">If you choose to customize the client base address of a dual connection, then you also must configure these HTTP settings on the client to match the new address.</span></span>

<span data-ttu-id="7ba2f-146">L'API del server HTTP dispone di alcune impostazioni di configurazione avanzate che non sono disponibili tramite HttpCfg.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-146">The HTTP Server API has some advanced configuration settings that aren't available through HttpCfg.</span></span> <span data-ttu-id="7ba2f-147">Queste impostazioni vengono mantenute nel Registro di sistema e valgono per tutte le applicazioni in esecuzione sui sistemi che utilizzano API server HTTP.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-147">These settings are maintained in the registry and apply to all applications running on the systems that use the HTTP Server APIs.</span></span> <span data-ttu-id="7ba2f-148">Per informazioni su queste impostazioni, vedere [Http.sys impostazioni del registro di sistema per IIS](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span><span class="sxs-lookup"><span data-stu-id="7ba2f-148">For information about these settings, see [Http.sys registry settings for IIS](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span></span> <span data-ttu-id="7ba2f-149">La maggior parte degli utenti non è necessario modificare queste impostazioni.</span><span class="sxs-lookup"><span data-stu-id="7ba2f-149">Most users don't need to change these settings.</span></span>

## <a name="see-also"></a><span data-ttu-id="7ba2f-150">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="7ba2f-150">See also</span></span>

- <xref:System.ServiceModel.WSDualHttpBinding>
- [<span data-ttu-id="7ba2f-151">Procedura: configurare una porta con un certificato SSL</span><span class="sxs-lookup"><span data-stu-id="7ba2f-151">How to: Configure a Port with an SSL Certificate</span></span>](how-to-configure-a-port-with-an-ssl-certificate.md)
