---
title: Panoramica della correlazione
ms.date: 03/30/2017
ms.assetid: edcc0315-5d26-44d6-a36d-ea554c418e9f
ms.openlocfilehash: 65f87195fde0c3dbda610804260f0ebfbf599073
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/09/2020
ms.locfileid: "84586975"
---
# <a name="correlation-overview"></a>Panoramica della correlazione
La correlazione è il meccanismo che consente di correlare i messaggi del servizio flusso di lavoro l'uno all'altro o allo stato dell'istanza dell'applicazione, ad esempio una risposta a una richiesta iniziale o un particolare ID dell'ordine allo stato persistente di un flusso di lavoro di elaborazione di un ordine. In questo argomento vengono forniti cenni preliminari sulla correlazione. Gli altri argomenti in questa sezione forniscono informazioni aggiuntive per ogni tipo di correlazione.  
  
## <a name="types-of-correlation"></a>Tipi di correlazione  
 La correlazione può essere basata sul protocollo o sul contenuto. Le correlazioni basate sul protocollo usano dati forniti dall'infrastruttura di recapito dei messaggi per fornire il mapping tra messaggi. I messaggi correlati mediante la correlazione basata sul protocollo vengono correlati l'uno all'altro mediante un oggetto in memoria, ad esempio <xref:System.ServiceModel.Channels.RequestContext>, o per mezzo di un token fornito dal protocollo di trasporto. Le correlazioni basate sul contenuto correlano messaggi l'uno all'altro usando dati specificati dall'applicazione. I messaggi correlati usando la correlazione basata sul contenuto vengono correlati l'uno all'altro per mezzo di alcuni dati definiti dall'applicazione nel messaggio, ad esempio un numero cliente.  
  
 Le attività che partecipano alla correlazione usano un elemento <xref:System.ServiceModel.Activities.CorrelationHandle> per associare le attività di messaggistica. Un elemento <xref:System.ServiceModel.Activities.Send> usato per chiamare un servizio e un elemento <xref:System.ServiceModel.Activities.Receive> successivo usato per ricevere un callback dal servizio condividono ad esempio lo stesso elemento <xref:System.ServiceModel.Activities.CorrelationHandle>. Questo modello di base viene usato se la correlazione è basata sul contenuto o sul protocollo. È possibile impostare l'handle di correlazione in modo esplicito in ogni attività oppure le attività possono essere contenute in un'attività <xref:System.ServiceModel.Activities.CorrelationScope>. Nelle attività contenute in un elemento <xref:System.ServiceModel.Activities.CorrelationScope> gli handle di correlazione vengono gestiti da <xref:System.ServiceModel.Activities.CorrelationScope> e non richiedono l'impostazione esplicita di <xref:System.ServiceModel.Activities.CorrelationHandle>. Un ambito <xref:System.ServiceModel.Activities.CorrelationScope> fornisce la gestione di <xref:System.ServiceModel.Activities.CorrelationHandle> per una correlazione request/reply e un tipo di correlazione aggiuntivo. I servizi flusso di lavoro ospitati mediante <xref:System.ServiceModel.Activities.WorkflowServiceHost> dispongono della stessa gestione di correlazione predefinita dell'attività <xref:System.ServiceModel.Activities.CorrelationScope>. In genere con questa gestione di correlazione predefinita molti scenari, attività di messaggistica in un <xref:System.ServiceModel.Activities.CorrelationScope> o un servizio flusso di lavoro non richiedono l'impostazione del rispettivo elemento <xref:System.ServiceModel.Activities.CorrelationHandle>, a meno che più attività di messaggistica siano in parallelo o si sovrappongano, ad esempio due attività <xref:System.ServiceModel.Activities.Receive> in parallelo o due attività <xref:System.ServiceModel.Activities.Send> seguite da due attività <xref:System.ServiceModel.Activities.Receive>. Negli argomenti di questa sezione che analizzano ogni tipo specifico di correlazione vengono fornite altre informazioni sulla correlazione predefinita. Per ulteriori informazioni sulle attività di messaggistica, vedere [attività di messaggistica](messaging-activities.md) e [procedura: creare un servizio del flusso di lavoro con attività di messaggistica](how-to-create-a-workflow-service-with-messaging-activities.md).  
  
## <a name="protocol-based-correlation"></a>Correlazione basata sul protocollo

La correlazione basata sul protocollo usa il meccanismo di trasporto per correlare messaggi l'uno all'altro e all'istanza appropriata. Alcune correlazioni basate sul protocollo fornite dal sistema includono la correlazione request/reply e la correlazione basata sul contesto. Una correlazione request/reply viene usata per correlare una singola coppia di attività di messaggistica per formare un'operazione bidirezionale, ad esempio un elemento <xref:System.ServiceModel.Activities.Send> accoppiato a un elemento <xref:System.ServiceModel.Activities.ReceiveReply> o un elemento <xref:System.ServiceModel.Activities.Receive> accoppiato a un elemento <xref:System.ServiceModel.Activities.SendReply>. Visual Studio Progettazione flussi di lavoro fornisce anche un set di modelli di attività per implementare rapidamente questo modello. Una correlazione basata sul contesto è basata sul meccanismo di scambio del contesto descritto nella [specifica del protocollo di scambio del contesto .NET](https://docs.microsoft.com/openspecs/windows_protocols/mc-netcex/a7f26280-491f-465b-9914-c5eb5322dbb4). Per usare la correlazione basata su contesto, è necessario usare un'associazione basata sul contesto, ad esempio <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> o <xref:System.ServiceModel.NetTcpContextBinding> sull'endpoint.  
  
Per ulteriori informazioni sulla correlazione tra protocolli, vedere [durevole duplex](durable-duplex-correlation.md) e [Request/Reply](request-reply-correlation.md). Per altre informazioni sull'uso dei modelli di attività di Visual Studio Progettazione flussi di lavoro, vedere [attività di messaggistica](messaging-activities.md). Per il codice di esempio, vedere l'esempio [NetContextExchangeCorrelation](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ee662963%28v%3dvs.100%29) .  
  
## <a name="content-based-correlation"></a>Correlazione basata sul contenuto

La correlazione basata sul contenuto usa alcune informazioni nel messaggio per associarlo a una particolare istanza. A differenza della correlazione basata sul protocollo, per la correlazione basata sul contenuto l'autore dell'applicazione deve dichiarare in modo esplicito il percorso in cui si trovano questi dati in ogni messaggio correlato. Le attività che usano la correlazione basata sul contenuto specificano questi dati del messaggio tramite un elemento <xref:System.ServiceModel.MessageQuerySet>. La correlazione basata sul contenuto risulta utile in fase di comunicazione con i servizi che non usano una delle associazioni di contesto, ad esempio <xref:System.ServiceModel.BasicHttpContextBinding>.
  
## <a name="see-also"></a>Vedere anche

- [NetContextExchangeCorrelation](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/ee662963%28v%3dvs.100%29)
