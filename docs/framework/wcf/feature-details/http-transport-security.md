---
title: Protezione del trasporto HTTP
ms.date: 03/30/2017
ms.assetid: d3439262-c58e-4d30-9f2b-a160170582bb
ms.openlocfilehash: 28d0ac164022f585f25b44b16c68994b592ef041
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/09/2020
ms.locfileid: "84592723"
---
# <a name="http-transport-security"></a><span data-ttu-id="9985a-102">Protezione del trasporto HTTP</span><span class="sxs-lookup"><span data-stu-id="9985a-102">HTTP Transport Security</span></span>
<span data-ttu-id="9985a-103">Quando si usa HTTP come trasporto, la protezione viene fornita da un'implementazione SSL (Secure Sockets Layer).</span><span class="sxs-lookup"><span data-stu-id="9985a-103">When using HTTP as the transport, security is provided by a Secure Sockets Layer (SSL) implementation.</span></span> <span data-ttu-id="9985a-104">SSL viene ampiamente usato in Internet per autenticare un servizio presso un client e quindi garantire la riservatezza (crittografia) sul canale.</span><span class="sxs-lookup"><span data-stu-id="9985a-104">SSL is widely used on the Internet to authenticate a service to a client, and then to provide confidentiality (encryption) to the channel.</span></span> <span data-ttu-id="9985a-105">In questo argomento viene illustrato il funzionamento di SSL e il modo in cui viene implementato in Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="9985a-105">This topic explains how SSL works and how it is implemented in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="basic-ssl"></a><span data-ttu-id="9985a-106">SSL di base</span><span class="sxs-lookup"><span data-stu-id="9985a-106">Basic SSL</span></span>  
 <span data-ttu-id="9985a-107">Per illustrare la modalità di funzionamento di SSL è preferibile usare uno scenario tipico, in questo caso il sito Web di una banca.</span><span class="sxs-lookup"><span data-stu-id="9985a-107">How SSL works is best explained through a typical scenario, in this case, a bank's Web site.</span></span> <span data-ttu-id="9985a-108">Il sito consente a un cliente di accedere al sistema con un nome utente e una password.</span><span class="sxs-lookup"><span data-stu-id="9985a-108">The site allows a customer to log on with a user name and password.</span></span> <span data-ttu-id="9985a-109">Dopo l'autenticazione, l'utente può eseguire transazioni, come, ad esempio, visualizzare i saldi dei conti, pagare bollette e spostare denaro da un conto all'altro.</span><span class="sxs-lookup"><span data-stu-id="9985a-109">After being authenticated, the user can perform transactions, such as view account balances, pay bills, and move money from one account to another.</span></span>  
  
 <span data-ttu-id="9985a-110">Quando un utente visita il sito per la prima volta, il meccanismo SSL avvia una serie di negoziazioni, denominate *handshake*, con il client dell'utente (in questo caso Internet Explorer).</span><span class="sxs-lookup"><span data-stu-id="9985a-110">When a user first visits the site, the SSL mechanism begins a series of negotiations, called a *handshake*, with the user's client (in this case, Internet Explorer).</span></span> <span data-ttu-id="9985a-111">SSL prima autentica il sito della banca presso il cliente.</span><span class="sxs-lookup"><span data-stu-id="9985a-111">SSL first authenticates the bank site to the customer.</span></span> <span data-ttu-id="9985a-112">Questo è un passaggio essenziale, perché i clienti devono innanzitutto sapere che stanno comunicando con il sito effettivo e non sono invece vittime di una truffa mirata far digitare loro nome utente e password.</span><span class="sxs-lookup"><span data-stu-id="9985a-112">This is an essential step because customers must first know that they are communicating with the actual site, and not a spoof that tries to lure them into typing in their user name and password.</span></span> <span data-ttu-id="9985a-113">SSL esegue questa autenticazione usando un certificato SSL fornito da un'autorità attendibile, ad esempio VeriSign.</span><span class="sxs-lookup"><span data-stu-id="9985a-113">SSL does this authentication by using an SSL certificate provided by a trusted authority, such as VeriSign.</span></span> <span data-ttu-id="9985a-114">La logica è la seguente: VeriSign attesta l'identità del sito della banca.</span><span class="sxs-lookup"><span data-stu-id="9985a-114">The logic goes like this: VeriSign vouches for the identity of the bank site.</span></span> <span data-ttu-id="9985a-115">Poiché Internet Explorer considera VeriSign attendibile, il sito viene a sua volta considerato attendibile.</span><span class="sxs-lookup"><span data-stu-id="9985a-115">Because Internet Explorer trusts VeriSign, the site is trusted.</span></span> <span data-ttu-id="9985a-116">Se si desidera eseguire il controllo con VeriSign, è possibile fare clic sul logo VeriSign.</span><span class="sxs-lookup"><span data-stu-id="9985a-116">If you want to check with VeriSign, you can do so as well by clicking on the VeriSign logo.</span></span> <span data-ttu-id="9985a-117">Verrà visualizzata una dichiarazione di autenticità con la data di scadenza e il nome dell'organizzazione a cui è stato rilasciato il certificato, ovvero il sito della banca.</span><span class="sxs-lookup"><span data-stu-id="9985a-117">That presents a statement of authenticity with its expiration date and who it is issued to (the bank site).</span></span>  
  
 <span data-ttu-id="9985a-118">Per avviare una sessione protetta, il client invia l'equivalente di un "ciao" al server, insieme a un elenco di algoritmi di crittografia usabili per apporre firme, generare hash e procedere a operazioni di crittografia e decrittografia.</span><span class="sxs-lookup"><span data-stu-id="9985a-118">To initiate a secure session, the client sends the equivalent of a "hello" to the server along with a list of cryptographic algorithms it can use to sign, generate hashes, and encrypt and decrypt with.</span></span> <span data-ttu-id="9985a-119">In risposta, il sito restituisce un riconoscimento e indica il gruppo di algoritmi scelto.</span><span class="sxs-lookup"><span data-stu-id="9985a-119">In response, the site sends back an acknowledgment and its choice of one of the algorithms suites.</span></span> <span data-ttu-id="9985a-120">Durante questo handshake iniziale, entrambe le parti inviano e ricevono parametri nonce.</span><span class="sxs-lookup"><span data-stu-id="9985a-120">During this initial handshake, both parties send and receive nonces.</span></span> <span data-ttu-id="9985a-121">Un *parametro nonce* è un pezzo di dati generato in modo casuale che viene usato, in combinazione con la chiave pubblica del sito, per creare un hash.</span><span class="sxs-lookup"><span data-stu-id="9985a-121">A *nonce* is a randomly generated piece of data that is used, in combination with the site's public key, to create a hash.</span></span> <span data-ttu-id="9985a-122">Un *hash* è un nuovo numero derivato dai due numeri usando un algoritmo standard, ad esempio SHA1.</span><span class="sxs-lookup"><span data-stu-id="9985a-122">A *hash* is a new number that is derived from the two numbers using a standard algorithm, such as SHA1.</span></span> <span data-ttu-id="9985a-123">Anche il client e il sito scambiano messaggi per accettare l'algoritmo hash da usare. L'hash è univoco e viene usato solo per la sessione tra il client e il sito per crittografare e decrittografare i messaggi.</span><span class="sxs-lookup"><span data-stu-id="9985a-123">(The client and the site also exchange messages to agree which hash algorithm to use.) The hash is unique and is used only for the session between the client and the site to encrypt and decrypt messages.</span></span> <span data-ttu-id="9985a-124">Sia il client che il servizio dispongono del parametro nonce originale e della chiave pubblica del certificato, pertanto entrambi i lati possono generare lo stesso hash.</span><span class="sxs-lookup"><span data-stu-id="9985a-124">Both client and service have the original nonce and the certificate's public key, so both sides can generate the same hash.</span></span> <span data-ttu-id="9985a-125">Il client convalida quindi l'hash inviato dal servizio (a) usando l'algoritmo concordato per calcolare l'hash dai dati e (b) confrontandolo con l'hash inviato dal servizio; se i due numeri corrispondono, il client ha la garanzia che l'hash non è stato manomesso.</span><span class="sxs-lookup"><span data-stu-id="9985a-125">Therefore, the client validates the hash sent by the service by (a) using the agreed upon algorithm to calculate the hash from the data, and (b) comparing it to the hash sent by the service; if the two match, then the client has assurance that the hash has not been tampered with.</span></span> <span data-ttu-id="9985a-126">Il client può quindi usare l'hash come chiave per crittografare un messaggio che contiene ancora un altro hash nuovo.</span><span class="sxs-lookup"><span data-stu-id="9985a-126">The client can then use this hash as a key to encrypt a message that contains yet another new hash.</span></span> <span data-ttu-id="9985a-127">Il servizio può decrittografare il messaggio usando l'hash e recuperare questo terzultimo hash.</span><span class="sxs-lookup"><span data-stu-id="9985a-127">The service can decrypt the message using the hash, and recover this second-to-final hash.</span></span> <span data-ttu-id="9985a-128">Le informazioni accumulate (parametri nonce, chiave pubblica e altri dati) sono ora conosciute su entrambi i lati e può essere creato un hash finale (o chiave master).</span><span class="sxs-lookup"><span data-stu-id="9985a-128">The accumulated information (nonces, public key, and other data) is now known to both sides, and a final hash (or master key) can be created.</span></span> <span data-ttu-id="9985a-129">Questa chiave finale viene inviata in forma crittografata usando il penultimo hash.</span><span class="sxs-lookup"><span data-stu-id="9985a-129">This final key is sent encrypted using the next-to-last hash.</span></span> <span data-ttu-id="9985a-130">La chiave master viene quindi utilizzata per crittografare e decrittografare i messaggi per il resto della sessione.</span><span class="sxs-lookup"><span data-stu-id="9985a-130">The master key is then used to encrypt and decrypt messages for the rest of the session.</span></span> <span data-ttu-id="9985a-131">Poiché sia il client che il servizio utilizzano la stessa chiave, questa viene anche chiamata *chiave di sessione*.</span><span class="sxs-lookup"><span data-stu-id="9985a-131">Because both client and service use the same key, this is also called a *session key*.</span></span>  
  
 <span data-ttu-id="9985a-132">La chiave di sessione viene definita anche chiave simmetrica o "segreto condiviso".</span><span class="sxs-lookup"><span data-stu-id="9985a-132">The session key is also characterized as a symmetric key, or a "shared secret."</span></span> <span data-ttu-id="9985a-133">Disporre di una chiave simmetrica è importante perché riduce i calcoli richiesti da entrambi lati della transazione.</span><span class="sxs-lookup"><span data-stu-id="9985a-133">Having a symmetric key is important because it reduces the computation required by both sides of the transaction.</span></span> <span data-ttu-id="9985a-134">Se ogni messaggio richiedesse un nuovo scambio di parametri nonce e hash, le prestazioni peggiorerebbero.</span><span class="sxs-lookup"><span data-stu-id="9985a-134">If every message demanded a new exchange of nonces and hashes, performance would deteriorate.</span></span> <span data-ttu-id="9985a-135">L'obiettivo finale di SSL è pertanto quello di usare una chiave simmetrica che consenta ai messaggi di passare liberamente da un lato all'altro con un maggiore grado di sicurezza ed efficienza.</span><span class="sxs-lookup"><span data-stu-id="9985a-135">Therefore, the ultimate goal of SSL is to use a symmetric key that allows messages to flow freely between the two sides with a greater degree of security and efficiency.</span></span>  
  
 <span data-ttu-id="9985a-136">La descrizione precedente è una versione semplificata di ciò che accade, poiché il protocollo può variare da sito a sito.</span><span class="sxs-lookup"><span data-stu-id="9985a-136">The previous description is a simplified version of what happens, because the protocol may vary from site to site.</span></span> <span data-ttu-id="9985a-137">È inoltre possibile che sia il client che il sito generino parametri nonce non combinati in modo algoritmico durante l'handshake, per aggiungere maggiore complessità, e di conseguenza protezione, al processo di scambio dei dati.</span><span class="sxs-lookup"><span data-stu-id="9985a-137">It is also possible that both the client and the site both generate nonces that are algorithmically combined during the handshake to add more complexity, and therefore protection, to the process of exchanging data.</span></span>  
  
### <a name="certificates-and-public-key-infrastructure"></a><span data-ttu-id="9985a-138">Certificati e infrastruttura a chiave pubblica</span><span class="sxs-lookup"><span data-stu-id="9985a-138">Certificates and Public Key Infrastructure</span></span>  
 <span data-ttu-id="9985a-139">Durante l'handshake, il servizio invia anche il proprio certificato SSL al client.</span><span class="sxs-lookup"><span data-stu-id="9985a-139">During the handshake, the service also sends its SSL certificate to the client.</span></span> <span data-ttu-id="9985a-140">Il certificato contiene informazioni quali la data di scadenza, l'autorità emittente e l'URI (Uniform Resource Identifier) del sito.</span><span class="sxs-lookup"><span data-stu-id="9985a-140">The certificate contains information, such as its expiration date, issuing authority, and the site's Uniform Resource Identifier (URI).</span></span> <span data-ttu-id="9985a-141">Il client confronta questo URI con l'URI che aveva originariamente contattato, per assicurarsi che corrispondano, e controlla anche la data e l'autorità emittente.</span><span class="sxs-lookup"><span data-stu-id="9985a-141">The client compares the URI to the URI it had originally contacted to ensure a match, and also checks the date and issuing authority.</span></span>  
  
 <span data-ttu-id="9985a-142">Ogni certificato ha due chiavi, una chiave privata e una chiave pubblica e le due sono note come coppia di *chiavi di scambio*.</span><span class="sxs-lookup"><span data-stu-id="9985a-142">Every certificate has two keys, a private key and a public key, and the two are known as an *exchange key pair*.</span></span> <span data-ttu-id="9985a-143">In breve, la chiave privata è nota solo al proprietario del certificato, mentre quella pubblica è leggibile dal certificato.</span><span class="sxs-lookup"><span data-stu-id="9985a-143">In brief, the private key is known only to the owner of the certificate while the public key is readable from the certificate.</span></span> <span data-ttu-id="9985a-144">Ognuna delle due chiavi può essere usata per crittografare o decrittografare digest, hash o altre chiavi, ma solo in operazioni contrarie.</span><span class="sxs-lookup"><span data-stu-id="9985a-144">Either key can be used to encrypt or decrypt a digest, hash, or other key, but only as contrary operations.</span></span> <span data-ttu-id="9985a-145">Ad esempio, se il client esegue la crittografia con la chiave pubblica, solo il sito può decrittografare il messaggio usando la chiave privata.</span><span class="sxs-lookup"><span data-stu-id="9985a-145">For example, if the client encrypts with the public key, only the site can decrypt the message using the private key.</span></span> <span data-ttu-id="9985a-146">Allo stesso modo, se il sito esegue la crittografia con la chiave privata, il client può procedere alla decrittografia con la chiave pubblica.</span><span class="sxs-lookup"><span data-stu-id="9985a-146">Similarly, if the site encrypts with the private key, the client can decrypt with the public key.</span></span> <span data-ttu-id="9985a-147">Questo fornisce al client l'assicurazione che i messaggi vengono scambiati solo con il possessore della chiave privata, poiché solo i messaggi crittografati con la chiave privata possono essere decrittografati con la chiave pubblica.</span><span class="sxs-lookup"><span data-stu-id="9985a-147">This provides assurance to the client that the messages are being exchanged only with the possessor of the private key because only messages encrypted with the private key can be decrypted with the public key.</span></span> <span data-ttu-id="9985a-148">Il sito riceve l'assicurazione che sta scambiando messaggi con un client che ha eseguito la crittografia usando la chiave pubblica.</span><span class="sxs-lookup"><span data-stu-id="9985a-148">The site is assured that it is exchanging messages with a client that has encrypted using the public key.</span></span> <span data-ttu-id="9985a-149">Tuttavia, questo scambio è protetto solo per un handshake iniziale, motivo per cui è essenziale creare l'effettiva chiave simmetrica.</span><span class="sxs-lookup"><span data-stu-id="9985a-149">This exchange is secure only for an initial handshake, however, which is why much more is done to create the actual symmetric key.</span></span> <span data-ttu-id="9985a-150">Ciononostante, tutte le comunicazioni dipendono dal servizio che dispone di un certificato SSL valido.</span><span class="sxs-lookup"><span data-stu-id="9985a-150">Nevertheless, all communications depend on the service having a valid SSL certificate.</span></span>  
  
## <a name="implementing-ssl-with-wcf"></a><span data-ttu-id="9985a-151">Implementazione di SSL con WCF</span><span class="sxs-lookup"><span data-stu-id="9985a-151">Implementing SSL with WCF</span></span>  
 <span data-ttu-id="9985a-152">La sicurezza del trasporto HTTP (o SSL) viene fornita esternamente a WCF.</span><span class="sxs-lookup"><span data-stu-id="9985a-152">HTTP transport security (or SSL) is provided externally to WCF.</span></span> <span data-ttu-id="9985a-153">È possibile implementare SSL in due modi; il fattore decisivo dipende dalla modalità di host dell'applicazione:</span><span class="sxs-lookup"><span data-stu-id="9985a-153">You can implement SSL in one of two ways; the deciding factor is how your application is hosted:</span></span>  
  
- <span data-ttu-id="9985a-154">Se si utilizza Internet Information Services (IIS) come host WCF, utilizzare l'infrastruttura IIS per configurare un servizio SSL.</span><span class="sxs-lookup"><span data-stu-id="9985a-154">If you are using Internet Information Services (IIS) as your WCF host, use the IIS infrastructure to set up an SSL service.</span></span>  
  
- <span data-ttu-id="9985a-155">Se si sta creando un'applicazione WCF indipendente, è possibile associare un certificato SSL all'indirizzo utilizzando lo strumento HttpCfg. exe.</span><span class="sxs-lookup"><span data-stu-id="9985a-155">If you are creating a self-hosted WCF application, you can bind an SSL certificate to the address using the HttpCfg.exe tool.</span></span>  
  
### <a name="using-iis-for-transport-security"></a><span data-ttu-id="9985a-156">Uso di IIS per la protezione del trasporto</span><span class="sxs-lookup"><span data-stu-id="9985a-156">Using IIS for Transport Security</span></span>  
  
#### <a name="iis-70"></a><span data-ttu-id="9985a-157">IIS 7.0</span><span class="sxs-lookup"><span data-stu-id="9985a-157">IIS 7.0</span></span>  
 <span data-ttu-id="9985a-158">Per configurare IIS 7,0 come host sicuro (tramite SSL), vedere la pagina relativa alla [configurazione di Secure Sockets Layer in iis 7,0](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc771438(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="9985a-158">To set up IIS 7.0 as a secure host (using SSL), see [Configuring Secure Sockets Layer in IIS 7.0](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc771438(v=ws.10)).</span></span>  
  
<span data-ttu-id="9985a-159">Per configurare i certificati per l'utilizzo con IIS 7,0, vedere [Configuring Server Certificates in iis 7,0](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc732230(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="9985a-159">To configure certificates for use with IIS 7.0, see [Configuring Server Certificates in IIS 7.0](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc732230(v=ws.10)).</span></span>  
  
#### <a name="iis-60"></a><span data-ttu-id="9985a-160">IIS 6.0</span><span class="sxs-lookup"><span data-stu-id="9985a-160">IIS 6.0</span></span>  
 <span data-ttu-id="9985a-161">Per configurare IIS 6,0 come host sicuro (tramite SSL), vedere [configurazione Secure Sockets Layer](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc736992(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="9985a-161">To set up IIS 6.0 as a secure host (using SSL), see [Configuring Secure Sockets Layer](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc736992(v=ws.10)).</span></span>  
  
 <span data-ttu-id="9985a-162">Per configurare i certificati per l'utilizzo con IIS 6,0, vedere [Certificates_IIS_SP1_Ops](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc757474(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="9985a-162">To configure certificates for use with IIS 6.0, see [Certificates_IIS_SP1_Ops](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc757474(v=ws.10)).</span></span>  
  
### <a name="using-httpcfg-for-ssl"></a><span data-ttu-id="9985a-163">Uso di HttpCfg per SSL</span><span class="sxs-lookup"><span data-stu-id="9985a-163">Using HttpCfg for SSL</span></span>  

 <span data-ttu-id="9985a-164">Se si sta creando un'applicazione WCF indipendente, usare lo strumento [HttpCfg. exe](/windows/win32/http/httpcfg-exe) .</span><span class="sxs-lookup"><span data-stu-id="9985a-164">If you're creating a self-hosted WCF application, use the [HttpCfg.exe](/windows/win32/http/httpcfg-exe) tool.</span></span>
  
 <span data-ttu-id="9985a-165">Per ulteriori informazioni sull'utilizzo dello strumento HttpCfg. exe per configurare una porta con un certificato X. 509, vedere [procedura: configurare una porta con un certificato SSL](how-to-configure-a-port-with-an-ssl-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="9985a-165">For more information about using the HttpCfg.exe tool to set up a port with an X.509 certificate, see [How to: Configure a Port with an SSL Certificate](how-to-configure-a-port-with-an-ssl-certificate.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9985a-166">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="9985a-166">See also</span></span>

- [<span data-ttu-id="9985a-167">Sicurezza del trasporto</span><span class="sxs-lookup"><span data-stu-id="9985a-167">Transport Security</span></span>](transport-security.md)
- [<span data-ttu-id="9985a-168">Sicurezza dei messaggi</span><span class="sxs-lookup"><span data-stu-id="9985a-168">Message Security</span></span>](message-security-in-wcf.md)
