---
title: Importazione dello schema per generare classi
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, schema import and export
- XsdDataContractImporter class
ms.assetid: b9170583-8c34-43bd-97bb-6c0c8dddeee0
ms.openlocfilehash: 01f5162727a213fa5dcdf8a70e4e8e4c3627f086
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/09/2020
ms.locfileid: "84596903"
---
# <a name="importing-schema-to-generate-classes"></a><span data-ttu-id="065c5-102">Importazione dello schema per generare classi</span><span class="sxs-lookup"><span data-stu-id="065c5-102">Importing Schema to Generate Classes</span></span>
<span data-ttu-id="065c5-103">Per generare classi da schemi utilizzabili con Windows Communication Foundation (WCF), utilizzare la <xref:System.Runtime.Serialization.XsdDataContractImporter> classe.</span><span class="sxs-lookup"><span data-stu-id="065c5-103">To generate classes from schemas that are usable with Windows Communication Foundation (WCF), use the <xref:System.Runtime.Serialization.XsdDataContractImporter> class.</span></span> <span data-ttu-id="065c5-104">In questo argomento viene descritto il processo e le relative varianti.</span><span class="sxs-lookup"><span data-stu-id="065c5-104">This topic describes the process and variations.</span></span>  
  
## <a name="the-import-process"></a><span data-ttu-id="065c5-105">Processo di importazione</span><span class="sxs-lookup"><span data-stu-id="065c5-105">The Import Process</span></span>
 <span data-ttu-id="065c5-106">Il processo di importazione dello schema ha inizio con una classe <xref:System.Xml.Schema.XmlSchemaSet> e produce una classe <xref:System.CodeDom.CodeCompileUnit>.</span><span class="sxs-lookup"><span data-stu-id="065c5-106">The schema import process starts with an <xref:System.Xml.Schema.XmlSchemaSet> and produces a <xref:System.CodeDom.CodeCompileUnit>.</span></span>  
  
 <span data-ttu-id="065c5-107">Il `XmlSchemaSet` fa parte del modello SOM (Schema Object Model) del .NET Framework che rappresenta un set di documenti dello schema XSD (XML Schema Definition Language).</span><span class="sxs-lookup"><span data-stu-id="065c5-107">The `XmlSchemaSet` is a part of the .NET Framework’s Schema Object Model (SOM) that represents a set of XML Schema definition language (XSD) schema documents.</span></span> <span data-ttu-id="065c5-108">Per creare un oggetto `XmlSchemaSet` da un set di documenti XSD, deserializzare ogni documento in un oggetto <xref:System.Xml.Schema.XmlSchema> (mediante <xref:System.Xml.Serialization.XmlSerializer>) e aggiungere questi oggetti a una nuova classe `XmlSchemaSet`.</span><span class="sxs-lookup"><span data-stu-id="065c5-108">To create an `XmlSchemaSet` object from a set of XSD documents, deserialize each document into an <xref:System.Xml.Schema.XmlSchema> object (using the <xref:System.Xml.Serialization.XmlSerializer>) and add these objects to a new `XmlSchemaSet`.</span></span>  
  
 <span data-ttu-id="065c5-109">`CodeCompileUnit`Fa parte della Code Document Object Model (CodeDom) del .NET Framework che rappresenta .NET Framework codice in modo astratto.</span><span class="sxs-lookup"><span data-stu-id="065c5-109">The `CodeCompileUnit` is part of the .NET Framework’s Code Document Object Model (CodeDOM) that represents .NET Framework code in an abstract way.</span></span> <span data-ttu-id="065c5-110">Per generare il codice effettivo da una classe `CodeCompileUnit`, usare una sottoclasse della classe <xref:System.CodeDom.Compiler.CodeDomProvider>, ad esempio la classe <xref:Microsoft.CSharp.CSharpCodeProvider> o <xref:Microsoft.VisualBasic.VBCodeProvider>.</span><span class="sxs-lookup"><span data-stu-id="065c5-110">To generate the actual code from a `CodeCompileUnit`, use a subclass of the <xref:System.CodeDom.Compiler.CodeDomProvider> class, such as the <xref:Microsoft.CSharp.CSharpCodeProvider> or <xref:Microsoft.VisualBasic.VBCodeProvider> class.</span></span>  
  
### <a name="to-import-a-schema"></a><span data-ttu-id="065c5-111">Per importare uno schema</span><span class="sxs-lookup"><span data-stu-id="065c5-111">To import a schema</span></span>  
  
1. <span data-ttu-id="065c5-112">Creare un'istanza di <xref:System.Runtime.Serialization.XsdDataContractImporter>.</span><span class="sxs-lookup"><span data-stu-id="065c5-112">Create an instance of the <xref:System.Runtime.Serialization.XsdDataContractImporter>.</span></span>  
  
2. <span data-ttu-id="065c5-113">Facoltativa.</span><span class="sxs-lookup"><span data-stu-id="065c5-113">Optional.</span></span> <span data-ttu-id="065c5-114">Passare `CodeCompileUnit` nel costruttore.</span><span class="sxs-lookup"><span data-stu-id="065c5-114">Pass a `CodeCompileUnit` in the constructor.</span></span> <span data-ttu-id="065c5-115">I tipi generati durante l'importazione dello schema vengono aggiunti a questa istanza di `CodeCompileUnit` anziché iniziare con un'istanza `CodeCompileUnit` vuota.</span><span class="sxs-lookup"><span data-stu-id="065c5-115">The types generated during schema import are added to this `CodeCompileUnit` instance instead of starting with a blank `CodeCompileUnit`.</span></span>  
  
3. <span data-ttu-id="065c5-116">Facoltativa.</span><span class="sxs-lookup"><span data-stu-id="065c5-116">Optional.</span></span> <span data-ttu-id="065c5-117">Chiamare uno dei metodi <xref:System.Runtime.Serialization.XsdDataContractImporter.CanImport%2A> .</span><span class="sxs-lookup"><span data-stu-id="065c5-117">Call one of the <xref:System.Runtime.Serialization.XsdDataContractImporter.CanImport%2A> methods.</span></span> <span data-ttu-id="065c5-118">Il metodo determina se lo schema specificato è un schema del contratto dati valido e può essere importato.</span><span class="sxs-lookup"><span data-stu-id="065c5-118">The method determines whether the given schema is a valid data contract schema and can be imported.</span></span> <span data-ttu-id="065c5-119">Il metodo `CanImport` presenta gli stessi overload di `Import` (il passaggio successivo).</span><span class="sxs-lookup"><span data-stu-id="065c5-119">The `CanImport` method has the same overloads as `Import` (the next step).</span></span>  
  
4. <span data-ttu-id="065c5-120">Chiamare uno dei metodi `Import` di overload, ad esempio il metodo <xref:System.Runtime.Serialization.XsdDataContractImporter.Import%28System.Xml.Schema.XmlSchemaSet%29>.</span><span class="sxs-lookup"><span data-stu-id="065c5-120">Call one of the overloaded `Import` methods, for example, the <xref:System.Runtime.Serialization.XsdDataContractImporter.Import%28System.Xml.Schema.XmlSchemaSet%29> method.</span></span>  
  
     <span data-ttu-id="065c5-121">L'overload più semplice accetta una classe `XmlSchemaSet` e importa tutti i tipi, incluso quelli anonimi, presenti in tale set di schemi.</span><span class="sxs-lookup"><span data-stu-id="065c5-121">The simplest overload takes an `XmlSchemaSet` and imports all types, including anonymous types, found in that schema set.</span></span> <span data-ttu-id="065c5-122">Gli altri overload consentono di specificare il tipo XSD o un elenco di tipi da importare (in una classe <xref:System.Xml.XmlQualifiedName> o una raccolta di oggetti `XmlQualifiedName`).</span><span class="sxs-lookup"><span data-stu-id="065c5-122">Other overloads allow you to specify the XSD type or a list of types to import (in the form of an <xref:System.Xml.XmlQualifiedName> or a collection of `XmlQualifiedName` objects).</span></span> <span data-ttu-id="065c5-123">In questo caso, vengono importati solo i tipi specificati.</span><span class="sxs-lookup"><span data-stu-id="065c5-123">In this case, only the specified types are imported.</span></span> <span data-ttu-id="065c5-124">Un overload accetta una classe <xref:System.Xml.Schema.XmlSchemaElement> che importa un elemento specifico fuori dalla classe `XmlSchemaSet`, insieme al tipo associato (indipendentemente dal fatto che sia anonimo o meno).</span><span class="sxs-lookup"><span data-stu-id="065c5-124">An overload takes an <xref:System.Xml.Schema.XmlSchemaElement> that imports a particular element out of the `XmlSchemaSet`, as well as its associated type (whether it is anonymous or not).</span></span> <span data-ttu-id="065c5-125">Questo overload restituisce una classe `XmlQualifiedName` che rappresenta il nome del contratto dati del tipo generato per questo elemento.</span><span class="sxs-lookup"><span data-stu-id="065c5-125">This overload returns an `XmlQualifiedName`, which represents the data contract name of the type generated for this element.</span></span>  
  
     <span data-ttu-id="065c5-126">Più chiamate al metodo `Import` determinano l'aggiunta di più elementi alla stessa classe `CodeCompileUnit`.</span><span class="sxs-lookup"><span data-stu-id="065c5-126">Multiple calls of the `Import` method result in multiple items being added to the same `CodeCompileUnit`.</span></span> <span data-ttu-id="065c5-127">Se esiste già un tipo in `CodeCompileUnit` , non ne viene generato un altro.</span><span class="sxs-lookup"><span data-stu-id="065c5-127">A type is not generated into the `CodeCompileUnit` if it already exists there.</span></span> <span data-ttu-id="065c5-128">È consigliabile chiamare più volte `Import` sullo stesso `XsdDataContractImporter` anziché usare più oggetti `XsdDataContractImporter`.</span><span class="sxs-lookup"><span data-stu-id="065c5-128">Call `Import` multiple times on the same `XsdDataContractImporter` instead of using multiple `XsdDataContractImporter` objects.</span></span> <span data-ttu-id="065c5-129">Questa procedura è consigliata per evitare la generazione di tipi duplicati.</span><span class="sxs-lookup"><span data-stu-id="065c5-129">This is the recommended way to avoid duplicate types being generated.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="065c5-130">Se si verifica un errore durante l'importazione, lo stato della classe `CodeCompileUnit` sarà imprevedibile.</span><span class="sxs-lookup"><span data-stu-id="065c5-130">If there is a failure during import, the `CodeCompileUnit` will be in an unpredictable state.</span></span> <span data-ttu-id="065c5-131">Se si usa una classe `CodeCompileUnit` da un'importazione non riuscita, è possibile esporre il sistema a vulnerabilità della protezione.</span><span class="sxs-lookup"><span data-stu-id="065c5-131">Using a `CodeCompileUnit` resulting from a failed import could expose you to security vulnerabilities.</span></span>  
  
5. <span data-ttu-id="065c5-132">Accedere a `CodeCompileUnit` mediante la proprietà <xref:System.Runtime.Serialization.XsdDataContractImporter.CodeCompileUnit%2A> .</span><span class="sxs-lookup"><span data-stu-id="065c5-132">Access the `CodeCompileUnit` through the <xref:System.Runtime.Serialization.XsdDataContractImporter.CodeCompileUnit%2A> property.</span></span>  
  
### <a name="import-options-customizing-the-generated-types"></a><span data-ttu-id="065c5-133">Opzioni di importazione: personalizzazione dei tipi generati</span><span class="sxs-lookup"><span data-stu-id="065c5-133">Import Options: Customizing the Generated Types</span></span>  
 <span data-ttu-id="065c5-134">È possibile impostare la proprietà <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> di <xref:System.Runtime.Serialization.XsdDataContractImporter> su un'istanza della classe <xref:System.Runtime.Serialization.ImportOptions> per controllare vari aspetti del processo di importazione.</span><span class="sxs-lookup"><span data-stu-id="065c5-134">You can set the <xref:System.Runtime.Serialization.XsdDataContractImporter.Options%2A> property of the <xref:System.Runtime.Serialization.XsdDataContractImporter> to an instance of the <xref:System.Runtime.Serialization.ImportOptions> class to control various aspects of the import process.</span></span> <span data-ttu-id="065c5-135">Alcune opzioni influenzano direttamente i tipi generati.</span><span class="sxs-lookup"><span data-stu-id="065c5-135">A number of options directly influence the types that are generated.</span></span>  
  
#### <a name="controlling-the-access-level-generateinternal-or-the-internal-switch"></a><span data-ttu-id="065c5-136">Controllo del livello di accesso (opzione GenerateInternal o /internal)</span><span class="sxs-lookup"><span data-stu-id="065c5-136">Controlling the Access Level (GenerateInternal or the /internal switch)</span></span>  
 <span data-ttu-id="065c5-137">Corrisponde all'opzione **/Internal** dello [strumento ServiceModel Metadata Utility Tool (Svcutil. exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="065c5-137">This corresponds to the **/internal** switch on the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span>  
  
 <span data-ttu-id="065c5-138">In genere, i tipi pubblici vengono generati dallo schema, con campi privati e proprietà dei membri dati pubblici corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="065c5-138">Normally, public types are generated from schema, with private fields and matching public data member properties.</span></span> <span data-ttu-id="065c5-139">Per generare invece tipi interni, impostare la proprietà <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> su `true`.</span><span class="sxs-lookup"><span data-stu-id="065c5-139">To generate internal types instead, set the <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> property to `true`.</span></span>  
  
 <span data-ttu-id="065c5-140">Nell'esempio seguente viene illustrato uno schema trasformato in una classe interna quando la proprietà <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> è impostata su `true.`</span><span class="sxs-lookup"><span data-stu-id="065c5-140">The following example shows a schema transformed into an internal class when the <xref:System.Runtime.Serialization.ImportOptions.GenerateInternal%2A> property is set to `true.`</span></span>  
  
 [!code-csharp[c_SchemaImportExport#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#2)]
 [!code-vb[c_SchemaImportExport#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#2)]  
  
#### <a name="controlling-namespaces-namespaces-or-the-namespace-switch"></a><span data-ttu-id="065c5-141">Controllo degli spazi dei nomi (opzione Namespaces o /namespace)</span><span class="sxs-lookup"><span data-stu-id="065c5-141">Controlling Namespaces (Namespaces or the /namespace switch)</span></span>  
 <span data-ttu-id="065c5-142">Corrisponde all'opzione **/namespace** dello `Svcutil.exe` strumento.</span><span class="sxs-lookup"><span data-stu-id="065c5-142">This corresponds to the **/namespace** switch on the `Svcutil.exe` tool.</span></span>  
  
 <span data-ttu-id="065c5-143">In genere, i tipi generati dallo schema vengono generati in .NET Framework spazi dei nomi, con ogni spazio dei nomi XSD corrispondente a un particolare .NET Framework spazio dei nomi in base a un mapping descritto in [riferimento allo schema del contratto dati](data-contract-schema-reference.md).</span><span class="sxs-lookup"><span data-stu-id="065c5-143">Normally, types generated from schema are generated into .NET Framework namespaces, with each XSD namespace corresponding to a particular .NET Framework namespace according to a mapping described in [Data Contract Schema Reference](data-contract-schema-reference.md).</span></span> <span data-ttu-id="065c5-144">È possibile personalizzare questo mapping impostando la proprietà <xref:System.Runtime.Serialization.ImportOptions.Namespaces%2A> su <xref:System.Collections.Generic.Dictionary%602>.</span><span class="sxs-lookup"><span data-stu-id="065c5-144">You can customize this mapping by the <xref:System.Runtime.Serialization.ImportOptions.Namespaces%2A> property to a <xref:System.Collections.Generic.Dictionary%602>.</span></span> <span data-ttu-id="065c5-145">Se un determinato spazio dei nomi XSD viene trovato nel dizionario, anche lo spazio dei nomi .NET Framework corrispondente viene tratto dal dizionario.</span><span class="sxs-lookup"><span data-stu-id="065c5-145">If a given XSD namespace is found in the dictionary, the matching .NET Framework namespace is also taken from your dictionary.</span></span>  
  
 <span data-ttu-id="065c5-146">Si consideri ad esempio lo schema seguente.</span><span class="sxs-lookup"><span data-stu-id="065c5-146">For example, consider the following schema.</span></span>  
  
 [!code-xml[c_SchemaImportExport#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#10)]  
  
 <span data-ttu-id="065c5-147">Nell'esempio seguente viene utilizzata la `Namespaces` proprietà per eseguire il mapping dello `http://schemas.contoso.com/carSchema` spazio dei nomi a "contoso. Cars".</span><span class="sxs-lookup"><span data-stu-id="065c5-147">The following example uses the `Namespaces` property to map the `http://schemas.contoso.com/carSchema` namespace to "Contoso.Cars".</span></span>  
  
 [!code-csharp[c_SchemaImportExport#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#8)]
 [!code-vb[c_SchemaImportExport#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#8)]  
  
#### <a name="adding-the-serializableattribute-generateserializable-or-the-serializable-switch"></a><span data-ttu-id="065c5-148">Aggiunta di SerializableAttribute (opzione GenerateSerializable o /serializable)</span><span class="sxs-lookup"><span data-stu-id="065c5-148">Adding the SerializableAttribute (GenerateSerializable or the /serializable switch)</span></span>  
 <span data-ttu-id="065c5-149">Corrisponde all'opzione **/Serializable** dello `Svcutil.exe` strumento.</span><span class="sxs-lookup"><span data-stu-id="065c5-149">This corresponds to the **/serializable** switch on the `Svcutil.exe` tool.</span></span>  
  
 <span data-ttu-id="065c5-150">A volte è importante che i tipi generati dallo schema siano utilizzabili con i motori di serializzazione di Runtime .NET Framework (ad esempio, le <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter?displayProperty=nameWithType> <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> classi e).</span><span class="sxs-lookup"><span data-stu-id="065c5-150">Sometimes it is important for the types generated from the schema to be usable with .NET Framework runtime serialization engines (for example, the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter?displayProperty=nameWithType> and the <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> classes).</span></span> <span data-ttu-id="065c5-151">Questa operazione è utile quando si usano i tipi per .NET Framework comunicazione remota.</span><span class="sxs-lookup"><span data-stu-id="065c5-151">This is useful when using types for .NET Framework remoting.</span></span> <span data-ttu-id="065c5-152">Per abilitare questo aspetto è necessario applicare l'attributo <xref:System.SerializableAttribute> ai tipi generati in aggiunta all'attributo <xref:System.Runtime.Serialization.DataContractAttribute> normale.</span><span class="sxs-lookup"><span data-stu-id="065c5-152">To enable this, you must apply the <xref:System.SerializableAttribute> attribute to the generated types in addition to the regular <xref:System.Runtime.Serialization.DataContractAttribute> attribute.</span></span> <span data-ttu-id="065c5-153">L'attributo viene generato automaticamente se l'opzione di importazione `GenerateSerializable` è impostata su `true`.</span><span class="sxs-lookup"><span data-stu-id="065c5-153">The attribute is generated automatically if the `GenerateSerializable` import option is set to `true`.</span></span>  
  
 <span data-ttu-id="065c5-154">Nell'esempio seguente viene illustrata la classe `Vehicle` generata con l'opzione di importazione `GenerateSerializable` impostata su `true`.</span><span class="sxs-lookup"><span data-stu-id="065c5-154">The following example shows the `Vehicle` class generated with the `GenerateSerializable` import option set to `true`.</span></span>  
  
 [!code-csharp[c_SchemaImportExport#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#4)]
 [!code-vb[c_SchemaImportExport#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#4)]  
  
#### <a name="adding-data-binding-support-enabledatabinding-or-the-enabledatabinding-switch"></a><span data-ttu-id="065c5-155">Aggiunta del supporto dei data binding (opzione EnableDataBinding o /enableDataBinding)</span><span class="sxs-lookup"><span data-stu-id="065c5-155">Adding Data Binding Support (EnableDataBinding or the /enableDataBinding switch)</span></span>  
 <span data-ttu-id="065c5-156">Corrisponde all'opzione **/EnableDataBinding** dello strumento Svcutil. exe.</span><span class="sxs-lookup"><span data-stu-id="065c5-156">This corresponds to the **/enableDataBinding** switch on the Svcutil.exe tool.</span></span>  
  
 <span data-ttu-id="065c5-157">In alcuni casi può essere necessario associare i tipi generati dallo schema ai componenti dell'interfaccia utente grafica in modo che qualsiasi aggiornamento alle istanze di questi tipi aggiorni automaticamente l'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="065c5-157">Sometimes, you may want to bind the types generated from the schema to graphical user interface components so that any update to instances of these types will automatically update the UI.</span></span> <span data-ttu-id="065c5-158">La classe `XsdDataContractImporter` può generare tipi che implementano l'interfaccia <xref:System.ComponentModel.INotifyPropertyChanged> in modo che qualsiasi modifica delle proprietà generi un evento.</span><span class="sxs-lookup"><span data-stu-id="065c5-158">The `XsdDataContractImporter` can generate types that implement the <xref:System.ComponentModel.INotifyPropertyChanged> interface in such a way that any property change triggers an event.</span></span> <span data-ttu-id="065c5-159">Se si generano tipi da usare con un ambiente di programmazione dell'interfaccia utente client che supporta questa interfaccia (ad esempio Windows Presentation Foundation (WPF)), impostare la <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> proprietà su `true` per abilitare questa funzionalità.</span><span class="sxs-lookup"><span data-stu-id="065c5-159">If you are generating types for use with a client UI programming environment that supports this interface (such as Windows Presentation Foundation (WPF)), set the <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> property to `true` to enable this feature.</span></span>  
  
 <span data-ttu-id="065c5-160">Nell'esempio seguente viene illustrata la classe `Vehicle` generata con la proprietà <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> impostata su `true`.</span><span class="sxs-lookup"><span data-stu-id="065c5-160">The following example shows the `Vehicle` class generated with the <xref:System.Runtime.Serialization.ImportOptions.EnableDataBinding%2A> set to `true`.</span></span>  
  
 [!code-csharp[C_SchemaImportExport#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#5)]
 [!code-vb[C_SchemaImportExport#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#5)]  
  
### <a name="import-options-choosing-collection-types"></a><span data-ttu-id="065c5-161">Opzioni di importazione: scelta dei tipi di raccolta</span><span class="sxs-lookup"><span data-stu-id="065c5-161">Import Options: Choosing Collection Types</span></span>  
 <span data-ttu-id="065c5-162">Due modelli speciali in XML rappresentano raccolte di elementi: elenchi di elementi e associazioni tra due elementi.</span><span class="sxs-lookup"><span data-stu-id="065c5-162">Two special patterns in XML represent collections of items: lists of items and associations between one item and another.</span></span> <span data-ttu-id="065c5-163">Di seguito è riportato un esempio di un elenco di stringhe.</span><span class="sxs-lookup"><span data-stu-id="065c5-163">The following is an example of a list of strings.</span></span>  
  
 [!code-xml[C_SchemaImportExport#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#11)]  
  
 <span data-ttu-id="065c5-164">Nell'esempio seguente viene mostrata un'associazione tra una stringa e un numero intero (`city name` e `population`).</span><span class="sxs-lookup"><span data-stu-id="065c5-164">The following is an example of an association between a string and an integer (`city name` and `population`).</span></span>  
  
 [!code-xml[C_SchemaImportExport#12](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#12)]  
  
> [!NOTE]
> <span data-ttu-id="065c5-165">Qualsiasi associazione può essere considerata un elenco.</span><span class="sxs-lookup"><span data-stu-id="065c5-165">Any association could also be considered a list.</span></span> <span data-ttu-id="065c5-166">Ad esempio, è possibile visualizzare l'associazione precedente come un elenco di oggetti `city` complessi che presentano due campi (un campo stringa e un campo numero intero).</span><span class="sxs-lookup"><span data-stu-id="065c5-166">For example, you can view the preceding association as a list of complex `city` objects that happen to have two fields (a string field and an integer field).</span></span> <span data-ttu-id="065c5-167">Entrambi i modelli sono rappresentati nello schema XSD.</span><span class="sxs-lookup"><span data-stu-id="065c5-167">Both patterns have a representation in the XSD Schema.</span></span> <span data-ttu-id="065c5-168">Non esiste alcun modo per distinguere tra un elenco e un'associazione, quindi tali modelli vengono sempre considerati come elenchi, a meno che nello schema non sia presente un'annotazione speciale specifica di WCF.</span><span class="sxs-lookup"><span data-stu-id="065c5-168">There is no way to differentiate between a list and an association, so such patterns are always treated as lists unless a special annotation specific to WCF is present in the schema.</span></span> <span data-ttu-id="065c5-169">L'annotazione indica che un modello specifico rappresenta un'associazione.</span><span class="sxs-lookup"><span data-stu-id="065c5-169">The annotation indicates that a given pattern represents an association.</span></span> <span data-ttu-id="065c5-170">Per ulteriori informazioni, vedere [riferimento allo schema del contratto dati](data-contract-schema-reference.md).</span><span class="sxs-lookup"><span data-stu-id="065c5-170">For more information, see [Data Contract Schema Reference](data-contract-schema-reference.md).</span></span>  
  
 <span data-ttu-id="065c5-171">In genere, un elenco viene importato come contratto dati della raccolta che deriva da un elenco generico o come matrice di .NET Framework, a seconda che lo schema segua o meno il modello di denominazione standard per le raccolte.</span><span class="sxs-lookup"><span data-stu-id="065c5-171">Normally, a list is imported as a collection data contract that derives from a Generic List or as a .NET Framework array, depending on whether or not the schema follows the standard naming pattern for collections.</span></span> <span data-ttu-id="065c5-172">Questa operazione viene descritta più dettagliatamente nei [tipi di raccolta nei contratti dati](collection-types-in-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="065c5-172">This is described in more detail in [Collection Types in Data Contracts](collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="065c5-173">Le associazioni normalmente vengono importate come un tipo <xref:System.Collections.Generic.Dictionary%602> o un contratto dati della raccolta che deriva dall'oggetto dizionario.</span><span class="sxs-lookup"><span data-stu-id="065c5-173">Associations are normally imported as either a <xref:System.Collections.Generic.Dictionary%602> or a collection data contract that derives from the dictionary object.</span></span> <span data-ttu-id="065c5-174">Si consideri ad esempio lo schema seguente.</span><span class="sxs-lookup"><span data-stu-id="065c5-174">For example, consider the following schema.</span></span>  
  
 [!code-xml[c_SchemaImportExport#13](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/common/source.config#13)]  
  
 <span data-ttu-id="065c5-175">Questo schema viene importato come segue (vengono visualizzati i campi anziché le proprietà per migliorare la leggibilità).</span><span class="sxs-lookup"><span data-stu-id="065c5-175">This would be imported as follows (fields are shown instead of properties for readability).</span></span>  
  
 [!code-csharp[c_SchemaImportExport#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#6)]
 [!code-vb[c_SchemaImportExport#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#6)]  
  
 <span data-ttu-id="065c5-176">È possibile personalizzare i tipi di raccolta generati per tali modelli di schema.</span><span class="sxs-lookup"><span data-stu-id="065c5-176">It is possible to customize the collection types that are generated for such schema patterns.</span></span> <span data-ttu-id="065c5-177">Ad esempio, è possibile generare raccolte che derivano da <xref:System.ComponentModel.BindingList%601> anziché dalla classe <xref:System.Collections.Generic.List%601> per associare il tipo a una casella di riepilogo e fare in modo che venga aggiornato automaticamente quando il contenuto della raccolta viene modificato.</span><span class="sxs-lookup"><span data-stu-id="065c5-177">For example, you may want to generate collections deriving from the <xref:System.ComponentModel.BindingList%601> instead of the <xref:System.Collections.Generic.List%601> class in order to bind the type to a list box and have it be automatically updated when the contents of the collection change.</span></span> <span data-ttu-id="065c5-178">A questo scopo, impostare la proprietà <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> della classe <xref:System.Runtime.Serialization.ImportOptions> su un elenco di tipi di raccolta da usare (successivamente indicati come i tipi a cui si fa riferimento).</span><span class="sxs-lookup"><span data-stu-id="065c5-178">To do this, set the <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> property of the <xref:System.Runtime.Serialization.ImportOptions> class to a list of collection types to be used (hereafter known as the referenced types).</span></span> <span data-ttu-id="065c5-179">Quando si importa una raccolta, questo elenco di tipi di raccolta a cui si fa riferimento viene analizzato e la raccolta più corrispondente viene usata, se ne viene trovata una.</span><span class="sxs-lookup"><span data-stu-id="065c5-179">When importing any collection, this list of referenced collection types is scanned and the best-matching collection is used if one is found.</span></span> <span data-ttu-id="065c5-180">Le associazioni vengono messe in corrispondenza solo con i tipi che implementano l'interfaccia <xref:System.Collections.IDictionary> generica o non generica, mentre gli elenchi vengono messi in corrispondenza con qualsiasi tipo di raccolta supportato.</span><span class="sxs-lookup"><span data-stu-id="065c5-180">Associations are matched only against types that implement either the generic or the nongeneric <xref:System.Collections.IDictionary> interface, while lists are matched against any supported collection type.</span></span>  
  
 <span data-ttu-id="065c5-181">Ad esempio, se la proprietà <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> è impostata su una classe <xref:System.ComponentModel.BindingList%601>, the `people` nell'esempio precedente viene generato come segue.</span><span class="sxs-lookup"><span data-stu-id="065c5-181">For example, if the <xref:System.Runtime.Serialization.ImportOptions.ReferencedCollectionTypes%2A> property is set to a <xref:System.ComponentModel.BindingList%601>, the `people` type in the preceding example is generated as follows.</span></span>  
  
 [!code-csharp[C_SchemaImportExport#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_schemaimportexport/cs/source.cs#7)]
 [!code-vb[C_SchemaImportExport#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_schemaimportexport/vb/source.vb#7)]  
  
 <span data-ttu-id="065c5-182">Un tipo generico chiuso è considerato la corrispondenza migliore,</span><span class="sxs-lookup"><span data-stu-id="065c5-182">A closed generic is considered the best match.</span></span> <span data-ttu-id="065c5-183">ad esempio, se i tipi `BindingList(Of Integer)` e <xref:System.Collections.ArrayList> vengono passati alla raccolta di tipi a cui si fa riferimento, qualsiasi elenco di numeri interi trovato nello schema viene importato come un tipo `BindingList(Of Integer)`.</span><span class="sxs-lookup"><span data-stu-id="065c5-183">For example, if the types `BindingList(Of Integer)` and <xref:System.Collections.ArrayList> are passed to the collection of referenced types, any lists of integers found in schema are imported as a `BindingList(Of Integer)`.</span></span> <span data-ttu-id="065c5-184">Qualsiasi altro elenco, ad esempio, un `List(Of String)`, viene importato come un `ArrayList`.</span><span class="sxs-lookup"><span data-stu-id="065c5-184">Any other lists, for example, a `List(Of String)`, are imported as an `ArrayList`.</span></span>  
  
 <span data-ttu-id="065c5-185">Se viene aggiunto un tipo che implementa l'interfaccia `IDictionary` generica alla raccolta di tipi a cui si fa riferimento, i relativi parametri del tipo devono essere completamente aperti o completamente chiusi.</span><span class="sxs-lookup"><span data-stu-id="065c5-185">If a type that implements the generic `IDictionary` interface is added to the collection of referenced types, its type parameters must either be fully open or fully closed.</span></span>  
  
 <span data-ttu-id="065c5-186">Non è consentito l'uso di duplicati.</span><span class="sxs-lookup"><span data-stu-id="065c5-186">Duplicates are not allowed.</span></span> <span data-ttu-id="065c5-187">Ad esempio, non è possibile aggiungere `List(Of Integer)` e `Collection(Of Integer)` ai tipi a cui si fa riferimento.</span><span class="sxs-lookup"><span data-stu-id="065c5-187">For example, you cannot add both a `List(Of Integer)` and a `Collection(Of Integer)` to the referenced types.</span></span> <span data-ttu-id="065c5-188">Questa operazione renderebbe impossibile determinare quale elemento deve essere usato quando nello schema è presente un elenco di numeri interi.</span><span class="sxs-lookup"><span data-stu-id="065c5-188">That would make it impossible to determine which should be used when a list of integers is found in schema.</span></span> <span data-ttu-id="065c5-189">I duplicati verranno rilevati solo se nello schema esiste un tipo che espone il problema dei duplicati.</span><span class="sxs-lookup"><span data-stu-id="065c5-189">Duplicates will be detected only if there is a type in schema that exposes the duplicates problem.</span></span> <span data-ttu-id="065c5-190">Se ad esempio lo schema importato non contiene elenchi di numeri interi, è consentito avere sia `List(Of Integer)` che `Collection(Of Integer)` nella raccolta di tipi a cui si fa riferimento, ma nessuno dei due elementi eserciterà alcun effetto.</span><span class="sxs-lookup"><span data-stu-id="065c5-190">For example, if the imported schema does not contain lists of integers, it is allowed to have both the `List(Of Integer)` and the `Collection(Of Integer)` in the referenced types collection, but neither will have any effect.</span></span>  
  
 <span data-ttu-id="065c5-191">Il meccanismo dei tipi della raccolta a cui si fa riferimento funziona ugualmente per le raccolte di tipi complessi (incluse le raccolte di altre raccolte) e non solo per raccolte di primitivi.</span><span class="sxs-lookup"><span data-stu-id="065c5-191">The referenced collection types mechanism works equally well for collections of complex types (including collections of other collections), and not just for collections of primitives.</span></span>  
  
 <span data-ttu-id="065c5-192">La `ReferencedCollectionTypes` proprietà corrisponde all'opzione **opzione/collectionType** dello strumento Svcutil. exe.</span><span class="sxs-lookup"><span data-stu-id="065c5-192">The `ReferencedCollectionTypes` property corresponds to the **/collectionType** switch on the SvcUtil.exe tool.</span></span> <span data-ttu-id="065c5-193">Si noti che per fare riferimento a più tipi di raccolta, l'opzione **opzione/collectionType** deve essere specificata più volte.</span><span class="sxs-lookup"><span data-stu-id="065c5-193">Note that to reference multiple collection types, the **/collectionType** switch must be specified multiple times.</span></span> <span data-ttu-id="065c5-194">Se il tipo non è presente in MsCorLib. dll, è necessario fare riferimento anche all'assembly usando l'opzione **/Reference** .</span><span class="sxs-lookup"><span data-stu-id="065c5-194">If the type is not in the MsCorLib.dll, its assembly must also be referenced using the **/reference** switch.</span></span>  
  
#### <a name="import-options-referencing-existing-types"></a><span data-ttu-id="065c5-195">Opzioni di importazione: riferimento ai tipi esistenti</span><span class="sxs-lookup"><span data-stu-id="065c5-195">Import Options: Referencing Existing Types</span></span>  
 <span data-ttu-id="065c5-196">Occasionalmente, i tipi nello schema corrispondono ai tipi di .NET Framework esistenti e non è necessario generare questi tipi da zero.</span><span class="sxs-lookup"><span data-stu-id="065c5-196">Occasionally, types in schema correspond to existing .NET Framework types, and there is no need to generate these types from scratch.</span></span> <span data-ttu-id="065c5-197">(questa sezione si applica solo ai tipi non di raccolta.</span><span class="sxs-lookup"><span data-stu-id="065c5-197">(This section applies only to noncollection types.</span></span> <span data-ttu-id="065c5-198">Per i tipi di raccolta, vedere la sezione precedente).</span><span class="sxs-lookup"><span data-stu-id="065c5-198">For collection types, see the preceding section.)</span></span>  
  
 <span data-ttu-id="065c5-199">Ad esempio, è possibile che si disponga di un contratto dati "Person" standard per tutta l'azienda che si desidera usare sempre quando si rappresenta una persona.</span><span class="sxs-lookup"><span data-stu-id="065c5-199">For example, you may have a standard company-wide "Person" data contract type that you always want used when representing a person.</span></span> <span data-ttu-id="065c5-200">Ogni volta che un servizio usa questo tipo e lo schema è presente nei metadati del servizio, è possibile riutilizzare il tipo `Person` esistente durante l'importazione di questo schema anziché generare un nuovo tipo per ogni servizio.</span><span class="sxs-lookup"><span data-stu-id="065c5-200">Whenever some service makes use of this type, and its schema appears in the service metadata, you may want to reuse the existing `Person` type when importing this schema instead of generating a new one for every service.</span></span>  
  
 <span data-ttu-id="065c5-201">A tale scopo, passare un elenco di tipi di .NET Framework che si desidera riutilizzare nella raccolta <xref:System.Runtime.Serialization.ImportOptions.ReferencedTypes%2A> restituita dalla proprietà sulla <xref:System.Runtime.Serialization.ImportOptions> classe.</span><span class="sxs-lookup"><span data-stu-id="065c5-201">To do this, pass a list of .NET Framework types that you want to reuse into the collection the <xref:System.Runtime.Serialization.ImportOptions.ReferencedTypes%2A> property returns on the <xref:System.Runtime.Serialization.ImportOptions> class.</span></span> <span data-ttu-id="065c5-202">Se uno di questi tipi presenta un nome del contratto dati e un spazio dei nomi corrispondenti al nome e allo spazio dei nomi di un tipo di schema, viene eseguito un confronto strutturale.</span><span class="sxs-lookup"><span data-stu-id="065c5-202">If any of these types have a data contract name and namespace that matches the name and namespace of a schema type, a structural comparison is performed.</span></span> <span data-ttu-id="065c5-203">Se viene determinato che i tipi hanno sia nomi corrispondenti che strutture corrispondenti, il tipo di .NET Framework esistente viene riutilizzato anziché generarne uno nuovo.</span><span class="sxs-lookup"><span data-stu-id="065c5-203">If it is determined that the types have both matching names and matching structures, the existing .NET Framework type is reused instead of generating a new one.</span></span> <span data-ttu-id="065c5-204">Se corrisponde solo il nome ma non la struttura, viene generata un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="065c5-204">If only the name matches but not the structure, an exception is thrown.</span></span> <span data-ttu-id="065c5-205">Si noti che non è consentito il controllo delle versioni quando si fa riferimento ai tipi (ad esempio, aggiungendo nuovi membri dati facoltativi).</span><span class="sxs-lookup"><span data-stu-id="065c5-205">Note that there is no allowance for versioning when referencing types (for example, adding new optional data members).</span></span> <span data-ttu-id="065c5-206">Le strutture devono corrispondere perfettamente.</span><span class="sxs-lookup"><span data-stu-id="065c5-206">The structures must match exactly.</span></span>  
  
 <span data-ttu-id="065c5-207">È possibile aggiungere più tipi con lo stesso nome del contratto dati e lo stesso spazio dei nomi alla raccolta di tipi a cui si fa riferimento, fintanto che non vengono importati tipi dello schema con tale nome e spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="065c5-207">It is legal to add multiple types with the same data contract name and namespace to the referenced types collection, as long as no schema types are imported with that name and namespace.</span></span> <span data-ttu-id="065c5-208">In questo modo è possibile aggiungere facilmente tutti i tipi di un assembly alla raccolta senza temere che vengano creati duplicati dei tipi che non sono presenti nello schema.</span><span class="sxs-lookup"><span data-stu-id="065c5-208">This allows you to easily add all the types in an assembly to the collection without worrying about duplicates for types that do not actually occur in schema.</span></span>  
  
 <span data-ttu-id="065c5-209">La `ReferencedTypes` proprietà corrisponde all'opzione **/Reference** in determinate modalità di funzionamento dello strumento Svcutil. exe.</span><span class="sxs-lookup"><span data-stu-id="065c5-209">The `ReferencedTypes` property corresponds to the **/reference** switch in certain modes of operation of the Svcutil.exe tool.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="065c5-210">Quando si usa Svcutil. exe o (in Visual Studio) gli strumenti di **Aggiungi riferimento al servizio** , viene fatto automaticamente riferimento a tutti i tipi in mscorlib. dll.</span><span class="sxs-lookup"><span data-stu-id="065c5-210">When using the Svcutil.exe or (in Visual Studio) the **Add Service Reference** tools, all of the types in MsCorLib.dll are automatically referenced.</span></span>  
  
#### <a name="import-options-importing-non-datacontract-schema-as-ixmlserializable-types"></a><span data-ttu-id="065c5-211">Opzioni di importazione: importazione di schemi diversi dal contratto dati come tipi IXmlSerializable</span><span class="sxs-lookup"><span data-stu-id="065c5-211">Import Options: Importing Non-DataContract Schema as IXmlSerializable types</span></span>  
 <span data-ttu-id="065c5-212"><xref:System.Runtime.Serialization.XsdDataContractImporter> supporta un sottoinsieme limitato dello schema.</span><span class="sxs-lookup"><span data-stu-id="065c5-212">The <xref:System.Runtime.Serialization.XsdDataContractImporter> supports a limited subset of the schema.</span></span> <span data-ttu-id="065c5-213">Se sono presenti costrutti dello schema non supportati (ad esempio, attributi XML), il tentativo di importazione non riesce e viene generata un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="065c5-213">If unsupported schema constructs are present (for example, XML attributes), the import attempt fails with an exception.</span></span> <span data-ttu-id="065c5-214">Tuttavia, l'impostazione della proprietà <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> su `true` estende l'intervallo di schemi supportati.</span><span class="sxs-lookup"><span data-stu-id="065c5-214">However, setting the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> property to `true` extends the range of schema supported.</span></span> <span data-ttu-id="065c5-215">Se impostato su `true`, <xref:System.Runtime.Serialization.XsdDataContractImporter> genera tipi che implementano l'interfaccia <xref:System.Xml.Serialization.IXmlSerializable>.</span><span class="sxs-lookup"><span data-stu-id="065c5-215">When set to `true`, the <xref:System.Runtime.Serialization.XsdDataContractImporter> generates types that implement the <xref:System.Xml.Serialization.IXmlSerializable> interface.</span></span> <span data-ttu-id="065c5-216">In questo modo viene consentito l'accesso diretto alla rappresentazione XML di questi tipi.</span><span class="sxs-lookup"><span data-stu-id="065c5-216">This enables direct access to the XML representation of these types.</span></span>  
  
##### <a name="design-considerations"></a><span data-ttu-id="065c5-217">Considerazioni sulla progettazione</span><span class="sxs-lookup"><span data-stu-id="065c5-217">Design Considerations</span></span>  
  
- <span data-ttu-id="065c5-218">Può risultare difficile lavorare direttamente con la rappresentazione XML con tipizzazione debole,</span><span class="sxs-lookup"><span data-stu-id="065c5-218">It may be difficult to work with the weakly typed XML representation directly.</span></span> <span data-ttu-id="065c5-219">pertanto è consigliabile usare un motore di serializzazione alternativo, ad esempio <xref:System.Xml.Serialization.XmlSerializer>, per lavorare con schemi non compatibili con i contratti dati in modo fortemente tipizzato.</span><span class="sxs-lookup"><span data-stu-id="065c5-219">Consider using an alternative serialization engine, such as the <xref:System.Xml.Serialization.XmlSerializer>, to work with schema not compatible with data contracts in a strongly typed way.</span></span> <span data-ttu-id="065c5-220">Per ulteriori informazioni, vedere [utilizzo della classe XmlSerializer](using-the-xmlserializer-class.md).</span><span class="sxs-lookup"><span data-stu-id="065c5-220">For more information, see [Using the XmlSerializer Class](using-the-xmlserializer-class.md).</span></span>  
  
- <span data-ttu-id="065c5-221">Alcuni costrutti dello schema non possono essere importati da <xref:System.Runtime.Serialization.XsdDataContractImporter> anche se la proprietà <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> è impostata su `true`.</span><span class="sxs-lookup"><span data-stu-id="065c5-221">Some schema constructs cannot be imported by the <xref:System.Runtime.Serialization.XsdDataContractImporter> even when the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> property is set to `true`.</span></span> <span data-ttu-id="065c5-222">Anche in questo caso, è consigliabile usare <xref:System.Xml.Serialization.XmlSerializer>.</span><span class="sxs-lookup"><span data-stu-id="065c5-222">Again, consider using the <xref:System.Xml.Serialization.XmlSerializer> for such cases.</span></span>  
  
- <span data-ttu-id="065c5-223">I costrutti dello schema supportati sia quando è che <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> `true` `false` in sono descritti in [riferimento allo schema del contratto dati](data-contract-schema-reference.md).</span><span class="sxs-lookup"><span data-stu-id="065c5-223">The exact schema constructs that are supported both when <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> is `true` or `false` are described in [Data Contract Schema Reference](data-contract-schema-reference.md).</span></span>  
  
- <span data-ttu-id="065c5-224">Gli schemi per i tipi <xref:System.Xml.Serialization.IXmlSerializable> generati non conservano la fedeltà quando vengono importati ed esportati.</span><span class="sxs-lookup"><span data-stu-id="065c5-224">Schema for generated <xref:System.Xml.Serialization.IXmlSerializable> types do not retain fidelity when imported and exported.</span></span> <span data-ttu-id="065c5-225">In altre parole, se si esporta lo schema dai tipi generati e lo si importa come classi, non si ottiene lo schema originale.</span><span class="sxs-lookup"><span data-stu-id="065c5-225">That is, exporting the schema from the generated types and importing as classes does not return the original schema.</span></span>  
  
 <span data-ttu-id="065c5-226">È possibile combinare l'opzione <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> con l'opzione <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A> descritta in precedenza.</span><span class="sxs-lookup"><span data-stu-id="065c5-226">It is possible to combine the <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> option with the <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A> option previously described.</span></span> <span data-ttu-id="065c5-227">Per i tipi che devono essere generati come implementazioni <xref:System.Xml.Serialization.IXmlSerializable>, il controllo strutturale viene ignorato se si usa la funzionalità <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A>.</span><span class="sxs-lookup"><span data-stu-id="065c5-227">For types that have to be generated as <xref:System.Xml.Serialization.IXmlSerializable> implementations, the structural check is skipped when using the <xref:System.ServiceModel.Description.ServiceContractGenerator.ReferencedTypes%2A> feature.</span></span>  
  
 <span data-ttu-id="065c5-228">L' <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> opzione corrisponde all'opzione **/importXmlTypes** dello strumento Svcutil. exe.</span><span class="sxs-lookup"><span data-stu-id="065c5-228">The <xref:System.Runtime.Serialization.ImportOptions.ImportXmlType%2A> option corresponds to the **/importXmlTypes** switch on the Svcutil.exe tool.</span></span>  
  
##### <a name="working-with-generated-ixmlserializable-types"></a><span data-ttu-id="065c5-229">Utilizzo dei tipi IXmlSerializable generati</span><span class="sxs-lookup"><span data-stu-id="065c5-229">Working with Generated IXmlSerializable Types</span></span>  
 <span data-ttu-id="065c5-230">I tipi `IXmlSerializable` generati contengono un campo privato denominato "nodesField" che restituisce una matrice di oggetti <xref:System.Xml.XmlNode>.</span><span class="sxs-lookup"><span data-stu-id="065c5-230">The generated `IXmlSerializable` types contain a private field, named "nodesField," that returns an array of <xref:System.Xml.XmlNode> objects.</span></span> <span data-ttu-id="065c5-231">Quando si deserializza un'istanza di questo tipo, è possibile accedere ai dati XML direttamente tramite questo campo usando il modello DOM XML.</span><span class="sxs-lookup"><span data-stu-id="065c5-231">When deserializing an instance of such a type, you can access the XML data directly through this field by using the XML Document Object Model.</span></span> <span data-ttu-id="065c5-232">Quando si serializza un'istanza di questo tipo, è possibile impostare questo campo sui dati XML desiderati e verrà serializzato.</span><span class="sxs-lookup"><span data-stu-id="065c5-232">When serializing an instance of this type, you can set this field to the desired XML data and it will be serialized.</span></span>  
  
 <span data-ttu-id="065c5-233">Questa operazione viene eseguita tramite l'implementazione dell'interfaccia `IXmlSerializable`.</span><span class="sxs-lookup"><span data-stu-id="065c5-233">This is accomplished through the `IXmlSerializable` implementation.</span></span> <span data-ttu-id="065c5-234">Nel tipo `IXmlSerializable` generato, l'implementazione <xref:System.Xml.Serialization.IXmlSerializable.ReadXml%2A> chiama il metodo <xref:System.Runtime.Serialization.XmlSerializableServices.ReadNodes%2A> della classe <xref:System.Runtime.Serialization.XmlSerializableServices>.</span><span class="sxs-lookup"><span data-stu-id="065c5-234">In the generated `IXmlSerializable` type, the <xref:System.Xml.Serialization.IXmlSerializable.ReadXml%2A> implementation calls the <xref:System.Runtime.Serialization.XmlSerializableServices.ReadNodes%2A> method of the <xref:System.Runtime.Serialization.XmlSerializableServices> class.</span></span> <span data-ttu-id="065c5-235">Si tratta di un metodo helper che converte il codice XML fornito tramite un <xref:System.Xml.XmlReader> in una matrice di oggetti <xref:System.Xml.XmlNode>.</span><span class="sxs-lookup"><span data-stu-id="065c5-235">The method is a helper method that converts XML provided through an <xref:System.Xml.XmlReader> to an array of <xref:System.Xml.XmlNode> objects.</span></span> <span data-ttu-id="065c5-236">L'implementazione <xref:System.Xml.Serialization.IXmlSerializable.WriteXml%2A> esegue l'operazione inversa e converte la matrice di oggetti `XmlNode` a una sequenza di chiamate a <xref:System.Xml.XmlWriter>.</span><span class="sxs-lookup"><span data-stu-id="065c5-236">The <xref:System.Xml.Serialization.IXmlSerializable.WriteXml%2A> implementation does the opposite and converts the array of `XmlNode` objects to a sequence of <xref:System.Xml.XmlWriter> calls.</span></span> <span data-ttu-id="065c5-237">Questa operazione viene eseguita mediante il metodo <xref:System.Runtime.Serialization.XmlSerializableServices.WriteNodes%2A>.</span><span class="sxs-lookup"><span data-stu-id="065c5-237">This is accomplished using the <xref:System.Runtime.Serialization.XmlSerializableServices.WriteNodes%2A> method.</span></span>  
  
 <span data-ttu-id="065c5-238">È possibile eseguire il processo di esportazione dello schema sulle classi `IXmlSerializable` generate.</span><span class="sxs-lookup"><span data-stu-id="065c5-238">It is possible to run the schema export process on the generated `IXmlSerializable` classes.</span></span> <span data-ttu-id="065c5-239">Come illustrato in precedenza, non è possibile ottenere lo schema originale.</span><span class="sxs-lookup"><span data-stu-id="065c5-239">As previously stated, you will not get the original schema back.</span></span> <span data-ttu-id="065c5-240">Si otterrà invece il tipo XSD standard "anyType", che è un carattere jolly per qualsiasi tipo XSD.</span><span class="sxs-lookup"><span data-stu-id="065c5-240">Instead, you will get the "anyType" standard XSD type, which is a wildcard for any XSD type.</span></span>  
  
 <span data-ttu-id="065c5-241">Questa operazione viene eseguita applicando l' <xref:System.Xml.Serialization.XmlSchemaProviderAttribute> attributo alle classi generate `IXmlSerializable` e specificando un metodo che chiama il <xref:System.Runtime.Serialization.XmlSerializableServices.AddDefaultSchema%2A> metodo per generare il tipo "anyType".</span><span class="sxs-lookup"><span data-stu-id="065c5-241">This is accomplished by applying the <xref:System.Xml.Serialization.XmlSchemaProviderAttribute> attribute to the generated `IXmlSerializable` classes and specifying a method that calls the <xref:System.Runtime.Serialization.XmlSerializableServices.AddDefaultSchema%2A> method to generate the "anyType" type.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="065c5-242">Il tipo <xref:System.Runtime.Serialization.XmlSerializableServices> esiste esclusivamente per supportare questa particolare funzionalità.</span><span class="sxs-lookup"><span data-stu-id="065c5-242">The <xref:System.Runtime.Serialization.XmlSerializableServices> type exists solely to support this particular feature.</span></span> <span data-ttu-id="065c5-243">Non è consigliabile usarlo per qualsiasi altro scopo.</span><span class="sxs-lookup"><span data-stu-id="065c5-243">It is not recommended for use for any other purpose.</span></span>  
  
#### <a name="import-options-advanced-options"></a><span data-ttu-id="065c5-244">Opzioni di importazione: opzioni avanzate</span><span class="sxs-lookup"><span data-stu-id="065c5-244">Import Options: Advanced Options</span></span>  
 <span data-ttu-id="065c5-245">Di seguito sono elencate le opzioni importazione avanzate:</span><span class="sxs-lookup"><span data-stu-id="065c5-245">The following are advanced import options:</span></span>  
  
- <span data-ttu-id="065c5-246">Proprietà <xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A>.</span><span class="sxs-lookup"><span data-stu-id="065c5-246"><xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A> property.</span></span> <span data-ttu-id="065c5-247">Specifica la classe <xref:System.CodeDom.Compiler.CodeDomProvider> da usare per generare il codice per le classi generate.</span><span class="sxs-lookup"><span data-stu-id="065c5-247">Specify the <xref:System.CodeDom.Compiler.CodeDomProvider> to use to generate the code for the generated classes.</span></span> <span data-ttu-id="065c5-248">Il meccanismo di importazione tenta di evitare funzionalità non supportate da <xref:System.CodeDom.Compiler.CodeDomProvider>.</span><span class="sxs-lookup"><span data-stu-id="065c5-248">The import mechanism attempts to avoid features that the <xref:System.CodeDom.Compiler.CodeDomProvider> does not support.</span></span> <span data-ttu-id="065c5-249">Se <xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A> non è impostato, viene utilizzato il set completo di .NET Framework funzionalità senza restrizioni.</span><span class="sxs-lookup"><span data-stu-id="065c5-249">If the <xref:System.Runtime.Serialization.ImportOptions.CodeProvider%2A> is not set, the full set of .NET Framework features is used with no restrictions.</span></span>  
  
- <span data-ttu-id="065c5-250">Proprietà <xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A>.</span><span class="sxs-lookup"><span data-stu-id="065c5-250"><xref:System.Runtime.Serialization.ImportOptions.DataContractSurrogate%2A> property.</span></span> <span data-ttu-id="065c5-251">È possibile specificare un'implementazione <xref:System.Runtime.Serialization.IDataContractSurrogate> con questa proprietà.</span><span class="sxs-lookup"><span data-stu-id="065c5-251">An <xref:System.Runtime.Serialization.IDataContractSurrogate> implementation can be specified with this property.</span></span> <span data-ttu-id="065c5-252"><xref:System.Runtime.Serialization.IDataContractSurrogate> personalizza il processo di importazione.</span><span class="sxs-lookup"><span data-stu-id="065c5-252">The <xref:System.Runtime.Serialization.IDataContractSurrogate> customizes the import process.</span></span> <span data-ttu-id="065c5-253">Per ulteriori informazioni, vedere [surrogati del contratto dati](../extending/data-contract-surrogates.md).</span><span class="sxs-lookup"><span data-stu-id="065c5-253">For more information, see [Data Contract Surrogates](../extending/data-contract-surrogates.md).</span></span> <span data-ttu-id="065c5-254">Per impostazione predefinita, non viene usato alcun surrogato.</span><span class="sxs-lookup"><span data-stu-id="065c5-254">By default, no surrogate is used.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="065c5-255">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="065c5-255">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractSerializer>
- <xref:System.Runtime.Serialization.XsdDataContractImporter>
- <xref:System.Runtime.Serialization.XsdDataContractExporter>
- <xref:System.Runtime.Serialization.ImportOptions>
- [<span data-ttu-id="065c5-256">Informazioni di riferimento sullo schema del contratto di dati</span><span class="sxs-lookup"><span data-stu-id="065c5-256">Data Contract Schema Reference</span></span>](data-contract-schema-reference.md)
- [<span data-ttu-id="065c5-257">Surrogati del contratto dati</span><span class="sxs-lookup"><span data-stu-id="065c5-257">Data Contract Surrogates</span></span>](../extending/data-contract-surrogates.md)
- [<span data-ttu-id="065c5-258">Importazione ed esportazione degli schemi</span><span class="sxs-lookup"><span data-stu-id="065c5-258">Schema Import and Export</span></span>](schema-import-and-export.md)
- [<span data-ttu-id="065c5-259">Esportazione di schemi da classi</span><span class="sxs-lookup"><span data-stu-id="065c5-259">Exporting Schemas from Classes</span></span>](exporting-schemas-from-classes.md)
- [<span data-ttu-id="065c5-260">Informazioni di riferimento sullo schema del contratto di dati</span><span class="sxs-lookup"><span data-stu-id="065c5-260">Data Contract Schema Reference</span></span>](data-contract-schema-reference.md)
