---
title: Attestazioni e token
ms.date: 03/30/2017
helpviewer_keywords:
- claims [WCF], and tokens
ms.assetid: eff167f3-33f8-483d-a950-aa3e9f97a189
ms.openlocfilehash: cbc97f2224bce640757e1cef88fe325db477cfd7
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/09/2020
ms.locfileid: "84587027"
---
# <a name="claims-and-tokens"></a><span data-ttu-id="c7c76-102">Attestazioni e token</span><span class="sxs-lookup"><span data-stu-id="c7c76-102">Claims and Tokens</span></span>

<span data-ttu-id="c7c76-103">In questo argomento vengono descritti i vari tipi di attestazione creati da Windows Communication Foundation (WCF) dai token predefiniti supportati.</span><span class="sxs-lookup"><span data-stu-id="c7c76-103">This topic describes the various claim types that Windows Communication Foundation (WCF) creates from the default tokens that it supports.</span></span>

<span data-ttu-id="c7c76-104">È possibile esaminare le attestazioni di una credenziale client usando le classi <xref:System.IdentityModel.Claims.ClaimSet> e <xref:System.IdentityModel.Claims.Claim>.</span><span class="sxs-lookup"><span data-stu-id="c7c76-104">You can examine the claims of a client credential by using the <xref:System.IdentityModel.Claims.ClaimSet> and <xref:System.IdentityModel.Claims.Claim> classes.</span></span> <span data-ttu-id="c7c76-105">L'elemento `ClaimSet` contiene una raccolta di oggetti `Claim`.</span><span class="sxs-lookup"><span data-stu-id="c7c76-105">The `ClaimSet` contains a collection of `Claim` objects.</span></span> <span data-ttu-id="c7c76-106">Ogni oggetto `Claim` comprende i membri seguenti:</span><span class="sxs-lookup"><span data-stu-id="c7c76-106">Each `Claim` has the following important members:</span></span>

- <span data-ttu-id="c7c76-107">La proprietà <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> restituisce un URI (Uniform Resource Identifier) che specifica il tipo di attestazione che viene creato.</span><span class="sxs-lookup"><span data-stu-id="c7c76-107">The <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> property returns a Uniform Resource Identifier (URI) that specifies the type of claim being made.</span></span> <span data-ttu-id="c7c76-108">Ad esempio, un tipo di attestazione può essere un'identificazione personale di un certificato, nel qual caso l'URI è `http://schemas.microsoft.com/ws/20005/05/identity/claims/thumprint` .</span><span class="sxs-lookup"><span data-stu-id="c7c76-108">For example, a claim type may be a thumbprint of a certificate, in which case the URI is `http://schemas.microsoft.com/ws/20005/05/identity/claims/thumprint`.</span></span>

- <span data-ttu-id="c7c76-109">La proprietà <xref:System.IdentityModel.Claims.Claim.Right%2A> restituisce un URI che specifica il diritto dell'attestazione.</span><span class="sxs-lookup"><span data-stu-id="c7c76-109">The <xref:System.IdentityModel.Claims.Claim.Right%2A> property returns a URI that specifies the right of the claim.</span></span> <span data-ttu-id="c7c76-110">I diritti predefiniti si trovano nella classe <xref:System.IdentityModel.Claims.Rights> (<xref:System.IdentityModel.Claims.Rights.Identity%2A>, <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A>).</span><span class="sxs-lookup"><span data-stu-id="c7c76-110">Predefined rights are found in the <xref:System.IdentityModel.Claims.Rights> class (<xref:System.IdentityModel.Claims.Rights.Identity%2A>,  <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A>).</span></span>

- <span data-ttu-id="c7c76-111">La proprietà <xref:System.IdentityModel.Claims.Claim.Resource%2A> restituisce la risorsa associata all'attestazione.</span><span class="sxs-lookup"><span data-stu-id="c7c76-111">The <xref:System.IdentityModel.Claims.Claim.Resource%2A> property returns the resource associated with the claim.</span></span>

<span data-ttu-id="c7c76-112">Ogni classe <xref:System.IdentityModel.Claims.ClaimSet> ha anche una proprietà <xref:System.IdentityModel.Claims.ClaimSet.Issuer%2A> che rappresenta la classe <xref:System.IdentityModel.Claims.ClaimSet> dell'elemento `Issuer`.</span><span class="sxs-lookup"><span data-stu-id="c7c76-112">Each <xref:System.IdentityModel.Claims.ClaimSet> also has an <xref:System.IdentityModel.Claims.ClaimSet.Issuer%2A> property, which represents the <xref:System.IdentityModel.Claims.ClaimSet> of the `Issuer`.</span></span>

## <a name="windows-accounts"></a><span data-ttu-id="c7c76-113">Account di Windows</span><span class="sxs-lookup"><span data-stu-id="c7c76-113">Windows Accounts</span></span>

<span data-ttu-id="c7c76-114">Quando una credenziale client esegue il mapping a un account utente Windows, la classe <xref:System.IdentityModel.Claims.ClaimSet> risultante ha i valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="c7c76-114">Where a client credential maps to a Windows user account, the resulting <xref:System.IdentityModel.Claims.ClaimSet> has the following values:</span></span>

- <span data-ttu-id="c7c76-115">`Issuer` è il valore restituito dalla proprietà Windows statica della classe <xref:System.IdentityModel.Claims.ClaimSet>.</span><span class="sxs-lookup"><span data-stu-id="c7c76-115">The `Issuer` is the value returned by the static Windows property of the <xref:System.IdentityModel.Claims.ClaimSet> class.</span></span>

- <span data-ttu-id="c7c76-116">Le attestazioni incluse nella raccolta sono:</span><span class="sxs-lookup"><span data-stu-id="c7c76-116">The claims in the collection are:</span></span>

  - <span data-ttu-id="c7c76-117">Una classe <xref:System.IdentityModel.Claims.Claim> con un valore SID <xref:System.IdentityModel.Claims.Claim.ClaimType%2A>, un valore <xref:System.IdentityModel.Claims.Claim.Right%2A> della proprietà `Identity` e una proprietà <xref:System.IdentityModel.Claims.Claim.Resource%2A> che restituisce il valore SID effettivo.</span><span class="sxs-lookup"><span data-stu-id="c7c76-117">A <xref:System.IdentityModel.Claims.Claim> with a <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> value of security identifier (SID), a <xref:System.IdentityModel.Claims.Claim.Right%2A> property value of `Identity`, and a <xref:System.IdentityModel.Claims.Claim.Resource%2A> that returns the actual SID value.</span></span> <span data-ttu-id="c7c76-118">Un SID è un valore univoco che il controller di dominio invia a ogni utente.</span><span class="sxs-lookup"><span data-stu-id="c7c76-118">A SID is a unique value the domain controller issues to every user.</span></span> <span data-ttu-id="c7c76-119">Il SID viene usato per identificare l'utente nelle interazioni con la protezione di Windows.</span><span class="sxs-lookup"><span data-stu-id="c7c76-119">The SID is used to identify the user in interactions with Windows security.</span></span>

  - <span data-ttu-id="c7c76-120">Una classe <xref:System.IdentityModel.Claims.Claim> con un valore SID <xref:System.IdentityModel.Claims.Claim.ClaimType%2A>, un valore <xref:System.IdentityModel.Claims.Claim.Right%2A> della proprietà `PossessProperty` e una proprietà <xref:System.IdentityModel.Claims.Claim.Resource%2A> del valore SID.</span><span class="sxs-lookup"><span data-stu-id="c7c76-120">A <xref:System.IdentityModel.Claims.Claim> with a <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> value of SID, a <xref:System.IdentityModel.Claims.Claim.Right%2A> of `PossessProperty`, and a <xref:System.IdentityModel.Claims.Claim.Resource%2A> of the SID value.</span></span>

  - <span data-ttu-id="c7c76-121">Una classe <xref:System.IdentityModel.Claims.Claim> con una proprietà <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> con valore <xref:System.IdentityModel.Claims.ClaimTypes.Name%2A>, una proprietà <xref:System.IdentityModel.Claims.Claim.Right%2A> con valore `PossessProperty` e una proprietà <xref:System.IdentityModel.Claims.Claim.Resource%2A> della stringa che contiene il nome utente (ad esempio, "MYMACHINE\Bob").</span><span class="sxs-lookup"><span data-stu-id="c7c76-121">A <xref:System.IdentityModel.Claims.Claim> with a <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> of <xref:System.IdentityModel.Claims.ClaimTypes.Name%2A>, a <xref:System.IdentityModel.Claims.Claim.Right%2A> of `PossessProperty` and a <xref:System.IdentityModel.Claims.Claim.Resource%2A> of string containing the user name (for example, "MYMACHINE\Bob").</span></span>

  - <span data-ttu-id="c7c76-122">Attestazioni SID aggiuntive con la proprietà <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A> per i vari gruppi ai quali appartiene l'utente.</span><span class="sxs-lookup"><span data-stu-id="c7c76-122">Additional SID claims with <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A> for the various groups the user belongs to.</span></span>

## <a name="certificates"></a><span data-ttu-id="c7c76-123">Certificati</span><span class="sxs-lookup"><span data-stu-id="c7c76-123">Certificates</span></span>

<span data-ttu-id="c7c76-124">Quando la credenziale client è un certificato, la classe <xref:System.IdentityModel.Claims.ClaimSet> risultante ha i valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="c7c76-124">Where the client credential is a certificate, the resulting <xref:System.IdentityModel.Claims.ClaimSet> has the following values:</span></span>

- <span data-ttu-id="c7c76-125">Per i certificati autocertificati, l'elemento `Issuer` è la classe <xref:System.IdentityModel.Claims.ClaimSet> stessa.</span><span class="sxs-lookup"><span data-stu-id="c7c76-125">For self-issued certificates, the `Issuer` is the <xref:System.IdentityModel.Claims.ClaimSet> itself.</span></span> <span data-ttu-id="c7c76-126">La classe <xref:System.IdentityModel.Claims.ClaimSet> restituisce una proprietà <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> con valore <xref:System.IdentityModel.Claims.ClaimTypes.Thumbprint%2A>, una proprietà <xref:System.IdentityModel.Claims.Claim.Right%2A> con valore `Identity` e un valore della proprietà <xref:System.IdentityModel.Claims.Claim.Resource%2A> che corrisponde a una matrice <xref:System.Byte> contenente l'identificazione personale del certificato.</span><span class="sxs-lookup"><span data-stu-id="c7c76-126">The <xref:System.IdentityModel.Claims.ClaimSet> returns a <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> of <xref:System.IdentityModel.Claims.ClaimTypes.Thumbprint%2A>, a <xref:System.IdentityModel.Claims.Claim.Right%2A> of `Identity`, and a <xref:System.IdentityModel.Claims.Claim.Resource%2A> value that is a <xref:System.Byte> array containing the thumbprint of the certificate.</span></span>

- <span data-ttu-id="c7c76-127">Per un certificato emesso da un'autorità di certificazione, l'emittente corrisponde al valore `ClaimSet` che rappresenta il certificato dell'autorità di certificazione.</span><span class="sxs-lookup"><span data-stu-id="c7c76-127">For a certificate issued by a certification authority, the issuer is the `ClaimSet` representing the certification authority’s certificate.</span></span>

- <span data-ttu-id="c7c76-128">Gli elementi `Claims` presenti nella raccolta includono:</span><span class="sxs-lookup"><span data-stu-id="c7c76-128">The `Claims` in the collection include:</span></span>

  - <span data-ttu-id="c7c76-129">Un elemento `Claim` con una proprietà `ClaimType` con valore Thumbprint, una proprietà `Right` con valore PossessProperty e una proprietà `Resource` che corrisponde a una matrice di byte contenente l'identificazione personale del certificato.</span><span class="sxs-lookup"><span data-stu-id="c7c76-129">A `Claim` with a `ClaimType` of Thumbprint, a `Right` of PossessProperty, and a `Resource` that is a byte array containing the thumbprint of the certificate</span></span>

  - <span data-ttu-id="c7c76-130">Attestazioni PossessProperty aggiuntive di vario tipo, tra cui X500DistinguishedName, Dns, Name, Upn e Rsa rappresentano le varie proprietà del certificato.</span><span class="sxs-lookup"><span data-stu-id="c7c76-130">Additional PossessProperty claims of various types, including X500DistinguishedName, Dns, Name, Upn, and Rsa, represent various properties of the certificate.</span></span> <span data-ttu-id="c7c76-131">La risorsa per l'attestazione RSA è la chiave pubblica associata al certificato. **Nota** Se il tipo di credenziale client è un certificato di cui il servizio esegue il mapping a un account di Windows, `ClaimSet` vengono generati due oggetti.</span><span class="sxs-lookup"><span data-stu-id="c7c76-131">The resource for the Rsa claim is the public key associated with the certificate.**Note** Where the client credential type is a certificate that the service maps to a Windows account, two `ClaimSet` objects are generated.</span></span> <span data-ttu-id="c7c76-132">Il primo contiene tutte le attestazioni relative all'account di Windows e il secondo contiene tutte le attestazioni relative al certificato.</span><span class="sxs-lookup"><span data-stu-id="c7c76-132">The first contains all the claims related to the Windows account and the second contains all the claims related to the certificate.</span></span>

## <a name="user-namepassword"></a><span data-ttu-id="c7c76-133">Nome utente/Password</span><span class="sxs-lookup"><span data-stu-id="c7c76-133">User Name/Password</span></span>

<span data-ttu-id="c7c76-134">Quando la credenziale client è un nome utente/password (o equivalente) che non esegue il mapping a un account di Windows, l'oggetto `ClaimSet` risultante viene pubblicato dalla proprietà <xref:System.IdentityModel.Claims.ClaimSet.System%2A> statica della classe `ClaimSet`.</span><span class="sxs-lookup"><span data-stu-id="c7c76-134">Where the client credential is a user name/password (or equivalent) that does not map to a Windows account, the resulting `ClaimSet` is issued by the static <xref:System.IdentityModel.Claims.ClaimSet.System%2A> property of the `ClaimSet` class.</span></span> <span data-ttu-id="c7c76-135">`ClaimSet`Contiene un' `Identity` attestazione di tipo la <xref:System.IdentityModel.Claims.ClaimTypes.Name%2A> cui risorsa è il nome utente fornito dal client.</span><span class="sxs-lookup"><span data-stu-id="c7c76-135">The `ClaimSet` contains an `Identity` claim of type <xref:System.IdentityModel.Claims.ClaimTypes.Name%2A> whose resource is the user name the client provides.</span></span> <span data-ttu-id="c7c76-136">Un'attestazione corrispondente ha una proprietà `Right` di tipo `PossessProperty`.</span><span class="sxs-lookup"><span data-stu-id="c7c76-136">A corresponding claim has a `Right` of `PossessProperty`.</span></span>

## <a name="rsa-keys"></a><span data-ttu-id="c7c76-137">Chiavi RSA</span><span class="sxs-lookup"><span data-stu-id="c7c76-137">RSA Keys</span></span>

<span data-ttu-id="c7c76-138">Quando viene usata una chiave RSA non associata a un certificato, l'oggetto risultante `ClaimSet` è autocertificato e contiene un' `Identity` attestazione di tipo <xref:System.IdentityModel.Claims.ClaimTypes.Rsa%2A> la cui risorsa è la chiave RSA.</span><span class="sxs-lookup"><span data-stu-id="c7c76-138">Where an RSA key not associated with a certificate is used, the resulting `ClaimSet` is self-issued and contains an `Identity` claim of type <xref:System.IdentityModel.Claims.ClaimTypes.Rsa%2A> whose resource is the RSA key.</span></span> <span data-ttu-id="c7c76-139">Un'attestazione corrispondente ha una proprietà `Right` di tipo `PossessProperty`.</span><span class="sxs-lookup"><span data-stu-id="c7c76-139">A corresponding claim has a `Right` of `PossessProperty`.</span></span>

## <a name="saml"></a><span data-ttu-id="c7c76-140">SAML</span><span class="sxs-lookup"><span data-stu-id="c7c76-140">SAML</span></span>

<span data-ttu-id="c7c76-141">Quando il client esegue l'autenticazione con un token SAML (Security Assertions Markup Language), l'oggetto `ClaimSet` risultante viene emesso dall'entità che ha firmato il token SAML, in genere il certificato del servizio token di sicurezza (STS) che ha emesso il token SAML.</span><span class="sxs-lookup"><span data-stu-id="c7c76-141">Where the client authenticates with a Security Assertions Markup Language (SAML) token, the resulting `ClaimSet` is issued by the entity that signed the SAML token, often the certificate of the security token service (STS) that issued the SAML token.</span></span> <span data-ttu-id="c7c76-142">`ClaimSet` contiene le varie attestazioni presenti nel token SAML.</span><span class="sxs-lookup"><span data-stu-id="c7c76-142">The `ClaimSet` contains various claims as found in the SAML token.</span></span> <span data-ttu-id="c7c76-143">Se il token SAML contiene una classe `SamlSubject` con un nome `null`, verranno create un'attestazione `Identity` di tipo <xref:System.IdentityModel.Claims.ClaimTypes.NameIdentifier%2A> e un tipo di risorsa <xref:System.IdentityModel.Tokens.SamlNameIdentifierClaimResource>.</span><span class="sxs-lookup"><span data-stu-id="c7c76-143">If the SAML token contains a `SamlSubject` with a non-`null` name, then an `Identity` claim with a type of <xref:System.IdentityModel.Claims.ClaimTypes.NameIdentifier%2A> and a resource type of <xref:System.IdentityModel.Tokens.SamlNameIdentifierClaimResource> are created.</span></span>

## <a name="identity-claims-and-servicesecuritycontextisanonymous"></a><span data-ttu-id="c7c76-144">Attestazioni d'identità e ServiceSecurityContext.IsAnonymous</span><span class="sxs-lookup"><span data-stu-id="c7c76-144">Identity Claims and ServiceSecurityContext.IsAnonymous</span></span>

<span data-ttu-id="c7c76-145">Se nessuno degli `ClaimSet` oggetti risultanti dalle credenziali client contiene un'attestazione con un valore `Right` di `Identity,` , la <xref:System.ServiceModel.ServiceSecurityContext.IsAnonymous%2A> proprietà restituisce `true` .</span><span class="sxs-lookup"><span data-stu-id="c7c76-145">If none of the `ClaimSet` objects resulting from the client credentials contain a claim with a `Right` of `Identity,` then the <xref:System.ServiceModel.ServiceSecurityContext.IsAnonymous%2A> property returns `true`.</span></span> <span data-ttu-id="c7c76-146">Se sono presenti una o più di tali attestazioni, la proprietà `IsAnonymous` restituisce `false`.</span><span class="sxs-lookup"><span data-stu-id="c7c76-146">If one or more such claims are present, the `IsAnonymous` property returns `false`.</span></span>

## <a name="see-also"></a><span data-ttu-id="c7c76-147">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="c7c76-147">See also</span></span>

- <xref:System.IdentityModel.Claims.ClaimSet>
- <xref:System.IdentityModel.Claims.Claim>
- <xref:System.IdentityModel.Claims.Rights>
- <xref:System.IdentityModel.Claims.ClaimTypes>
- [<span data-ttu-id="c7c76-148">Gestione di attestazioni e autorizzazioni con il modello di identità</span><span class="sxs-lookup"><span data-stu-id="c7c76-148">Managing Claims and Authorization with the Identity Model</span></span>](managing-claims-and-authorization-with-the-identity-model.md)
