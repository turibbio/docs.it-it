---
title: Protezione dei messaggi in WCF
ms.date: 03/30/2017
ms.assetid: a80efb59-591a-4a37-bb3c-8fffa6ca0b7d
ms.openlocfilehash: 6875339df327371a79bc9b9072aca2df0bc7d3f6
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/09/2020
ms.locfileid: "84602661"
---
# <a name="message-security-in-wcf"></a><span data-ttu-id="36b4f-102">Protezione dei messaggi in WCF</span><span class="sxs-lookup"><span data-stu-id="36b4f-102">Message Security in WCF</span></span>

<span data-ttu-id="36b4f-103">Windows Communication Foundation (WCF) dispone di due modalità principali per fornire sicurezza ( `Transport` e `Message` ) e una terza modalità ( `TransportWithMessageCredential` ) che combina i due.</span><span class="sxs-lookup"><span data-stu-id="36b4f-103">Windows Communication Foundation (WCF) has two major modes for providing security (`Transport` and `Message`) and a third mode (`TransportWithMessageCredential`) that combines the two.</span></span> <span data-ttu-id="36b4f-104">In questo argomento viene illustrata la sicurezza dei messaggi e i motivi per cui è consigliabile utilizzarla.</span><span class="sxs-lookup"><span data-stu-id="36b4f-104">This topic discusses message security and the reasons to use it.</span></span>

## <a name="what-is-message-security"></a><span data-ttu-id="36b4f-105">Informazioni sulla sicurezza dei messaggi</span><span class="sxs-lookup"><span data-stu-id="36b4f-105">What Is Message Security?</span></span>

<span data-ttu-id="36b4f-106">La sicurezza dei messaggi si avvale della specifica WS-Security per proteggere i messaggi.</span><span class="sxs-lookup"><span data-stu-id="36b4f-106">Message security uses the WS-Security specification to secure messages.</span></span> <span data-ttu-id="36b4f-107">La specifica WS-Security descrive i miglioramenti apportati alla messaggistica SOAP per garantire riservatezza, integrità e autenticazione a livello di messaggio SOAP (anziché a livello di trasporto).</span><span class="sxs-lookup"><span data-stu-id="36b4f-107">The WS-Security specification describes enhancements to SOAP messaging to ensure confidentiality, integrity, and authentication at the SOAP message level (instead of the transport level).</span></span>

<span data-ttu-id="36b4f-108">In breve, la sicurezza dei messaggi differisce dalla protezione del trasporto in quanto incapsula le credenziali e le attestazioni di sicurezza in ogni messaggio insieme a qualsiasi tipo di sicurezza del messaggio (con firma o crittografia).</span><span class="sxs-lookup"><span data-stu-id="36b4f-108">In brief, message security differs from transport security by encapsulating the security credentials and claims with every message along with any message protection (signing or encryption).</span></span> <span data-ttu-id="36b4f-109">L'applicazione diretta della protezione al messaggio modificando il contenuto consente al messaggio protetto di essere indipendente per quanto concerne gli aspetti della protezione.</span><span class="sxs-lookup"><span data-stu-id="36b4f-109">Applying the security directly to the message by modifying its content allows the secured message to be self-containing with respect to the security aspects.</span></span> <span data-ttu-id="36b4f-110">Questo rende possibili alcuni scenari che non sono accessibili quando si utilizza la protezione del trasporto.</span><span class="sxs-lookup"><span data-stu-id="36b4f-110">This enables some scenarios that are not possible when transport security is used.</span></span>

## <a name="reasons-to-use-message-security"></a><span data-ttu-id="36b4f-111">Motivi per utilizzare la sicurezza dei messaggi</span><span class="sxs-lookup"><span data-stu-id="36b4f-111">Reasons to Use Message Security</span></span>

<span data-ttu-id="36b4f-112">Nella protezione a livello di messaggio tutte le informazioni sulla protezione sono incapsulate nel messaggio.</span><span class="sxs-lookup"><span data-stu-id="36b4f-112">In message-level security, all of the security information is encapsulated in the message.</span></span> <span data-ttu-id="36b4f-113">Di conseguenza, proteggere il messaggio con una protezione a livello di messaggio anziché una protezione a livello di trasporto offre i vantaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="36b4f-113">Securing the message with message-level security instead of transport-level security has the following advantages:</span></span>

- <span data-ttu-id="36b4f-114">Protezione end-to-end.</span><span class="sxs-lookup"><span data-stu-id="36b4f-114">End-to-end security.</span></span> <span data-ttu-id="36b4f-115">La sicurezza del trasporto, ad esempio Secure Sockets Layer (SSL), protegge i messaggi solo quando la comunicazione è da punto a punto.</span><span class="sxs-lookup"><span data-stu-id="36b4f-115">Transport security, such as Secure Sockets Layer (SSL) only secures messages when the communication is point-to-point.</span></span> <span data-ttu-id="36b4f-116">Se il messaggio viene instradato a uno o più intermediari SOAP (ad esempio un router) prima di raggiungere il destinatario finale, il messaggio stesso non è più protetto dopo essere stato letto da un intermediario durante la trasmissione.</span><span class="sxs-lookup"><span data-stu-id="36b4f-116">If the message is routed to one or more SOAP intermediaries (for example a router) before reaching the ultimate receiver, the message itself is not protected once an intermediary reads it from the wire.</span></span> <span data-ttu-id="36b4f-117">Inoltre, le informazioni di autenticazione del client sono disponibili solo per il primo intermediario e devono essere ritrasmesse al destinatario finale in modalità fuori banda, se necessario.</span><span class="sxs-lookup"><span data-stu-id="36b4f-117">Additionally, the client authentication information is available only to the first intermediary and must be re-transmitted to the ultimate receiver in out-of-band fashion, if necessary.</span></span> <span data-ttu-id="36b4f-118">Questo si applica anche se l'intera route utilizza la protezione SSL tra i singoli hop.</span><span class="sxs-lookup"><span data-stu-id="36b4f-118">This applies even if the entire route uses SSL security between individual hops.</span></span> <span data-ttu-id="36b4f-119">Poiché la sicurezza dei messaggi si applica direttamente al messaggio e protegge il codice XML in esso contenuto, la sicurezza segue il messaggio indipendentemente dal numero di intermediari coinvolti prima che il messaggio raggiunga il destinatario finale.</span><span class="sxs-lookup"><span data-stu-id="36b4f-119">Because message security works directly with the message and secures the XML in it, the security stays with the message regardless of how many intermediaries are involved before it reaches the ultimate receiver.</span></span> <span data-ttu-id="36b4f-120">Ciò rende possibile un reale scenario di sicurezza end-to-end.</span><span class="sxs-lookup"><span data-stu-id="36b4f-120">This enables a true end-to-end security scenario.</span></span>

- <span data-ttu-id="36b4f-121">Maggiore flessibilità.</span><span class="sxs-lookup"><span data-stu-id="36b4f-121">Increased flexibility.</span></span> <span data-ttu-id="36b4f-122">È possibile firmare o crittografare parti del messaggio, anziché l'intero messaggio.</span><span class="sxs-lookup"><span data-stu-id="36b4f-122">Parts of the message, instead of the entire message, can be signed or encrypted.</span></span> <span data-ttu-id="36b4f-123">Di conseguenza, gli intermediari possono visualizzare le parti del messaggio destinate a loro.</span><span class="sxs-lookup"><span data-stu-id="36b4f-123">This means that intermediaries can view the parts of the message that are intended for them.</span></span> <span data-ttu-id="36b4f-124">Se il mittente vuole rendere visibili alcune informazioni nel messaggio agli intermediari ma vuole assicurare che non vengano manomesse, può scegliere di firmarlo solamente, senza crittografarlo.</span><span class="sxs-lookup"><span data-stu-id="36b4f-124">If the sender needs to make part of the information in the message visible to the intermediaries but wants to ensure that it is not tampered with, it can just sign it but leave it unencrypted.</span></span> <span data-ttu-id="36b4f-125">Poiché la firma è parte del messaggio, il destinatario finale può verificare che le informazioni nel messaggio siano state ricevute intatte.</span><span class="sxs-lookup"><span data-stu-id="36b4f-125">Since the signature is part of the message, the ultimate receiver can verify that the information in the message was received intact.</span></span> <span data-ttu-id="36b4f-126">In uno scenario potrebbe essere presente un servizio intermedio SOAP che indirizza il messaggio secondo il valore dell'intestazione Action.</span><span class="sxs-lookup"><span data-stu-id="36b4f-126">One scenario might have a SOAP intermediary service that routes message according the Action header value.</span></span> <span data-ttu-id="36b4f-127">Per impostazione predefinita, WCF non crittografa il valore dell'azione, ma lo firma se viene utilizzata la sicurezza dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="36b4f-127">By default, WCF does not encrypt the Action value but signs it if message security is used.</span></span> <span data-ttu-id="36b4f-128">Pertanto, queste informazioni sono disponibili a tutti gli intermediari, ma nessuno può modificarle.</span><span class="sxs-lookup"><span data-stu-id="36b4f-128">Therefore, this information is available to all intermediaries, but no one can change it.</span></span>

- <span data-ttu-id="36b4f-129">Supporto di più trasporti.</span><span class="sxs-lookup"><span data-stu-id="36b4f-129">Support for multiple transports.</span></span> <span data-ttu-id="36b4f-130">È possibile inviare messaggi protetti sui più trasporti diversi, ad esempio named pipe e TCP, senza dover utilizzare il protocollo per la protezione.</span><span class="sxs-lookup"><span data-stu-id="36b4f-130">You can send secured messages over many different transports, such as named pipes and TCP, without having to rely on the protocol for security.</span></span> <span data-ttu-id="36b4f-131">Con la protezione a livello di trasporto, tutte le informazioni di sicurezza sono limitate all'ambito di una sola particolare connessione del trasporto e non sono disponibili dal contenuto del messaggio stesso.</span><span class="sxs-lookup"><span data-stu-id="36b4f-131">With transport-level security, all the security information is scoped to a single particular transport connection and is not available from the message content itself.</span></span> <span data-ttu-id="36b4f-132">La sicurezza dei messaggi protegge il messaggio indipendentemente dal trasporto utilizzato per trasmettere il messaggio e il contesto di sicurezza è direttamente incorporato nel messaggio.</span><span class="sxs-lookup"><span data-stu-id="36b4f-132">Message security makes the message secure regardless of what transport you use to transmit the message, and the security context is directly embedded inside the message.</span></span>

- <span data-ttu-id="36b4f-133">Supporto per un ampio set di credenziali e attestazioni.</span><span class="sxs-lookup"><span data-stu-id="36b4f-133">Support for a wide set of credentials and claims.</span></span> <span data-ttu-id="36b4f-134">La sicurezza dei messaggi è basata sulla specifica WS-Security che fornisce un framework estensibile capace di trasmettere qualsiasi tipo di attestazione all'interno del messaggio SOAP.</span><span class="sxs-lookup"><span data-stu-id="36b4f-134">The message security is based on the WS-Security specification, which provides an extensible framework capable of transmitting any type of claim inside the SOAP message.</span></span> <span data-ttu-id="36b4f-135">A differenza della sicurezza del trasporto, il set di meccanismi di autenticazione, o attestazioni, che è possibile utilizzare non è limitato dalle funzionalità di trasporto.</span><span class="sxs-lookup"><span data-stu-id="36b4f-135">Unlike transport security, the set of authentication mechanisms, or claims, that you can use is not limited by the transport capabilities.</span></span> <span data-ttu-id="36b4f-136">La sicurezza dei messaggi WCF include più tipi di autenticazione e trasmissione delle attestazioni e può essere estesa per supportare tipi aggiuntivi, se necessario.</span><span class="sxs-lookup"><span data-stu-id="36b4f-136">WCF message security includes multiple types of authentication and claim transmission and can be extended to support additional types as necessary.</span></span> <span data-ttu-id="36b4f-137">Per questi motivi, ad esempio, un scenario di credenziali federate non è possibile senza la sicurezza dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="36b4f-137">For those reasons, for example, a federated credentials scenario is not possible without message security.</span></span> <span data-ttu-id="36b4f-138">Per ulteriori informazioni sugli scenari di federazione supportati da WCF, vedere [Federazione e token emessi](federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="36b4f-138">For more information about federation scenarios WCF supports, see [Federation and Issued Tokens](federation-and-issued-tokens.md).</span></span>

## <a name="how-message-and-transport-security-compare"></a><span data-ttu-id="36b4f-139">Confronto tra la sicurezza dei messaggi e del trasporto</span><span class="sxs-lookup"><span data-stu-id="36b4f-139">How Message and Transport Security Compare</span></span>

### <a name="pros-and-cons-of-transport-level-security"></a><span data-ttu-id="36b4f-140">Vantaggi e svantaggi della protezione a livello di trasporto</span><span class="sxs-lookup"><span data-stu-id="36b4f-140">Pros and Cons of Transport-Level Security</span></span>

<span data-ttu-id="36b4f-141">La protezione del trasporto offre i vantaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="36b4f-141">Transport security has the following advantages:</span></span>

- <span data-ttu-id="36b4f-142">Non richiede che le parti in comunicazione capiscano i concetti di sicurezza a livello di XML.</span><span class="sxs-lookup"><span data-stu-id="36b4f-142">Does not require that the communicating parties understand XML-level security concepts.</span></span> <span data-ttu-id="36b4f-143">Può migliorare l'interoperabilità, ad esempio, quando viene utilizzato HTTPS per proteggere la comunicazione.</span><span class="sxs-lookup"><span data-stu-id="36b4f-143">This can improve the interoperability, for example, when HTTPS is used to secure the communication.</span></span>

- <span data-ttu-id="36b4f-144">Prestazioni generalmente migliorate.</span><span class="sxs-lookup"><span data-stu-id="36b4f-144">Generally improved performance.</span></span>

- <span data-ttu-id="36b4f-145">Sono disponibili acceleratori hardware.</span><span class="sxs-lookup"><span data-stu-id="36b4f-145">Hardware accelerators are available.</span></span>

- <span data-ttu-id="36b4f-146">Il flusso è supportato.</span><span class="sxs-lookup"><span data-stu-id="36b4f-146">Streaming is possible.</span></span>

 <span data-ttu-id="36b4f-147">La protezione del trasporto offre gli svantaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="36b4f-147">Transport security has the following disadvantages:</span></span>

- <span data-ttu-id="36b4f-148">Solo connessione hop-to-hop.</span><span class="sxs-lookup"><span data-stu-id="36b4f-148">Hop-to-hop only.</span></span>

- <span data-ttu-id="36b4f-149">Set di credenziali limitato e non estensibile.</span><span class="sxs-lookup"><span data-stu-id="36b4f-149">Limited and inextensible set of credentials.</span></span>

- <span data-ttu-id="36b4f-150">Dipende dal trasporto.</span><span class="sxs-lookup"><span data-stu-id="36b4f-150">Transport-dependent.</span></span>

### <a name="disadvantages-of-message-level-security"></a><span data-ttu-id="36b4f-151">Svantaggi della protezione a livello di messaggio</span><span class="sxs-lookup"><span data-stu-id="36b4f-151">Disadvantages of Message-Level Security</span></span>

<span data-ttu-id="36b4f-152">La sicurezza dei messaggi offre gli svantaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="36b4f-152">Message security has the following disadvantages:</span></span>

- <span data-ttu-id="36b4f-153">Prestazioni</span><span class="sxs-lookup"><span data-stu-id="36b4f-153">Performance</span></span>

- <span data-ttu-id="36b4f-154">Impossibile utilizzare il flusso dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="36b4f-154">Cannot use message streaming.</span></span>

- <span data-ttu-id="36b4f-155">Richiede l'implementazione di meccanismi di sicurezza a livello del contenuto XML e il supporto della specifica WS-Security.</span><span class="sxs-lookup"><span data-stu-id="36b4f-155">Requires implementation of XML-level security mechanisms and support for WS-Security specification.</span></span> <span data-ttu-id="36b4f-156">Ciò può influire sull'interoperabilità.</span><span class="sxs-lookup"><span data-stu-id="36b4f-156">This might affect the interoperability.</span></span>

## <a name="see-also"></a><span data-ttu-id="36b4f-157">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="36b4f-157">See also</span></span>

- [<span data-ttu-id="36b4f-158">Securing Services and Clients</span><span class="sxs-lookup"><span data-stu-id="36b4f-158">Securing Services and Clients</span></span>](securing-services-and-clients.md)
- [<span data-ttu-id="36b4f-159">Sicurezza del trasporto</span><span class="sxs-lookup"><span data-stu-id="36b4f-159">Transport Security</span></span>](transport-security.md)
- [<span data-ttu-id="36b4f-160">Procedura: usare le funzionalità di sicurezza a livello di trasporto e le credenziali a livello di messaggio</span><span class="sxs-lookup"><span data-stu-id="36b4f-160">How to: Use Transport Security and Message Credentials</span></span>](how-to-use-transport-security-and-message-credentials.md)
- <span data-ttu-id="36b4f-161">[Microsoft Patterns and Practices, Capitolo 3: Implementazione della protezione a livello di trasporto e di messaggio (il contenuto potrebbe essere in inglese)](https://docs.microsoft.com/previous-versions/msp-n-p/ff647370(v=pandp.10))</span><span class="sxs-lookup"><span data-stu-id="36b4f-161">[Microsoft Patterns and Practices, Chapter 3: Implementing Transport and Message Layer Security](https://docs.microsoft.com/previous-versions/msp-n-p/ff647370(v=pandp.10))</span></span>
