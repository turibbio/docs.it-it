---
title: Panoramica delle code
ms.date: 03/30/2017
helpviewer_keywords:
- queues [WCF], MSMQ integration
ms.assetid: b8757992-ffce-40ad-9e9b-3243f6d0fce1
ms.openlocfilehash: 3e75b6d5926b65a93204241eb7c71ca23a5694af
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/09/2020
ms.locfileid: "84596721"
---
# <a name="queues-overview"></a><span data-ttu-id="92834-102">Cenni preliminari sulle code</span><span class="sxs-lookup"><span data-stu-id="92834-102">Queues overview</span></span>

<span data-ttu-id="92834-103">Contenuto della sezione vengono introdotti i concetti generali e fondamentali alla base delle comunicazioni in coda.</span><span class="sxs-lookup"><span data-stu-id="92834-103">This section introduces the general and core concepts behind queued communication.</span></span> <span data-ttu-id="92834-104">Le sezioni successive illustrano in dettaglio il modo in cui vengono illustrati i concetti di accodamento descritti in Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="92834-104">Subsequent sections go into details about how the queuing concepts described here are manifested in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="basic-queuing-concepts"></a><span data-ttu-id="92834-105">Concetti di base dell'accodamento</span><span class="sxs-lookup"><span data-stu-id="92834-105">Basic Queuing Concepts</span></span>  
 <span data-ttu-id="92834-106">Durante la progettazione di un'applicazione distribuita, è importante scegliere il trasporto giusto per la comunicazione tra i servizi e i client.</span><span class="sxs-lookup"><span data-stu-id="92834-106">When designing a distributed application, choosing the right transport for communication between services and clients is important.</span></span> <span data-ttu-id="92834-107">Molti fattori influiscono sul tipo di trasporto da usare.</span><span class="sxs-lookup"><span data-stu-id="92834-107">Several factors affect the kind of transport to use.</span></span> <span data-ttu-id="92834-108">Un fattore importante, ovvero l'isolamento tra il servizio, il client e il trasporto, impone l'uso di un trasporto in coda o un trasporto diretto, ad esempio TCP o HTTP.</span><span class="sxs-lookup"><span data-stu-id="92834-108">One important factor—isolation between the service, the client, and the transport—determines use of a queued transport or a direct transport, such as TCP or HTTP.</span></span> <span data-ttu-id="92834-109">A causa della natura dei trasporti diretti quali TCP e HTTP, la comunicazione si arresta completamente se il servizio o il client smette di funzionare o in caso di errore nella rete.</span><span class="sxs-lookup"><span data-stu-id="92834-109">Due to the nature of direct transports such as TCP and HTTP, communication stops altogether if the service or the client stop functioning or if the network fails.</span></span> <span data-ttu-id="92834-110">Il servizio, il client e la rete devono essere in esecuzione contemporaneamente per consentire il funzionamento dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="92834-110">The service, the client, and the network must be running at the same time for the application to work.</span></span> <span data-ttu-id="92834-111">I trasporti in coda forniscono l'isolamento, ovvero se si verifica un errore nel servizio o nel client oppure nei collegamenti di comunicazione tra questi, il client e servizio possono continuare a funzionare.</span><span class="sxs-lookup"><span data-stu-id="92834-111">Queued transports provide isolation, which means that if the service or client fail or if communication links between them fail, the client and service can continue to function.</span></span>  
  
 <span data-ttu-id="92834-112">Le code assicurano una comunicazione affidabile anche in caso di errori nelle parti in comunicazione o nella rete.</span><span class="sxs-lookup"><span data-stu-id="92834-112">Queues provide reliable communication even with failures in the communicating parties or the network.</span></span> <span data-ttu-id="92834-113">I messaggi scambiati tra le parti in comunicazione vengono acquisiti e recapitati dalle code.</span><span class="sxs-lookup"><span data-stu-id="92834-113">Queues capture and deliver messages exchanged between the communicating parties.</span></span> <span data-ttu-id="92834-114">In genere le code sono associate a qualche tipo di archivio che può essere volatile o durevole.</span><span class="sxs-lookup"><span data-stu-id="92834-114">Queues are typically backed by some kind of a store, which can be volatile or durable.</span></span> <span data-ttu-id="92834-115">Le code archiviano i messaggi di un client per conto di un servizio e in un secondo momento li inoltrano al servizio.</span><span class="sxs-lookup"><span data-stu-id="92834-115">Queues store messages from a client on behalf of a service and later forward these messages to the service.</span></span> <span data-ttu-id="92834-116">Poiché le code di riferimento indiretto forniscono un isolamento garantito delle parti rispetto agli errori, questo rappresenta il meccanismo di comunicazione preferito per i sistemi a elevata disponibilità e i servizi non connessi.</span><span class="sxs-lookup"><span data-stu-id="92834-116">The indirection queues provide ensured isolation of failure by either party, thus making it the preferred communication mechanism for high-availability systems and disconnected services.</span></span> <span data-ttu-id="92834-117">Il riferimento indiretto comporta tuttavia un elevato costo di latenza.</span><span class="sxs-lookup"><span data-stu-id="92834-117">The indirection comes with the cost of high latency.</span></span> <span data-ttu-id="92834-118">La *latenza* è l'intervallo di tempo tra il momento in cui il client invia un messaggio e il momento in cui il servizio lo riceve.</span><span class="sxs-lookup"><span data-stu-id="92834-118">*Latency* is the time delay between the time the client sends a message and the time the service receives it.</span></span> <span data-ttu-id="92834-119">Di conseguenza, quando il messaggio è stato inviato, non è possibile stabilire quando tale messaggio verrà elaborato.</span><span class="sxs-lookup"><span data-stu-id="92834-119">This means that once a message is sent, you do not know when that message may be processed.</span></span> <span data-ttu-id="92834-120">La maggior parte delle applicazioni in coda deve gestire una latenza elevata.</span><span class="sxs-lookup"><span data-stu-id="92834-120">Most queued applications cope with high latency.</span></span> <span data-ttu-id="92834-121">Nella figura seguente viene mostrato un modello concettuale della comunicazione in coda.</span><span class="sxs-lookup"><span data-stu-id="92834-121">The following illustration shows a conceptual model of queued communication.</span></span>  
  
 <span data-ttu-id="92834-122">![Modello di comunicazione in coda](media/qconceptual-figure1c.gif "QConceptual-Figure1c")</span><span class="sxs-lookup"><span data-stu-id="92834-122">![Model of queued communication](media/qconceptual-figure1c.gif "QConceptual-Figure1c")</span></span>  
  
 <span data-ttu-id="92834-123">Modello concettuale della comunicazione in coda</span><span class="sxs-lookup"><span data-stu-id="92834-123">Queued communication conceptual model</span></span>  
  
 <span data-ttu-id="92834-124">In realtà, la coda è un concetto distribuito</span><span class="sxs-lookup"><span data-stu-id="92834-124">In reality, the queue is a distributed concept.</span></span> <span data-ttu-id="92834-125">e, pertanto, può essere locale a una delle parti o remota a entrambe le parti.</span><span class="sxs-lookup"><span data-stu-id="92834-125">As such, they can be local to either party or remote to both parties.</span></span> <span data-ttu-id="92834-126">In genere, la coda è locale rispetto al servizio.</span><span class="sxs-lookup"><span data-stu-id="92834-126">Typically, the queue is local to the service.</span></span> <span data-ttu-id="92834-127">In questa configurazione, il client non può dipendere dalla disponibilità della connessione alla coda remota.</span><span class="sxs-lookup"><span data-stu-id="92834-127">In this configuration, the client cannot depend on connectivity to the remote queue to be constantly available.</span></span> <span data-ttu-id="92834-128">In modo analogo, la coda deve essere disponibile indipendentemente dalla disponibilità del servizio che legge dalla coda.</span><span class="sxs-lookup"><span data-stu-id="92834-128">Similarly, the queue must be available independent of the availability of the service reading from the queue.</span></span> <span data-ttu-id="92834-129">Un gestore delle code gestisce una raccolta di code</span><span class="sxs-lookup"><span data-stu-id="92834-129">A queue manager manages a collection of queues.</span></span> <span data-ttu-id="92834-130">ed è responsabile per l'accettazione dei messaggi inviati alle code da altri gestori delle code.</span><span class="sxs-lookup"><span data-stu-id="92834-130">It is responsible for accepting messages sent to its queues from other queue managers.</span></span> <span data-ttu-id="92834-131">È inoltre responsabile per la gestione della connettività a code remote e del trasferimento di messaggi a tali code remote.</span><span class="sxs-lookup"><span data-stu-id="92834-131">It is also responsible for managing connectivity to remote queues and transferring messages to those remote queues.</span></span> <span data-ttu-id="92834-132">Per garantire la disponibilità delle code nonostante gli errori dell'applicazione client o di servizio, il gestore delle code in genere viene eseguito come servizio esterno.</span><span class="sxs-lookup"><span data-stu-id="92834-132">To ensure availability of queues despite client or service application failures, the queue manager is typically run as an external service.</span></span>  
  
 <span data-ttu-id="92834-133">Quando un client invia un messaggio a una coda, lo indirizza alla coda di destinazione, che è la coda gestita dal gestore delle code del servizio.</span><span class="sxs-lookup"><span data-stu-id="92834-133">When a client sends a message to a queue, it addresses the message to the target queue, which is the queue managed by the service's queue manager.</span></span> <span data-ttu-id="92834-134">Il gestore delle code sul client invia il messaggio a una coda di trasmissione (o in uscita),</span><span class="sxs-lookup"><span data-stu-id="92834-134">The queue manager on the client sends the message to a transmission (or outgoing) queue.</span></span> <span data-ttu-id="92834-135">ovvero una coda sul gestore delle code client che archivia i messaggi destinati alla trasmissione alla coda di destinazione.</span><span class="sxs-lookup"><span data-stu-id="92834-135">The transmission queue is a queue on the client queue manager that stores messages for transmission to the target queue.</span></span> <span data-ttu-id="92834-136">Il gestore delle code cerca quindi un percorso per il gestore delle code proprietario della coda di destinazione e trasferisce ad esso il messaggio.</span><span class="sxs-lookup"><span data-stu-id="92834-136">The queue manager then finds a path to the queue manager that owns the target queue and transfers the message to it.</span></span> <span data-ttu-id="92834-137">Per assicurare una comunicazione affidabile, i gestori delle code implementano un protocollo di trasferimento affidabile che consente di impedire la perdita di dati.</span><span class="sxs-lookup"><span data-stu-id="92834-137">To ensure reliable communication, the queue managers implement a reliable transfer protocol to prevent data loss.</span></span> <span data-ttu-id="92834-138">Il gestore delle code di destinazione accetta i messaggi indirizzati alle code di destinazione di cui è proprietario e archivia i messaggi.</span><span class="sxs-lookup"><span data-stu-id="92834-138">The destination queue manager accepts messages addressed to the target queues it owns and stores the messages.</span></span> <span data-ttu-id="92834-139">Il servizio invia una richiesta per leggere dalla coda di destinazione, quindi il gestore delle code recapita il messaggio all'applicazione di destinazione.</span><span class="sxs-lookup"><span data-stu-id="92834-139">The service makes requests to read from the target queue, at which time the queue manager then delivers the message to the destination application.</span></span> <span data-ttu-id="92834-140">Nella figura seguente viene mostrata la comunicazione tra le quattro parti.</span><span class="sxs-lookup"><span data-stu-id="92834-140">The following illustration shows communication between the four parties.</span></span>  
  
 <span data-ttu-id="92834-141">![Diagramma di applicazioni in coda](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span><span class="sxs-lookup"><span data-stu-id="92834-141">![Queued Application Diagram](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="92834-142">Comunicazione in coda in uno scenario di distribuzione tipico</span><span class="sxs-lookup"><span data-stu-id="92834-142">Queued communication in a typical deployment scenario</span></span>  
  
 <span data-ttu-id="92834-143">In questo modo, il gestore delle code fornisce l'isolamento necessario per consentire eventuali errori nel mittente e nel destinatario senza influire sulla comunicazione effettiva.</span><span class="sxs-lookup"><span data-stu-id="92834-143">Thus, the queue manager provides the required isolation so that the sender and receiver can independently fail without affecting actual communication.</span></span> <span data-ttu-id="92834-144">Il vantaggio dell'ulteriore riferimento indiretto fornito dalle code consente a più istanze dell'applicazione di leggere dalla stessa coda, in modo che il lavoro delle farm tra i nodi raggiunge velocità effettive più elevate.</span><span class="sxs-lookup"><span data-stu-id="92834-144">The benefit of extra indirection that queues provide also enables multiple application instances to read from the same queue, so that farming work among the nodes achieves higher throughput.</span></span> <span data-ttu-id="92834-145">Di conseguenza, le code vengono spesso usate per soddisfare requisiti di maggiore scalabilità e velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="92834-145">Therefore, it is not uncommon to see queues being used to achieve higher scale and throughput requirements.</span></span>  
  
## <a name="queues-and-transactions"></a><span data-ttu-id="92834-146">Code e transazioni</span><span class="sxs-lookup"><span data-stu-id="92834-146">Queues and Transactions</span></span>  
 <span data-ttu-id="92834-147">Le transazioni consentono di raggruppare un set di operazioni in modo che se si verifica un errore in un'operazione, tutte le operazioni avranno esito negativo.</span><span class="sxs-lookup"><span data-stu-id="92834-147">Transactions allow you to group a set of operations together so that if one operation fails, all of the operations fail.</span></span> <span data-ttu-id="92834-148">Un esempio di come usare le transazioni è quando un utente usa un ATM per trasferire $1.000 dal proprio account di risparmio al proprio account di controllo.</span><span class="sxs-lookup"><span data-stu-id="92834-148">An example of how to use transactions is when a person uses an ATM to transfer $1,000 from their savings account to their checking account.</span></span> <span data-ttu-id="92834-149">Questo passaggio comporta le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="92834-149">This entails the following operations:</span></span>  
  
- <span data-ttu-id="92834-150">Prelievo di 1.000 euro dal conto di risparmio.</span><span class="sxs-lookup"><span data-stu-id="92834-150">Withdrawing $1,000 from the savings account.</span></span>  
  
- <span data-ttu-id="92834-151">Deposito di 1.000 euro nel conto corrente.</span><span class="sxs-lookup"><span data-stu-id="92834-151">Depositing $1,000 into the checking account.</span></span>  
  
 <span data-ttu-id="92834-152">Se la prima operazione riesce e vengono prelevati 1.000 euro dal conto di risparmio ma la seconda operazione non riesce, i 1.000 euro vengono persi perché sono già stati prelevati dal conto di risparmio.</span><span class="sxs-lookup"><span data-stu-id="92834-152">If the first operation succeeds and $1,000 is withdrawn from the savings account but the second operation fails, the $1,000 is lost because it has already been withdrawn from the savings account.</span></span> <span data-ttu-id="92834-153">Per preservare un stato valido dei conti, se un'operazione non riesce, entrambe le operazioni devono avere esito negativo.</span><span class="sxs-lookup"><span data-stu-id="92834-153">To keep the accounts in a valid state, if one operation fails, both operations must fail.</span></span>  
  
 <span data-ttu-id="92834-154">Nella messaggistica transazionale, i messaggi possono essere inviati alla coda e ricevuti dalla coda nell'ambito di una transazione.</span><span class="sxs-lookup"><span data-stu-id="92834-154">In transactional messaging, messages can be sent to the queue and received from the queue under a transaction.</span></span> <span data-ttu-id="92834-155">Pertanto, se un messaggio viene inviato in una transazione e viene eseguito il rollback della transazione, è come se il messaggio non fosse mai stato inviato alla coda.</span><span class="sxs-lookup"><span data-stu-id="92834-155">Thus, if a message is sent in a transaction and the transaction is rolled back, then the outcome is as if the message had never been sent to the queue.</span></span> <span data-ttu-id="92834-156">In modo analogo, se un messaggio viene ricevuto in una transazione e viene eseguito il rollback della transazione, è come se il messaggio non fosse mai stato ricevuto.</span><span class="sxs-lookup"><span data-stu-id="92834-156">Similarly if a message is received in a transaction and the transaction is rolled back, then the outcome is as if the message had never been received.</span></span> <span data-ttu-id="92834-157">Il messaggio rimane nella coda per poter essere letto.</span><span class="sxs-lookup"><span data-stu-id="92834-157">The message remains in the queue to be read.</span></span>  
  
 <span data-ttu-id="92834-158">A causa della latenza elevata, quando si invia un messaggio non è possibile sapere quanto tempo impiega per raggiungere la coda di destinazione, né quanto tempo impiega il servizio per elaborare il messaggio.</span><span class="sxs-lookup"><span data-stu-id="92834-158">Because of high latency, when you send a message you have no way of knowing how long it takes to reach its target queue, nor do you know how long it takes for the service to process the message.</span></span> <span data-ttu-id="92834-159">Per questo motivo, non è consigliabile usare una singola transazione per inviare il messaggio, ricevere il messaggio e quindi elaborarlo.</span><span class="sxs-lookup"><span data-stu-id="92834-159">Because of this, you do not want to use a single transaction to send the message, receive the message, and then process the message.</span></span> <span data-ttu-id="92834-160">Ciò crea una transazione di cui non viene eseguito il commit per un periodo di tempo indeterminato.</span><span class="sxs-lookup"><span data-stu-id="92834-160">This creates a transaction that is not committed for an indeterminate amount of time.</span></span> <span data-ttu-id="92834-161">Quando un client e un servizio comunicano tramite una coda usando una transazione, vengono usate due transazioni: una sul client e una sul servizio.</span><span class="sxs-lookup"><span data-stu-id="92834-161">When a client and service communicate through a queue using a transaction, two transactions are involved: one on the client and one on the service.</span></span> <span data-ttu-id="92834-162">Nella figura seguente vengono mostrati i limiti della transazione in una tipica comunicazione in coda.</span><span class="sxs-lookup"><span data-stu-id="92834-162">The following illustration shows the transaction boundaries in typical queued communication.</span></span>  
  
 <span data-ttu-id="92834-163">![Coda con transazioni](media/qwithtransactions-figure3.gif "QWithTransactions-Figure3")</span><span class="sxs-lookup"><span data-stu-id="92834-163">![Queue with transactions](media/qwithtransactions-figure3.gif "QWithTransactions-Figure3")</span></span>  
  
 <span data-ttu-id="92834-164">Comunicazione in coda che mostra transazioni distinte per l'acquisizione e il recapito</span><span class="sxs-lookup"><span data-stu-id="92834-164">Queued communication showing separate transactions for capture and delivery</span></span>  
  
 <span data-ttu-id="92834-165">La transazione client elabora e invia il messaggio.</span><span class="sxs-lookup"><span data-stu-id="92834-165">The client transaction processes and sends the message.</span></span> <span data-ttu-id="92834-166">Quando viene eseguito il commit della transazione, il messaggio si trova nella coda di trasmissione.</span><span class="sxs-lookup"><span data-stu-id="92834-166">When the transaction is committed, the message is in the transmission queue.</span></span> <span data-ttu-id="92834-167">Sul servizio, la transazione legge il messaggio dalla coda di destinazione, elabora il messaggio e quindi esegue il commit della transazione.</span><span class="sxs-lookup"><span data-stu-id="92834-167">On the service, the transaction reads the message from the target queue, processes the message, and then commits the transaction.</span></span> <span data-ttu-id="92834-168">Se si verifica un errore durante l'elaborazione, viene eseguito il rollback del messaggio e viene posizionato nella coda di destinazione.</span><span class="sxs-lookup"><span data-stu-id="92834-168">If an error occurs during the processing, the message is rolled back and placed in the target queue.</span></span>  
  
## <a name="asynchronous-communication-using-queues"></a><span data-ttu-id="92834-169">Comunicazione asincrona mediante le code</span><span class="sxs-lookup"><span data-stu-id="92834-169">Asynchronous Communication Using Queues</span></span>  
 <span data-ttu-id="92834-170">Le code offrono un mezzo di comunicazione asincrono.</span><span class="sxs-lookup"><span data-stu-id="92834-170">Queues provide an asynchronous means of communication.</span></span> <span data-ttu-id="92834-171">Le applicazioni che inviano messaggi usando le code non possono aspettare che il messaggio venga ricevuto ed elaborato dal destinatario a causa della latenza elevata introdotta dal gestore delle code.</span><span class="sxs-lookup"><span data-stu-id="92834-171">Applications that send messages using queues cannot wait for the message to be received and processed by the receiver because of high latency introduced by the queue manager.</span></span> <span data-ttu-id="92834-172">I messaggi possono restare nella coda per un tempo molto più lungo di quello previsto dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="92834-172">Messages can remain in the queue for a far longer time than the application intended.</span></span> <span data-ttu-id="92834-173">Per evitare questo problema, l'applicazione può specificare un valore di durata (TTL) sul messaggio.</span><span class="sxs-lookup"><span data-stu-id="92834-173">To avoid this, the application can specify a Time-To-Live value on the message.</span></span> <span data-ttu-id="92834-174">Questo valore specifica per quanto tempo il messaggio deve rimanere nella coda di trasmissione.</span><span class="sxs-lookup"><span data-stu-id="92834-174">This value specifies how long the message should remain in the transmission queue.</span></span> <span data-ttu-id="92834-175">Se questo valore viene superato e il messaggio non è ancora stato inviato alla coda di destinazione, può essere trasferito a una coda dei messaggi non recapitabili.</span><span class="sxs-lookup"><span data-stu-id="92834-175">If this time value is exceeded, and the message still has not been sent to the target queue, the message can be transferred to a dead-letter queue.</span></span>  
  
 <span data-ttu-id="92834-176">Quando il mittente invia un messaggio, se l'operazione di invio viene restituita ciò implica che il messaggio ha raggiunto solo la coda di trasmissione del mittente.</span><span class="sxs-lookup"><span data-stu-id="92834-176">When the sender sends a message, the return from the send operation implies that the message only made it to the transmission queue on the sender.</span></span> <span data-ttu-id="92834-177">Di conseguenza, se si verifica un errore nella trasmissione del messaggio alla coda di destinazione, l'applicazione di origine non può individuarlo immediatamente.</span><span class="sxs-lookup"><span data-stu-id="92834-177">As such, if there is a failure in getting the message to the target queue, the sending application cannot know about it immediately.</span></span> <span data-ttu-id="92834-178">Per rilevare tali errori, il messaggio non recapitato viene trasferito alla coda dei messaggi non recapitabili.</span><span class="sxs-lookup"><span data-stu-id="92834-178">To take note of such failures, the failed message is transferred to a dead-letter queue.</span></span>  
  
 <span data-ttu-id="92834-179">Qualsiasi errore, ad esempio un messaggio che non riesce a raggiungere la coda di destinazione o la scadenza della durata del messaggio, deve essere elaborato separatamente.</span><span class="sxs-lookup"><span data-stu-id="92834-179">Any error, such as a message failing to reach the target queue or the Time-To-Live expiring, must be processed separately.</span></span> <span data-ttu-id="92834-180">Non è insolito, pertanto, che le applicazioni in coda scrivano due set di logica:</span><span class="sxs-lookup"><span data-stu-id="92834-180">It is not uncommon, therefore, for queued applications to write two sets of logic:</span></span>  
  
- <span data-ttu-id="92834-181">La normale logica del client e del servizio per l'invio e la ricezione dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="92834-181">The normal client and service logic of sending and receiving messages.</span></span>  
  
- <span data-ttu-id="92834-182">La logica di compensazione per gestire i messaggi dalla trasmissione o dal recapito non riusciti.</span><span class="sxs-lookup"><span data-stu-id="92834-182">Compensation logic to handle messages from the failed transmission or delivery.</span></span>  
  
 <span data-ttu-id="92834-183">Nelle sezioni seguenti vengono esaminati questi concetti.</span><span class="sxs-lookup"><span data-stu-id="92834-183">The following sections discuss these concepts.</span></span>  
  
## <a name="dead-letter-queue-programming"></a><span data-ttu-id="92834-184">Programmazione della coda dei messaggi non recapitabili</span><span class="sxs-lookup"><span data-stu-id="92834-184">Dead-Letter Queue Programming</span></span>  
 <span data-ttu-id="92834-185">Le code dei messaggi non recapitabili contengono messaggi che non sono riusciti a raggiungere la coda di destinazione per vari motivi,</span><span class="sxs-lookup"><span data-stu-id="92834-185">Dead-letter queues contain messages that failed to reach the target queue for various reasons.</span></span> <span data-ttu-id="92834-186">ad esempio i messaggi scadono oppure problemi di connettività impediscono il trasferimento del messaggio alla coda di destinazione.</span><span class="sxs-lookup"><span data-stu-id="92834-186">The reasons can range from expired messages to connectivity issues preventing transfer of the message to the target queue.</span></span>  
  
 <span data-ttu-id="92834-187">In genere, un'applicazione può leggere i messaggi da una coda dei messaggi non recapitabili a livello di sistema, determinare il problema e agire di conseguenza, ad esempio correggendo gli errori e inviando nuovamente il messaggio oppure prendendone nota.</span><span class="sxs-lookup"><span data-stu-id="92834-187">Typically, an application can read messages from a system-wide dead-letter queue, determine what went wrong, and take appropriate action, such as correcting the errors and resending the message or taking note of it.</span></span>  
  
## <a name="poison-message-queue-programming"></a><span data-ttu-id="92834-188">Programmazione della coda dei messaggi non elaborabili</span><span class="sxs-lookup"><span data-stu-id="92834-188">Poison Message Queue Programming</span></span>  
 <span data-ttu-id="92834-189">Quando un messaggio raggiunge la coda di destinazione, è possibile che il servizio non riesca ripetutamente a elaborare il messaggio.</span><span class="sxs-lookup"><span data-stu-id="92834-189">After a message makes it to the target queue, the service may repeatedly fail to process the message.</span></span> <span data-ttu-id="92834-190">Ad esempio, un'applicazione legge un messaggio dalla coda in una transazione e dopo aver aggiornato un database può scoprire che è stato disconnesso temporaneamente.</span><span class="sxs-lookup"><span data-stu-id="92834-190">For example, an application reading a message from the queue under a transaction and updating a database may find the database temporarily disconnected.</span></span> <span data-ttu-id="92834-191">In questo caso, viene eseguito il rollback della transazione, viene creata una transazione e il messaggio viene letto nuovamente dalla coda.</span><span class="sxs-lookup"><span data-stu-id="92834-191">In this case, the transaction is rolled back, a new transaction is created, and the message is reread from the queue.</span></span> <span data-ttu-id="92834-192">Un secondo tentativo può riuscire o meno.</span><span class="sxs-lookup"><span data-stu-id="92834-192">A second attempt may succeed or fail.</span></span> <span data-ttu-id="92834-193">In alcuni casi, a seconda della causa dell'errore, il recapito del messaggio all'applicazione può non riuscire ripetutamente.</span><span class="sxs-lookup"><span data-stu-id="92834-193">In some cases, depending on the cause of the error, the message may repeatedly fail delivery to the application.</span></span> <span data-ttu-id="92834-194">In questo caso, il messaggio viene considerato "non elaborabile"</span><span class="sxs-lookup"><span data-stu-id="92834-194">In this case, the message is deemed as "poison."</span></span> <span data-ttu-id="92834-195">e viene spostato in una coda non elaborabile che può essere letta da un'applicazione che gestisce i messaggi non elaborabili.</span><span class="sxs-lookup"><span data-stu-id="92834-195">Such messages are moved to a poison queue that can be read by a poison-handling application.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="92834-196">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="92834-196">See also</span></span>

- [<span data-ttu-id="92834-197">Accodamento in WCF</span><span class="sxs-lookup"><span data-stu-id="92834-197">Queuing in WCF</span></span>](queuing-in-wcf.md)
- [<span data-ttu-id="92834-198">Sessioni e code</span><span class="sxs-lookup"><span data-stu-id="92834-198">Sessions and Queues</span></span>](../samples/sessions-and-queues.md)
- [<span data-ttu-id="92834-199">Code di messaggi non recapitabili</span><span class="sxs-lookup"><span data-stu-id="92834-199">Dead Letter Queues</span></span>](../samples/dead-letter-queues.md)
- [<span data-ttu-id="92834-200">Comunicazione volatile in coda</span><span class="sxs-lookup"><span data-stu-id="92834-200">Volatile Queued Communication</span></span>](../samples/volatile-queued-communication.md)
- [<span data-ttu-id="92834-201">Da Windows Communication Foundation a Accodamento messaggi</span><span class="sxs-lookup"><span data-stu-id="92834-201">Windows Communication Foundation to Message Queuing</span></span>](../samples/wcf-to-message-queuing.md)
- [<span data-ttu-id="92834-202">Installazione accodamento messaggi (MSMQ)</span><span class="sxs-lookup"><span data-stu-id="92834-202">Installing Message Queuing (MSMQ)</span></span>](../samples/installing-message-queuing-msmq.md)
- [<span data-ttu-id="92834-203">Accodamento messaggi in Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="92834-203">Message Queuing to Windows Communication Foundation</span></span>](../samples/message-queuing-to-wcf.md)
- [<span data-ttu-id="92834-204">Sicurezza dei messaggi nell'accodamento messaggi</span><span class="sxs-lookup"><span data-stu-id="92834-204">Message Security over Message Queuing</span></span>](../samples/message-security-over-message-queuing.md)
