---
title: Selezione di un tipo di credenziale
description: Informazioni sulle credenziali, su come vengono usate in WCF e su come selezionare le credenziali appropriate per l'applicazione per stabilire un'identità o funzionalità richiesta.
ms.date: 03/30/2017
ms.assetid: bf707063-3f30-4304-ab53-0e63413728a8
ms.openlocfilehash: 7a8a6880e5fc3982bb7f470c34a77c771c26effd
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/23/2020
ms.locfileid: "85244920"
---
# <a name="selecting-a-credential-type"></a><span data-ttu-id="572d0-103">Selezione di un tipo di credenziale</span><span class="sxs-lookup"><span data-stu-id="572d0-103">Selecting a Credential Type</span></span>
<span data-ttu-id="572d0-104">Le *credenziali* sono il Windows Communication Foundation dati (WCF) utilizzato per stabilire un'identità o funzionalità richiesta.</span><span class="sxs-lookup"><span data-stu-id="572d0-104">*Credentials* are the data Windows Communication Foundation (WCF) uses to establish either a claimed identity or capabilities.</span></span> <span data-ttu-id="572d0-105">Ad esempio, un passaporto è una credenziale rilasciata da un'autorità dello Stato per provare la cittadinanza in un paese o una regione.</span><span class="sxs-lookup"><span data-stu-id="572d0-105">For example, a passport is a credential a government issues to prove citizenship in a country or region.</span></span> <span data-ttu-id="572d0-106">In WCF, le credenziali possono assumere diverse forme, ad esempio i token del nome utente e i certificati X. 509.</span><span class="sxs-lookup"><span data-stu-id="572d0-106">In WCF, credentials can take many forms, such as user name tokens and X.509 certificates.</span></span> <span data-ttu-id="572d0-107">In questo argomento vengono illustrate le credenziali, il modo in cui vengono utilizzate in WCF e viene illustrato come selezionare le credenziali appropriate per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="572d0-107">This topic discusses credentials, how they are used in WCF, and how to select the right credential for your application.</span></span>  
  
 <span data-ttu-id="572d0-108">In molti paesi e regioni, la patente di guida costituisce un esempio di credenziale.</span><span class="sxs-lookup"><span data-stu-id="572d0-108">In many countries and regions, a driver’s license is an example of a credential.</span></span> <span data-ttu-id="572d0-109">Oltre a contenere dati che descrivono l'identità e le capacità di un individuo,</span><span class="sxs-lookup"><span data-stu-id="572d0-109">A license contains data that represents a person's identity and capabilities.</span></span> <span data-ttu-id="572d0-110">una patente contiene una prova di possesso, ovvero la foto del titolare.</span><span class="sxs-lookup"><span data-stu-id="572d0-110">It contains proof of possession in the form of the possessor's picture.</span></span> <span data-ttu-id="572d0-111">La patente viene inoltre rilasciata da un'autorità attendibile, in genere un apposito ente governativo</span><span class="sxs-lookup"><span data-stu-id="572d0-111">The license is issued by a trusted authority, usually a governmental department of licensing.</span></span> <span data-ttu-id="572d0-112">e, allo scopo di impedire manomissioni e falsificazioni, viene sigillata ed eventualmente corredata di ologramma.</span><span class="sxs-lookup"><span data-stu-id="572d0-112">The license is sealed, and can contain a hologram, showing that it has not been tampered with or counterfeited.</span></span>  
  
 <span data-ttu-id="572d0-113">Quando si presenta una credenziale, è necessario presentare sia i dati sia la prova di possesso dei dati.</span><span class="sxs-lookup"><span data-stu-id="572d0-113">Presenting a credential involves presenting both the data and proof of possession of the data.</span></span> <span data-ttu-id="572d0-114">WCF supporta un'ampia gamma di tipi di credenziali a livello di sicurezza del trasporto e del messaggio.</span><span class="sxs-lookup"><span data-stu-id="572d0-114">WCF supports a variety of credential types at both the transport and message security levels.</span></span> <span data-ttu-id="572d0-115">Si considerino, ad esempio, due tipi di credenziali supportati nelle credenziali del certificato WCF: nome utente e (X. 509).</span><span class="sxs-lookup"><span data-stu-id="572d0-115">For example, consider two types of credentials supported in WCF: user name and (X.509) certificate credentials.</span></span>  
  
 <span data-ttu-id="572d0-116">Nel primo tipo di credenziale, il nome utente rappresenta l'attestazione di identità e la password rappresenta la prova di possesso.</span><span class="sxs-lookup"><span data-stu-id="572d0-116">For the user name credential, the user name represents the claimed identity and the password provides proof of possession.</span></span> <span data-ttu-id="572d0-117">In questo caso l'autorità attendibile è il sistema che convalida nome utente e password.</span><span class="sxs-lookup"><span data-stu-id="572d0-117">The trusted authority in this case is the system that validates the user name and password.</span></span>  
  
 <span data-ttu-id="572d0-118">Con una credenziale del certificato X. 509, il nome del soggetto, il nome alternativo del soggetto o i campi specifici all'interno del certificato possono essere usati come attestazioni di identità, mentre altri campi, ad esempio i `Valid From` `Valid To` campi e, specificano la validità del certificato.</span><span class="sxs-lookup"><span data-stu-id="572d0-118">With an X.509 certificate credential, the subject name, subject alternative name or specific fields within the certificate can be used as claims of identity, while other fields, such as the `Valid From` and `Valid To` fields, specify the validity of the certificate.</span></span>  
  
## <a name="transport-credential-types"></a><span data-ttu-id="572d0-119">Tipi di credenziali a livello di trasporto</span><span class="sxs-lookup"><span data-stu-id="572d0-119">Transport Credential Types</span></span>  
 <span data-ttu-id="572d0-120">Nella tabella seguente vengono illustrati i tipi di credenziali client che possono essere usati da un'associazione nella modalità di sicurezza del trasporto.</span><span class="sxs-lookup"><span data-stu-id="572d0-120">The following table shows the possible types of client credentials that can be used by a binding in transport security mode.</span></span> <span data-ttu-id="572d0-121">Quando si crea un servizio, impostare la proprietà `ClientCredentialType` su uno di questi valori per specificare il tipo di credenziale che il client deve fornire per comunicare con il servizio.</span><span class="sxs-lookup"><span data-stu-id="572d0-121">When creating a service, set the `ClientCredentialType` property to one of these values to specify the type of credential that the client must supply to communicate with your service.</span></span> <span data-ttu-id="572d0-122">È possibile impostare i tipi nel codice o nei file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="572d0-122">You can set the types in either code or configuration files.</span></span>  
  
|<span data-ttu-id="572d0-123">Impostazione</span><span class="sxs-lookup"><span data-stu-id="572d0-123">Setting</span></span>|<span data-ttu-id="572d0-124">Descrizione</span><span class="sxs-lookup"><span data-stu-id="572d0-124">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="572d0-125">nessuno</span><span class="sxs-lookup"><span data-stu-id="572d0-125">None</span></span>|<span data-ttu-id="572d0-126">Specifica che il client non deve presentare alcuna credenziale.</span><span class="sxs-lookup"><span data-stu-id="572d0-126">Specifies that the client does not need to present any credential.</span></span> <span data-ttu-id="572d0-127">Il client viene pertanto autenticato come anonimo.</span><span class="sxs-lookup"><span data-stu-id="572d0-127">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="572d0-128">Basic</span><span class="sxs-lookup"><span data-stu-id="572d0-128">Basic</span></span>|<span data-ttu-id="572d0-129">Specifica l'autenticazione di base per il client.</span><span class="sxs-lookup"><span data-stu-id="572d0-129">Specifies basic authentication for the client.</span></span> <span data-ttu-id="572d0-130">Per altre informazioni, vedere documento RFC2617-[autenticazione http: autenticazione di base e del digest](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span><span class="sxs-lookup"><span data-stu-id="572d0-130">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span></span>|  
|<span data-ttu-id="572d0-131">Digest</span><span class="sxs-lookup"><span data-stu-id="572d0-131">Digest</span></span>|<span data-ttu-id="572d0-132">Specifica l'autenticazione digest per il client.</span><span class="sxs-lookup"><span data-stu-id="572d0-132">Specifies digest authentication for the client.</span></span> <span data-ttu-id="572d0-133">Per altre informazioni, vedere documento RFC2617-[autenticazione http: autenticazione di base e del digest](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span><span class="sxs-lookup"><span data-stu-id="572d0-133">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span></span>|  
|<span data-ttu-id="572d0-134">NTLM</span><span class="sxs-lookup"><span data-stu-id="572d0-134">Ntlm</span></span>|<span data-ttu-id="572d0-135">Specifica l'autenticazione NT LAN Manager (NTLM).</span><span class="sxs-lookup"><span data-stu-id="572d0-135">Specifies NT LAN Manager (NTLM) authentication.</span></span> <span data-ttu-id="572d0-136">Viene usato quando non è possibile usare l'autenticazione Kerberos per qualche motivo.</span><span class="sxs-lookup"><span data-stu-id="572d0-136">This is used when you cannot use Kerberos authentication for some reason.</span></span> <span data-ttu-id="572d0-137">È inoltre possibile disabilitare l'utilizzo come fallback impostando la <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> proprietà su `false` , che fa in modo che WCF effettui il massimo sforzo per generare un'eccezione se viene utilizzata l'autenticazione NTLM.</span><span class="sxs-lookup"><span data-stu-id="572d0-137">You can also disable its use as a fallback by setting the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false`, which causes WCF to make a best-effort to throw an exception if NTLM is used.</span></span> <span data-ttu-id="572d0-138">Si noti che l'impostazione di questa proprietà su `false` potrebbe non impedire l'invio di credenziali NTLM nella rete.</span><span class="sxs-lookup"><span data-stu-id="572d0-138">Note that setting this property to `false` may not prevent NTLM credentials from being sent over the wire.</span></span>|  
|<span data-ttu-id="572d0-139">Windows</span><span class="sxs-lookup"><span data-stu-id="572d0-139">Windows</span></span>|<span data-ttu-id="572d0-140">Specifica l'autenticazione Windows.</span><span class="sxs-lookup"><span data-stu-id="572d0-140">Specifies Windows authentication.</span></span> <span data-ttu-id="572d0-141">Per specificare solo il protocollo Kerberos in un dominio Windows, impostare la proprietà <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> su `false` (l'impostazione predefinita è `true`).</span><span class="sxs-lookup"><span data-stu-id="572d0-141">To specify only the Kerberos protocol on a Windows domain, set the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false` (the default is `true`).</span></span>|  
|<span data-ttu-id="572d0-142">Certificato</span><span class="sxs-lookup"><span data-stu-id="572d0-142">Certificate</span></span>|<span data-ttu-id="572d0-143">Esegue l'autenticazione client mediante un certificato X.509.</span><span class="sxs-lookup"><span data-stu-id="572d0-143">Performs client authentication using an X.509 certificate.</span></span>|  
|<span data-ttu-id="572d0-144">Password</span><span class="sxs-lookup"><span data-stu-id="572d0-144">Password</span></span>|<span data-ttu-id="572d0-145">L'utente deve specificare un nome utente e una password.</span><span class="sxs-lookup"><span data-stu-id="572d0-145">User must supply a user name and password.</span></span> <span data-ttu-id="572d0-146">Convalidare la coppia di nome utente/password usando l'autenticazione di Windows o un'altra soluzione personalizzata.</span><span class="sxs-lookup"><span data-stu-id="572d0-146">Validate the user name/password pair using Windows authentication or another custom solution.</span></span>|  
  
### <a name="message-client-credential-types"></a><span data-ttu-id="572d0-147">Tipi di credenziale usati nella sicurezza client a livello di messaggio</span><span class="sxs-lookup"><span data-stu-id="572d0-147">Message Client Credential Types</span></span>  
 <span data-ttu-id="572d0-148">La tabella seguente mostra i tipi di credenziali usabili quando si crea un'applicazione che usa la sicurezza a livello di messaggio.</span><span class="sxs-lookup"><span data-stu-id="572d0-148">The following table shows the possible credential types that you can use when creating an application that uses message security.</span></span> <span data-ttu-id="572d0-149">I valori riportati possono essere usati nel codice o nei file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="572d0-149">You can use these values in either code or configuration files.</span></span>  
  
|<span data-ttu-id="572d0-150">Impostazione</span><span class="sxs-lookup"><span data-stu-id="572d0-150">Setting</span></span>|<span data-ttu-id="572d0-151">Descrizione</span><span class="sxs-lookup"><span data-stu-id="572d0-151">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="572d0-152">nessuno</span><span class="sxs-lookup"><span data-stu-id="572d0-152">None</span></span>|<span data-ttu-id="572d0-153">Specifica che il client non deve presentare una credenziale.</span><span class="sxs-lookup"><span data-stu-id="572d0-153">Specifies that the client does not need to present a credential.</span></span> <span data-ttu-id="572d0-154">Il client viene pertanto autenticato come anonimo.</span><span class="sxs-lookup"><span data-stu-id="572d0-154">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="572d0-155">Windows</span><span class="sxs-lookup"><span data-stu-id="572d0-155">Windows</span></span>|<span data-ttu-id="572d0-156">Consente lo scambio di messaggi SOAP all'interno di un contesto di sicurezza stabilito mediante una credenziale Windows.</span><span class="sxs-lookup"><span data-stu-id="572d0-156">Allows SOAP message exchanges to occur under the security context established with a Windows credential.</span></span>|  
|<span data-ttu-id="572d0-157">Username</span><span class="sxs-lookup"><span data-stu-id="572d0-157">Username</span></span>|<span data-ttu-id="572d0-158">Consente al servizio di richiedere che l'autenticazione del client si basi su una credenziale di tipo nome utente.</span><span class="sxs-lookup"><span data-stu-id="572d0-158">Allows the service to require that the client be authenticated with a user name credential.</span></span> <span data-ttu-id="572d0-159">Si noti che WCF non consente operazioni di crittografia con nomi utente, ad esempio la generazione di una firma o la crittografia di dati.</span><span class="sxs-lookup"><span data-stu-id="572d0-159">Note that WCF does not allow any cryptographic operations with user names, such as generating a signature or encrypting data.</span></span> <span data-ttu-id="572d0-160">WCF garantisce che il trasporto sia protetto quando si utilizzano le credenziali del nome utente.</span><span class="sxs-lookup"><span data-stu-id="572d0-160">WCF ensures that the transport is secured when using user name credentials.</span></span>|  
|<span data-ttu-id="572d0-161">Certificato</span><span class="sxs-lookup"><span data-stu-id="572d0-161">Certificate</span></span>|<span data-ttu-id="572d0-162">Consente al servizio di richiedere che il client venga autenticato tramite un certificato X.509.</span><span class="sxs-lookup"><span data-stu-id="572d0-162">Allows the service to require that the client be authenticated using an X.509 certificate.</span></span>|  
|<span data-ttu-id="572d0-163">Token emesso</span><span class="sxs-lookup"><span data-stu-id="572d0-163">Issued Token</span></span>|<span data-ttu-id="572d0-164">Un tipo di token personalizzato, configurato in base a un criterio di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="572d0-164">A custom token type configured according to a security policy.</span></span> <span data-ttu-id="572d0-165">Il tipo di token predefinito è Security Assertions Markup Language (SAML).</span><span class="sxs-lookup"><span data-stu-id="572d0-165">The default token type is Security Assertions Markup Language (SAML).</span></span> <span data-ttu-id="572d0-166">Il token viene emesso da un servizio token di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="572d0-166">The token is issued by a secure token service.</span></span> <span data-ttu-id="572d0-167">Per altre informazioni, vedere [Federazione e token emessi](federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="572d0-167">For more information, see [Federation and Issued Tokens](federation-and-issued-tokens.md).</span></span>|  
  
### <a name="negotiation-model-of-service-credentials"></a><span data-ttu-id="572d0-168">Modello di negoziazione delle credenziali del servizio</span><span class="sxs-lookup"><span data-stu-id="572d0-168">Negotiation Model of Service Credentials</span></span>  
 <span data-ttu-id="572d0-169">La *negoziazione* è il processo di creazione di un trust tra un client e un servizio scambiando le credenziali.</span><span class="sxs-lookup"><span data-stu-id="572d0-169">*Negotiation* is the process of establishing trust between a client and a service by exchanging credentials.</span></span> <span data-ttu-id="572d0-170">Il processo viene eseguito in maniera iterativa tra il client e il servizio in modo da divulgare solo le informazioni necessarie per il passaggio successivo nel processo di negoziazione.</span><span class="sxs-lookup"><span data-stu-id="572d0-170">The process is performed iteratively between the client and the service, so as to disclose only the information necessary for the next step in the negotiation process.</span></span> <span data-ttu-id="572d0-171">In pratica, il risultato finale è il recapito della credenziale di un servizio al client da usare nelle operazioni successive.</span><span class="sxs-lookup"><span data-stu-id="572d0-171">In practice, the end result is the delivery of a service's credential to the client to be used in subsequent operations.</span></span>  
  
 <span data-ttu-id="572d0-172">Con un'eccezione, per impostazione predefinita le associazioni fornite dal sistema in WCF negoziano automaticamente le credenziali del servizio quando si utilizza la sicurezza a livello di messaggio.</span><span class="sxs-lookup"><span data-stu-id="572d0-172">With one exception, by default the system-provided bindings in WCF negotiate the service credential automatically when using message-level security.</span></span> <span data-ttu-id="572d0-173">(L'eccezione è <xref:System.ServiceModel.BasicHttpBinding> , che non Abilita la sicurezza per impostazione predefinita). Per disabilitare questo comportamento, vedere le <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> proprietà e.</span><span class="sxs-lookup"><span data-stu-id="572d0-173">(The exception is the <xref:System.ServiceModel.BasicHttpBinding>, which does not enable security by default.) To disable this behavior, see the <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> and <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> properties.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="572d0-174">Quando si usa la sicurezza SSL con .NET Framework 3,5 e versioni successive, un client WCF USA sia i certificati intermedi nel proprio archivio certificati che i certificati intermedi ricevuti durante la negoziazione SSL per eseguire la convalida della catena di certificati sul certificato del servizio.</span><span class="sxs-lookup"><span data-stu-id="572d0-174">When SSL security is used with .NET Framework 3.5 and later, a WCF client uses both the intermediate certificates in its certificate store and the intermediate certificates received during SSL negotiation to perform certificate chain validation on the service's certificate.</span></span> <span data-ttu-id="572d0-175">In .NET Framework 3.0 vengono usati solo i certificati intermedi installati nell'archivio certificati locale.</span><span class="sxs-lookup"><span data-stu-id="572d0-175">.NET Framework 3.0 only uses the intermediate certificates installed in the local certificate store.</span></span>  
  
#### <a name="out-of-band-negotiation"></a><span data-ttu-id="572d0-176">Negoziazione fuori banda</span><span class="sxs-lookup"><span data-stu-id="572d0-176">Out-of-Band Negotiation</span></span>  
 <span data-ttu-id="572d0-177">Se la negoziazione automatica è disabilitata, la credenziale del servizio deve essere fornita al client prima di inviare qualsiasi messaggio al servizio.</span><span class="sxs-lookup"><span data-stu-id="572d0-177">If automatic negotiation is disabled, the service credential must be provisioned at the client prior to sending any messages to the service.</span></span> <span data-ttu-id="572d0-178">Questa operazione è nota anche come provisioning *fuori banda* .</span><span class="sxs-lookup"><span data-stu-id="572d0-178">This is also known as an *out-of-band* provisioning.</span></span> <span data-ttu-id="572d0-179">Ad esempio, se il tipo di credenziale specificato è un certificato e la negoziazione automatica è disabilitata, il client deve contattare il proprietario del servizio per ricevere e installare il certificato nel computer che esegue l'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="572d0-179">For example, if the specified credential type is a certificate, and automatic negotiation is disabled, the client must contact the service owner to receive and install the certificate on the computer running the client application.</span></span> <span data-ttu-id="572d0-180">Questa operazione può essere eseguita, ad esempio, quando si desidera controllare accuratamente i client che possono accedere a un servizio in uno scenario business-to-business.</span><span class="sxs-lookup"><span data-stu-id="572d0-180">This can be done, for example, when you want to strictly control which clients can access a service in a business-to-business scenario.</span></span> <span data-ttu-id="572d0-181">Questa negoziazione fuori banda può essere eseguita tramite posta elettronica e il certificato X. 509 viene archiviato nell'archivio certificati di Windows, utilizzando uno strumento come lo snap-in certificati di Microsoft Management Console (MMC).</span><span class="sxs-lookup"><span data-stu-id="572d0-181">This out-of-band-negotiation can be done in email, and the X.509 certificate is stored in Windows certificate store, using a tool such as the Microsoft Management Console (MMC) Certificates snap-in.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="572d0-182">La proprietà <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> viene usata per fornire al servizio un certificato ottenuto tramite la negoziazione fuori banda.</span><span class="sxs-lookup"><span data-stu-id="572d0-182">The <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property is used to provide the service with a certificate that was attained through out-of-band negotiation.</span></span> <span data-ttu-id="572d0-183">Questa proprietà è necessaria quando si usa la classe <xref:System.ServiceModel.BasicHttpBinding> poiché l'associazione non consente la negoziazione automatica.</span><span class="sxs-lookup"><span data-stu-id="572d0-183">This is necessary when using the <xref:System.ServiceModel.BasicHttpBinding> class because the binding does not allow automated negotiation.</span></span> <span data-ttu-id="572d0-184">La proprietà viene usata anche in uno scenario duplex non correlato.</span><span class="sxs-lookup"><span data-stu-id="572d0-184">The property is also used in an uncorrelated duplex scenario.</span></span> <span data-ttu-id="572d0-185">Si tratta di un scenario in cui un server invia un messaggio al client senza richiedere prima al client l'invio di una richiesta al server.</span><span class="sxs-lookup"><span data-stu-id="572d0-185">This is a scenario where a server sends a message to the client without requiring the client to send a request to the server first.</span></span> <span data-ttu-id="572d0-186">Poiché il server non riceve una richiesta dal client, deve usare il certificato del client per crittografare il messaggio per il client.</span><span class="sxs-lookup"><span data-stu-id="572d0-186">Because the server does not have a request from the client, it must use the client's certificate to encrypt the message to the client.</span></span>  
  
## <a name="setting-credential-values"></a><span data-ttu-id="572d0-187">Impostazione dei valori di credenziale</span><span class="sxs-lookup"><span data-stu-id="572d0-187">Setting Credential Values</span></span>  
 <span data-ttu-id="572d0-188">Dopo aver selezionato una modalità di sicurezza, è necessario specificare le effettive credenziali.</span><span class="sxs-lookup"><span data-stu-id="572d0-188">Once you select a security mode, you must specify the actual credentials.</span></span> <span data-ttu-id="572d0-189">Ad esempio, se il tipo di credenziale è impostato su "certificato", è necessario associare una credenziale specifica (ad esempio un certificato X.509 specifico) al servizio o client.</span><span class="sxs-lookup"><span data-stu-id="572d0-189">For example, if the credential type is set to "certificate," then you must associate a specific credential (such as a specific X.509 certificate) with the service or client.</span></span>  
  
 <span data-ttu-id="572d0-190">Il metodo per l'impostazione del valore della credenziale differisce leggermente se si programma un servizio o un client.</span><span class="sxs-lookup"><span data-stu-id="572d0-190">Depending on whether you are programming a service or a client, the method for setting the credential value differs slightly.</span></span>  
  
### <a name="setting-service-credentials"></a><span data-ttu-id="572d0-191">Impostazione delle credenziali del servizio</span><span class="sxs-lookup"><span data-stu-id="572d0-191">Setting Service Credentials</span></span>  
 <span data-ttu-id="572d0-192">Se si sta usando la modalità di trasporto e si usa HTTP come trasporto, è necessario usare Internet Information Services (IIS) o configurare la porta con un certificato.</span><span class="sxs-lookup"><span data-stu-id="572d0-192">If you are using transport mode, and you are using HTTP as the transport, you must use either Internet Information Services (IIS) or configure the port with a certificate.</span></span> <span data-ttu-id="572d0-193">Per ulteriori informazioni, vedere [Panoramica della sicurezza del trasporto](transport-security-overview.md) e [sicurezza del trasporto http](http-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="572d0-193">For more information, see [Transport Security Overview](transport-security-overview.md) and [HTTP Transport Security](http-transport-security.md).</span></span>  
  
 <span data-ttu-id="572d0-194">Per fornire le credenziali a un servizio tramite il codice, creare un'istanza della classe <xref:System.ServiceModel.ServiceHost> e specificare la credenziale appropriata usando la classe <xref:System.ServiceModel.Description.ServiceCredentials>, a cui si accede tramite la proprietà <xref:System.ServiceModel.ServiceHostBase.Credentials%2A>.</span><span class="sxs-lookup"><span data-stu-id="572d0-194">To provision a service with credentials in code, create an instance of the <xref:System.ServiceModel.ServiceHost> class and specify the appropriate credential using the <xref:System.ServiceModel.Description.ServiceCredentials> class, accessed through the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="572d0-195">Impostazione di un certificato</span><span class="sxs-lookup"><span data-stu-id="572d0-195">Setting a Certificate</span></span>  
 <span data-ttu-id="572d0-196">Per fornire a un servizio un certificato X.509 da usare per autenticare il servizio nei client, usare il metodo <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> della classe <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential>.</span><span class="sxs-lookup"><span data-stu-id="572d0-196">To provision a service with an X.509 certificate to be used to authenticate the service to clients, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> class.</span></span>  
  
 <span data-ttu-id="572d0-197">Per fornire a un servizio un certificato client, usare il metodo <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> della classe <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential>.</span><span class="sxs-lookup"><span data-stu-id="572d0-197">To provision a service with a client certificate, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential> class.</span></span>  
  
#### <a name="setting-windows-credentials"></a><span data-ttu-id="572d0-198">Impostazione delle credenziali di Windows</span><span class="sxs-lookup"><span data-stu-id="572d0-198">Setting Windows Credentials</span></span>  
 <span data-ttu-id="572d0-199">Se il client specifica un nome utente e una password validi, tali credenziali vengono usate per autenticare client.</span><span class="sxs-lookup"><span data-stu-id="572d0-199">If the client specifies a valid user name and password, that credential is used to authenticate the client.</span></span> <span data-ttu-id="572d0-200">In caso contrario, vengono usate le credenziali dell'utente connesso.</span><span class="sxs-lookup"><span data-stu-id="572d0-200">Otherwise, the current logged-on user's credentials are used.</span></span>  
  
### <a name="setting-client-credentials"></a><span data-ttu-id="572d0-201">Impostazione delle credenziali del client</span><span class="sxs-lookup"><span data-stu-id="572d0-201">Setting Client Credentials</span></span>  
 <span data-ttu-id="572d0-202">In WCF, le applicazioni client utilizzano un client WCF per connettersi ai servizi.</span><span class="sxs-lookup"><span data-stu-id="572d0-202">In WCF, client applications use a WCF client to connect to services.</span></span> <span data-ttu-id="572d0-203">Ogni client deriva dalla classe <xref:System.ServiceModel.ClientBase%601> e la proprietà <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> sul client consente alla specifica di vari valori delle credenziali client.</span><span class="sxs-lookup"><span data-stu-id="572d0-203">Every client derives from the <xref:System.ServiceModel.ClientBase%601> class, and the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property on the client allows the specification of various values of client credentials.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="572d0-204">Impostazione di un certificato</span><span class="sxs-lookup"><span data-stu-id="572d0-204">Setting a Certificate</span></span>  
 <span data-ttu-id="572d0-205">Per fornire a un servizio un certificato X.509 usato per autenticare il client per un servizio, usare il metodo <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> della classe <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential>.</span><span class="sxs-lookup"><span data-stu-id="572d0-205">To provision a service with an X.509 certificate that is used to authenticate the client to a service, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential> class.</span></span>  
  
## <a name="how-client-credentials-are-used-to-authenticate-a-client-to-the-service"></a><span data-ttu-id="572d0-206">Come usare le credenziali client per autenticare il client per il servizio</span><span class="sxs-lookup"><span data-stu-id="572d0-206">How Client Credentials Are Used to Authenticate a Client to the Service</span></span>  
 <span data-ttu-id="572d0-207">Le informazioni sulla credenziale client richieste per comunicare con un servizio vengono fornite mediante la proprietà <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> o la proprietà <xref:System.ServiceModel.ChannelFactory.Credentials%2A>.</span><span class="sxs-lookup"><span data-stu-id="572d0-207">Client credential information required to communicate with a service is provided using either the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property or the <xref:System.ServiceModel.ChannelFactory.Credentials%2A> property.</span></span> <span data-ttu-id="572d0-208">Il canale di sicurezza usa queste informazioni per autenticare il client per il servizio.</span><span class="sxs-lookup"><span data-stu-id="572d0-208">The security channel uses this information to authenticate the client to the service.</span></span> <span data-ttu-id="572d0-209">L'autenticazione viene eseguita tramite una delle due modalità seguenti:</span><span class="sxs-lookup"><span data-stu-id="572d0-209">Authentication is accomplished through one of two modes:</span></span>  
  
- <span data-ttu-id="572d0-210">Le credenziali client vengono utilizzate una volta prima dell'invio del primo messaggio, utilizzando l'istanza del client WCF per stabilire un contesto di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="572d0-210">The client credentials are used once before the first message is sent, using the WCF client instance to establish a security context.</span></span> <span data-ttu-id="572d0-211">Tutti i messaggi dell'applicazione vengono quindi protetti tramite il contesto di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="572d0-211">All application messages are then secured through the security context.</span></span>  
  
- <span data-ttu-id="572d0-212">Le credenziali client vengono usate per autenticare ogni messaggio dell'applicazione inviato al servizio.</span><span class="sxs-lookup"><span data-stu-id="572d0-212">The client credentials are used to authenticate every application message sent to the service.</span></span> <span data-ttu-id="572d0-213">In questo caso, nessun contesto viene stabilito tra il client e il servizio.</span><span class="sxs-lookup"><span data-stu-id="572d0-213">In this case, no context is established between the client and the service.</span></span>  
  
### <a name="established-identities-cannot-be-changed"></a><span data-ttu-id="572d0-214">Non è possibile modificare le identità stabilite</span><span class="sxs-lookup"><span data-stu-id="572d0-214">Established Identities Cannot Be Changed</span></span>  
 <span data-ttu-id="572d0-215">Quando si usa il primo metodo, il contesto stabilito viene associato permanentemente all'identità del client.</span><span class="sxs-lookup"><span data-stu-id="572d0-215">When the first method is used, the established context is permanently associated with the client identity.</span></span> <span data-ttu-id="572d0-216">Pertanto, quando il contesto di sicurezza è stato stabilito, l'identità associata al client non può essere modificata.</span><span class="sxs-lookup"><span data-stu-id="572d0-216">That is, once the security context has been established, the identity associated with the client cannot be changed.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="572d0-217">È necessario tenere presente un aspetto legato all'impossibilità di cambiare identità (quando viene stabilito il contesto di sicurezza, ovvero il comportamento predefinito).</span><span class="sxs-lookup"><span data-stu-id="572d0-217">There is a situation to be aware of when the identity cannot be switched (that is, when establish security context is on, the default behavior).</span></span> <span data-ttu-id="572d0-218">Se si crea un servizio che comunica con un secondo servizio, l'identità utilizzata per aprire il client WCF nel secondo servizio non può essere modificata.</span><span class="sxs-lookup"><span data-stu-id="572d0-218">If you create a service that communicates with a second service, the identity used to open the WCF client to the second service cannot be changed.</span></span> <span data-ttu-id="572d0-219">Questo diventa un problema se più client possono usare il primo servizio e il servizio rappresenta i client nell'accesso al secondo servizio.</span><span class="sxs-lookup"><span data-stu-id="572d0-219">This becomes a problem if multiple clients are allowed to use the first service and the service impersonates the clients when accessing the second service.</span></span> <span data-ttu-id="572d0-220">Se il servizio riusa lo stesso client per tutti i chiamanti, tutte le chiamate al secondo servizio vengono eseguite con l'identità del primo chiamante usato per aprire il client al secondo servizio.</span><span class="sxs-lookup"><span data-stu-id="572d0-220">If the service reuses the same client for all callers, all calls to the second service are done under the identity of the first caller that was used to open the client to the second service.</span></span> <span data-ttu-id="572d0-221">In altre parole, il servizio usa l'identità del primo client per tutti i client che vogliono comunicare con il secondo servizio.</span><span class="sxs-lookup"><span data-stu-id="572d0-221">In other words, the service uses the identity of the first client for all its clients to communicate with the second service.</span></span> <span data-ttu-id="572d0-222">Ciò può causare un'elevazione di privilegi.</span><span class="sxs-lookup"><span data-stu-id="572d0-222">This can lead to the elevation of privilege.</span></span> <span data-ttu-id="572d0-223">Se questo non è il comportamento desiderato del servizio, è necessario registrare ogni chiamante e creare un nuovo client per il secondo servizio per ogni singolo chiamante e verificare che il servizio usi solo il client corretto per consentire ai diversi chiamanti la comunicazione con il secondo servizio.</span><span class="sxs-lookup"><span data-stu-id="572d0-223">If this is not the desired behavior of your service, you must track each caller and create a new client to the second service for every distinct caller, and ensure that the service uses only the right client for the right caller to communicate with the second service.</span></span>  
  
 <span data-ttu-id="572d0-224">Per ulteriori informazioni sulle credenziali e sulle sessioni sicure, vedere [considerazioni sulla sicurezza per le sessioni sicure](security-considerations-for-secure-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="572d0-224">For more information about credentials and secure sessions, see [Security Considerations for Secure Sessions](security-considerations-for-secure-sessions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="572d0-225">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="572d0-225">See also</span></span>

- <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType>
- <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Description.ClientCredentials.ClientCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.BasicHttpMessageSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.HttpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverMsmq.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverTcp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.TcpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A?displayProperty=nameWithType>
- [<span data-ttu-id="572d0-226">Concetti relativi alla sicurezza</span><span class="sxs-lookup"><span data-stu-id="572d0-226">Security Concepts</span></span>](security-concepts.md)
- [<span data-ttu-id="572d0-227">Securing Services and Clients</span><span class="sxs-lookup"><span data-stu-id="572d0-227">Securing Services and Clients</span></span>](securing-services-and-clients.md)
- [<span data-ttu-id="572d0-228">Programmazione delle funzionalità di sicurezza di WCF</span><span class="sxs-lookup"><span data-stu-id="572d0-228">Programming WCF Security</span></span>](programming-wcf-security.md)
- [<span data-ttu-id="572d0-229">Protezione del trasporto HTTP</span><span class="sxs-lookup"><span data-stu-id="572d0-229">HTTP Transport Security</span></span>](http-transport-security.md)
