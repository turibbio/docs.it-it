---
title: Considerazioni sulla sicurezza con metadati
ms.date: 03/30/2017
ms.assetid: e78ef8ab-4f63-4656-ab93-b1deab2666d5
ms.openlocfilehash: c41ebf5c39e74932a4bade610c4e236b28444327
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/09/2020
ms.locfileid: "84601023"
---
# <a name="security-considerations-with-metadata"></a><span data-ttu-id="8d3a3-102">Considerazioni sulla sicurezza con metadati</span><span class="sxs-lookup"><span data-stu-id="8d3a3-102">Security Considerations with Metadata</span></span>
<span data-ttu-id="8d3a3-103">Quando si utilizzano le funzionalità dei metadati in Windows Communication Foundation (WCF), considerare le implicazioni di sicurezza relative alla pubblicazione, al recupero e all'utilizzo dei metadati del servizio.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-103">When using the metadata features in Windows Communication Foundation (WCF), consider the security implications of publishing, retrieving, and using service metadata.</span></span>  
  
## <a name="when-to-publish-metadata"></a><span data-ttu-id="8d3a3-104">Quando pubblicare metadati</span><span class="sxs-lookup"><span data-stu-id="8d3a3-104">When to Publish Metadata</span></span>  
 <span data-ttu-id="8d3a3-105">I servizi WCF non pubblicano i metadati per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-105">WCF services do not publish metadata by default.</span></span> <span data-ttu-id="8d3a3-106">Per pubblicare metadati per un servizio WCF, è necessario abilitare in modo esplicito la pubblicazione dei metadati aggiungendo endpoint dei metadati al servizio (vedere [pubblicazione di metadati](publishing-metadata.md)).</span><span class="sxs-lookup"><span data-stu-id="8d3a3-106">To publish metadata for a WCF service you must explicitly enable metadata publishing by adding metadata endpoints to your service (see [Publishing Metadata](publishing-metadata.md)).</span></span> <span data-ttu-id="8d3a3-107">Se si lascia disabilitata la pubblicazione dei metadati, si riduce la superficie di attacco del servizio e il rischio di diffusione non intenzionale di informazioni.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-107">Leaving metadata publishing disabled reduces the attack surface for your service and lowers the risk of unintentional information disclosure.</span></span> <span data-ttu-id="8d3a3-108">Non tutti i servizi devono pubblicare metadati.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-108">Not all services must publish metadata.</span></span> <span data-ttu-id="8d3a3-109">Se non è necessario pubblicare metadati, considerare l'ipotesi di lasciare la funzione disattivata.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-109">If you do not have to publish metadata, consider leaving it turned off.</span></span> <span data-ttu-id="8d3a3-110">Si noti che è comunque possibile generare metadati e codice client direttamente dagli assembly del servizio utilizzando lo [strumento ServiceModel Metadata Utility Tool (Svcutil. exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="8d3a3-110">Note that you can still generate metadata and client code directly from your service assemblies using the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span> <span data-ttu-id="8d3a3-111">Per ulteriori informazioni sull'utilizzo di Svcutil. exe per esportare i metadati, vedere [procedura: utilizzare Svcutil. exe per esportare metadati dal codice del servizio compilato](how-to-use-svcutil-exe-to-export-metadata-from-compiled-service-code.md).</span><span class="sxs-lookup"><span data-stu-id="8d3a3-111">For more information about using Svcutil.exe to export metadata, see [How to: Use Svcutil.exe to Export Metadata from Compiled Service Code](how-to-use-svcutil-exe-to-export-metadata-from-compiled-service-code.md).</span></span>  
  
## <a name="publishing-metadata-using-a-secure-binding"></a><span data-ttu-id="8d3a3-112">Pubblicazione di metadati tramite un'associazione sicura</span><span class="sxs-lookup"><span data-stu-id="8d3a3-112">Publishing Metadata Using a Secure Binding</span></span>  
 <span data-ttu-id="8d3a3-113">Le associazioni di metadati predefinite fornite da WCF non sono sicure e consentono l'accesso anonimo ai metadati.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-113">The default metadata bindings that WCF provides are not secure and they allow anonymous access to the metadata.</span></span> <span data-ttu-id="8d3a3-114">I metadati del servizio pubblicati da un servizio WCF contengono una descrizione dettagliata del servizio e possono contenere intenzionalmente o accidentalmente informazioni riservate.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-114">The service metadata that a WCF service publishes contains a detailed description about the service and may intentionally or unintentionally contain sensitive information.</span></span> <span data-ttu-id="8d3a3-115">I metadati del servizio possono, ad esempio, contenere informazioni su operazioni dell'infrastruttura non destinate ad essere trasmesse pubblicamente.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-115">For example, service metadata may contain information about infrastructure operations that was not intended to be broadcast publicly.</span></span> <span data-ttu-id="8d3a3-116">Per proteggere metadati del servizio dall'accesso non autorizzato, è possibile usare un'associazione protetta per l'endpoint dei metadati.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-116">To protect service metadata from unauthorized access, you can use a secure binding for your metadata endpoint.</span></span> <span data-ttu-id="8d3a3-117">Gli endpoint dei metadati rispondono alle richieste HTTP/GET che possono usare SSL (Secure Sockets Layer) per proteggere i metadati.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-117">Metadata endpoints respond to HTTP/GET requests that can use Secure Sockets Layer (SSL) to secure the metadata.</span></span> <span data-ttu-id="8d3a3-118">Per altre informazioni, vedere [procedura: proteggere gli endpoint dei metadati](how-to-secure-metadata-endpoints.md).</span><span class="sxs-lookup"><span data-stu-id="8d3a3-118">For more information, see [How to: Secure Metadata Endpoints](how-to-secure-metadata-endpoints.md).</span></span>  
  
 <span data-ttu-id="8d3a3-119">La sicurezza degli endpoint dei metadati offre inoltre ai richiedenti un modo sicuro per recuperare i metadati del servizio, senza rischi di manomissioni o spoofing.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-119">Securing your metadata endpoints also provides a way for requesters to securely retrieve service metadata without the risk of tampering or spoofing.</span></span>  
  
## <a name="using-only-trusted-metadata"></a><span data-ttu-id="8d3a3-120">Utilizzo dei soli metadati attendibili</span><span class="sxs-lookup"><span data-stu-id="8d3a3-120">Using Only Trusted Metadata</span></span>  
 <span data-ttu-id="8d3a3-121">È possibile usare metadati del servizio per costruire automaticamente i componenti runtime necessari per chiamare il servizio.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-121">You can use service metadata to automatically construct the run-time components required to call the service.</span></span> <span data-ttu-id="8d3a3-122">È inoltre possibile usare i metadati in fase di progettazione, per sviluppare un'applicazione client, o in fase di esecuzione, per aggiornare dinamicamente l'associazione usata da un client per chiamare un servizio.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-122">You can also use metadata at design time to develop a client application or at runtime to dynamically update the binding a client uses to call a service.</span></span>  
  
 <span data-ttu-id="8d3a3-123">I metadati del servizio possono essere manomessi o sottoposti a spoofing quando vengono recuperati in modo non protetto.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-123">Service metadata can be tampered with or spoofed when retrieved in an insecure manner.</span></span> <span data-ttu-id="8d3a3-124">I metadati manomessi possono reindirizzare il client a un servizio dannoso, contenere impostazioni di sicurezza compromesse o strutture XML dannose.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-124">Tampered metadata can redirect your client to a malicious service, contain compromised security settings, or contain malicious XML structures.</span></span> <span data-ttu-id="8d3a3-125">I documenti di metadati possono essere di grandi dimensioni e vengono spesso salvati nel file system.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-125">Metadata documents can be large and are frequently saved to the file system.</span></span> <span data-ttu-id="8d3a3-126">Per evitare manomissioni e spoofing, usare un'associazione protetta per richiedere i metadati del servizio quando diventano disponibili.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-126">To protect against tampering and spoofing, use a secure binding to request service metadata when one is available.</span></span>  
  
## <a name="using-safe-techniques-for-processing-metadata"></a><span data-ttu-id="8d3a3-127">Uso di tecniche sicure per l'elaborazione dei metadati</span><span class="sxs-lookup"><span data-stu-id="8d3a3-127">Using Safe Techniques for Processing Metadata</span></span>  
 <span data-ttu-id="8d3a3-128">I metadati del servizio vengono spesso recuperati da un servizio su una rete usando protocolli standardizzati, ad esempio WS-MetadataExchange (MEX).</span><span class="sxs-lookup"><span data-stu-id="8d3a3-128">Service metadata is frequently retrieved from a service over a network using standardized protocols such as WS-MetadataExchange (MEX).</span></span> <span data-ttu-id="8d3a3-129">Molti formati dei metadati includono meccanismi di riferimento per puntare a ulteriori metadati.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-129">Many metadata formats include referencing mechanisms for pointing to additional metadata.</span></span> <span data-ttu-id="8d3a3-130">Il tipo <xref:System.ServiceModel.Description.MetadataExchangeClient> elabora automaticamente i riferimenti in documenti WSDL (Web Services Description Language), XML Schema e documenti MEX.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-130">The <xref:System.ServiceModel.Description.MetadataExchangeClient> type automatically processes references for you in Web Services Description Language (WSDL) documents, XML Schema, and MEX documents.</span></span> <span data-ttu-id="8d3a3-131">La dimensione dell'oggetto <xref:System.ServiceModel.Description.MetadataSet> creato dai metadati recuperati è direttamente proporzionale al valore di <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A> per l'istanza di <xref:System.ServiceModel.Description.MetadataExchangeClient> usata e al valore di `MaxReceivedMessageSize` per l'associazione usata dall'istanza di <xref:System.ServiceModel.Description.MetadataExchangeClient> in questione.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-131">The size of the <xref:System.ServiceModel.Description.MetadataSet> object created from the retrieved metadata is directly proportional to the <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A> value for the <xref:System.ServiceModel.Description.MetadataExchangeClient> instance that is used and the `MaxReceivedMessageSize` value for the binding being used by that <xref:System.ServiceModel.Description.MetadataExchangeClient> instance.</span></span> <span data-ttu-id="8d3a3-132">Impostare queste quote sui valori appropriati, in base alle necessità dello scenario.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-132">Set these quotas to appropriate values as dictated by your scenario.</span></span>  
  
 <span data-ttu-id="8d3a3-133">In WCF, i metadati del servizio vengono elaborati come XML.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-133">In WCF, service metadata is processed as XML.</span></span> <span data-ttu-id="8d3a3-134">Quando si elaborano documenti XML, le applicazioni devono proteggersi da strutture XML dannose.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-134">When processing XML documents, applications should protect themselves against malicious XML structures.</span></span> <span data-ttu-id="8d3a3-135">Utilizzare l'oggetto <xref:System.Xml.XmlDictionaryReader> con le quote appropriate durante l'elaborazione di XML e impostare anche la <xref:System.Xml.XmlTextReader.DtdProcessing%2A> proprietà su <xref:System.Xml.DtdProcessing.Prohibit> .</span><span class="sxs-lookup"><span data-stu-id="8d3a3-135">Use the <xref:System.Xml.XmlDictionaryReader> with appropriate quotas when processing XML and also set the <xref:System.Xml.XmlTextReader.DtdProcessing%2A> property to <xref:System.Xml.DtdProcessing.Prohibit>.</span></span>  
  
 <span data-ttu-id="8d3a3-136">Il sistema di metadati in WCF è estensibile ed è possibile registrare le estensioni dei metadati nel file di configurazione dell'applicazione. vedere [estensione del sistema di metadati](../extending/extending-the-metadata-system.md).</span><span class="sxs-lookup"><span data-stu-id="8d3a3-136">The metadata system in WCF is extensible and metadata extensions can be registered in your application configuration file (see [Extending the Metadata System](../extending/extending-the-metadata-system.md)).</span></span> <span data-ttu-id="8d3a3-137">Le estensioni dei metadati possono eseguire codice arbitrario, pertanto è necessario proteggere il file di configurazione dell'applicazione con elenchi di controllo di accesso (ACL) appropriati e registrare solo le implementazioni delle estensioni dei metadati attendibili.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-137">Metadata extensions can run arbitrary code, so you should protect your application configuration file with appropriate access control lists (ACLs) and register only trusted metadata extension implementations.</span></span>  
  
## <a name="validating-generated-clients"></a><span data-ttu-id="8d3a3-138">Convalida dei client generati</span><span class="sxs-lookup"><span data-stu-id="8d3a3-138">Validating Generated Clients</span></span>  
 <span data-ttu-id="8d3a3-139">Quando si genera codice client dai metadati recuperati da un'origine non attendibile, convalidare il codice client generato per verificare che il client generato sia conforme ai criteri di sicurezza dell'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-139">When generating client code from metadata retrieved from a source that is not trusted, validate the generated client code to ensure that the generated client conforms to your client applications security policies.</span></span> <span data-ttu-id="8d3a3-140">È possibile usare un comportamento di convalida per controllare le impostazioni sull'associazione client o controllare visivamente il codice generato dagli strumenti.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-140">You can use a validating behavior to check settings on your client binding or visually inspect code generated by tools.</span></span> <span data-ttu-id="8d3a3-141">Per un esempio di come implementare un client che convalida i comportamenti, vedere [convalida client](../samples/client-validation.md).</span><span class="sxs-lookup"><span data-stu-id="8d3a3-141">For an example of how to implement a client that validates behaviors, see [Client Validation](../samples/client-validation.md).</span></span>  
  
## <a name="protecting-application-configuration-files"></a><span data-ttu-id="8d3a3-142">Protezione dei file di configurazione dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="8d3a3-142">Protecting Application Configuration Files</span></span>  
 <span data-ttu-id="8d3a3-143">Il file di configurazione dell'applicazione di un servizio può controllare come e se i metadati vengono pubblicati.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-143">A service's application configuration file may control how and if metadata is published.</span></span> <span data-ttu-id="8d3a3-144">È buona norma proteggere il file di configurazione dell'applicazione con elenchi di controllo di accesso (ACL) appropriati, per assicurare che l'autore di un attacco non possa modificare tali impostazioni.</span><span class="sxs-lookup"><span data-stu-id="8d3a3-144">It is a good idea to protect the application configuration file with appropriate access control lists (ACLs) to ensure an attacker cannot modify such settings.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8d3a3-145">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="8d3a3-145">See also</span></span>

- [<span data-ttu-id="8d3a3-146">Procedura: proteggere endpoint dei metadati</span><span class="sxs-lookup"><span data-stu-id="8d3a3-146">How to: Secure Metadata Endpoints</span></span>](how-to-secure-metadata-endpoints.md)
- [<span data-ttu-id="8d3a3-147">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="8d3a3-147">Security</span></span>](security.md)
