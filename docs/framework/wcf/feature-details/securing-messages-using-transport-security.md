---
title: Protezione dei messaggi mediante protezione del trasporto
ms.date: 03/30/2017
ms.assetid: 9029771a-097e-448a-a13a-55d2878330b8
ms.openlocfilehash: 7d160f6f0d1d29e34ca3365501b86d1a736de67b
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/09/2020
ms.locfileid: "84589942"
---
# <a name="securing-messages-using-transport-security"></a><span data-ttu-id="e72c2-102">Protezione dei messaggi mediante protezione del trasporto</span><span class="sxs-lookup"><span data-stu-id="e72c2-102">Securing Messages Using Transport Security</span></span>
<span data-ttu-id="e72c2-103">Contenuto della sezione viene descritta la protezione del trasporto di Accodamento messaggi (MSMQ), che è possibile utilizzare per proteggere messaggi inviati a una coda.</span><span class="sxs-lookup"><span data-stu-id="e72c2-103">This section discusses Message Queuing (MSMQ) transport security that you can use to secure messages sent to a queue.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e72c2-104">Prima di leggere questo argomento, è consigliabile leggere i [concetti relativi alla sicurezza](security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="e72c2-104">Before reading through this topic, it is recommended that you read [Security Concepts](security-concepts.md).</span></span>  
  
 <span data-ttu-id="e72c2-105">Nella figura seguente viene illustrato un modello concettuale della comunicazione in coda con Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="e72c2-105">The following illustration provides a conceptual model of queued communication using Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="e72c2-106">L'illustrazione e la terminologia vengono utilizzate per spiegare i concetti di sicurezza del trasporto.</span><span class="sxs-lookup"><span data-stu-id="e72c2-106">This illustration and terminology is used to explain transport security concepts.</span></span>  
  
 <span data-ttu-id="e72c2-107">![Diagramma di applicazioni in coda](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span><span class="sxs-lookup"><span data-stu-id="e72c2-107">![Queued Application Diagram](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="e72c2-108">Quando si inviano messaggi in coda utilizzando WCF con <xref:System.ServiceModel.NetMsmqBinding> , il messaggio WCF viene allegato come corpo del messaggio MSMQ.</span><span class="sxs-lookup"><span data-stu-id="e72c2-108">When sending queued messages using WCF with <xref:System.ServiceModel.NetMsmqBinding>, the WCF message is attached as a body of the MSMQ message.</span></span> <span data-ttu-id="e72c2-109">La protezione del trasporto rende sicuro l'intero messaggio MSMQ: intestazioni o proprietà del messaggio MSMQ e corpo del messaggio.</span><span class="sxs-lookup"><span data-stu-id="e72c2-109">Transport security secures the entire MSMQ message (MSMQ message headers or properties and the message body).</span></span> <span data-ttu-id="e72c2-110">Poiché è il corpo del messaggio MSMQ, l'utilizzo della sicurezza del trasporto protegge anche il messaggio WCF.</span><span class="sxs-lookup"><span data-stu-id="e72c2-110">Because it is the body of the MSMQ message, using transport security also secures the WCF message.</span></span>  
  
 <span data-ttu-id="e72c2-111">Il concetto chiave della protezione del trasporto consiste nell'esigenza per il client di soddisfare requisiti di sicurezza per inviare il messaggio alla coda di destinazione,</span><span class="sxs-lookup"><span data-stu-id="e72c2-111">The key concept behind transport security is that the client has to meet security requirements to get the message to the target queue.</span></span> <span data-ttu-id="e72c2-112">diversamente dalla protezione dei messaggi, in cui il messaggio viene protetto per l'applicazione che lo riceve.</span><span class="sxs-lookup"><span data-stu-id="e72c2-112">This is unlike Message security, where the message is secured for the application that receives the message.</span></span>  
  
 <span data-ttu-id="e72c2-113">La protezione del trasporto che utilizza <xref:System.ServiceModel.NetMsmqBinding> e <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> influenza il modo in cui i messaggi MSMQ sono protetti in transito tra la coda di trasmissione e la coda di destinazione, dove per protezione si intende:</span><span class="sxs-lookup"><span data-stu-id="e72c2-113">Transport security using <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> impacts how MSMQ messages are secured in-transit between the transmission queue and the target queue where secured implies:</span></span>  
  
- <span data-ttu-id="e72c2-114">Firma del messaggio per avere la certezza che non sia manomesso.</span><span class="sxs-lookup"><span data-stu-id="e72c2-114">Signing the message to ensure it is not tampered with.</span></span>  
  
- <span data-ttu-id="e72c2-115">Crittografia del messaggio per avere la certezza che non venga visto o manomesso.</span><span class="sxs-lookup"><span data-stu-id="e72c2-115">Encrypting the message to ensure that it cannot be seen or tampered with.</span></span> <span data-ttu-id="e72c2-116">Operazione consigliata ma facoltativa.</span><span class="sxs-lookup"><span data-stu-id="e72c2-116">This is recommended but optional.</span></span>  
  
- <span data-ttu-id="e72c2-117">Il gestore delle code di destinazione che identifica il mittente del messaggio per non-ripudio.</span><span class="sxs-lookup"><span data-stu-id="e72c2-117">The target queue manager that identifies the sender of the message for non-repudiation.</span></span>  
  
 <span data-ttu-id="e72c2-118">In MSMQ, indipendentemente dall'autenticazione, la coda di destinazione dispone di un elenco di controllo di accesso (ACL) per verificare se il client dispone delle autorizzazioni per inviare il messaggio alla coda di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e72c2-118">In MSMQ, independent of authentication, the target queue has an access control list (ACL) to check whether the client has permission to send the message to the target queue.</span></span> <span data-ttu-id="e72c2-119">Viene inoltre verificato se l'applicazione ricevente è autorizzata a ricevere il messaggio dalla coda di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e72c2-119">The receiving application is also checked for permission to receive the message from the target queue.</span></span>  
  
## <a name="wcf-msmq-transport-security-properties"></a><span data-ttu-id="e72c2-120">Proprietà della protezione del trasporto MSMQ WCF</span><span class="sxs-lookup"><span data-stu-id="e72c2-120">WCF MSMQ Transport Security Properties</span></span>  
 <span data-ttu-id="e72c2-121">In MSMQ viene utilizzata la protezione di Windows per l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="e72c2-121">MSMQ uses Windows security for authentication.</span></span> <span data-ttu-id="e72c2-122">Durante l'autenticazione del client vengono utilizzati l'ID di sicurezza di Windows (SID) per identificare il client e Active Directory come autorità di certificazione.</span><span class="sxs-lookup"><span data-stu-id="e72c2-122">It uses the Windows security identifier (SID) to identify the client and uses Active Directory directory service as the certificate authority when authenticating the client.</span></span> <span data-ttu-id="e72c2-123">È necessario che MSMQ sia installato con l'integrazione di Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e72c2-123">This requires MSMQ to be installed with Active Directory integration.</span></span> <span data-ttu-id="e72c2-124">Poiché il SID del dominio Windows viene utilizzato per identificare il client, questa opzione di sicurezza è significativa solo quando sia il client che servizio fanno parte dello stesso dominio Windows.</span><span class="sxs-lookup"><span data-stu-id="e72c2-124">Because the Windows domain SID is used to identify the client, this security option is only meaningful when both the client and service are part of the same Windows domain.</span></span>  
  
 <span data-ttu-id="e72c2-125">In MSMQ è inoltre disponibile la possibilità di allegare un certificato al messaggio non registrato con Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e72c2-125">MSMQ also provides the ability to attach a certificate with the message that is not registered with Active Directory.</span></span> <span data-ttu-id="e72c2-126">In questo caso, si garantisce che il messaggio è stato firmato utilizzando il certificato allegato.</span><span class="sxs-lookup"><span data-stu-id="e72c2-126">In this case, it ensures that the message was signed using the attached certificate.</span></span>  
  
 <span data-ttu-id="e72c2-127">In WCF sono disponibili entrambe le opzioni come parte della sicurezza del trasporto MSMQ, che rappresentano il perno chiave per la sicurezza del trasporto.</span><span class="sxs-lookup"><span data-stu-id="e72c2-127">WCF provides both these options as part of MSMQ transport security and they are the key pivot for transport security.</span></span>  
  
 <span data-ttu-id="e72c2-128">Per impostazione predefinita, la protezione del trasporto è attivata.</span><span class="sxs-lookup"><span data-stu-id="e72c2-128">By default, transport security is turned on.</span></span>  
  
 <span data-ttu-id="e72c2-129">Sulla base di queste nozioni fondamentali, nelle sezioni seguenti vengono dettagliate le proprietà della protezione del trasporto incluse in <xref:System.ServiceModel.NetMsmqBinding> e in <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span><span class="sxs-lookup"><span data-stu-id="e72c2-129">Given these basics, the following sections detail transport security properties bundled with <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span>  
  
#### <a name="msmq-authentication-mode"></a><span data-ttu-id="e72c2-130">Modalità di autenticazione MSMQ</span><span class="sxs-lookup"><span data-stu-id="e72c2-130">MSMQ Authentication Mode</span></span>  
 <span data-ttu-id="e72c2-131">La proprietà <xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> stabilisce se per proteggere il messaggio sia necessario utilizzare la protezione del dominio Windows o una protezione basata sui certificati esterna.</span><span class="sxs-lookup"><span data-stu-id="e72c2-131">The <xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> dictates whether to use the Windows domain security or an external certificate-based security to secure the message.</span></span> <span data-ttu-id="e72c2-132">In entrambe le modalità di autenticazione, il canale di trasporto in coda WCF utilizza l' `CertificateValidationMode` oggetto specificato nella configurazione del servizio.</span><span class="sxs-lookup"><span data-stu-id="e72c2-132">In both authentication modes, the WCF queued transport channel uses the `CertificateValidationMode` specified in the service configuration.</span></span> <span data-ttu-id="e72c2-133">La modalità di convalida del certificato consente di specificare il meccanismo utilizzato per verificare la validità del certificato.</span><span class="sxs-lookup"><span data-stu-id="e72c2-133">The certificate validation mode specifies the mechanism used to check the validity of the certificate.</span></span>  
  
 <span data-ttu-id="e72c2-134">Quando la protezione del trasporto è attivata, l'impostazione predefinita è <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span><span class="sxs-lookup"><span data-stu-id="e72c2-134">When transport security is turned on, the default setting is <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="windows-domain-authentication-mode"></a><span data-ttu-id="e72c2-135">Modalità di autenticazione del dominio Windows</span><span class="sxs-lookup"><span data-stu-id="e72c2-135">Windows Domain Authentication Mode</span></span>  
 <span data-ttu-id="e72c2-136">La scelta di utilizzare la sicurezza di Windows comporta l'integrazione di Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e72c2-136">The choice of using Windows security requires Active Directory integration.</span></span> <span data-ttu-id="e72c2-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> è la modalità di sicurezza del trasporto predefinita.</span><span class="sxs-lookup"><span data-stu-id="e72c2-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> is the default transport security mode.</span></span> <span data-ttu-id="e72c2-138">Quando questa proprietà è impostata, il canale WCF connette il SID di Windows al messaggio MSMQ e utilizza il certificato interno ottenuto da Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e72c2-138">When this is set, the WCF channel attaches the Windows SID to the MSMQ message and uses its internal certificate obtained from Active Directory.</span></span> <span data-ttu-id="e72c2-139">Questo certificato interno viene quindi utilizzato per proteggere il messaggio.</span><span class="sxs-lookup"><span data-stu-id="e72c2-139">MSMQ uses this internal certificate to secure the message.</span></span> <span data-ttu-id="e72c2-140">Il gestore delle code di destinazione utilizza Active Directory per cercare e trovare un certificato corrispondente per autenticare il client e controlla inoltre che il SID corrisponda a quello del client.</span><span class="sxs-lookup"><span data-stu-id="e72c2-140">The receiving queue manager uses Active Directory to search and find a matching certificate to authenticate the client and checks that the SID also matches that of the client.</span></span> <span data-ttu-id="e72c2-141">Questo passaggio di autenticazione viene eseguito se un certificato, generato internamente nel caso della modalità di autenticazione `WindowsDomain` o generato esternamente nel caso della modalità di autenticazione `Certificate`, è allegato al messaggio anche se la coda di destinazione non è contrassegnata per l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="e72c2-141">This authentication step is executed if a certificate, either internally generated in the case of `WindowsDomain` authentication mode or externally generated in the case of `Certificate` authentication mode, is attached to the message even if the target queue is not marked as requiring authentication.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e72c2-142">Durante la creazione di una coda, è possibile contrassegnare la coda come autenticata per indicare che richiede l'autenticazione del client che invia messaggi alla coda.</span><span class="sxs-lookup"><span data-stu-id="e72c2-142">When creating a queue, you can mark the queue as an authenticated queue to indicate that the queue requires authentication of the client sending messages to the queue.</span></span> <span data-ttu-id="e72c2-143">In questo modo si ha la certezza che nessun messaggio non autenticato venga accettato nella coda.</span><span class="sxs-lookup"><span data-stu-id="e72c2-143">This ensures that no unauthenticated messages are accepted in the queue.</span></span>  
  
 <span data-ttu-id="e72c2-144">Anche il SID allegato al messaggio viene utilizzato per eseguire un controllo a fronte dell'ACL della coda di destinazione per accertare se il client è autorizzato a inviare messaggi alla coda.</span><span class="sxs-lookup"><span data-stu-id="e72c2-144">The SID attached with the message is also used to check against the target queue's ACL to ensure that the client has the authority to send messages to the queue.</span></span>  
  
#### <a name="certificate-authentication-mode"></a><span data-ttu-id="e72c2-145">Modalità di autenticazione con certificati</span><span class="sxs-lookup"><span data-stu-id="e72c2-145">Certificate Authentication Mode</span></span>  
 <span data-ttu-id="e72c2-146">La scelta dell'utilizzo della modalità di autenticazione con certificati non richiede l'integrazione di Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e72c2-146">The choice of using certificate authentication mode does not require Active Directory integration.</span></span> <span data-ttu-id="e72c2-147">In alcuni casi, infatti, ad esempio quando MSMQ è installato in modalità gruppo di lavoro (senza l'integrazione di Active Directory) o quando si utilizza il protocollo di trasferimento SRMP (SOAP Reliable Messaging Protocol) per inviare messaggi alla coda, solo <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> funziona.</span><span class="sxs-lookup"><span data-stu-id="e72c2-147">In fact, in some cases, such as when MSMQ is installed in workgroup mode (without Active Directory integration) or when using the SOAP Reliable Messaging Protocol (SRMP) transfer protocol to send messages to the queue, only <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> works.</span></span>  
  
 <span data-ttu-id="e72c2-148">Quando si invia un messaggio WCF con <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> , il canale WCF non associa un SID di Windows al messaggio MSMQ.</span><span class="sxs-lookup"><span data-stu-id="e72c2-148">When sending a WCF message with <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, the WCF channel does not attach a Windows SID to the MSMQ message.</span></span> <span data-ttu-id="e72c2-149">In tal caso l'ACL della coda di destinazione deve consentire l'accesso utente `Anonymous` per l'invio alla coda.</span><span class="sxs-lookup"><span data-stu-id="e72c2-149">As such, the target queue ACL must allow for `Anonymous` user access to send to the queue.</span></span> <span data-ttu-id="e72c2-150">Il gestore delle code di destinazione controlla se il messaggio MSMQ è stato firmato con il certificato ma non esegue alcuna autenticazione.</span><span class="sxs-lookup"><span data-stu-id="e72c2-150">The receiving queue manager checks whether the MSMQ message was signed with the certificate but does not perform any authentication.</span></span>  
  
 <span data-ttu-id="e72c2-151">Il certificato con le relative attestazioni e informazioni di identità viene popolato in <xref:System.ServiceModel.ServiceSecurityContext> dal canale di trasporto accodato WCF.</span><span class="sxs-lookup"><span data-stu-id="e72c2-151">The certificate with its claims and identity information is populated in the <xref:System.ServiceModel.ServiceSecurityContext> by the WCF queued transport channel.</span></span> <span data-ttu-id="e72c2-152">Il servizio può utilizzare queste informazioni per eseguire la propria autenticazione del mittente.</span><span class="sxs-lookup"><span data-stu-id="e72c2-152">The service can use this information to perform its own authentication of the sender.</span></span>  
  
### <a name="msmq-protection-level"></a><span data-ttu-id="e72c2-153">Livello di protezione MSMQ</span><span class="sxs-lookup"><span data-stu-id="e72c2-153">MSMQ Protection Level</span></span>  
 <span data-ttu-id="e72c2-154">Il livello di protezione determina la modalità di sicurezza del messaggio MSMQ per avere la certezza che non venga manomesso.</span><span class="sxs-lookup"><span data-stu-id="e72c2-154">The protection level dictates how to protect the MSMQ message to ensure that it is not tampered with.</span></span> <span data-ttu-id="e72c2-155">È specificato nella proprietà <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A>.</span><span class="sxs-lookup"><span data-stu-id="e72c2-155">It is specified in the <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> property.</span></span> <span data-ttu-id="e72c2-156">Il valore predefinito è <xref:System.Net.Security.ProtectionLevel.Sign>.</span><span class="sxs-lookup"><span data-stu-id="e72c2-156">The default value is <xref:System.Net.Security.ProtectionLevel.Sign>.</span></span>  
  
#### <a name="sign-protection-level"></a><span data-ttu-id="e72c2-157">Livello di protezione con firma</span><span class="sxs-lookup"><span data-stu-id="e72c2-157">Sign Protection Level</span></span>  
 <span data-ttu-id="e72c2-158">Il messaggio MSMQ viene firmato utilizzando il certificato generato internamente quando si utilizza la modalità di autenticazione `WindowsDomain` o un certificato generato esternamente nel caso della modalità di autenticazione `Certificate`.</span><span class="sxs-lookup"><span data-stu-id="e72c2-158">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or an externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
#### <a name="sign-and-encrypt-protection-level"></a><span data-ttu-id="e72c2-159">Livello di protezione con firma e crittografia</span><span class="sxs-lookup"><span data-stu-id="e72c2-159">Sign and Encrypt Protection Level</span></span>  
 <span data-ttu-id="e72c2-160">Il messaggio MSMQ viene firmato utilizzando il certificato generato internamente quando si utilizza la modalità di autenticazione `WindowsDomain` o un certificato generato esternamente nel caso della modalità di autenticazione `Certificate`.</span><span class="sxs-lookup"><span data-stu-id="e72c2-160">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
 <span data-ttu-id="e72c2-161">Oltre a essere firmato, il messaggio MSMQ viene crittografato mediante la chiave pubblica del certificato ottenuta da Active Directory appartenente al gestore delle code di destinazione in cui risiede la coda di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e72c2-161">In addition to signing the message, the MSMQ message is encrypted using the public key of the certificate obtained from Active Directory that belongs to the receiving queue manager that hosts the target queue.</span></span> <span data-ttu-id="e72c2-162">Il gestore delle code di origine garantisce che il messaggio MSMQ è crittografato in transito.</span><span class="sxs-lookup"><span data-stu-id="e72c2-162">The sending queue manager ensures that the MSMQ message is encrypted in transit.</span></span> <span data-ttu-id="e72c2-163">Il gestore delle code di destinazione gestione esegue la decrittografia del messaggio MSMQ mediante la chiave privata del certificato interno e archivia il messaggio nella coda (se autenticato e autorizzato) in testo non crittografato.</span><span class="sxs-lookup"><span data-stu-id="e72c2-163">The receiving queue manager decrypts the MSMQ message using the private key of its internal certificate and stores the message in the queue (if authenticated and authorized) in clear text.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e72c2-164">Per crittografare il messaggio è necessario l'accesso ad Active Directory (la proprietà`UseActiveDirectory` di <xref:System.ServiceModel.NetMsmqBinding> deve essere impostata su `true`) che può essere utilizzato con <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> e <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span><span class="sxs-lookup"><span data-stu-id="e72c2-164">To encrypt the message, Active Directory access is required (`UseActiveDirectory` property of <xref:System.ServiceModel.NetMsmqBinding> must be set to `true`) and can be used with both <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> and <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="none-protection-level"></a><span data-ttu-id="e72c2-165">Nessun livello di protezione</span><span class="sxs-lookup"><span data-stu-id="e72c2-165">None Protection Level</span></span>  
 <span data-ttu-id="e72c2-166">È implicita l'assenza di protezione quando la proprietà <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> è impostata su <xref:System.Net.Security.ProtectionLevel.None>.</span><span class="sxs-lookup"><span data-stu-id="e72c2-166">This is implied when <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.None>.</span></span> <span data-ttu-id="e72c2-167">Non può trattarsi di un valore valido per qualsiasi altra modalità di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="e72c2-167">This cannot be a valid value for any other authentication modes.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e72c2-168">Se il messaggio MSMQ è firmato, MSMQ controlla se è firmato con il certificato allegato (interno o esterno) indipendentemente dallo stato della coda, ovvero se autenticata o no.</span><span class="sxs-lookup"><span data-stu-id="e72c2-168">If the MSMQ message is signed, MSMQ checks whether the message is signed with the attached certificate (internal or external) independent of the state of the queue, that is, authenticated queue or not.</span></span>  
  
### <a name="msmq-encryption-algorithm"></a><span data-ttu-id="e72c2-169">Algoritmo di crittografia MSMQ</span><span class="sxs-lookup"><span data-stu-id="e72c2-169">MSMQ Encryption Algorithm</span></span>  
 <span data-ttu-id="e72c2-170">L'algoritmo di crittografia consente di specificare l'algoritmo da utilizzare per crittografare il messaggio MSMQ in transito.</span><span class="sxs-lookup"><span data-stu-id="e72c2-170">The encryption algorithm specifies the algorithm to use to encrypt the MSMQ message on the wire.</span></span> <span data-ttu-id="e72c2-171">Questa proprietà viene utilizzata solo se la proprietà <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> è impostata su <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span><span class="sxs-lookup"><span data-stu-id="e72c2-171">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="e72c2-172">Gli algoritmi supportati sono `RC4Stream` e `AES` e il valore predefinito è `RC4Stream`.</span><span class="sxs-lookup"><span data-stu-id="e72c2-172">The supported algorithms are `RC4Stream` and `AES` and the default is `RC4Stream`.</span></span>  
  
 <span data-ttu-id="e72c2-173">È possibile utilizzare l'algoritmo `AES` solo se nel mittente è installato MSMQ 4.0.</span><span class="sxs-lookup"><span data-stu-id="e72c2-173">You can use the `AES` algorithm only if the sender has MSMQ 4.0 installed.</span></span> <span data-ttu-id="e72c2-174">La coda di destinazione, inoltre, deve essere ospitata su MSMQ 4.0.</span><span class="sxs-lookup"><span data-stu-id="e72c2-174">In addition, the target queue must also be hosted on MSMQ 4.0.</span></span>  
  
### <a name="msmq-hash-algorithm"></a><span data-ttu-id="e72c2-175">Algoritmo hash MSMQ</span><span class="sxs-lookup"><span data-stu-id="e72c2-175">MSMQ Hash Algorithm</span></span>  
 <span data-ttu-id="e72c2-176">L'algoritmo hash consente di specificare l'algoritmo utilizzato per creare una firma digitale del messaggio MSMQ.</span><span class="sxs-lookup"><span data-stu-id="e72c2-176">The hash algorithm specifies the algorithm used to create a digital signature of the MSMQ message.</span></span> <span data-ttu-id="e72c2-177">Il gestore delle code di destinazione utilizza questo stesso algoritmo per autenticare il messaggio MSMQ.</span><span class="sxs-lookup"><span data-stu-id="e72c2-177">The receiving queue manager uses this same algorithm to authenticate the MSMQ message.</span></span> <span data-ttu-id="e72c2-178">Questa proprietà viene utilizzata solo se l'oggetto <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> è impostato su <xref:System.Net.Security.ProtectionLevel.Sign> o <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span><span class="sxs-lookup"><span data-stu-id="e72c2-178">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.Sign> or <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="e72c2-179">Gli algoritmi supportati sono `MD5`, `SHA1`, `SHA256` e `SHA512`.</span><span class="sxs-lookup"><span data-stu-id="e72c2-179">The supported algorithms are `MD5`, `SHA1`, `SHA256`, and `SHA512`.</span></span> <span data-ttu-id="e72c2-180">Il valore predefinito è `SHA1`.</span><span class="sxs-lookup"><span data-stu-id="e72c2-180">The default is `SHA1`.</span></span>

 <span data-ttu-id="e72c2-181">A causa di problemi di collisione con MD5/SHA1, Microsoft consiglia di SHA256 o meglio.</span><span class="sxs-lookup"><span data-stu-id="e72c2-181">Due to collision problems with MD5/SHA1, Microsoft recommends SHA256 or better.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="e72c2-182">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="e72c2-182">See also</span></span>

- [<span data-ttu-id="e72c2-183">Panoramica delle code</span><span class="sxs-lookup"><span data-stu-id="e72c2-183">Queues Overview</span></span>](queues-overview.md)
- [<span data-ttu-id="e72c2-184">Concetti relativi alla sicurezza</span><span class="sxs-lookup"><span data-stu-id="e72c2-184">Security Concepts</span></span>](security-concepts.md)
- [<span data-ttu-id="e72c2-185">Securing Services and Clients</span><span class="sxs-lookup"><span data-stu-id="e72c2-185">Securing Services and Clients</span></span>](securing-services-and-clients.md)
