---
title: Attivazione del flusso delle transazioni
ms.date: 03/30/2017
helpviewer_keywords:
- transactions [WCF], enabling flow
ms.assetid: a03f5041-5049-43f4-897c-e0292d4718f7
ms.openlocfilehash: 5cea72e503087ac2a8f3b6ff2a07c2919ee00630
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/09/2020
ms.locfileid: "84597423"
---
# <a name="enabling-transaction-flow"></a><span data-ttu-id="8d32b-102">Attivazione del flusso delle transazioni</span><span class="sxs-lookup"><span data-stu-id="8d32b-102">Enabling Transaction Flow</span></span>
<span data-ttu-id="8d32b-103">Windows Communication Foundation (WCF) fornisce opzioni estremamente flessibili per il controllo del flusso delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="8d32b-103">Windows Communication Foundation (WCF) provides highly flexible options for controlling transaction flow.</span></span> <span data-ttu-id="8d32b-104">Le impostazioni del flusso delle transazioni di un servizio possono essere espresse con una determinata combinazione di attributi e configurazione.</span><span class="sxs-lookup"><span data-stu-id="8d32b-104">A service's transaction flow settings can be expressed using a combination of attributes and configuration.</span></span>  
  
## <a name="transaction-flow-settings"></a><span data-ttu-id="8d32b-105">Impostazioni del flusso delle transazioni</span><span class="sxs-lookup"><span data-stu-id="8d32b-105">Transaction Flow Settings</span></span>  
 <span data-ttu-id="8d32b-106">Le impostazioni del flusso delle transazioni vengono generate per un endpoint del servizio come esito dell'intersezione dei tre valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="8d32b-106">Transaction flow settings are generated for a service endpoint as a result of the intersection of the following three values:</span></span>  
  
- <span data-ttu-id="8d32b-107">L'attributo <xref:System.ServiceModel.TransactionFlowAttribute> specificato per ogni metodo contenuto nel contratto di servizio.</span><span class="sxs-lookup"><span data-stu-id="8d32b-107">The <xref:System.ServiceModel.TransactionFlowAttribute> attribute specified for each method in the service contract.</span></span>  
  
- <span data-ttu-id="8d32b-108">La proprietà `TransactionFlow` nella specifica associazione.</span><span class="sxs-lookup"><span data-stu-id="8d32b-108">The `TransactionFlow` binding property in the specific binding.</span></span>  
  
- <span data-ttu-id="8d32b-109">La proprietà `TransactionFlowProtocol` nella specifica associazione.</span><span class="sxs-lookup"><span data-stu-id="8d32b-109">The `TransactionFlowProtocol` binding property in the specific binding.</span></span> <span data-ttu-id="8d32b-110">La proprietà `TransactionFlowProtocol` di associazione consente di scegliere fra due protocolli di transazione diversi che è possibile utilizzare per propagare una transazione.</span><span class="sxs-lookup"><span data-stu-id="8d32b-110">The `TransactionFlowProtocol` binding property enables you to choose among two different transaction protocols that you can use to flow a transaction.</span></span> <span data-ttu-id="8d32b-111">Questi valori vengono descritti brevemente nelle sezioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="8d32b-111">The following sections briefly describe each of them.</span></span>  
  
### <a name="ws-atomictransaction-protocol"></a><span data-ttu-id="8d32b-112">Protocollo WS-AtomicTransaction</span><span class="sxs-lookup"><span data-stu-id="8d32b-112">WS-AtomicTransaction Protocol</span></span>  
 <span data-ttu-id="8d32b-113">Il protocollo WS-AtomicTransaction (WS-AT) è utile per scenari in cui è richiesta l'interoperabilità con stack del protocollo di terze parti.</span><span class="sxs-lookup"><span data-stu-id="8d32b-113">The WS-AtomicTransaction (WS-AT) protocol is useful for scenarios when interoperability with third-party protocol stacks is required.</span></span>  
  
### <a name="oletransactions-protocol"></a><span data-ttu-id="8d32b-114">Protocollo OleTransactions</span><span class="sxs-lookup"><span data-stu-id="8d32b-114">OleTransactions Protocol</span></span>  
 <span data-ttu-id="8d32b-115">Il protocollo OleTransactions è utile per gli scenari in cui l'interoperabilità con stack del protocollo di terze parti non è necessario e il distributore di un servizio sa in anticipo che il servizio del protocollo WS-AT è disattivato localmente o che la topologia di rete esistente non favorisce l'utilizzo di WS-AT.</span><span class="sxs-lookup"><span data-stu-id="8d32b-115">The OleTransactions protocol is useful for scenarios when interoperability with third-party protocol stacks is not required, and the deployer of a service knows in advance that the WS-AT protocol service is disabled locally or the existing network topology does not favor the usage of WS-AT.</span></span>  
  
 <span data-ttu-id="8d32b-116">Nella tabella seguente sono mostrati i tipi diversi di flussi delle transazioni che possono essere generati utilizzando queste varie combinazioni.</span><span class="sxs-lookup"><span data-stu-id="8d32b-116">The following table shows the different types of transaction flows that can be generated using these various combinations.</span></span>  
  
|<span data-ttu-id="8d32b-117">TransactionFlow</span><span class="sxs-lookup"><span data-stu-id="8d32b-117">TransactionFlow</span></span><br /><br /> <span data-ttu-id="8d32b-118">binding</span><span class="sxs-lookup"><span data-stu-id="8d32b-118">binding</span></span>|<span data-ttu-id="8d32b-119">Proprietà di associazione TransactionFlow</span><span class="sxs-lookup"><span data-stu-id="8d32b-119">TransactionFlow binding property</span></span>|<span data-ttu-id="8d32b-120">Proprietà di associazione TransactionFlowProtocol</span><span class="sxs-lookup"><span data-stu-id="8d32b-120">TransactionFlowProtocol binding protocol</span></span>|<span data-ttu-id="8d32b-121">Tipo del flusso delle transazioni</span><span class="sxs-lookup"><span data-stu-id="8d32b-121">Type of transaction flow</span></span>|  
|---------------------------------|--------------------------------------|----------------------------------------------|------------------------------|  
|<span data-ttu-id="8d32b-122">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="8d32b-122">Mandatory</span></span>|<span data-ttu-id="8d32b-123">true</span><span class="sxs-lookup"><span data-stu-id="8d32b-123">true</span></span>|<span data-ttu-id="8d32b-124">WS-AT</span><span class="sxs-lookup"><span data-stu-id="8d32b-124">WS-AT</span></span>|<span data-ttu-id="8d32b-125">La transazione deve essere propagata nel formato WS-AT interoperativo.</span><span class="sxs-lookup"><span data-stu-id="8d32b-125">Transaction must be flowed in the interoperable WS-AT format.</span></span>|  
|<span data-ttu-id="8d32b-126">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="8d32b-126">Mandatory</span></span>|<span data-ttu-id="8d32b-127">true</span><span class="sxs-lookup"><span data-stu-id="8d32b-127">true</span></span>|<span data-ttu-id="8d32b-128">OleTransactions</span><span class="sxs-lookup"><span data-stu-id="8d32b-128">OleTransactions</span></span>|<span data-ttu-id="8d32b-129">La transazione deve essere propagata nel formato WCF OleTransactions.</span><span class="sxs-lookup"><span data-stu-id="8d32b-129">Transaction must be flowed in the WCF OleTransactions format.</span></span>|  
|<span data-ttu-id="8d32b-130">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="8d32b-130">Mandatory</span></span>|<span data-ttu-id="8d32b-131">false</span><span class="sxs-lookup"><span data-stu-id="8d32b-131">false</span></span>|<span data-ttu-id="8d32b-132">Non applicabile</span><span class="sxs-lookup"><span data-stu-id="8d32b-132">Not applicable</span></span>|<span data-ttu-id="8d32b-133">Non applicabile perché questa configurazione non è valida.</span><span class="sxs-lookup"><span data-stu-id="8d32b-133">Not applicable because this is an invalid configuration.</span></span>|  
|<span data-ttu-id="8d32b-134">Consentito</span><span class="sxs-lookup"><span data-stu-id="8d32b-134">Allowed</span></span>|<span data-ttu-id="8d32b-135">true</span><span class="sxs-lookup"><span data-stu-id="8d32b-135">true</span></span>|<span data-ttu-id="8d32b-136">WS-AT</span><span class="sxs-lookup"><span data-stu-id="8d32b-136">WS-AT</span></span>|<span data-ttu-id="8d32b-137">La transazione può essere propagata nel formato WS-AT interoperativo.</span><span class="sxs-lookup"><span data-stu-id="8d32b-137">Transaction may be flowed in the interoperable WS-AT format.</span></span>|  
|<span data-ttu-id="8d32b-138">Consentito</span><span class="sxs-lookup"><span data-stu-id="8d32b-138">Allowed</span></span>|<span data-ttu-id="8d32b-139">true</span><span class="sxs-lookup"><span data-stu-id="8d32b-139">true</span></span>|<span data-ttu-id="8d32b-140">OleTransactions</span><span class="sxs-lookup"><span data-stu-id="8d32b-140">OleTransactions</span></span>|<span data-ttu-id="8d32b-141">La transazione può essere propagata nel formato WCF OleTransactions.</span><span class="sxs-lookup"><span data-stu-id="8d32b-141">Transaction may be flowed in the WCF OleTransactions format.</span></span>|  
|<span data-ttu-id="8d32b-142">Consentito</span><span class="sxs-lookup"><span data-stu-id="8d32b-142">Allowed</span></span>|<span data-ttu-id="8d32b-143">false</span><span class="sxs-lookup"><span data-stu-id="8d32b-143">false</span></span>|<span data-ttu-id="8d32b-144">Qualsiasi valore</span><span class="sxs-lookup"><span data-stu-id="8d32b-144">Any value</span></span>|<span data-ttu-id="8d32b-145">Una transazione non è propagata.</span><span class="sxs-lookup"><span data-stu-id="8d32b-145">A transaction is not flowed.</span></span>|  
|<span data-ttu-id="8d32b-146">NotAllowed</span><span class="sxs-lookup"><span data-stu-id="8d32b-146">NotAllowed</span></span>|<span data-ttu-id="8d32b-147">Qualsiasi valore</span><span class="sxs-lookup"><span data-stu-id="8d32b-147">Any value</span></span>|<span data-ttu-id="8d32b-148">Qualsiasi valore</span><span class="sxs-lookup"><span data-stu-id="8d32b-148">Any value</span></span>|<span data-ttu-id="8d32b-149">Una transazione non è propagata.</span><span class="sxs-lookup"><span data-stu-id="8d32b-149">A transaction is not flowed.</span></span>|  
  
 <span data-ttu-id="8d32b-150">Nella tabella seguente viene fornito un riepilogo del risultato di elaborazione dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="8d32b-150">The following table summarizes the message processing result.</span></span>  
  
|<span data-ttu-id="8d32b-151">Messaggio in arrivo.</span><span class="sxs-lookup"><span data-stu-id="8d32b-151">Incoming message</span></span>|<span data-ttu-id="8d32b-152">Impostazioni di TransactionFlow</span><span class="sxs-lookup"><span data-stu-id="8d32b-152">TransactionFlow setting</span></span>|<span data-ttu-id="8d32b-153">Intestazione della transazione</span><span class="sxs-lookup"><span data-stu-id="8d32b-153">Transaction header</span></span>|<span data-ttu-id="8d32b-154">Risultato di elaborazione del messaggio</span><span class="sxs-lookup"><span data-stu-id="8d32b-154">Message processing result</span></span>|  
|----------------------|-----------------------------|------------------------|-------------------------------|  
|<span data-ttu-id="8d32b-155">La transazione corrisponde al formato previsto del protocollo</span><span class="sxs-lookup"><span data-stu-id="8d32b-155">Transaction matches expected protocol format</span></span>|<span data-ttu-id="8d32b-156">Consentito o obbligatorio</span><span class="sxs-lookup"><span data-stu-id="8d32b-156">Allowed or Mandatory</span></span>|<span data-ttu-id="8d32b-157">`MustUnderstand` è uguale a `true`.</span><span class="sxs-lookup"><span data-stu-id="8d32b-157">`MustUnderstand` equals `true`.</span></span>|<span data-ttu-id="8d32b-158">Processo</span><span class="sxs-lookup"><span data-stu-id="8d32b-158">Process</span></span>|  
|<span data-ttu-id="8d32b-159">La transazione non corrisponde al formato previsto del protocollo</span><span class="sxs-lookup"><span data-stu-id="8d32b-159">Transaction does not match expected protocol format</span></span>|<span data-ttu-id="8d32b-160">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="8d32b-160">Mandatory</span></span>|<span data-ttu-id="8d32b-161">`MustUnderstand` è uguale a `false`.</span><span class="sxs-lookup"><span data-stu-id="8d32b-161">`MustUnderstand` equals `false`.</span></span>|<span data-ttu-id="8d32b-162">Rifiutato perché una transazione è obbligatoria</span><span class="sxs-lookup"><span data-stu-id="8d32b-162">Rejected because a transaction is required</span></span>|  
|<span data-ttu-id="8d32b-163">La transazione non corrisponde al formato previsto del protocollo</span><span class="sxs-lookup"><span data-stu-id="8d32b-163">Transaction does not match expected protocol format</span></span>|<span data-ttu-id="8d32b-164">Consentito</span><span class="sxs-lookup"><span data-stu-id="8d32b-164">Allowed</span></span>|<span data-ttu-id="8d32b-165">`MustUnderstand` è uguale a `false`.</span><span class="sxs-lookup"><span data-stu-id="8d32b-165">`MustUnderstand` equals `false`.</span></span>|<span data-ttu-id="8d32b-166">Rifiutato perché l'intestazione non è compresa</span><span class="sxs-lookup"><span data-stu-id="8d32b-166">Rejected because the header is not understood</span></span>|  
|<span data-ttu-id="8d32b-167">Transazione che utilizza qualsiasi formato di protocollo</span><span class="sxs-lookup"><span data-stu-id="8d32b-167">Transaction using any protocol format</span></span>|<span data-ttu-id="8d32b-168">NotAllowed</span><span class="sxs-lookup"><span data-stu-id="8d32b-168">NotAllowed</span></span>|<span data-ttu-id="8d32b-169">`MustUnderstand` è uguale a `false`.</span><span class="sxs-lookup"><span data-stu-id="8d32b-169">`MustUnderstand` equals `false`.</span></span>|<span data-ttu-id="8d32b-170">Rifiutato perché l'intestazione non è compresa</span><span class="sxs-lookup"><span data-stu-id="8d32b-170">Rejected because the header is not understood</span></span>|  
|<span data-ttu-id="8d32b-171">Nessuna transazione</span><span class="sxs-lookup"><span data-stu-id="8d32b-171">No transaction</span></span>|<span data-ttu-id="8d32b-172">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="8d32b-172">Mandatory</span></span>|<span data-ttu-id="8d32b-173">N/D</span><span class="sxs-lookup"><span data-stu-id="8d32b-173">N/A</span></span>|<span data-ttu-id="8d32b-174">Rifiutato perché una transazione è obbligatoria</span><span class="sxs-lookup"><span data-stu-id="8d32b-174">Rejected because a transaction is required</span></span>|  
|<span data-ttu-id="8d32b-175">Nessuna transazione</span><span class="sxs-lookup"><span data-stu-id="8d32b-175">No transaction</span></span>|<span data-ttu-id="8d32b-176">Consentito</span><span class="sxs-lookup"><span data-stu-id="8d32b-176">Allowed</span></span>|<span data-ttu-id="8d32b-177">N/D</span><span class="sxs-lookup"><span data-stu-id="8d32b-177">N/A</span></span>|<span data-ttu-id="8d32b-178">Processo</span><span class="sxs-lookup"><span data-stu-id="8d32b-178">Process</span></span>|  
|<span data-ttu-id="8d32b-179">Nessuna transazione</span><span class="sxs-lookup"><span data-stu-id="8d32b-179">No transaction</span></span>|<span data-ttu-id="8d32b-180">NotAllowed</span><span class="sxs-lookup"><span data-stu-id="8d32b-180">NotAllowed</span></span>|<span data-ttu-id="8d32b-181">N/D</span><span class="sxs-lookup"><span data-stu-id="8d32b-181">N/A</span></span>|<span data-ttu-id="8d32b-182">Processo</span><span class="sxs-lookup"><span data-stu-id="8d32b-182">Process</span></span>|  
  
 <span data-ttu-id="8d32b-183">Mentre ogni metodo di un contratto può disporre di requisiti diversi per il flusso delle transazioni, l'impostazione del protocollo relativo al flusso delle transazioni è limitato all'ambito del livello dell'associazione.</span><span class="sxs-lookup"><span data-stu-id="8d32b-183">While each method on a contract can have different transaction flow requirements, the transaction flow protocol setting is scoped at the level of the binding.</span></span> <span data-ttu-id="8d32b-184">Tutti i metodi che condividono lo stesso endpoint, e di conseguenza la stessa associazione, condividono inoltre lo stesso criterio che ammette o richiede un flusso di transazioni, nonché, se opportuno, lo stesso protocollo di transazione.</span><span class="sxs-lookup"><span data-stu-id="8d32b-184">This means that all methods that share the same endpoint (and therefore the same binding) also share the same policy allowing or requiring transaction flow, as well as the same transaction protocol if applicable.</span></span>  
  
## <a name="enabling-transaction-flow-at-the-method-level"></a><span data-ttu-id="8d32b-185">Attivazione del flusso delle transazioni a livello di metodo</span><span class="sxs-lookup"><span data-stu-id="8d32b-185">Enabling Transaction Flow at the Method Level</span></span>  
 <span data-ttu-id="8d32b-186">I requisiti del flusso delle transazioni non sono sempre gli stessi per tutti i metodi di un contratto di servizio.</span><span class="sxs-lookup"><span data-stu-id="8d32b-186">Transaction flow requirements are not always the same for all methods in a service contract.</span></span> <span data-ttu-id="8d32b-187">WCF fornisce pertanto anche un meccanismo basato su attributi che consente di esprimere le preferenze del flusso delle transazioni di ciascun metodo.</span><span class="sxs-lookup"><span data-stu-id="8d32b-187">Therefore, WCF also provides an attribute-based mechanism to allow each method's transaction flow preferences to be expressed.</span></span> <span data-ttu-id="8d32b-188"><xref:System.ServiceModel.TransactionFlowAttribute>, infatti, consente di specificare il livello al quale un'operazione del servizio accetta un'intestazione di transazione.</span><span class="sxs-lookup"><span data-stu-id="8d32b-188">This is achieved by the <xref:System.ServiceModel.TransactionFlowAttribute> that specifies the level in which a service operation accepts a transaction header.</span></span> <span data-ttu-id="8d32b-189">Se si desidera attivare il flusso delle transazioni, è necessario contrassegnare i metodi del contratto di servizio con questo attributo.</span><span class="sxs-lookup"><span data-stu-id="8d32b-189">You should mark your service contract methods with this attribute if you want to enable transaction flow.</span></span> <span data-ttu-id="8d32b-190">L'attributo accetta uno dei valori dell'enumerazione <xref:System.ServiceModel.TransactionFlowOption>, in cui il valore predefinito è <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span><span class="sxs-lookup"><span data-stu-id="8d32b-190">This attribute takes one of the values of the <xref:System.ServiceModel.TransactionFlowOption> enumeration, in which the default value is <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span></span> <span data-ttu-id="8d32b-191">Se si specifica qualsiasi valore ad eccezione di <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>, è necessario che il metodo non sia unidirezionale.</span><span class="sxs-lookup"><span data-stu-id="8d32b-191">If any value except <xref:System.ServiceModel.TransactionFlowOption.NotAllowed> is specified, the method is required to not be one-way.</span></span> <span data-ttu-id="8d32b-192">Gli sviluppatori possono utilizzare questo attributo per specificare i requisiti del flusso delle transazioni a livello di metodo o i vincoli in fase di progettazione.</span><span class="sxs-lookup"><span data-stu-id="8d32b-192">A developer can use this attribute to specify method-level transaction flow requirements or constraints at design time.</span></span>  
  
## <a name="enabling-transaction-flow-at-the-endpoint-level"></a><span data-ttu-id="8d32b-193">Attivazione del flusso delle transazioni a livello di endpoint</span><span class="sxs-lookup"><span data-stu-id="8d32b-193">Enabling Transaction Flow at the Endpoint Level</span></span>  
 <span data-ttu-id="8d32b-194">Oltre all'impostazione del flusso delle transazioni a livello di metodo <xref:System.ServiceModel.TransactionFlowAttribute> fornita dall'attributo, WCF fornisce un'impostazione a livello di endpoint per il flusso delle transazioni che consente agli amministratori di controllare il flusso delle transazioni a un livello superiore.</span><span class="sxs-lookup"><span data-stu-id="8d32b-194">In addition to the method-level transaction flow setting  the <xref:System.ServiceModel.TransactionFlowAttribute> attribute provides, WCF provides an endpoint-wide setting for transaction flow to allow administrators to control transaction flow at a higher level.</span></span>  
  
 <span data-ttu-id="8d32b-195">Questa possibilità è data da <xref:System.ServiceModel.Channels.TransactionFlowBindingElement>, che consente di attivare o disattivare il flusso delle transazioni in arrivo nelle impostazioni di associazione di un endpoint, nonché di specificare il formato del protocollo di transazione desiderato per le transazioni in arrivo.</span><span class="sxs-lookup"><span data-stu-id="8d32b-195">This is achieved by the <xref:System.ServiceModel.Channels.TransactionFlowBindingElement>, which enables you to enable or disable incoming transaction flow in an endpoint’s binding settings, as well as to specify the desired transaction protocol format for incoming transactions.</span></span>  
  
 <span data-ttu-id="8d32b-196">Se nell'associazione il flusso delle transazioni è disattivato ma una delle operazioni di un contratto di servizio richiede una transazione in arrivo, in fase di avvio del servizio viene generata un'eccezione di convalida.</span><span class="sxs-lookup"><span data-stu-id="8d32b-196">If the binding has disabled transaction flow, but one of the operations on a service contract requires an incoming transaction, then a validation exception is thrown at service startup.</span></span>  
  
 <span data-ttu-id="8d32b-197">La maggior parte delle associazioni permanenti fornite da WCF contiene gli `transactionFlow` `transactionProtocol` attributi e per consentire la configurazione dell'associazione specifica in modo da accettare le transazioni in ingresso.</span><span class="sxs-lookup"><span data-stu-id="8d32b-197">Most of the standing bindings WCF provides contain the `transactionFlow` and `transactionProtocol` attributes to enable you to configure the specific binding to accept incoming transactions.</span></span> <span data-ttu-id="8d32b-198">Per ulteriori informazioni sull'impostazione degli elementi di configurazione, vedere [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) .</span><span class="sxs-lookup"><span data-stu-id="8d32b-198">For more information about setting the configuration elements, see [\<binding>](../../configure-apps/file-schema/wcf/bindings.md).</span></span>  
  
 <span data-ttu-id="8d32b-199">Gli amministratori o i distributori possono avvalersi del flusso delle transazioni a livello di endpoint per configurare i requisiti del flusso o i vincoli in fase di distribuzione utilizzando il file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="8d32b-199">An administrator or deployer can use endpoint-level transaction flow to configure transaction flow requirements or constraints at deployment time using the configuration file.</span></span>  
  
## <a name="security"></a><span data-ttu-id="8d32b-200">Sicurezza</span><span class="sxs-lookup"><span data-stu-id="8d32b-200">Security</span></span>  
 <span data-ttu-id="8d32b-201">Per garantire la protezione e l'integrità del sistema, è necessario proteggere gli scambi di messaggi durante la propagazione delle transazioni tra applicazioni.</span><span class="sxs-lookup"><span data-stu-id="8d32b-201">To ensure system security and integrity, you must secure message exchanges when flowing transactions between applications.</span></span> <span data-ttu-id="8d32b-202">È necessario non propagare o divulgare dettagli delle transazioni ad applicazioni non autorizzate a partecipare alla stessa transazione.</span><span class="sxs-lookup"><span data-stu-id="8d32b-202">You should not flow or disclose transaction details to any application that is not entitled to participate in the same transaction.</span></span>  
  
 <span data-ttu-id="8d32b-203">Quando si generano client WCF in servizi Web sconosciuti o non attendibili tramite lo scambio di metadati, le chiamate alle operazioni su questi servizi Web devono impedire la transazione corrente, se possibile.</span><span class="sxs-lookup"><span data-stu-id="8d32b-203">When generating WCF clients to unknown or untrusted Web services through the use of metadata exchange, calls to operations on these Web services should suppress the current transaction if possible.</span></span> <span data-ttu-id="8d32b-204">Nell'esempio riportato di seguito viene illustrato come procedere.</span><span class="sxs-lookup"><span data-stu-id="8d32b-204">The following example demonstrates how to do this.</span></span>  
  
```csharp
//client code which has an ambient transaction  
using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Suppress))  
{  
    // No transaction will flow to this operation  
    untrustedProxy.Operation1(...);  
    scope.Complete();  
}  
//remainder of client code  
```  
  
 <span data-ttu-id="8d32b-205">I servizi, inoltre, devono essere configurati per accettare transazioni in arrivo solo dai client che hanno autenticato e autorizzato.</span><span class="sxs-lookup"><span data-stu-id="8d32b-205">In addition, services should be configured to accept incoming transactions only from clients that they have authenticated and authorized.</span></span> <span data-ttu-id="8d32b-206">Le transazioni in arrivo devono essere accettate solo se provengono da client estremamente attendibili.</span><span class="sxs-lookup"><span data-stu-id="8d32b-206">Incoming transactions should only be accepted if they come from highly trusted clients.</span></span>  
  
## <a name="policy-assertions"></a><span data-ttu-id="8d32b-207">Asserzioni di criteri</span><span class="sxs-lookup"><span data-stu-id="8d32b-207">Policy Assertions</span></span>  
 <span data-ttu-id="8d32b-208">WCF utilizza le asserzioni di criteri per controllare il flusso delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="8d32b-208">WCF uses policy assertions to control transaction flow.</span></span> <span data-ttu-id="8d32b-209">Le asserzioni di criteri possono trovarsi nel documento dei criteri di un servizio, generato aggregando contratti, configurazione e attributi.</span><span class="sxs-lookup"><span data-stu-id="8d32b-209">Policy assertions can be found in a service’s policy document, which is generated by aggregating contracts, configuration, and attributes.</span></span> <span data-ttu-id="8d32b-210">Il client può ottenere il documento dei criteri del servizio utilizzando un GET HTTP o un request/reply di WS-MetadataExchange.</span><span class="sxs-lookup"><span data-stu-id="8d32b-210">The client can obtain the service’s policy document using an HTTP GET or a WS-MetadataExchange request-reply.</span></span> <span data-ttu-id="8d32b-211">I client possono quindi elaborare il documento dei criteri per determinare quali operazioni di un contratto di servizio possono supportare o richiedere il flusso delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="8d32b-211">Clients can then process the policy document to determine which operations on a service contract may support or require transaction flow.</span></span>  
  
 <span data-ttu-id="8d32b-212">Le asserzioni di criteri di un flusso di transazioni incidono sul flusso stesso specificando le intestazioni SOAP che un client deve inviare a un servizio per rappresentare una transazione.</span><span class="sxs-lookup"><span data-stu-id="8d32b-212">Transaction flow policy assertions affect transaction flow by specifying the SOAP headers that a client should send to a service to represent a transaction.</span></span> <span data-ttu-id="8d32b-213">Tutte le intestazioni di transazione devono essere contrassegnate con `MustUnderstand` uguale a `true`.</span><span class="sxs-lookup"><span data-stu-id="8d32b-213">All transaction headers must be marked with `MustUnderstand` equal to `true`.</span></span> <span data-ttu-id="8d32b-214">Qualsiasi messaggio con un'intestazione contrassegnata diversamente viene rifiutato con un errore SOAP.</span><span class="sxs-lookup"><span data-stu-id="8d32b-214">Any message with a header marked otherwise is rejected with a SOAP fault.</span></span>  
  
 <span data-ttu-id="8d32b-215">In una singola operazione può essere presente solo un'asserzione di criteri correlata alla transazione.</span><span class="sxs-lookup"><span data-stu-id="8d32b-215">Only one transaction-related policy assertion can be present on a single operation.</span></span> <span data-ttu-id="8d32b-216">I documenti di criteri con più di un'asserzione di transazione in un'operazione sono considerati non validi e vengono rifiutati da WCF.</span><span class="sxs-lookup"><span data-stu-id="8d32b-216">Policy documents with more than one transaction assertion on an operation are considered invalid and are rejected by WCF.</span></span> <span data-ttu-id="8d32b-217">In ogni tipo di porta, inoltre, può essere presente solo un protocollo di transazione.</span><span class="sxs-lookup"><span data-stu-id="8d32b-217">In addition, only a single transaction protocol can be present inside each port type.</span></span> <span data-ttu-id="8d32b-218">I documenti dei criteri con operazioni che fanno riferimento a più di un protocollo di transazione all'interno di un singolo tipo di porta vengono considerati non validi e vengono rifiutati dallo [strumento ServiceModel Metadata Utility Tool (Svcutil. exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="8d32b-218">Policy documents with operations referencing more than one transaction protocol inside a single port type are considered invalid, and are rejected by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span> <span data-ttu-id="8d32b-219">I documenti di criteri con asserzioni di transazione presenti nei messaggi di output o nei messaggi di input unidirezionali vengono inoltre considerati non validi.</span><span class="sxs-lookup"><span data-stu-id="8d32b-219">Policy documents with transaction assertions present on output messages or one-way input messages are also considered invalid.</span></span>
