---
title: 'Procedura: creare una classe WSFederationHttpBinding'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, federation
- federation
ms.assetid: e54897d7-aa6c-46ec-a278-b2430c8c2e10
ms.openlocfilehash: ccc28c46e8be0b835cf08d372ef85b8a66e989ef
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/09/2020
ms.locfileid: "84595440"
---
# <a name="how-to-create-a-wsfederationhttpbinding"></a><span data-ttu-id="ea6da-102">Procedura: creare una classe WSFederationHttpBinding</span><span class="sxs-lookup"><span data-stu-id="ea6da-102">How to: Create a WSFederationHttpBinding</span></span>

<span data-ttu-id="ea6da-103">In Windows Communication Foundation (WCF) la <xref:System.ServiceModel.WSFederationHttpBinding> classe ( [\<wsFederationHttpBinding>](../../configure-apps/file-schema/wcf/wsfederationhttpbinding.md) in configurazione) fornisce un meccanismo per esporre un servizio federato.</span><span class="sxs-lookup"><span data-stu-id="ea6da-103">In Windows Communication Foundation (WCF), the <xref:System.ServiceModel.WSFederationHttpBinding> class ([\<wsFederationHttpBinding>](../../configure-apps/file-schema/wcf/wsfederationhttpbinding.md) in configuration) provides a mechanism for exposing a federated service.</span></span> <span data-ttu-id="ea6da-104">ovvero un servizio che richiede ai client di autenticarsi usando un token di sicurezza rilasciato da un servizio token di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ea6da-104">That is, a service that requires clients to authenticate using a security token issued by a security token service.</span></span> <span data-ttu-id="ea6da-105">In questo argomento viene illustrato come impostare una classe <xref:System.ServiceModel.WSFederationHttpBinding> nel codice e nella configurazione.</span><span class="sxs-lookup"><span data-stu-id="ea6da-105">This topic shows how to set up a <xref:System.ServiceModel.WSFederationHttpBinding> in both code and configuration.</span></span> <span data-ttu-id="ea6da-106">Una volta creata l'associazione, è possibile impostare un endpoint per usarla.</span><span class="sxs-lookup"><span data-stu-id="ea6da-106">Once the binding is created, you can set up an endpoint to use that binding.</span></span>

 <span data-ttu-id="ea6da-107">I passaggi di base sono elencati di seguito:</span><span class="sxs-lookup"><span data-stu-id="ea6da-107">The basic steps are outlined as follows:</span></span>

1. <span data-ttu-id="ea6da-108">Selezionare una modalità di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ea6da-108">Select a security mode.</span></span> <span data-ttu-id="ea6da-109">La classe <xref:System.ServiceModel.WSFederationHttpBinding> supporta `Message`, che assicura protezione end-to-end a livello di messaggio, anche su più hop, e `TransportWithMessageCredential`, che offre prestazioni migliori nei casi in cui il client e il servizio possono stabilire una connessione diretta su HTTPS.</span><span class="sxs-lookup"><span data-stu-id="ea6da-109">The <xref:System.ServiceModel.WSFederationHttpBinding> supports `Message`, which provides end-to-end security at the message level, even across multiple hops, and `TransportWithMessageCredential`, which provides better performance in cases where the client and the service can make a direct connection over HTTPS.</span></span>

    > [!NOTE]
    > <span data-ttu-id="ea6da-110">La classe <xref:System.ServiceModel.WSFederationHttpBinding> supporta anche `None` come modalità di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ea6da-110">The <xref:System.ServiceModel.WSFederationHttpBinding> also supports `None` as a security mode.</span></span> <span data-ttu-id="ea6da-111">Questa modalità non è protetta e viene fornita solo a scopo di debug.</span><span class="sxs-lookup"><span data-stu-id="ea6da-111">This mode is not secure and is provided for debugging purposes only.</span></span> <span data-ttu-id="ea6da-112">Se un endpoint di servizio viene distribuito con un oggetto <xref:System.ServiceModel.WSFederationHttpBinding> con la relativa modalità di sicurezza impostata su `None` , l'associazione client risultante (generata dallo [strumento ServiceModel Metadata Utility Tool (Svcutil. exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md)) è un oggetto <xref:System.ServiceModel.WSHttpBinding> con la modalità di sicurezza `None` .</span><span class="sxs-lookup"><span data-stu-id="ea6da-112">If a service endpoint is deployed with a <xref:System.ServiceModel.WSFederationHttpBinding> with its security mode set to `None`, the resulting client binding (generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md)) is a <xref:System.ServiceModel.WSHttpBinding> with a security mode of `None`.</span></span>

     <span data-ttu-id="ea6da-113">Diversamente da altre associazioni fornite dal sistema, non è necessario selezionare un tipo di credenziale client quando si usa `WSFederationHttpBinding`,</span><span class="sxs-lookup"><span data-stu-id="ea6da-113">Unlike other system-provided bindings, it is not necessary to select a client credential type when using the `WSFederationHttpBinding`.</span></span> <span data-ttu-id="ea6da-114">poiché il tipo di credenziale client è sempre un token rilasciato.</span><span class="sxs-lookup"><span data-stu-id="ea6da-114">This is because the client credential type is always an issued token.</span></span> <span data-ttu-id="ea6da-115">WCF acquisisce un token da un'autorità emittente specificata e presenta il token al servizio per autenticare il client.</span><span class="sxs-lookup"><span data-stu-id="ea6da-115">WCF acquires a token from a specified issuer and presents that token to the service to authenticate the client.</span></span>

2. <span data-ttu-id="ea6da-116">Sui client federati, impostare la proprietà <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> sull'URL del servizio token di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ea6da-116">On federated clients, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> property to the URL of the security token service.</span></span> <span data-ttu-id="ea6da-117">Impostare la proprietà <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> sull'associazione da usare per comunicare con il servizio token di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ea6da-117">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> to the binding to use to communicate with the security token service.</span></span>

3. <span data-ttu-id="ea6da-118">Facoltativa.</span><span class="sxs-lookup"><span data-stu-id="ea6da-118">Optional.</span></span> <span data-ttu-id="ea6da-119">Impostare la proprietà <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> sull'URI (Uniform Resource Identifier) di un tipo di token.</span><span class="sxs-lookup"><span data-stu-id="ea6da-119">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> property to the Uniform Resource Identifier (URI) of a token type.</span></span> <span data-ttu-id="ea6da-120">Nei servizi federati, specificare il tipo di token previsto dal servizio.</span><span class="sxs-lookup"><span data-stu-id="ea6da-120">On federated services, specify the token type that the service expects.</span></span> <span data-ttu-id="ea6da-121">Sui client federati, specificare il tipo di token richiesto dal client al servizio token di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ea6da-121">On federated clients, specify the token type the client requests from the security token service.</span></span>

     <span data-ttu-id="ea6da-122">Se non viene specificato alcun tipo di token, i client generano token RST (Request Security Token) WS-Trust senza un URI del tipo di token e i servizi prevedono che l'autenticazione client venga eseguita, per impostazione predefinita, usando un token SAML (Security Assertions Markup Language) 1.1.</span><span class="sxs-lookup"><span data-stu-id="ea6da-122">If no token type is specified, clients generate WS-Trust Request Security Tokens (RSTs) without a token type URI, and services expect client authentication using a Security Assertions Markup Language (SAML) 1.1 token by default.</span></span>

     <span data-ttu-id="ea6da-123">L'URI per un token SAML 1,1 è `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1` .</span><span class="sxs-lookup"><span data-stu-id="ea6da-123">The URI for a SAML 1.1 token is `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`.</span></span>

4. <span data-ttu-id="ea6da-124">Facoltativa.</span><span class="sxs-lookup"><span data-stu-id="ea6da-124">Optional.</span></span> <span data-ttu-id="ea6da-125">Sui servizi federati, impostare la proprietà <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerMetadataAddress%2A> sull'URL dei metadati di un servizio token di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ea6da-125">On federated services, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerMetadataAddress%2A> property to the metadata URL of a security token service.</span></span> <span data-ttu-id="ea6da-126">L'endpoint dei metadati consente ai client del servizio di selezionare una coppia associazione/endpoint appropriata, se il servizio è configurato per pubblicare metadati.</span><span class="sxs-lookup"><span data-stu-id="ea6da-126">The metadata endpoint enables clients of the service to select an appropriate binding/endpoint pair, if the service is configured to publish metadata.</span></span> <span data-ttu-id="ea6da-127">Per ulteriori informazioni sulla pubblicazione dei metadati, vedere la pagina relativa alla [pubblicazione di metadati](publishing-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="ea6da-127">For more information about publishing metadata, see [Publishing Metadata](publishing-metadata.md).</span></span>

 <span data-ttu-id="ea6da-128">È inoltre possibile impostare altre proprietà, inclusi tipo di chiave usato come chiave di prova nel token rilasciato, gruppo di algoritmi da usare tra il client e il servizio, indicazione circa la necessità di negoziare o specificare esplicitamente la credenziale del servizio, tutte le attestazioni specifiche che il servizio prevede che il token rilasciato contenga e qualsiasi elemento XML aggiuntivo da aggiungere alla richiesta inviata dal client al servizio token di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ea6da-128">You can also set other properties, including the type of key used as a proof key in the issued token, the algorithm suite to use between the client and the service, whether to negotiate or explicitly specify the service credential, any specific claims the service expects the issued token to contain, and any additional XML elements that must be added to the request the client sends to the security token service.</span></span>

> [!NOTE]
> <span data-ttu-id="ea6da-129">La proprietà `NegotiateServiceCredential` è rilevante solo quando `SecurityMode` è impostata su `Message`.</span><span class="sxs-lookup"><span data-stu-id="ea6da-129">The `NegotiateServiceCredential` property is only relevant when the `SecurityMode` is set to `Message`.</span></span> <span data-ttu-id="ea6da-130">Se `SecurityMode` è impostata su `TransportWithMessageCredential`, la proprietà `NegotiateServiceCredential` viene ignorata.</span><span class="sxs-lookup"><span data-stu-id="ea6da-130">If `SecurityMode` is set to `TransportWithMessageCredential`, then the `NegotiateServiceCredential` property is ignored.</span></span>

## <a name="to-configure-a-wsfederationhttpbinding-in-code"></a><span data-ttu-id="ea6da-131">Per configurare una classe WSFederationHttpBinding nel codice</span><span class="sxs-lookup"><span data-stu-id="ea6da-131">To configure a WSFederationHttpBinding in code</span></span>

1. <span data-ttu-id="ea6da-132">Creare un'istanza di <xref:System.ServiceModel.WSFederationHttpBinding>.</span><span class="sxs-lookup"><span data-stu-id="ea6da-132">Create an instance of the <xref:System.ServiceModel.WSFederationHttpBinding>.</span></span>

2. <span data-ttu-id="ea6da-133">Impostare la proprietà <xref:System.ServiceModel.WSFederationHttpSecurity.Mode%2A> su <xref:System.ServiceModel.WSFederationHttpSecurityMode> o <xref:System.ServiceModel.WSFederationHttpSecurityMode.Message> in base alle necessità.</span><span class="sxs-lookup"><span data-stu-id="ea6da-133">Set the <xref:System.ServiceModel.WSFederationHttpSecurity.Mode%2A> property to <xref:System.ServiceModel.WSFederationHttpSecurityMode> or <xref:System.ServiceModel.WSFederationHttpSecurityMode.Message> as required.</span></span> <span data-ttu-id="ea6da-134">Se è necessaria una suite di algoritmi diversa <xref:System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256%2A> da, impostare la <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.AlgorithmSuite%2A> proprietà su un valore tratto da <xref:System.ServiceModel.Security.SecurityAlgorithmSuite> .</span><span class="sxs-lookup"><span data-stu-id="ea6da-134">If an algorithm suite other than <xref:System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256%2A> is required, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.AlgorithmSuite%2A> property to a value taken from <xref:System.ServiceModel.Security.SecurityAlgorithmSuite>.</span></span>

3. <span data-ttu-id="ea6da-135">Impostare la proprietà <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> in base alle necessità.</span><span class="sxs-lookup"><span data-stu-id="ea6da-135">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> property as appropriate.</span></span>

4. <span data-ttu-id="ea6da-136">Impostare la <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedKeyType%2A> proprietà su <xref:System.IdentityModel.Tokens.SecurityKeyType> `SymmetricKey` o su.`AsymmetricKey`</span><span class="sxs-lookup"><span data-stu-id="ea6da-136">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedKeyType%2A> property to <xref:System.IdentityModel.Tokens.SecurityKeyType>`SymmetricKey` or .`AsymmetricKey`</span></span> <span data-ttu-id="ea6da-137">come richiesto.</span><span class="sxs-lookup"><span data-stu-id="ea6da-137">as required.</span></span>

5. <span data-ttu-id="ea6da-138">Impostare la proprietà <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> sul valore appropriato.</span><span class="sxs-lookup"><span data-stu-id="ea6da-138">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> property to the appropriate value.</span></span> <span data-ttu-id="ea6da-139">Se non è impostato alcun valore, il valore predefinito di WCF è `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1` , che indica i token SAML 1,1.</span><span class="sxs-lookup"><span data-stu-id="ea6da-139">If no value is set, WCF defaults to `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`, which indicates SAML 1.1 tokens.</span></span>

6. <span data-ttu-id="ea6da-140">Obbligatorio sul client se non viene specificata alcuna emittente locale; facoltativo sul servizio.</span><span class="sxs-lookup"><span data-stu-id="ea6da-140">Required on the client if no local issuer is specified; optional on the service.</span></span> <span data-ttu-id="ea6da-141">Creare una classe <xref:System.ServiceModel.EndpointAddress> che contenga le informazioni sull'indirizzo e l'identità del servizio token di sicurezza e assegnare l'istanza di <xref:System.ServiceModel.EndpointAddress> alla proprietà <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A>.</span><span class="sxs-lookup"><span data-stu-id="ea6da-141">Create an <xref:System.ServiceModel.EndpointAddress> that contains the address and identity information of the security token service and assign the <xref:System.ServiceModel.EndpointAddress> instance to the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> property.</span></span>

7. <span data-ttu-id="ea6da-142">Obbligatorio sul client se non viene specificata alcuna emittente locale; non usato sul servizio.</span><span class="sxs-lookup"><span data-stu-id="ea6da-142">Required on the client if no local issuer is specified; not used on the service.</span></span> <span data-ttu-id="ea6da-143">Creare un oggetto <xref:System.ServiceModel.Channels.Binding> per `SecurityTokenService` e assegnare l' <xref:System.ServiceModel.Channels.Binding> istanza alla <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> Proprietà.</span><span class="sxs-lookup"><span data-stu-id="ea6da-143">Create a <xref:System.ServiceModel.Channels.Binding> for the `SecurityTokenService` and assign the <xref:System.ServiceModel.Channels.Binding> instance to the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> property.</span></span>

8. <span data-ttu-id="ea6da-144">Non usato sul client; facoltativo sul servizio.</span><span class="sxs-lookup"><span data-stu-id="ea6da-144">Not used on the client; optional on the service.</span></span> <span data-ttu-id="ea6da-145">Creare un'istanza di <xref:System.ServiceModel.EndpointAddress> per i metadati del servizio token di sicurezza e assegnarla alla proprietà `IssuerMetadataAddress`.</span><span class="sxs-lookup"><span data-stu-id="ea6da-145">Create an <xref:System.ServiceModel.EndpointAddress> instance for the metadata of the security token service and assign it to the `IssuerMetadataAddress` property.</span></span>

9. <span data-ttu-id="ea6da-146">Facoltativo sul client e sul servizio.</span><span class="sxs-lookup"><span data-stu-id="ea6da-146">Optional on both the client and the service.</span></span> <span data-ttu-id="ea6da-147">Creare e aggiungere una o più istanze di <xref:System.ServiceModel.Security.Tokens.ClaimTypeRequirement> alla raccolta restituita dalla proprietà <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.ClaimTypeRequirements%2A>.</span><span class="sxs-lookup"><span data-stu-id="ea6da-147">Create and add one or more <xref:System.ServiceModel.Security.Tokens.ClaimTypeRequirement> instances to the collection returned by the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.ClaimTypeRequirements%2A> property.</span></span>

10. <span data-ttu-id="ea6da-148">Facoltativo sul client e sul servizio.</span><span class="sxs-lookup"><span data-stu-id="ea6da-148">Optional on both the client and the service.</span></span> <span data-ttu-id="ea6da-149">Creare e aggiungere una o più istanze di <xref:System.Xml.XmlElement> alla raccolta restituita dalla proprietà <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.TokenRequestParameters%2A>.</span><span class="sxs-lookup"><span data-stu-id="ea6da-149">Create and add one or more <xref:System.Xml.XmlElement> instances to the collection returned by the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.TokenRequestParameters%2A> property.</span></span>

## <a name="to-create-a-federated-endpoint-in-configuration"></a><span data-ttu-id="ea6da-150">Per creare un endpoint federato nella configurazione</span><span class="sxs-lookup"><span data-stu-id="ea6da-150">To create a federated endpoint in configuration</span></span>

1. <span data-ttu-id="ea6da-151">Creare un oggetto [\<wsFederationHttpBinding>](../../configure-apps/file-schema/wcf/wsfederationhttpbinding.md) come figlio dell' [\<bindings>](../../configure-apps/file-schema/wcf/bindings.md) elemento nel file di configurazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ea6da-151">Create a [\<wsFederationHttpBinding>](../../configure-apps/file-schema/wcf/wsfederationhttpbinding.md) as a child of the [\<bindings>](../../configure-apps/file-schema/wcf/bindings.md) element in the application configuration file.</span></span>

2. <span data-ttu-id="ea6da-152">Creare un [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) elemento come figlio di [\<wsFederationHttpBinding>](../../configure-apps/file-schema/wcf/wsfederationhttpbinding.md) e impostare l' `name` attributo su un valore appropriato.</span><span class="sxs-lookup"><span data-stu-id="ea6da-152">Create a [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) element as a child of [\<wsFederationHttpBinding>](../../configure-apps/file-schema/wcf/wsfederationhttpbinding.md) and set the `name` attribute to an appropriate value.</span></span>

3. <span data-ttu-id="ea6da-153">Creare un `<security>` elemento come figlio dell' [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) elemento.</span><span class="sxs-lookup"><span data-stu-id="ea6da-153">Create a `<security>` element as a child of the [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) element.</span></span>

4. <span data-ttu-id="ea6da-154">Impostare l'attributo  nell'elemento  su un valore di  o , in base alle necessità.</span><span class="sxs-lookup"><span data-stu-id="ea6da-154">Set the `mode` attribute on the `<security>` element to a value of `Message` or `TransportWithMessageCredential`, as required.</span></span>

5. <span data-ttu-id="ea6da-155">Creare un elemento  come figlio dell'elemento .</span><span class="sxs-lookup"><span data-stu-id="ea6da-155">Create a `<message>` element as a child of the `<security>` element.</span></span>

6. <span data-ttu-id="ea6da-156">Facoltativa.</span><span class="sxs-lookup"><span data-stu-id="ea6da-156">Optional.</span></span> <span data-ttu-id="ea6da-157">Impostare l'attributo `algorithmSuite` sull'elemento `<message>` con un valore appropriato.</span><span class="sxs-lookup"><span data-stu-id="ea6da-157">Set the `algorithmSuite` attribute on the `<message>` element with an appropriate value.</span></span> <span data-ttu-id="ea6da-158">Il valore predefinito è `Basic256`.</span><span class="sxs-lookup"><span data-stu-id="ea6da-158">The default is `Basic256`.</span></span>

7. <span data-ttu-id="ea6da-159">Facoltativa.</span><span class="sxs-lookup"><span data-stu-id="ea6da-159">Optional.</span></span> <span data-ttu-id="ea6da-160">Se è necessaria una chiave di prova asimmetrica, impostare l'attributo `issuedKeyType` dell'elemento `<message>`.</span><span class="sxs-lookup"><span data-stu-id="ea6da-160">If an asymmetric proof key is required, set the `issuedKeyType` attribute of the `<message>` element to `AsymmetricKey`.</span></span> <span data-ttu-id="ea6da-161">Il valore predefinito è `SymmetricKey`.</span><span class="sxs-lookup"><span data-stu-id="ea6da-161">The default is `SymmetricKey`.</span></span>

8. <span data-ttu-id="ea6da-162">Facoltativa.</span><span class="sxs-lookup"><span data-stu-id="ea6da-162">Optional.</span></span> <span data-ttu-id="ea6da-163">Impostare l'attributo `issuedTokenType` sull'elemento `<message>`.</span><span class="sxs-lookup"><span data-stu-id="ea6da-163">Set the `issuedTokenType` attribute on the `<message>` element.</span></span>

9. <span data-ttu-id="ea6da-164">Obbligatorio sul client se non viene specificata alcuna emittente locale; facoltativo sul servizio.</span><span class="sxs-lookup"><span data-stu-id="ea6da-164">Required on the client if no local issuer is specified; optional on the service.</span></span> <span data-ttu-id="ea6da-165">Creare un elemento `<issuer>` come figlio dell'elemento `<message>`.</span><span class="sxs-lookup"><span data-stu-id="ea6da-165">Create an `<issuer>` element as a child of the `<message>` element.</span></span>

10. <span data-ttu-id="ea6da-166">Impostare l'attributo `address` sull'elemento `<issuer>` e specificare l'indirizzo in cui il servizio token di sicurezza accetta richieste del token.</span><span class="sxs-lookup"><span data-stu-id="ea6da-166">Set the `address` attribute to the `<issuer>` element and specify the address at which the security token service accepts token requests.</span></span>

11. <span data-ttu-id="ea6da-167">Facoltativa.</span><span class="sxs-lookup"><span data-stu-id="ea6da-167">Optional.</span></span> <span data-ttu-id="ea6da-168">Aggiungere un elemento `<identity>` figlio e specificare l'identità del servizio token di sicurezza</span><span class="sxs-lookup"><span data-stu-id="ea6da-168">Add an `<identity>` child element and specify the identity of the security token service</span></span>

12. <span data-ttu-id="ea6da-169">Per altre informazioni, vedere [identità e autenticazione del servizio](service-identity-and-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="ea6da-169">For more information, see [Service Identity and Authentication](service-identity-and-authentication.md).</span></span>

13. <span data-ttu-id="ea6da-170">Obbligatorio sul client se non viene specificata alcuna emittente locale; non usato sul servizio.</span><span class="sxs-lookup"><span data-stu-id="ea6da-170">Required on the client if no local issuer is specified; not used on the service.</span></span> <span data-ttu-id="ea6da-171">Creare un [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) elemento nella sezione bindings che può essere utilizzato per comunicare con il servizio token di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ea6da-171">Create a [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) element in the bindings section that can be used to communicate with the security token service.</span></span> <span data-ttu-id="ea6da-172">Per ulteriori informazioni sulla creazione di un'associazione, vedere [procedura: specificare un'associazione al servizio nella configurazione](../how-to-specify-a-service-binding-in-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="ea6da-172">For more information about creating a binding, see [How to: Specify a Service Binding in Configuration](../how-to-specify-a-service-binding-in-configuration.md).</span></span>

14. <span data-ttu-id="ea6da-173">Specificare l'associazione creata nel passaggio precedente impostando gli attributi `binding` e `bindingConfiguration` dell'elemento `<issuer>`.</span><span class="sxs-lookup"><span data-stu-id="ea6da-173">Specify the binding created in the previous step by setting the `binding` and `bindingConfiguration` attributes of the `<issuer>` element.</span></span>

15. <span data-ttu-id="ea6da-174">Non usato sul client; facoltativo sul servizio.</span><span class="sxs-lookup"><span data-stu-id="ea6da-174">Not used on the client; optional on the service.</span></span> <span data-ttu-id="ea6da-175">Creare un `<issuerMetadata>` elemento come figlio dell' `message` elemento <>.</span><span class="sxs-lookup"><span data-stu-id="ea6da-175">Create an `<issuerMetadata>` element as a child of the <`message`> element.</span></span> <span data-ttu-id="ea6da-176">Quindi, in un attributo `address` sull'elemento `<issuerMetadata>`, specificare l'indirizzo in cui il servizio token di sicurezza deve pubblicare i propri metadati.</span><span class="sxs-lookup"><span data-stu-id="ea6da-176">Then, in an `address` attribute on the `<issuerMetadata>` element, specify the address at which the security token service is to publish its metadata.</span></span> <span data-ttu-id="ea6da-177">Facoltativamente, aggiungere un elemento `<identity>` figlio e specificare l'identità del servizio token di sicurezza</span><span class="sxs-lookup"><span data-stu-id="ea6da-177">Optionally, add an `<identity>` child element and specify the identity of the security token service.</span></span>

16. <span data-ttu-id="ea6da-178">Facoltativo sul client e sul servizio.</span><span class="sxs-lookup"><span data-stu-id="ea6da-178">Optional on both the client and the service.</span></span> <span data-ttu-id="ea6da-179">Aggiungere un elemento  come figlio dell'elemento .</span><span class="sxs-lookup"><span data-stu-id="ea6da-179">Add a `<claimTypeRequirements>` element as a child of the `<message>` element.</span></span> <span data-ttu-id="ea6da-180">Specificare le attestazioni obbligatorie e facoltative su cui si basa il servizio aggiungendo [\<add>](../../configure-apps/file-schema/wcf/add-of-claimtyperequirements.md) elementi all' `<claimTypeRequirements>` elemento e specificando il tipo di attestazione con l' `claimType` attributo.</span><span class="sxs-lookup"><span data-stu-id="ea6da-180">Specify required and optional claims that the service relies on by adding [\<add>](../../configure-apps/file-schema/wcf/add-of-claimtyperequirements.md) elements to the `<claimTypeRequirements>` element and specifying the claim type with the `claimType` attribute.</span></span> <span data-ttu-id="ea6da-181">Specificare se una determinata attestazione è obbligatoria o facoltativa impostando l'attributo `isOptional`.</span><span class="sxs-lookup"><span data-stu-id="ea6da-181">Specify whether a given claim is required or optional by setting the `isOptional` attribute.</span></span>

## <a name="example"></a><span data-ttu-id="ea6da-182">Esempio</span><span class="sxs-lookup"><span data-stu-id="ea6da-182">Example</span></span>

<span data-ttu-id="ea6da-183">Nell'esempio seguente viene illustrato il codice per l'impostazione di una classe `WSFederationHttpBinding` in modo imperativo.</span><span class="sxs-lookup"><span data-stu-id="ea6da-183">The following code sample shows code for setting up a `WSFederationHttpBinding` imperatively.</span></span>

[!code-csharp[c_FederationBinding#2](~/samples/snippets/csharp/VS_Snippets_CFX/c_federationbinding/cs/source.cs#2)]
[!code-vb[c_FederationBinding#2](~/samples/snippets/visualbasic/VS_Snippets_CFX/c_federationbinding/vb/source.vb#2)]

## <a name="see-also"></a><span data-ttu-id="ea6da-184">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="ea6da-184">See also</span></span>

- [<span data-ttu-id="ea6da-185">Federazione</span><span class="sxs-lookup"><span data-stu-id="ea6da-185">Federation</span></span>](federation.md)
- [<span data-ttu-id="ea6da-186">Esempio di federazione</span><span class="sxs-lookup"><span data-stu-id="ea6da-186">Federation Sample</span></span>](../samples/federation-sample.md)
- [<span data-ttu-id="ea6da-187">Procedura: disattivare sessioni protette in un'associazione WSFederationHttpBinding</span><span class="sxs-lookup"><span data-stu-id="ea6da-187">How to: Disable Secure Sessions on a WSFederationHttpBinding</span></span>](how-to-disable-secure-sessions-on-a-wsfederationhttpbinding.md)
