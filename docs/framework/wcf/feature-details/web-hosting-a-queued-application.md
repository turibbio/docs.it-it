---
title: Sito Web che ospita un'applicazione in coda
ms.date: 03/30/2017
ms.assetid: c7a539fa-e442-4c08-a7f1-17b7f5a03e88
ms.openlocfilehash: 17c3d2167d3f98017c5f366ab0d700d9fb889f82
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/09/2020
ms.locfileid: "84600140"
---
# <a name="web-hosting-a-queued-application"></a><span data-ttu-id="effdd-102">Sito Web che ospita un'applicazione in coda</span><span class="sxs-lookup"><span data-stu-id="effdd-102">Web Hosting a Queued Application</span></span>
<span data-ttu-id="effdd-103">Il servizio WAS (Windows Process Activation Service, Attivazione processo Windows) gestisce l'attivazione e la durata dei processi di lavoro contenenti le applicazioni che ospitano i servizi WCF (Windows Communication Foundation).</span><span class="sxs-lookup"><span data-stu-id="effdd-103">The Windows Process Activation Service (WAS) manages the activation and lifetime of the worker processes that contain applications that host Windows Communication Foundation (WCF) services.</span></span> <span data-ttu-id="effdd-104">Il modello di processo WAS consente di generalizzare il modello di processo IIS 6.0 per il server HTTP eliminando la dipendenza da HTTP.</span><span class="sxs-lookup"><span data-stu-id="effdd-104">The WAS process model generalizes the IIS 6.0 process model for the HTTP server by removing the dependency on HTTP.</span></span> <span data-ttu-id="effdd-105">Questo consente ai servizi WCF di utilizzare protocolli HTTP e non HTTP, ad esempio NET. MSMQ e MSMQ. FormatName, in un ambiente host che supporta l'attivazione basata su messaggi e offre la possibilità di ospitare un numero elevato di applicazioni in un determinato computer.</span><span class="sxs-lookup"><span data-stu-id="effdd-105">This allows WCF services to use both HTTP and non-HTTP protocols, such as net.msmq and msmq.formatname, in a hosting environment that supports message-based activation and offers the ability to host a large number of applications on a given computer.</span></span>  
  
 <span data-ttu-id="effdd-106">WAS include un servizio di attivazione di Accodamento messaggi (MSMQ) che attiva un'applicazione in coda quando uno o più i messaggi vengono posizionati in una delle code usate dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="effdd-106">WAS includes a Message Queuing (MSMQ) activation service that activates a queued application when one or more messages are placed in one of the queues used by the application.</span></span> <span data-ttu-id="effdd-107">Il servizio di attivazione MSMQ è un servizio NT che viene automaticamente avviato per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="effdd-107">The MSMQ activation service is an NT service that is automatically started by default.</span></span>  
  
 <span data-ttu-id="effdd-108">Per ulteriori informazioni su WAS e sui relativi vantaggi, vedere [hosting nel servizio di attivazione dei processi di Windows](hosting-in-windows-process-activation-service.md).</span><span class="sxs-lookup"><span data-stu-id="effdd-108">For more information about WAS and its benefits, see [Hosting in Windows Process Activation Service](hosting-in-windows-process-activation-service.md).</span></span> <span data-ttu-id="effdd-109">Per ulteriori informazioni su MSMQ, vedere [Cenni preliminari sulle code](queues-overview.md).</span><span class="sxs-lookup"><span data-stu-id="effdd-109">For more information about MSMQ, see [Queues Overview](queues-overview.md).</span></span>
  
## <a name="queue-addressing-in-was"></a><span data-ttu-id="effdd-110">Indirizzamento delle code in WAS</span><span class="sxs-lookup"><span data-stu-id="effdd-110">Queue Addressing in WAS</span></span>  
 <span data-ttu-id="effdd-111">Le applicazioni WAS hanno indirizzi URL (Uniform Resource Identifier).</span><span class="sxs-lookup"><span data-stu-id="effdd-111">WAS applications have Uniform Resource Identifier (URI) addresses.</span></span> <span data-ttu-id="effdd-112">Gli indirizzi delle applicazioni sono composti di due parti: un prefisso URI di base e un indirizzo relativo specifico dell'applicazione (percorso).</span><span class="sxs-lookup"><span data-stu-id="effdd-112">Application addresses have two parts: a base URI prefix and an application-specific, relative address (path).</span></span> <span data-ttu-id="effdd-113">Quando vengono congiunte, queste due parti forniscono l'indirizzo esterno di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="effdd-113">These two parts provide the external address for an application when joined together.</span></span> <span data-ttu-id="effdd-114">Il prefisso URI di base viene costruito dal binding del sito e viene usato per tutte le applicazioni nel sito, ad esempio, "NET. MSMQ://localhost", "MSMQ. formatname://localhost" o "NET. TCP://localhost".</span><span class="sxs-lookup"><span data-stu-id="effdd-114">The base URI prefix is constructed from the site binding and is used for all the applications under the site, for example, "net.msmq://localhost", "msmq.formatname://localhost", or "net.tcp://localhost".</span></span> <span data-ttu-id="effdd-115">Gli indirizzi delle applicazioni vengono quindi costruiti prendendo i frammenti di percorso specifici dell'applicazione, ad esempio "/applicationOne", e aggiungendoli al prefisso URI di base per arrivare all'URI dell'applicazione completo, ad esempio "NET. MSMQ://localhost/applicationOne".</span><span class="sxs-lookup"><span data-stu-id="effdd-115">Application addresses are then constructed by taking application-specific path fragments (such as "/applicationOne") and appending them to the base URI prefix to arrive at the full application URI, for example, "net.msmq://localhost/applicationOne".</span></span>  
  
 <span data-ttu-id="effdd-116">Il servizio di attivazione MSMQ usa l'URI dell'applicazione per individuare la coda di cui devono essere monitorati i messaggi.</span><span class="sxs-lookup"><span data-stu-id="effdd-116">The MSMQ activation service uses the application URI to match the queue that the MSMQ activation service must monitor for messages.</span></span> <span data-ttu-id="effdd-117">Quando il servizio di attivazione MSMQ viene avviato, enumera tutte le code pubbliche e private presenti nel computer da cui è prevista la ricezione e ne monitora i messaggi.</span><span class="sxs-lookup"><span data-stu-id="effdd-117">When the MSMQ activation service starts, it enumerates all public and private queues on the computer it is configured to receive from and monitors them for messages.</span></span> <span data-ttu-id="effdd-118">Ogni 10 minuti, il servizio di attivazione MSMQ aggiorna l'elenco di code da monitorare.</span><span class="sxs-lookup"><span data-stu-id="effdd-118">Every 10 minutes, the MSMQ activation service refreshes the list of queues to monitor.</span></span> <span data-ttu-id="effdd-119">Quando viene trovato un messaggio in una coda, il servizio di attivazione associa il nome della coda all'URI dell'applicazione corrispondente più lungo per l'associazione net.msmq e attiva l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="effdd-119">When a message is found in a queue, the activation service matches the queue name to the longest matching application URI for the net.msmq binding and activates the application.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="effdd-120">L'applicazione attivata deve corrispondere (corrispondenza più lunga) al prefisso del nome della coda.</span><span class="sxs-lookup"><span data-stu-id="effdd-120">The application being activated must match (longest match) the prefix of the queue name.</span></span>  
  
 <span data-ttu-id="effdd-121">Ad esempio, un nome di coda è: msmqWebHost/orderProcessing/service.svc.</span><span class="sxs-lookup"><span data-stu-id="effdd-121">For example, a queue name is: msmqWebHost/orderProcessing/service.svc.</span></span> <span data-ttu-id="effdd-122">Se l'applicazione 1 ha una directory virtuale /msmqWebHost/orderProcessing in cui è presente un file service.svc e l'applicazione 2 ha una directory virtuale /msmqWebHost in cui è presente un file orderProcessing.svc, viene attivata l'applicazione 1.</span><span class="sxs-lookup"><span data-stu-id="effdd-122">If Application 1 has a virtual directory /msmqWebHost/orderProcessing with a service.svc under it, and Application 2 has a virtual directory /msmqWebHost with an orderProcessing.svc under it, Application 1 is activated.</span></span> <span data-ttu-id="effdd-123">Se l'applicazione 1 viene eliminata, viene attivata l'applicazione 2.</span><span class="sxs-lookup"><span data-stu-id="effdd-123">If Application 1 is deleted, Application 2 is activated.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="effdd-124">Quando viene creata una coda, qualsiasi messaggio inviato a essa non attiva alcuna applicazione fino a quando il servizio di attivazione MSMQ non aggiorna l'elenco delle code, operazione che viene eseguita entro 10 minuti dal momento della creazione della coda.</span><span class="sxs-lookup"><span data-stu-id="effdd-124">When a queue is created, any messages sent to it do not activate an application until the MSMQ activation service refreshes the queue list, which is, at most, 10 minutes from the time the queue was created.</span></span> <span data-ttu-id="effdd-125">Quando si riavvia il servizio di attivazione viene aggiornato anche l'elenco delle code.</span><span class="sxs-lookup"><span data-stu-id="effdd-125">Restarting the activation service refreshes the queue list as well.</span></span>  
  
### <a name="the-effect-of-private-and-public-queues-on-addressing"></a><span data-ttu-id="effdd-126">Effetto delle code pubbliche e private sull'indirizzamento</span><span class="sxs-lookup"><span data-stu-id="effdd-126">The Effect of Private and Public Queues on Addressing</span></span>  
 <span data-ttu-id="effdd-127">Nell'operazione di monitoraggio, il servizio di attivazione MSMQ non fa alcuna distinzione tra code pubbliche e private.</span><span class="sxs-lookup"><span data-stu-id="effdd-127">The MSMQ activation service does not distinguish between private and public queue monitoring.</span></span> <span data-ttu-id="effdd-128">Non possono quindi esistere code pubbliche e private con lo stesso nome.</span><span class="sxs-lookup"><span data-stu-id="effdd-128">As such, you cannot have public and private queues with the same name.</span></span> <span data-ttu-id="effdd-129">In caso contrario, un'applicazione ospitata sul Web potrebbe essere attivata leggendo da entrambi i tipi di coda.</span><span class="sxs-lookup"><span data-stu-id="effdd-129">If you do, a Web-hosted application may get activated reading from either of the queues.</span></span>  
  
### <a name="queue-configuration-for-activation"></a><span data-ttu-id="effdd-130">Configurazione delle code per l'attivazione</span><span class="sxs-lookup"><span data-stu-id="effdd-130">Queue Configuration for Activation</span></span>  
 <span data-ttu-id="effdd-131">Il servizio di attivazione MSMQ viene eseguito come SERVIZIO DI RETE.</span><span class="sxs-lookup"><span data-stu-id="effdd-131">The MSMQ activation service runs as NETWORK SERVICE.</span></span> <span data-ttu-id="effdd-132">Si tratta del servizio che monitora le code per attivare applicazioni.</span><span class="sxs-lookup"><span data-stu-id="effdd-132">It is the service that monitors queues to activate applications.</span></span> <span data-ttu-id="effdd-133">Per consentire a tale servizio di attivare applicazioni dalla coda, quest'ultima deve assicurare l'accesso SERVIZIO DI RETE per la lettura dei messaggi presenti nel relativo elenco di controllo di accesso.</span><span class="sxs-lookup"><span data-stu-id="effdd-133">For it to activate applications from the queue, the queue must provide for NETWORK SERVICE access to peek for messages in its access control list (ACL).</span></span>  
  
### <a name="poison-messaging"></a><span data-ttu-id="effdd-134">Messaggistica non elaborabile</span><span class="sxs-lookup"><span data-stu-id="effdd-134">Poison Messaging</span></span>  
 <span data-ttu-id="effdd-135">La gestione dei messaggi non elaborabili in WCF viene gestita dal canale, che non solo rileva che un messaggio viene avvelenato ma seleziona una disposizione in base alla configurazione dell'utente.</span><span class="sxs-lookup"><span data-stu-id="effdd-135">Poison message handling in WCF is handled by the channel, which not only detects that a message is poisoned but selects a disposition based on user configuration.</span></span> <span data-ttu-id="effdd-136">Il risultato dell'operazione è la presenza nella coda di un solo messaggio.</span><span class="sxs-lookup"><span data-stu-id="effdd-136">As a result, there is a single message in the queue.</span></span> <span data-ttu-id="effdd-137">L'applicazione ospitata sul Web viene interrotta più volte consecutivamente e il messaggio viene spostato in una coda di tentativi.</span><span class="sxs-lookup"><span data-stu-id="effdd-137">The Web-hosted application aborts successive times and the message is moved to a retry queue.</span></span> <span data-ttu-id="effdd-138">A un certo momento, determinato in base all'intervallo di tempo che intercorre tra i cicli di ripetizione dei tentativi, il messaggio viene spostato dalla coda di tentativi alla coda principale, per riprovare l'operazione.</span><span class="sxs-lookup"><span data-stu-id="effdd-138">At a point dictated by the retry cycle delay, the message is moved from the retry queue to the main queue to try again.</span></span> <span data-ttu-id="effdd-139">Questo però richiede che il canale in coda sia attivo.</span><span class="sxs-lookup"><span data-stu-id="effdd-139">But this requires the queued channel to be active.</span></span> <span data-ttu-id="effdd-140">Se l'applicazione viene riciclata da WAS, il messaggio resta nella coda di tentativi fino a quando non arriva un altro messaggio nella coda principale, per attivare l'applicazione in coda.</span><span class="sxs-lookup"><span data-stu-id="effdd-140">If the application is recycled by WAS, then the message remains in the retry queue until another message arrives in the main queue to activate the queued application.</span></span> <span data-ttu-id="effdd-141">La soluzione alternativa in questo caso consiste nello spostare manualmente il messaggio dalla coda di tentativi alla coda principale, per riattivare l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="effdd-141">The workaround in this case is to move the message manually from the retry queue back to the main queue to reactivate the application.</span></span>  
  
### <a name="subqueue-and-system-queue-caveat"></a><span data-ttu-id="effdd-142">Informazioni sulle code secondarie e le code di sistema</span><span class="sxs-lookup"><span data-stu-id="effdd-142">Subqueue and System Queue Caveat</span></span>  
 <span data-ttu-id="effdd-143">Un'applicazione ospitata da WAS non può essere attivata in base a messaggi presenti in una coda di sistema, quale quella di messaggi non recapitabili a livello di sistema, o in code secondarie, quali quelle di messaggi non elaborabili.</span><span class="sxs-lookup"><span data-stu-id="effdd-143">A WAS-hosted application cannot be activated based on messages in a system queue, such as the system-wide dead-letter queue, or sub-queues, such as poison sub-queues.</span></span> <span data-ttu-id="effdd-144">Si tratta di una limitazione di questa versione del prodotto.</span><span class="sxs-lookup"><span data-stu-id="effdd-144">This is a limitation for this version of the product.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="effdd-145">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="effdd-145">See also</span></span>

- [<span data-ttu-id="effdd-146">Gestione dei messaggi non elaborabili</span><span class="sxs-lookup"><span data-stu-id="effdd-146">Poison Message Handling</span></span>](poison-message-handling.md)
- [<span data-ttu-id="effdd-147">Mapping fra gli endpoint di servizio e l'indirizzamento delle code</span><span class="sxs-lookup"><span data-stu-id="effdd-147">Service Endpoints and Queue Addressing</span></span>](service-endpoints-and-queue-addressing.md)
