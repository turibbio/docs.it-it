---
title: Comportamento di controllo dei servizi
ms.date: 03/30/2017
ms.assetid: 59bf0cda-e496-4418-a3a1-2f0f6e85f8ce
ms.openlocfilehash: bfe13146a7f7cdec648a82a34c34077ec5466809
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/09/2020
ms.locfileid: "84599932"
---
# <a name="service-auditing-behavior"></a><span data-ttu-id="b0fc0-102">Comportamento di controllo dei servizi</span><span class="sxs-lookup"><span data-stu-id="b0fc0-102">Service Auditing Behavior</span></span>
<span data-ttu-id="b0fc0-103">Questo esempio illustra come usare <xref:System.ServiceModel.Description.ServiceSecurityAuditBehavior> per abilitare il controllo degli eventi di sicurezza durante le operazioni del servizio.</span><span class="sxs-lookup"><span data-stu-id="b0fc0-103">This sample demonstrates how to use the <xref:System.ServiceModel.Description.ServiceSecurityAuditBehavior> to enable auditing of security events during service operations.</span></span> <span data-ttu-id="b0fc0-104">Questo esempio è basato sul [Introduzione](getting-started-sample.md).</span><span class="sxs-lookup"><span data-stu-id="b0fc0-104">This sample is based on the [Getting Started](getting-started-sample.md).</span></span> <span data-ttu-id="b0fc0-105">Il servizio e il client sono stati configurati utilizzando [\<wsHttpBinding>](../../configure-apps/file-schema/wcf/wshttpbinding.md) .</span><span class="sxs-lookup"><span data-stu-id="b0fc0-105">The service and client have been configured using the [\<wsHttpBinding>](../../configure-apps/file-schema/wcf/wshttpbinding.md).</span></span> <span data-ttu-id="b0fc0-106">L' `mode` attributo di [\<security>](../../configure-apps/file-schema/wcf/security-of-custombinding.md) è stato impostato su `Message` e `clientCredentialType` è stato impostato su `Windows` .</span><span class="sxs-lookup"><span data-stu-id="b0fc0-106">The `mode` attribute of the [\<security>](../../configure-apps/file-schema/wcf/security-of-custombinding.md) has been set to `Message` and `clientCredentialType` has been set to `Windows`.</span></span> <span data-ttu-id="b0fc0-107">In questo esempio, il client è un'applicazione console (.exe) e il servizio è ospitato da Internet Information Services (IIS).</span><span class="sxs-lookup"><span data-stu-id="b0fc0-107">In this sample, the client is a console application (.exe) and the service is hosted by Internet Information Services (IIS).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="b0fc0-108">La procedura di installazione e le istruzioni di compilazione per questo esempio si trovano alla fine di questo argomento.</span><span class="sxs-lookup"><span data-stu-id="b0fc0-108">The setup procedure and build instructions for this sample are located at the end of this topic.</span></span>  
  
 <span data-ttu-id="b0fc0-109">Il file di configurazione del servizio utilizza l'elemento `serviceSecurityAudit` per configurare il controllo.</span><span class="sxs-lookup"><span data-stu-id="b0fc0-109">The service configuration file uses the `serviceSecurityAudit` element to configure auditing.</span></span>  
  
```xml  
<behaviors>  
  <serviceBehaviors>  
    <behavior name="CalculatorServiceBehavior">  
      ...  
<!-- serviceSecurityAudit allows specification of audit location   
     and whether to audit success, failure or both. This service   
     logs success and failure of messageAuthentication   
     to the default location -->  
     <serviceSecurityAudit auditLogLocation ="Default" messageAuthenticationAuditLevel = "SuccessOrFailure" />  
    </behavior>  
  </serviceBehaviors>  
</behaviors>  
```  
  
 <span data-ttu-id="b0fc0-110">Quando si esegue l'esempio, le richieste e le risposte dell'operazione vengono visualizzate nella finestra della console client.</span><span class="sxs-lookup"><span data-stu-id="b0fc0-110">When you run the sample, the operation requests and responses are displayed in the client console window.</span></span> <span data-ttu-id="b0fc0-111">Premere INVIO nella finestra della console per arrestare il client.</span><span class="sxs-lookup"><span data-stu-id="b0fc0-111">Press ENTER in the console window to shut down the client.</span></span>  
  
 <span data-ttu-id="b0fc0-112">I log di controllo risultanti possono essere visualizzati eseguendo il Visualizzatore eventi.</span><span class="sxs-lookup"><span data-stu-id="b0fc0-112">The resulting audit logs can be seen by running the Event Viewer.</span></span> <span data-ttu-id="b0fc0-113">Per impostazione predefinita, in Windows XP gli eventi di controllo possono essere visualizzati nel registro applicazioni, mentre in Windows Server 2003 e Windows Vista gli eventi di controllo possono essere visti nel registro sicurezza.</span><span class="sxs-lookup"><span data-stu-id="b0fc0-113">By default, on Windows XP the audit events can be seen in the Application Log while on Windows Server 2003 and Windows Vista, the audit events can be seen in the Security Log.</span></span> <span data-ttu-id="b0fc0-114">In Windows Server 2008 e Windows 7 è possibile visualizzare gli eventi di controllo nei registri applicazioni e sicurezza.</span><span class="sxs-lookup"><span data-stu-id="b0fc0-114">On Windows Server 2008 and Windows 7, the audit events can be seen in the Applications and Services logs.</span></span> <span data-ttu-id="b0fc0-115">Il percorso degli eventi di controllo può essere specificato impostando l' `auditLogLocation` attributo su "Application" o "Security".</span><span class="sxs-lookup"><span data-stu-id="b0fc0-115">The location of audit events can be specified by setting the `auditLogLocation` attribute to "Application" or "Security".</span></span> <span data-ttu-id="b0fc0-116">Per altre informazioni, vedere [procedura: controllare gli eventi di sicurezza](../feature-details/how-to-audit-wcf-security-events.md).</span><span class="sxs-lookup"><span data-stu-id="b0fc0-116">For more information, see [How to: Audit Security Events](../feature-details/how-to-audit-wcf-security-events.md).</span></span> <span data-ttu-id="b0fc0-117">Se gli eventi vengono scritti nel registro di sicurezza, è necessario impostare LocalSecurityPolicy-> abilitare l'accesso agli oggetti per "success" e "Failure".</span><span class="sxs-lookup"><span data-stu-id="b0fc0-117">If the events are written in the Security Log the LocalSecurityPolicy-> Enable Object Access should be set for "Success" and "Failure".</span></span>  
  
 <span data-ttu-id="b0fc0-118">Nel registro eventi l'origine degli eventi di controllo corrisponde a "ServiceModel Audit 3.0.0.0".</span><span class="sxs-lookup"><span data-stu-id="b0fc0-118">When looking at the event log, the source of the audit events is "ServiceModel Audit 3.0.0.0".</span></span> <span data-ttu-id="b0fc0-119">I record di controllo di autenticazione dei messaggi hanno una categoria "MessageAuthentication", mentre i record di controllo di autorizzazione del servizio hanno una categoria "ServiceAuthorization".</span><span class="sxs-lookup"><span data-stu-id="b0fc0-119">Message authentication audit records have a category of "MessageAuthentication" while service authorization audit records have a category of "ServiceAuthorization".</span></span>  
  
 <span data-ttu-id="b0fc0-120">Gli eventi di controllo dell'autenticazione dei messaggi analizzano se il messaggio è stato manomesso, se è scaduto e se il client può essere autenticato presso il servizio.</span><span class="sxs-lookup"><span data-stu-id="b0fc0-120">Message authentication audit events cover whether the message was tampered with, whether the message has expired, and whether the client can authenticate to the service.</span></span> <span data-ttu-id="b0fc0-121">Tali eventi forniscono inoltre informazioni sull'esito positivo o meno dell'autenticazione nonché l'identità del client e dell'endpoint a cui è stato inviato il messaggio insieme all'azione associata a quest'ultimo.</span><span class="sxs-lookup"><span data-stu-id="b0fc0-121">They provide information about whether the authentication succeeded or failed along with the identity of the client, and the endpoint the message was sent to along with the action associated with the message.</span></span>  
  
 <span data-ttu-id="b0fc0-122">Gli eventi di controllo dell'autorizzazione del servizio analizzano la decisione di autorizzazione adottata dalla gestione autorizzazioni del servizio.</span><span class="sxs-lookup"><span data-stu-id="b0fc0-122">Service authorization audit events cover the authorization decision made by a service authorization manager.</span></span> <span data-ttu-id="b0fc0-123">Tali eventi forniscono inoltre informazioni sull'esito positivo o meno dell'autorizzazione nonché l'identità del client, l'endpoint al quale è stato inviato il messaggio, l'azione associata al messaggio, l'identificatore del contesto di autorizzazione generato dal messaggio in arrivo e il tipo di gestione autorizzazioni che ha preso la decisione relativa all'accesso.</span><span class="sxs-lookup"><span data-stu-id="b0fc0-123">They provide information about whether authorization succeeded or failed along with the identity of the client, the endpoint the message was sent to, the action associated with the message, the identifier of the authorization context that was generated from the incoming message, and the type of the authorization manager that made the access decision.</span></span>  
  
### <a name="to-set-up-build-and-run-the-sample"></a><span data-ttu-id="b0fc0-124">Per impostare, compilare ed eseguire l'esempio</span><span class="sxs-lookup"><span data-stu-id="b0fc0-124">To set up, build, and run the sample</span></span>  
  
1. <span data-ttu-id="b0fc0-125">Assicurarsi di avere eseguito la [procedura di installazione singola per gli esempi di Windows Communication Foundation](one-time-setup-procedure-for-the-wcf-samples.md).</span><span class="sxs-lookup"><span data-stu-id="b0fc0-125">Ensure that you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](one-time-setup-procedure-for-the-wcf-samples.md).</span></span>  
  
2. <span data-ttu-id="b0fc0-126">Per compilare l'edizione in C# o Visual Basic .NET della soluzione, seguire le istruzioni in [Building the Windows Communication Foundation Samples](building-the-samples.md).</span><span class="sxs-lookup"><span data-stu-id="b0fc0-126">To build the C# or Visual Basic .NET edition of the solution, follow the instructions in [Building the Windows Communication Foundation Samples](building-the-samples.md).</span></span>  
  
3. <span data-ttu-id="b0fc0-127">Per eseguire l'esempio in una configurazione con un solo computer o tra computer diversi, seguire le istruzioni in [esecuzione degli esempi di Windows Communication Foundation](running-the-samples.md).</span><span class="sxs-lookup"><span data-stu-id="b0fc0-127">To run the sample in a single- or cross-computer configuration, follow the instructions in [Running the Windows Communication Foundation Samples](running-the-samples.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b0fc0-128">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="b0fc0-128">See also</span></span>

- [<span data-ttu-id="b0fc0-129">Controllo</span><span class="sxs-lookup"><span data-stu-id="b0fc0-129">Auditing</span></span>](../feature-details/auditing-security-events.md)
- [<span data-ttu-id="b0fc0-130">Procedura: controllare gli eventi di sicurezza</span><span class="sxs-lookup"><span data-stu-id="b0fc0-130">How to: Audit Security Events</span></span>](../feature-details/how-to-audit-wcf-security-events.md)
