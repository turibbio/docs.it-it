---
title: Procedura di installazione singola per gli esempi di Windows Communication Foundation
ms.date: 03/30/2017
ms.assetid: a5848ffd-3eb5-432d-812e-bd948ccb6bca
ms.openlocfilehash: 954ec04d2ef1ca7667b4f75a8a6652010b5dbd33
ms.sourcegitcommit: 43cbde34970f5f38f30c43cd63b9c7e2e83717ae
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/11/2020
ms.locfileid: "81121626"
---
# <a name="one-time-setup-procedure-for-the-windows-communication-foundation-samples"></a><span data-ttu-id="a7ef4-102">Procedura di installazione singola per gli esempi di Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="a7ef4-102">One-Time Setup Procedure for the Windows Communication Foundation Samples</span></span>

<span data-ttu-id="a7ef4-103">La maggior parte degli esempi di Windows Communication Foundation (WCF) sono ospitati in Internet Information Services (IIS) ed eseguiti da una directory virtuale comune.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-103">Most of the Windows Communication Foundation (WCF) samples are hosted in Internet Information Services (IIS) and run from a common virtual directory.</span></span> <span data-ttu-id="a7ef4-104">Questa procedura di installazione una tantera crea una cartella sul disco; aggiunge inoltre una directory virtuale a IIS denominato **ServiceModelSamples**.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-104">This one-time setup procedure creates a folder on the disk; it also adds a virtual directory to IIS named **ServiceModelSamples**.</span></span>

<span data-ttu-id="a7ef4-105">La directory virtuale **ServiceModelSamples** viene utilizzata per la compilazione e l'esecuzione di tutti gli esempi che utilizzano un servizio ospitato da IIS.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-105">The **ServiceModelSamples** virtual directory is used for building and running all samples that use an IIS-hosted service.</span></span> <span data-ttu-id="a7ef4-106">Si tratta della sola directory virtuale richiesta per eseguire gli esempi.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-106">This is the only virtual directory that is required to run the samples.</span></span> <span data-ttu-id="a7ef4-107">La compilazione di un esempio determinerà la sostituzione dei servizi distribuiti in precedenza in questa directory virtuale. Solo l'esempio compilato più di recente verrà distribuito e reso disponibile in tale directory.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-107">Building a sample will replace any previously deployed service at this virtual directory; only the most recently built sample will be deployed and available in this virtual directory.</span></span>

> [!NOTE]
> <span data-ttu-id="a7ef4-108">Tutti i comandi devono essere eseguiti con un account di amministratore locale.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-108">You must run all commands under a local administrator account.</span></span> <span data-ttu-id="a7ef4-109">Se si utilizza Windows 7, Windows Vista o Windows Server 2008 R2, è necessario eseguire anche il prompt dei comandi con privilegi elevati.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-109">If you are using Windows 7, Windows Vista, or Windows Server 2008 R2, you must also run the command prompt with elevated privileges.</span></span> <span data-ttu-id="a7ef4-110">A tale scopo, fare clic con il pulsante destro del mouse sull'icona del prompt dei comandi e quindi **scegliere Esegui come amministratore**.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-110">To do so, right-click the command prompt icon, and then click **Run as administrator**.</span></span> <span data-ttu-id="a7ef4-111">Tutti i comandi illustrati in questo argomento devono essere eseguiti in un prompt dei comandi che dispone delle impostazioni del percorso appropriate.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-111">All commands in this topic must be run in a command prompt that has the appropriate path settings.</span></span>  <span data-ttu-id="a7ef4-112">Il modo più semplice per garantire che questo requisito venga soddisfatto consiste nell'utilizzare il prompt dei comandi di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-112">The easiest way to ensure this is by using the Visual Studio Command Prompt.</span></span> <span data-ttu-id="a7ef4-113">Per aprire questo prompt, fare clic sul **pulsante Start**, scegliere **Tutti i programmi**, scorrere verso il basso fino a Visual Studio **2010**, selezionare **Visual Studio Tools**, fare clic con il pulsante destro del mouse su Prompt dei comandi di Visual **Studio (2010)** e quindi **scegliere Esegui come amministratore**.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-113">To open this prompt, click **Start**, select **All Programs**, scroll down to **Visual Studio 2010**, select **Visual Studio Tools**, right-click **Visual Studio Command Prompt (2010)**, and then click **Run as administrator**.</span></span> <span data-ttu-id="a7ef4-114">Se si dispone di una delle edizioni di Visual Studio Express installate, il prompt dei comandi non sarà disponibile e sarà necessario aggiungere "C:\Windows\Microsoft.Net\Framework\v4.0" al percorso di sistema.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-114">If you have one of the Visual Studio Express editions installed, this command prompt is not available, and you will have to add "C:\Windows\Microsoft.Net\Framework\v4.0" to the system path.</span></span>

### <a name="one-time-setup-procedure-for-wcf-samples"></a><span data-ttu-id="a7ef4-115">Procedura di installazione singola per esempi WCF</span><span class="sxs-lookup"><span data-stu-id="a7ef4-115">One-time setup procedure for WCF samples</span></span>

1. <span data-ttu-id="a7ef4-116">Assicurarsi che ASP.NET sia impostato.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-116">Ensure that ASP.NET is set up.</span></span> <span data-ttu-id="a7ef4-117">Per ulteriori informazioni su come configurare ASP.NET, vedere [Istruzioni per l'hosting di Internet Information Service](internet-information-service-hosting-instructions.md).</span><span class="sxs-lookup"><span data-stu-id="a7ef4-117">For more information about how to set up ASP.NET, see [Internet Information Service Hosting Instructions](internet-information-service-hosting-instructions.md).</span></span>

2. <span data-ttu-id="a7ef4-118">Assicurarsi che .NET Framework 4 sia installato.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-118">Ensure that .NET Framework 4 is installed.</span></span> <span data-ttu-id="a7ef4-119">Eseguire la ricerca nella directory seguente per v4.0 (o versione **successiva):**</span><span class="sxs-lookup"><span data-stu-id="a7ef4-119">Search the following directory for v4.0 (or later): **\Windows\Microsoft.NET\Framework**</span></span>

3. <span data-ttu-id="a7ef4-120">Assicurarsi di avere installato Visual Studio 2012 o versione successiva o che il sistema operativo sia Windows Server 2008 SP2 o versione successiva.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-120">Ensure you have Visual Studio 2012 or later installed, or your operating system is Windows Server 2008 SP2 or later.</span></span>

4. <span data-ttu-id="a7ef4-121">Eseguire i comandi seguenti.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-121">Run the following commands.</span></span> <span data-ttu-id="a7ef4-122">Per ulteriori informazioni sui motivi per cui questi comandi devono essere eseguiti, vedere [IIS Hosted Service Fails](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms752252(v=vs.90)).</span><span class="sxs-lookup"><span data-stu-id="a7ef4-122">For more information about why these commands must be run, see [IIS Hosted Service Fails](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms752252(v=vs.90)).</span></span>

    > [!WARNING]
    > <span data-ttu-id="a7ef4-123">Se IIS viene reinstallato, nei comandi seguenti sarà necessario eseguirlo nuovamente.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-123">If IIS is reinstalled, the following commands will need to be run again.</span></span>

    ```console
    "%WINDIR%\Microsoft.Net\Framework\v4.0.30319\aspnet_regiis" –i –enable
    "%WINDIR%\Microsoft.Net\Framework\v4.0.30319\ServiceModelReg.exe" -r
    ```

    > [!WARNING]
    > <span data-ttu-id="a7ef4-124">L'esecuzione `aspnet_regiis –i –enable` del comando renderà l'esecuzione del pool di applicazioni predefinito con .NET Framework 4, che potrebbe produrre problemi di incompatibilità per altre applicazioni nello stesso computer.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-124">Running the command `aspnet_regiis –i –enable` will make the Default App Pool run using .NET Framework 4, which may produce incompatibility issues for other applications on the same computer.</span></span>

5. <span data-ttu-id="a7ef4-125">Seguire le istruzioni del [firewall](firewall-instructions.md) per abilitare le porte utilizzate dagli esempi.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-125">Follow the [Firewall Instructions](firewall-instructions.md) for enabling the ports used by the samples.</span></span>

6. <span data-ttu-id="a7ef4-126">Verificare la presenza \<della directory predefinita seguente: InstallDrive>:**WF_WCF_Samples .**</span><span class="sxs-lookup"><span data-stu-id="a7ef4-126">Check for the following default directory: \<InstallDrive>:**\WF_WCF_Samples**.</span></span> <span data-ttu-id="a7ef4-127">Se gli esempi sono stati installati in precedenza, questa è la directory predefinita.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-127">If the samples were previously installed, this is the default directory.</span></span>

7. <span data-ttu-id="a7ef4-128">Se gli esempi non sono installati, installarli da [Windows Communication Foundation (WCF) e Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459).</span><span class="sxs-lookup"><span data-stu-id="a7ef4-128">If the samples are not installed, install them from [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459).</span></span>

8. <span data-ttu-id="a7ef4-129">Dopo l'installazione degli esempi, passare a : \<InstallDrive>\*\*WF_WCF_Samples:\\ \*\*</span><span class="sxs-lookup"><span data-stu-id="a7ef4-129">After installing the samples, go to : \<InstallDrive>:**\WF_WCF_Samples\WCF\Setup\\**</span></span>

9. <span data-ttu-id="a7ef4-130">Eseguire il file batch **Setupvroot.bat.**</span><span class="sxs-lookup"><span data-stu-id="a7ef4-130">Run the **Setupvroot.bat** batch file.</span></span> <span data-ttu-id="a7ef4-131">Vengono eseguiti questi passaggi:</span><span class="sxs-lookup"><span data-stu-id="a7ef4-131">The following steps are performed:</span></span>

    - <span data-ttu-id="a7ef4-132">In IIS verrà creata una directory virtuale denominata ServiceModelSamples.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-132">A virtual directory is created in IIS named ServiceModelSamples.</span></span>

    - <span data-ttu-id="a7ef4-133">Vengono create nuove directory su disco denominate %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples and %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples\bin.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-133">New disk directories are created named %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples and %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples\bin.</span></span>

    <span data-ttu-id="a7ef4-134">Se si preferisce configurare manualmente queste directory, vedere le istruzioni per [l'installazione di Virtual Directory](virtual-directory-setup-instructions.md).</span><span class="sxs-lookup"><span data-stu-id="a7ef4-134">If you prefer to set up these directories manually, see the [Virtual Directory Setup Instructions](virtual-directory-setup-instructions.md).</span></span> <span data-ttu-id="a7ef4-135">Per ripristinare tutte le modifiche apportate in questo passaggio, eseguire cleanupvroot.bat dopo aver terminato di utilizzare gli esempi.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-135">To revert all changes done in this step, run cleanupvroot.bat after you finish using the samples.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a7ef4-136">Questa procedura deve essere eseguita solo una volta in un computer, a meno che non venga eseguito cleanupvroot.bat.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-136">This procedure must be performed only once on a computer, unless cleanupvroot.bat is run.</span></span>

10. <span data-ttu-id="a7ef4-137">All'account con cui vengono compilati gli esempi e all'utente con account Servizio di rete è necessario concedere le autorizzazioni per la modifica di %SystemDrive%\inetpub\wwwroot.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-137">You must grant permission to modify for %SystemDrive%\inetpub\wwwroot to the account under which you are building the samples and the Network Service user.</span></span> <span data-ttu-id="a7ef4-138">Durante la compilazione, alcuni esempi ospitati sul Web potrebbero tentare di copiare i file binari compilati nel percorso indicato in precedenza e se non sono state impostate le autorizzazioni appropriate, la compilazione si interromperà.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-138">While building, some Web-hosted samples might attempt to copy the compiled binaries to the previously mentioned location, and if you have not set the appropriate permissions, the build will break.</span></span> <span data-ttu-id="a7ef4-139">In alternativa, è possibile lasciare le autorizzazioni così come sono ed eseguire il prompt dei comandi SDK o il prompt dei comandi di Visual Studio (2012) come amministratore oppure compilare gli esempi in Visual Studio 2012, anche eseguire come amministratore.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-139">Alternatively, you can leave the permissions as they are and run the SDK command prompt or Visual Studio Command Prompt (2012) as Administrator, or build the samples in Visual Studio 2012, also run as Administrator.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a7ef4-140">Se questo passaggio non viene completato, tutti gli esempi ospitati in IIS genereranno un errore durante la compilazione.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-140">If this step is not completed, all IIS-hosted samples will fail while building.</span></span> <span data-ttu-id="a7ef4-141">Assicurarsi di impostare correttamente le autorizzazioni oppure eseguire il prompt dei comandi SDK e il prompt dei comandi di Visual Studio (2012) come amministratore.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-141">Ensure that you set the permissions correctly, or run both the SDK command prompt and Visual Studio Command Prompt (2012) as Administrator.</span></span>

11. <span data-ttu-id="a7ef4-142">Creare una directory C:\logs nel computer. Alcuni esempi potrebbero prevederne l'esistenza.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-142">Create a C:\logs directory on the computer; some samples might be expecting it.</span></span> <span data-ttu-id="a7ef4-143">Verificare che l'account appropriato disponga dell'accesso in scrittura a questa cartella.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-143">Make sure that the appropriate account has write access granted to this folder.</span></span> <span data-ttu-id="a7ef4-144">Per Windows 7, Windows Vista e Windows Server 2008 R2, questo account è **Servizio di rete**.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-144">For Windows 7, Windows Vista, and Windows Server 2008 R2, this account is **Network Service**.</span></span> <span data-ttu-id="a7ef4-145">Per Windows Server 2008, l'account è NT Authority-Network Service.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-145">For  Windows Server 2008, the account is NT Authority\Network Service.</span></span> <span data-ttu-id="a7ef4-146">Per Windows XP e Windows Server 2003, l'account è ASPNET.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-146">For Windows XP and Windows Server 2003, the account is ASPNET.</span></span>

12. <span data-ttu-id="a7ef4-147">Eseguire il file Setupcerttool.bat.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-147">Run the Setupcerttool.bat file.</span></span> <span data-ttu-id="a7ef4-148">Questo file si \<trova nella cartella WF_WCF_Samples InstallPath>.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-148">This file is located in the  \<InstallPath>\WF_WCF_Samples\WCF\Setup\  folder.</span></span>  <span data-ttu-id="a7ef4-149">Tramite questo script verranno eseguite le attività seguenti:</span><span class="sxs-lookup"><span data-stu-id="a7ef4-149">This script will perform the following tasks:</span></span>

    - <span data-ttu-id="a7ef4-150">Compilazione dello strumento FindPrivateKey.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-150">Build the FindPrivateKey tool.</span></span>

    - <span data-ttu-id="a7ef4-151">Creazione di una directory denominata %ProgramFiles%\ServiceModelSampleTools.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-151">Create a directory called %ProgramFiles%\ServiceModelSampleTools.</span></span>

    - <span data-ttu-id="a7ef4-152">Copia del nuovo strumento FindPrivateKey in questa directory.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-152">Copy the new FindPrivateKey tool to this directory.</span></span>

    <span data-ttu-id="a7ef4-153">Questo strumento è necessario per gli esempi che utilizzano certificati e sono ospitati in IIS.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-153">This tool is required by samples that use certificates and are hosted in IIS.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a7ef4-154">Per motivi di sicurezza, dopo aver completato gli esempi, rimuovere la definizione di directory virtuale e le autorizzazioni concesse nei passaggi di installazione illustrati in precedenza eseguendo il file batch denominato Cleanupvroot.bat.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-154">For security purposes, remember to remove the virtual directory definition and permissions granted in the setup steps above by running the batch file named Cleanupvroot.bat after you are finished with the samples.</span></span>

13. <span data-ttu-id="a7ef4-155">Per gli esempi indipendenti (non ospitati in IIS) è necessaria un'autorizzazione per la registrazione degli indirizzi HTTP nel computer in ascolto.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-155">Samples that are self-hosted (not hosted in IIS) require permission to register HTTP addresses on the computer for listening.</span></span> <span data-ttu-id="a7ef4-156">L'autorizzazione per una prenotazione dello spazio dei nomi HTTP viene dall'account utente utilizzato per eseguire l'esempio.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-156">The permission for an HTTP namespace reservation comes from the user account used to run the sample.</span></span> <span data-ttu-id="a7ef4-157">Per impostazione predefinita, gli account amministratore dispongono delle autorizzazioni per registrare qualsiasi indirizzo HTTP.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-157">By default, administrator accounts have the permission to register any HTTP address.</span></span> <span data-ttu-id="a7ef4-158">Agli account non amministratore è necessario concedere l'autorizzazione per gli spazi dei nomi HTTP utilizzati da questi esempi.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-158">Non-administrator accounts must be granted permission for the HTTP namespaces used by the samples.</span></span> <span data-ttu-id="a7ef4-159">Per altre informazioni su come configurare le prenotazioni dello spazio dei nomi, vedere [Configuring HTTP and HTTPS](../feature-details/configuring-http-and-https.md) (Configurazione di HTTP e HTTPS).</span><span class="sxs-lookup"><span data-stu-id="a7ef4-159">For more information about how to configure namespace reservations, see [Configuring HTTP and HTTPS](../feature-details/configuring-http-and-https.md).</span></span>

14. <span data-ttu-id="a7ef4-160">Alcuni esempi richiedono Accodamento messaggi.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-160">Some samples require Message Queuing.</span></span> <span data-ttu-id="a7ef4-161">Per istruzioni sull'installazione, vedere [Installazione di Accodamento messaggi (MSMQ).](installing-message-queuing-msmq.md)</span><span class="sxs-lookup"><span data-stu-id="a7ef4-161">See [Installing Message Queuing (MSMQ)](installing-message-queuing-msmq.md) for installation instructions.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a7ef4-162">Assicurarsi di avviare il servizio MSMQ prima di eseguire gli esempi per i quali è necessario Accodamento messaggi.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-162">Ensure that you start the MSMQ service before you run any samples that require Message Queuing.</span></span>

15. <span data-ttu-id="a7ef4-163">Alcuni esempi richiedono l'utilizzo di certificati.</span><span class="sxs-lookup"><span data-stu-id="a7ef4-163">Some samples require certificates.</span></span> <span data-ttu-id="a7ef4-164">Vedere le [Istruzioni di installazione certificato server IIS (Internet Information Services)](iis-server-certificate-installation-instructions.md).</span><span class="sxs-lookup"><span data-stu-id="a7ef4-164">See [Internet Information Services (IIS) Server Certificate Installation Instructions](iis-server-certificate-installation-instructions.md).</span></span>
