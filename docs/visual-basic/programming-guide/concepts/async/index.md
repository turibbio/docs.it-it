---
title: Programmazione asincrona con Async e Await
ms.date: 07/20/2015
ms.assetid: bd7e462b-583b-4395-9c36-45aa9e61072c
ms.openlocfilehash: 317272649eea56352fcba5402244ba70204c888f
ms.sourcegitcommit: f8c270376ed905f6a8896ce0fe25b4f4b38ff498
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/04/2020
ms.locfileid: "84400810"
---
# <a name="asynchronous-programming-with-async-and-await-visual-basic"></a><span data-ttu-id="aed22-102">Programmazione asincrona con Async e await (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="aed22-102">Asynchronous programming with Async and Await (Visual Basic)</span></span>

<span data-ttu-id="aed22-103">È possibile evitare colli di bottiglia nelle prestazioni e migliorare la risposta generale dell'applicazione utilizzando la programmazione asincrona.</span><span class="sxs-lookup"><span data-stu-id="aed22-103">You can avoid performance bottlenecks and enhance the overall responsiveness of your application by using asynchronous programming.</span></span> <span data-ttu-id="aed22-104">Le tecniche tradizionali per la scrittura di applicazioni asincrone, tuttavia, possono essere complesse, rendendone difficile la scrittura, il debug e la gestione.</span><span class="sxs-lookup"><span data-stu-id="aed22-104">However, traditional techniques for writing asynchronous applications can be complicated, making them difficult to write, debug, and maintain.</span></span>

<span data-ttu-id="aed22-105">Visual Studio 2012 introduce un approccio semplificato, la programmazione asincrona, che sfrutta il supporto asincrono in .NET Framework 4.5 e versioni successive oltre che in Windows Runtime.</span><span class="sxs-lookup"><span data-stu-id="aed22-105">Visual Studio 2012 introduced a simplified approach, async programming, that leverages asynchronous support in the .NET Framework 4.5 and higher as well as  in the Windows Runtime.</span></span> <span data-ttu-id="aed22-106">Il compilatore esegue il lavoro difficile che prima veniva svolto dallo sviluppatore e l'applicazione mantiene una struttura logica simile al codice sincrono.</span><span class="sxs-lookup"><span data-stu-id="aed22-106">The compiler does the difficult work that the developer used to do, and your application retains a logical structure that resembles synchronous code.</span></span> <span data-ttu-id="aed22-107">Di conseguenza, si ottengono tutti i vantaggi della programmazione asincrona con meno lavoro richiesto.</span><span class="sxs-lookup"><span data-stu-id="aed22-107">As a result, you get all the advantages of asynchronous programming with a fraction of the effort.</span></span>

<span data-ttu-id="aed22-108">In questo argomento viene fornita una panoramica di come e quando utilizzare la programmazione asincrona e vengono forniti collegamenti per supportare gli argomenti contenenti informazioni dettagliate ed esempi.</span><span class="sxs-lookup"><span data-stu-id="aed22-108">This topic provides an overview of when and how to use async programming and includes links to support topics that contain details and examples.</span></span>

## <a name="async-improves-responsiveness"></a><a name="BKMK_WhentoUseAsynchrony"></a><span data-ttu-id="aed22-109">Async migliora la velocità di risposta</span><span class="sxs-lookup"><span data-stu-id="aed22-109">Async improves responsiveness</span></span>

<span data-ttu-id="aed22-110">La modalità asincrona è essenziale per le attività che potenzialmente bloccano l'esecuzione, ad esempio quando l'applicazione accede al Web.</span><span class="sxs-lookup"><span data-stu-id="aed22-110">Asynchrony is essential for activities that are potentially blocking, such as when your application accesses the web.</span></span> <span data-ttu-id="aed22-111">L'accesso a una risorsa Web può essere talvolta lento o ritardato.</span><span class="sxs-lookup"><span data-stu-id="aed22-111">Access to a web resource sometimes is slow or delayed.</span></span> <span data-ttu-id="aed22-112">Se tale attività viene bloccata in un processo sincrono, l'intera applicazione deve attendere.</span><span class="sxs-lookup"><span data-stu-id="aed22-112">If such an activity is blocked within a synchronous process, the entire application must wait.</span></span> <span data-ttu-id="aed22-113">In un processo asincrono l'applicazione può invece continuare con un altro lavoro che non dipende dalla risorsa Web finché l'attività di blocco non termina.</span><span class="sxs-lookup"><span data-stu-id="aed22-113">In an asynchronous process, the application can continue with other work that doesn't depend on the web resource until the potentially blocking task finishes.</span></span>

<span data-ttu-id="aed22-114">Nella tabella seguente sono mostrate le aree tipiche in cui la programmazione asincrona migliora la risposta.</span><span class="sxs-lookup"><span data-stu-id="aed22-114">The following table shows typical areas where asynchronous programming improves responsiveness.</span></span> <span data-ttu-id="aed22-115">Le API elencate da .NET Framework 4.5 e Windows Runtime contengono metodi che supportano la programmazione asincrona.</span><span class="sxs-lookup"><span data-stu-id="aed22-115">The listed APIs from the  .NET Framework 4.5 and the Windows Runtime contain methods that support async programming.</span></span>

|<span data-ttu-id="aed22-116">Area dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="aed22-116">Application area</span></span>|<span data-ttu-id="aed22-117">API di supporto che contengono metodi asincroni</span><span class="sxs-lookup"><span data-stu-id="aed22-117">Supporting APIs that contain async methods</span></span>|
|----------------------|------------------------------------------------|
|<span data-ttu-id="aed22-118">Accesso Web</span><span class="sxs-lookup"><span data-stu-id="aed22-118">Web access</span></span>|<span data-ttu-id="aed22-119"><xref:System.Net.Http.HttpClient>, <xref:Windows.Web.Syndication.SyndicationClient></span><span class="sxs-lookup"><span data-stu-id="aed22-119"><xref:System.Net.Http.HttpClient>, <xref:Windows.Web.Syndication.SyndicationClient></span></span>|
|<span data-ttu-id="aed22-120">Utilizzo dei file</span><span class="sxs-lookup"><span data-stu-id="aed22-120">Working with files</span></span>|<span data-ttu-id="aed22-121"><xref:Windows.Storage.StorageFile>, <xref:System.IO.StreamWriter>, <xref:System.IO.StreamReader>, <xref:System.Xml.XmlReader></span><span class="sxs-lookup"><span data-stu-id="aed22-121"><xref:Windows.Storage.StorageFile>, <xref:System.IO.StreamWriter>, <xref:System.IO.StreamReader>, <xref:System.Xml.XmlReader></span></span>|
|<span data-ttu-id="aed22-122">Utilizzo di immagini</span><span class="sxs-lookup"><span data-stu-id="aed22-122">Working with images</span></span>|<span data-ttu-id="aed22-123"><xref:Windows.Media.Capture.MediaCapture>, <xref:Windows.Graphics.Imaging.BitmapEncoder>, <xref:Windows.Graphics.Imaging.BitmapDecoder></span><span class="sxs-lookup"><span data-stu-id="aed22-123"><xref:Windows.Media.Capture.MediaCapture>, <xref:Windows.Graphics.Imaging.BitmapEncoder>, <xref:Windows.Graphics.Imaging.BitmapDecoder></span></span>|
|<span data-ttu-id="aed22-124">Programmazione WCF</span><span class="sxs-lookup"><span data-stu-id="aed22-124">WCF programming</span></span>|[<span data-ttu-id="aed22-125">Operazioni sincrone e asincrone</span><span class="sxs-lookup"><span data-stu-id="aed22-125">Synchronous and Asynchronous Operations</span></span>](../../../../framework/wcf/synchronous-and-asynchronous-operations.md)|
|||

<span data-ttu-id="aed22-126">La modalità asincrona è particolarmente importante per le applicazioni che accedono al thread dell'interfaccia utente poiché tutte le attività correlate all'interfaccia utente in genere condividono un thread.</span><span class="sxs-lookup"><span data-stu-id="aed22-126">Asynchrony proves especially valuable for applications that access the UI thread because all UI-related activity usually shares one thread.</span></span> <span data-ttu-id="aed22-127">Se un processo è bloccato in un'applicazione sincrona, tutte le attività saranno bloccate.</span><span class="sxs-lookup"><span data-stu-id="aed22-127">If any process is blocked in a synchronous application, all are blocked.</span></span> <span data-ttu-id="aed22-128">L'applicazione non risponde e si potrebbe pensare che si sia verificato un errore mentre si tratta solo di un'applicazione attesa.</span><span class="sxs-lookup"><span data-stu-id="aed22-128">Your application stops responding, and you might conclude that it has failed when instead it's just waiting.</span></span>

<span data-ttu-id="aed22-129">Quando si utilizzano i metodi asincroni, l'applicazione continua a rispondere all'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="aed22-129">When you use asynchronous methods, the application continues to respond to the UI.</span></span> <span data-ttu-id="aed22-130">È possibile ad esempio ridimensionare o ridurre a icona una finestra oppure è possibile chiudere l'applicazione se non si desidera attendere il completamento.</span><span class="sxs-lookup"><span data-stu-id="aed22-130">You can resize or minimize a window, for example, or you can close the application if you don't want to wait for it to finish.</span></span>

<span data-ttu-id="aed22-131">L'approccio basato su modalità asincrona aggiunge l'equivalente di una trasmissione automatica all'elenco di opzioni da cui è possibile scegliere quando si progettano operazioni asincrone.</span><span class="sxs-lookup"><span data-stu-id="aed22-131">The async-based approach adds the equivalent of an automatic transmission to the list of options that you can choose from when designing asynchronous operations.</span></span> <span data-ttu-id="aed22-132">In questo modo si ottengono tutti i vantaggi della programmazione asincrona tradizionale con meno lavoro richiesto allo sviluppatore.</span><span class="sxs-lookup"><span data-stu-id="aed22-132">That is, you get all the benefits of traditional asynchronous programming but with much less effort from the developer.</span></span>

## <a name="async-methods-are-easier-to-write"></a><a name="BKMK_HowtoWriteanAsyncMethod"></a><span data-ttu-id="aed22-133">I metodi asincroni sono più semplici da scrivere</span><span class="sxs-lookup"><span data-stu-id="aed22-133">Async methods are easier to write</span></span>

<span data-ttu-id="aed22-134">In Visual Basic le parole chiave [Async](../../../language-reference/modifiers/async.md) e [Await](../../../language-reference/operators/await-operator.md) sono il punto centrale della programmazione asincrona.</span><span class="sxs-lookup"><span data-stu-id="aed22-134">The [Async](../../../language-reference/modifiers/async.md) and [Await](../../../language-reference/operators/await-operator.md) keywords in Visual Basic are the heart of async programming.</span></span> <span data-ttu-id="aed22-135">Tramite queste due parole chiave, è possibile usare le risorse di .NET Framework o di Windows Runtime per creare un metodo asincrono con la stessa facilità con cui è possibile creare un metodo sincrono.</span><span class="sxs-lookup"><span data-stu-id="aed22-135">By using those two keywords, you can use resources in the .NET Framework or the Windows Runtime to create an asynchronous method almost as easily as you create a synchronous method.</span></span> <span data-ttu-id="aed22-136">I metodi asincroni definiti mediante `Async` e `Await` sono denominati metodi asincroni.</span><span class="sxs-lookup"><span data-stu-id="aed22-136">Asynchronous methods that you define by using `Async` and `Await` are referred to as async methods.</span></span>

<span data-ttu-id="aed22-137">Nell'esempio seguente viene illustrato un metodo asincrono.</span><span class="sxs-lookup"><span data-stu-id="aed22-137">The following example shows an async method.</span></span> <span data-ttu-id="aed22-138">Quasi tutti gli elementi del codice dovrebbe essere completamente noti all'utente.</span><span class="sxs-lookup"><span data-stu-id="aed22-138">Almost everything in the code should look completely familiar to you.</span></span> <span data-ttu-id="aed22-139">I commenti richiamano le funzionalità che si aggiungono per creare la modalità asincrona.</span><span class="sxs-lookup"><span data-stu-id="aed22-139">The comments call out the features that you add to create the asynchrony.</span></span>

<span data-ttu-id="aed22-140">È possibile trovare il file di esempio completo Windows Presentation Foundation (WPF) alla fine di questo argomento e scaricare l'esempio dalla pagina [Async Sample: Example from "Asynchronous Programming with Async and Await"](https://docs.microsoft.com/samples/dotnet/samples/async-and-await-vb/) (Esempio di attività asincrona: Programmazione asincrona con async e await).</span><span class="sxs-lookup"><span data-stu-id="aed22-140">You can find a complete Windows Presentation Foundation (WPF) example file at the end of this topic, and you can download the sample from [Async Sample: Example from "Asynchronous Programming with Async and Await"](https://docs.microsoft.com/samples/dotnet/samples/async-and-await-vb/).</span></span>

```vb
' Three things to note about writing an Async Function:
'  - The function has an Async modifier.
'  - Its return type is Task or Task(Of T). (See "Return Types" section.)
'  - As a matter of convention, its name ends in "Async".
Async Function AccessTheWebAsync() As Task(Of Integer)
    Using client As New HttpClient()
        ' Call and await separately.
        '  - AccessTheWebAsync can do other things while GetStringAsync is also running.
        '  - getStringTask stores the task we get from the call to GetStringAsync.
        '  - Task(Of String) means it is a task which returns a String when it is done.
        Dim getStringTask As Task(Of String) =
            client.GetStringAsync("https://docs.microsoft.com/dotnet")
        ' You can do other work here that doesn't rely on the string from GetStringAsync.
        DoIndependentWork()
        ' The Await operator suspends AccessTheWebAsync.
        '  - AccessTheWebAsync does not continue until getStringTask is complete.
        '  - Meanwhile, control returns to the caller of AccessTheWebAsync.
        '  - Control resumes here when getStringTask is complete.
        '  - The Await operator then retrieves the String result from getStringTask.
        Dim urlContents As String = Await getStringTask
        ' The Return statement specifies an Integer result.
        ' A method which awaits AccessTheWebAsync receives the Length value.
        Return urlContents.Length

    End Using

End Function
```

<span data-ttu-id="aed22-141">Se `AccessTheWebAsync` non ha alcuna operazione da eseguire tra la chiamata di `GetStringAsync` e il relativo completamento, è possibile semplificare il codice chiamando l'istruzione singola seguente e rimanendo in attesa.</span><span class="sxs-lookup"><span data-stu-id="aed22-141">If `AccessTheWebAsync` doesn't have any work that it can do between calling `GetStringAsync` and awaiting its completion, you can simplify your code by calling and awaiting in the following single statement.</span></span>

```vb
Dim urlContents As String = Await client.GetStringAsync()
```

<span data-ttu-id="aed22-142">Le seguenti caratteristiche riepilogano gli elementi che rendono l'esempio precedente un metodo asincrono:</span><span class="sxs-lookup"><span data-stu-id="aed22-142">The following characteristics summarize what makes the previous example an async method:</span></span>

- <span data-ttu-id="aed22-143">La firma del metodo include un modificatore `Async`.</span><span class="sxs-lookup"><span data-stu-id="aed22-143">The method signature includes an `Async` modifier.</span></span>
- <span data-ttu-id="aed22-144">Il nome di un metodo asincrono termina per convenzione con un suffisso "Async".</span><span class="sxs-lookup"><span data-stu-id="aed22-144">The name of an async method, by convention, ends with an "Async" suffix.</span></span>
- <span data-ttu-id="aed22-145">Il tipo restituito è uno dei seguenti:</span><span class="sxs-lookup"><span data-stu-id="aed22-145">The return type is one of the following types:</span></span>

  - <span data-ttu-id="aed22-146">[Task (Of TResult)](xref:System.Threading.Tasks.Task%601) se il metodo dispone di un'istruzione return in cui l'operando è di tipo TResult.</span><span class="sxs-lookup"><span data-stu-id="aed22-146">[Task(Of TResult)](xref:System.Threading.Tasks.Task%601) if your method has a return statement in which the operand has type TResult.</span></span>
  - <span data-ttu-id="aed22-147"><xref:System.Threading.Tasks.Task> se nel metodo non è presente un'istruzione return oppure è presente un'istruzione return senza l'operando.</span><span class="sxs-lookup"><span data-stu-id="aed22-147"><xref:System.Threading.Tasks.Task> if your method has no return statement or has a return statement with no operand.</span></span>
  - <span data-ttu-id="aed22-148">[Sub](../../language-features/procedures/sub-procedures.md) se si sta scrivendo un gestore eventi asincrono.</span><span class="sxs-lookup"><span data-stu-id="aed22-148">[Sub](../../language-features/procedures/sub-procedures.md) if you're writing an async event handler.</span></span>

  <span data-ttu-id="aed22-149">Per ulteriori informazioni, vedere la sezione "Tipi restituiti e parametri" più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="aed22-149">For more information, see "Return Types and Parameters" later in this topic.</span></span>

- <span data-ttu-id="aed22-150">Il metodo include in genere almeno un'espressione await, che contrassegna un punto in cui il metodo non può continuare fino a quando l'operazione asincrona attesa non sia completata.</span><span class="sxs-lookup"><span data-stu-id="aed22-150">The method usually includes at least one await expression, which marks a point where the method can't continue until the awaited asynchronous operation is complete.</span></span> <span data-ttu-id="aed22-151">Nel frattempo, il metodo viene sospeso e il controllo ritorna al chiamante del metodo.</span><span class="sxs-lookup"><span data-stu-id="aed22-151">In the meantime, the method is suspended, and control returns to the method's caller.</span></span> <span data-ttu-id="aed22-152">Nella sezione successiva di questo argomento viene illustrato quello che accade in corrispondenza del punto di sospensione.</span><span class="sxs-lookup"><span data-stu-id="aed22-152">The next section of this topic illustrates what happens at the suspension point.</span></span>

<span data-ttu-id="aed22-153">Nei metodi asincroni utilizzare le parole chiave e i tipi forniti per indicare l'operazione da eseguire e il compilatore esegue il resto dell'operazione, inclusa la traccia di cosa deve verificarsi quando il controllo viene restituito a un punto di attesa in un metodo sospeso.</span><span class="sxs-lookup"><span data-stu-id="aed22-153">In async methods, you use the provided keywords and types to indicate what you want to do, and the compiler does the rest, including keeping track of what must happen when control returns to an await point in a suspended method.</span></span> <span data-ttu-id="aed22-154">Alcuni processi di routine, come cicli e gestione delle eccezioni, possono essere difficili da gestire nel codice asincrono tradizionale.</span><span class="sxs-lookup"><span data-stu-id="aed22-154">Some routine processes, such as loops and exception handling, can be difficult to handle in traditional asynchronous code.</span></span> <span data-ttu-id="aed22-155">In un metodo asincrono scrivere questi elementi come in una soluzione sincrona e il problema viene risolto.</span><span class="sxs-lookup"><span data-stu-id="aed22-155">In an async method, you write these elements much as you would in a synchronous solution, and the problem is solved.</span></span>

<span data-ttu-id="aed22-156">Per altre informazioni sulla modalità asincrona in versioni precedenti di .NET Framework, vedere [TPL and Traditional .NET Framework Asynchronous Programming](../../../../standard/parallel-programming/tpl-and-traditional-async-programming.md) (TPL e programmazione asincrona .NET Framework tradizionale).</span><span class="sxs-lookup"><span data-stu-id="aed22-156">For more information about asynchrony in previous versions of the .NET Framework, see [TPL and Traditional .NET Framework Asynchronous Programming](../../../../standard/parallel-programming/tpl-and-traditional-async-programming.md).</span></span>

## <a name="what-happens-in-an-async-method"></a><a name="BKMK_WhatHappensUnderstandinganAsyncMethod"></a><span data-ttu-id="aed22-157">Cosa accade in un metodo asincrono</span><span class="sxs-lookup"><span data-stu-id="aed22-157">What happens in an Async method</span></span>

<span data-ttu-id="aed22-158">La cosa più importante da capire nella programmazione asincrona è il modo in cui il flusso del controllo si sposta da un metodo all'altro.</span><span class="sxs-lookup"><span data-stu-id="aed22-158">The most important thing to understand in asynchronous programming is how the control flow moves from method to method.</span></span> <span data-ttu-id="aed22-159">Nel diagramma seguente viene descritto il processo:</span><span class="sxs-lookup"><span data-stu-id="aed22-159">The following diagram leads you through the process:</span></span>

![Diagramma che illustra la traccia di un programma asincrono.](./media/index/navigation-trace-async-program.png)

<span data-ttu-id="aed22-161">I numeri nel diagramma corrispondono ai passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="aed22-161">The numbers in the diagram correspond to the following steps:</span></span>

1. <span data-ttu-id="aed22-162">Un gestore eventi chiama e attende il `AccessTheWebAsync` metodo asincrono.</span><span class="sxs-lookup"><span data-stu-id="aed22-162">An event handler calls and awaits the `AccessTheWebAsync` async method.</span></span>

2. <span data-ttu-id="aed22-163">`AccessTheWebAsync` crea un'istanza di <xref:System.Net.Http.HttpClient> e chiama il metodo asincrono <xref:System.Net.Http.HttpClient.GetStringAsync%2A> per scaricare il contenuto di un sito Web come stringa.</span><span class="sxs-lookup"><span data-stu-id="aed22-163">`AccessTheWebAsync` creates an <xref:System.Net.Http.HttpClient> instance and calls the <xref:System.Net.Http.HttpClient.GetStringAsync%2A> asynchronous method to download the contents of a website as a string.</span></span>

3. <span data-ttu-id="aed22-164">Si verifica un evento in `GetStringAsync` che ne sospende lo stato di avanzamento</span><span class="sxs-lookup"><span data-stu-id="aed22-164">Something happens in `GetStringAsync` that suspends its progress.</span></span> <span data-ttu-id="aed22-165">forse perché deve attendere il termine dello scaricamento di un sito Web o un'altra attività di blocco.</span><span class="sxs-lookup"><span data-stu-id="aed22-165">Perhaps it must wait for a website to download or some other blocking activity.</span></span> <span data-ttu-id="aed22-166">Per evitare di bloccare le risorse, `GetStringAsync` restituisce il controllo al chiamante `AccessTheWebAsync`.</span><span class="sxs-lookup"><span data-stu-id="aed22-166">To avoid blocking resources, `GetStringAsync` yields control to its caller, `AccessTheWebAsync`.</span></span>

     <span data-ttu-id="aed22-167">`GetStringAsync`Restituisce un' [attività (Of TResult)](xref:System.Threading.Tasks.Task%601) in cui TResult è una stringa e `AccessTheWebAsync` assegna l'attività alla `getStringTask` variabile.</span><span class="sxs-lookup"><span data-stu-id="aed22-167">`GetStringAsync` returns a [Task(Of TResult)](xref:System.Threading.Tasks.Task%601) where TResult is a string, and `AccessTheWebAsync` assigns the task to the `getStringTask` variable.</span></span> <span data-ttu-id="aed22-168">L'attività rappresenta il processo in corso per la chiamata a `GetStringAsync`, con l'impegno di produrre un valore stringa effettivo a completamento del lavoro.</span><span class="sxs-lookup"><span data-stu-id="aed22-168">The task represents the ongoing process for the call to `GetStringAsync`, with a commitment to produce an actual string value when the work is complete.</span></span>

4. <span data-ttu-id="aed22-169">Poiché `getStringTask` non è stata ancora attesa, `AccessTheWebAsync` può continuare con altro lavoro che non dipende dal risultato finale ottenuto da `GetStringAsync`.</span><span class="sxs-lookup"><span data-stu-id="aed22-169">Because `getStringTask` hasn't been awaited yet, `AccessTheWebAsync` can continue with other work that doesn't depend on the final result from `GetStringAsync`.</span></span> <span data-ttu-id="aed22-170">Tale lavoro è rappresentato da una chiamata al metodo sincrono `DoIndependentWork`.</span><span class="sxs-lookup"><span data-stu-id="aed22-170">That work is represented by a call to the synchronous method `DoIndependentWork`.</span></span>

5. <span data-ttu-id="aed22-171">`DoIndependentWork` è un metodo sincrono che esegue il proprio lavoro e lo restituisce al chiamante.</span><span class="sxs-lookup"><span data-stu-id="aed22-171">`DoIndependentWork` is a synchronous method that does its work and returns to its caller.</span></span>

6. <span data-ttu-id="aed22-172">`AccessTheWebAsync` ha esaurito il lavoro che può eseguire senza un risultato da `getStringTask`.</span><span class="sxs-lookup"><span data-stu-id="aed22-172">`AccessTheWebAsync` has run out of work that it can do without a result from `getStringTask`.</span></span> <span data-ttu-id="aed22-173">`AccessTheWebAsync` deve quindi calcolare e restituire la lunghezza della stringa scaricata, ma il metodo non può calcolare il valore finché quest'ultimo non contiene la stringa.</span><span class="sxs-lookup"><span data-stu-id="aed22-173">`AccessTheWebAsync` next wants to calculate and return the length of the downloaded string, but the method can't calculate that value until the method has the string.</span></span>

     <span data-ttu-id="aed22-174">Di conseguenza, `AccessTheWebAsync` utilizza un operatore await per sospendere lo stato di avanzamento e restituire il controllo al metodo che ha chiamato `AccessTheWebAsync`.</span><span class="sxs-lookup"><span data-stu-id="aed22-174">Therefore, `AccessTheWebAsync` uses an await operator to suspend its progress and to yield control to the method that called `AccessTheWebAsync`.</span></span> <span data-ttu-id="aed22-175">`AccessTheWebAsync` restituisce `Task(Of Integer)` al chiamante.</span><span class="sxs-lookup"><span data-stu-id="aed22-175">`AccessTheWebAsync` returns a `Task(Of Integer)` to the caller.</span></span> <span data-ttu-id="aed22-176">L'attività rappresenta l'intenzione di produrre un risultato di tipo Integer che è la lunghezza della stringa scaricata.</span><span class="sxs-lookup"><span data-stu-id="aed22-176">The task represents a promise to produce an integer result that's the length of the downloaded string.</span></span>

    > [!NOTE]
    > <span data-ttu-id="aed22-177">Se l'operazione `GetStringAsync` (e quindi `getStringTask`) viene completata prima che `AccessTheWebAsync` ne attenda il risultato, il controllo resta a `AccessTheWebAsync`.</span><span class="sxs-lookup"><span data-stu-id="aed22-177">If `GetStringAsync` (and therefore `getStringTask`) is complete before `AccessTheWebAsync` awaits it, control remains in `AccessTheWebAsync`.</span></span> <span data-ttu-id="aed22-178">I costi per sospendere e tornare a `AccessTheWebAsync` sarebbero sprecati se il processo asincrono chiamato (`getStringTask`) fosse già completato e AccessTheWebSync non dovesse attendere il risultato finale.</span><span class="sxs-lookup"><span data-stu-id="aed22-178">The expense of suspending and then returning to `AccessTheWebAsync` would be wasted if the called asynchronous process (`getStringTask`) has already completed and AccessTheWebSync doesn't have to wait for the final result.</span></span>

     <span data-ttu-id="aed22-179">Nel chiamante (in questo esempio il gestore eventi), il modello di elaborazione continua.</span><span class="sxs-lookup"><span data-stu-id="aed22-179">Inside the caller (the event handler in this example), the processing pattern continues.</span></span> <span data-ttu-id="aed22-180">Il chiamante può eseguire altre attività che non dipendono dal risultato di `AccessTheWebAsync` prima di attendere tale risultato oppure può mettersi immediatamente in attesa.</span><span class="sxs-lookup"><span data-stu-id="aed22-180">The caller might do other work that doesn't depend on the result from `AccessTheWebAsync` before awaiting that result, or the caller might await immediately.</span></span>   <span data-ttu-id="aed22-181">Il gestore eventi è in attesa di `AccessTheWebAsync` e `AccessTheWebAsync` è in attesa di `GetStringAsync`.</span><span class="sxs-lookup"><span data-stu-id="aed22-181">The event handler is waiting for `AccessTheWebAsync`, and `AccessTheWebAsync` is waiting for `GetStringAsync`.</span></span>

7. <span data-ttu-id="aed22-182">`GetStringAsync` termina e produce un risultato di stringa.</span><span class="sxs-lookup"><span data-stu-id="aed22-182">`GetStringAsync` completes and produces a string result.</span></span> <span data-ttu-id="aed22-183">Il risultato di stringa non viene restituito dalla chiamata a `GetStringAsync` nel modo previsto.</span><span class="sxs-lookup"><span data-stu-id="aed22-183">The string result isn't returned by the call to `GetStringAsync` in the way that you might expect.</span></span> <span data-ttu-id="aed22-184">Tenere presente che il metodo non ha restituito un'attività al passaggio 3. Il risultato di stringa viene invece memorizzato nell'attività che rappresenta il completamento del metodo, ovvero `getStringTask`.</span><span class="sxs-lookup"><span data-stu-id="aed22-184">(Remember that the method already returned a task in step 3.) Instead, the string result is stored in the task that represents the completion of the method, `getStringTask`.</span></span> <span data-ttu-id="aed22-185">L'operatore await recupera il risultato da `getStringTask`.</span><span class="sxs-lookup"><span data-stu-id="aed22-185">The await operator retrieves the result from `getStringTask`.</span></span> <span data-ttu-id="aed22-186">L'istruzione di assegnazione assegna il risultato recuperato a `urlContents`.</span><span class="sxs-lookup"><span data-stu-id="aed22-186">The assignment statement assigns the retrieved result to `urlContents`.</span></span>

8. <span data-ttu-id="aed22-187">Quando `AccessTheWebAsync` ha il risultato di stringa, il metodo può calcolare la lunghezza della stringa.</span><span class="sxs-lookup"><span data-stu-id="aed22-187">When `AccessTheWebAsync` has the string result, the method can calculate the length of the string.</span></span> <span data-ttu-id="aed22-188">Il lavoro di `AccessTheWebAsync` è quindi completo e il gestore eventi in attesa può riprendere l'attività.</span><span class="sxs-lookup"><span data-stu-id="aed22-188">Then the work of `AccessTheWebAsync` is also complete, and the waiting event handler can resume.</span></span> <span data-ttu-id="aed22-189">Nell'esempio completo alla fine dell'argomento è possibile confermare che il gestore eventi recupera e stampa il valore del risultato di lunghezza.</span><span class="sxs-lookup"><span data-stu-id="aed22-189">In the full example at the end of the topic, you can confirm that the event handler retrieves and prints the value of the length result.</span></span>

<span data-ttu-id="aed22-190">Se non si ha familiarità con la programmazione asincrona, valutare la differenza tra il comportamento sincrono e asincrono.</span><span class="sxs-lookup"><span data-stu-id="aed22-190">If you are new to asynchronous programming, take a minute to consider the difference between synchronous and asynchronous behavior.</span></span> <span data-ttu-id="aed22-191">Viene restituito un metodo sincrono quando il lavoro è completato (passaggio 5), ma un metodo asincrono restituisce un valore di attività quando il relativo lavoro viene sospeso (passaggi 3 e 6).</span><span class="sxs-lookup"><span data-stu-id="aed22-191">A synchronous method returns when its work is complete (step 5), but an async method returns a task value when its work is suspended (steps 3 and 6).</span></span> <span data-ttu-id="aed22-192">Una volta che il metodo asincrono completa l'operazione, l'attività viene contrassegnata come completata e il risultato, se disponibile, viene archiviato nell'attività.</span><span class="sxs-lookup"><span data-stu-id="aed22-192">When the async method eventually completes its work, the task is marked as completed and the result, if any, is stored in the task.</span></span>

<span data-ttu-id="aed22-193">Per altre informazioni sul flusso di controllo, vedere [Flusso di controllo in programmi asincroni (Visual Basic)](control-flow-in-async-programs.md).</span><span class="sxs-lookup"><span data-stu-id="aed22-193">For more information about control flow, see [Control Flow in Async Programs (Visual Basic)](control-flow-in-async-programs.md).</span></span>

## <a name="api-async-methods"></a><a name="BKMK_APIAsyncMethods"></a> <span data-ttu-id="aed22-194">Metodi asincroni per API</span><span class="sxs-lookup"><span data-stu-id="aed22-194">API Async Methods</span></span>

<span data-ttu-id="aed22-195">Metodi come `GetStringAsync` che supportano la programmazione asincrona</span><span class="sxs-lookup"><span data-stu-id="aed22-195">You might be wondering where to find methods such as `GetStringAsync` that support async programming.</span></span> <span data-ttu-id="aed22-196">Il .NET Framework 4,5 o versione successiva contiene molti membri che funzionano con `Async` e `Await` .</span><span class="sxs-lookup"><span data-stu-id="aed22-196">The .NET Framework 4.5 or higher contains many members that work with `Async` and `Await`.</span></span> <span data-ttu-id="aed22-197">È possibile riconoscere questi membri dal suffisso "Async" associato al nome del membro e dal tipo restituito di <xref:System.Threading.Tasks.Task> o [Task (Of TResult)](xref:System.Threading.Tasks.Task%601).</span><span class="sxs-lookup"><span data-stu-id="aed22-197">You can recognize these members by the "Async" suffix that's attached to the member name and a return type of <xref:System.Threading.Tasks.Task> or [Task(Of TResult)](xref:System.Threading.Tasks.Task%601).</span></span> <span data-ttu-id="aed22-198">Ad esempio, la classe `System.IO.Stream` contiene metodi come <xref:System.IO.Stream.CopyToAsync%2A>, <xref:System.IO.Stream.ReadAsync%2A> e <xref:System.IO.Stream.WriteAsync%2A> insieme ai metodi sincroni <xref:System.IO.Stream.CopyTo%2A>, <xref:System.IO.Stream.Read%2A> e <xref:System.IO.Stream.Write%2A>.</span><span class="sxs-lookup"><span data-stu-id="aed22-198">For example, the `System.IO.Stream` class contains methods such as <xref:System.IO.Stream.CopyToAsync%2A>, <xref:System.IO.Stream.ReadAsync%2A>, and <xref:System.IO.Stream.WriteAsync%2A> alongside the synchronous methods <xref:System.IO.Stream.CopyTo%2A>, <xref:System.IO.Stream.Read%2A>, and <xref:System.IO.Stream.Write%2A>.</span></span>

<span data-ttu-id="aed22-199">Windows Runtime contiene inoltre molti metodi che è possibile usare con `Async` e `Await` in app Windows.</span><span class="sxs-lookup"><span data-stu-id="aed22-199">The Windows Runtime also contains many methods that you can use with `Async` and `Await` in Windows apps.</span></span> <span data-ttu-id="aed22-200">Per altre informazioni e metodi di esempio, vedere [chiamare le API asincrone in C# o Visual Basic](/windows/uwp/threading-async/call-asynchronous-apis-in-csharp-or-visual-basic), [programmazione asincrona (app Windows Runtime)](https://docs.microsoft.com/previous-versions/windows/apps/hh464924(v=win.10))e [WhenAny: bridging tra la .NET Framework e la Windows Runtime](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/jj635140(v=vs.120)).</span><span class="sxs-lookup"><span data-stu-id="aed22-200">For more information and example methods, see [Call asynchronous APIs in C# or Visual Basic](/windows/uwp/threading-async/call-asynchronous-apis-in-csharp-or-visual-basic), [Asynchronous programming (Windows Runtime apps)](https://docs.microsoft.com/previous-versions/windows/apps/hh464924(v=win.10)), and [WhenAny: Bridging between the .NET Framework and the Windows Runtime](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/jj635140(v=vs.120)).</span></span>

## <a name="threads"></a><a name="BKMK_Threads"></a><span data-ttu-id="aed22-201">Thread</span><span class="sxs-lookup"><span data-stu-id="aed22-201">Threads</span></span>

<span data-ttu-id="aed22-202">I metodi asincroni vengono considerati operazioni non bloccanti.</span><span class="sxs-lookup"><span data-stu-id="aed22-202">Async methods are intended to be non-blocking operations.</span></span> <span data-ttu-id="aed22-203">Un' `Await` espressione in un metodo asincrono non blocca il thread corrente quando l'attività attesa è in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="aed22-203">An `Await` expression in an async method doesn't block the current thread while the awaited task is running.</span></span> <span data-ttu-id="aed22-204">Al contrario, l'espressione registra il resto del metodo come continuazione e restituisce il controllo al chiamante del metodo asincrono.</span><span class="sxs-lookup"><span data-stu-id="aed22-204">Instead, the expression signs up the rest of the method as a continuation and returns control to the caller of the async method.</span></span>

<span data-ttu-id="aed22-205">Le parole chiave `Async` e `Await` non determinano la creazione di thread aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="aed22-205">The `Async` and `Await` keywords don't cause additional threads to be created.</span></span> <span data-ttu-id="aed22-206">I metodi asincroni non richiedono il multithreading perché un metodo asincrono non viene eseguito nel proprio thread.</span><span class="sxs-lookup"><span data-stu-id="aed22-206">Async methods don't require multi-threading because an async method doesn't run on its own thread.</span></span> <span data-ttu-id="aed22-207">Il metodo viene eseguito nel contesto di sincronizzazione corrente e utilizza il tempo sul thread solo se il metodo è attivo.</span><span class="sxs-lookup"><span data-stu-id="aed22-207">The method runs on the current synchronization context and uses time on the thread only when the method is active.</span></span> <span data-ttu-id="aed22-208">È possibile utilizzare <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> per spostare un lavoro associato alla CPU in un thread in background. Quest'ultimo tuttavia non è di alcun ausilio in un processo che attende solo che i risultati diventino disponibili.</span><span class="sxs-lookup"><span data-stu-id="aed22-208">You can use <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType> to move CPU-bound work to a background thread, but a background thread doesn't help with a process that's just waiting for results to become available.</span></span>

<span data-ttu-id="aed22-209">L'approccio alla programmazione asincrona basato su async è quasi sempre preferibile agli approcci esistenti.</span><span class="sxs-lookup"><span data-stu-id="aed22-209">The async-based approach to asynchronous programming is preferable to existing approaches in almost every case.</span></span> <span data-ttu-id="aed22-210">In particolare, questo approccio è migliore di <xref:System.ComponentModel.BackgroundWorker> per le operazioni di i/O perché il codice è più semplice e non è necessario proteggersi dalle race condition.</span><span class="sxs-lookup"><span data-stu-id="aed22-210">In particular, this approach is better than <xref:System.ComponentModel.BackgroundWorker> for I/O-bound operations because the code is simpler and you don't have to guard against race conditions.</span></span> <span data-ttu-id="aed22-211">Insieme a <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType>, la programmazione asincrona è migliore di <xref:System.ComponentModel.BackgroundWorker> per le operazioni associate alla CPU perché separa i dettagli di coordinamento per l'esecuzione del codice dal lavoro che `Task.Run` trasferisce al pool di thread.</span><span class="sxs-lookup"><span data-stu-id="aed22-211">In combination with <xref:System.Threading.Tasks.Task.Run%2A?displayProperty=nameWithType>, async programming is better than <xref:System.ComponentModel.BackgroundWorker> for CPU-bound operations because async programming separates the coordination details of running your code from the work that `Task.Run` transfers to the threadpool.</span></span>

## <a name="async-and-await"></a><a name="BKMK_AsyncandAwait"></a> <span data-ttu-id="aed22-212">Async e Await</span><span class="sxs-lookup"><span data-stu-id="aed22-212">Async and Await</span></span>

<span data-ttu-id="aed22-213">Se si specifica che un metodo è un metodo asincrono usando un modificatore [Async](../../../language-reference/modifiers/async.md) , si abilitano le due funzionalità seguenti.</span><span class="sxs-lookup"><span data-stu-id="aed22-213">If you specify that a method is an async method by using an [Async](../../../language-reference/modifiers/async.md) modifier, you enable the following two capabilities.</span></span>

- <span data-ttu-id="aed22-214">Il metodo asincrono contrassegnato può usare [await](../../../language-reference/operators/await-operator.md) per definire i punti di sospensione.</span><span class="sxs-lookup"><span data-stu-id="aed22-214">The marked async method can use [Await](../../../language-reference/operators/await-operator.md) to designate suspension points.</span></span> <span data-ttu-id="aed22-215">L'operatore await indica al compilatore che il metodo asincrono non può continuare oltre un dato punto prima del completamento del processo asincrono in attesa.</span><span class="sxs-lookup"><span data-stu-id="aed22-215">The await operator tells the compiler that the async method can't continue past that point until the awaited asynchronous process is complete.</span></span> <span data-ttu-id="aed22-216">Nel frattempo il controllo viene restituito al chiamante del metodo asincrono.</span><span class="sxs-lookup"><span data-stu-id="aed22-216">In the meantime, control returns to the caller of the async method.</span></span>

  <span data-ttu-id="aed22-217">La sospensione di un metodo asincrono in un' `Await` espressione non costituisce un'uscita dal metodo e i `Finally` blocchi non vengono eseguiti.</span><span class="sxs-lookup"><span data-stu-id="aed22-217">The suspension of an async method at an `Await` expression doesn't constitute an exit from the method, and `Finally` blocks don't run.</span></span>

- <span data-ttu-id="aed22-218">Il metodo asincrono contrassegnato può essere atteso da metodi che lo chiamano.</span><span class="sxs-lookup"><span data-stu-id="aed22-218">The marked async method can itself be awaited by methods that call it.</span></span>

<span data-ttu-id="aed22-219">Un metodo asincrono contiene in genere una o più occorrenze di un `Await` operatore, ma l'assenza di `Await` espressioni non provoca un errore del compilatore.</span><span class="sxs-lookup"><span data-stu-id="aed22-219">An async method typically contains one or more occurrences of an `Await` operator, but the absence of `Await` expressions doesn't cause a compiler error.</span></span> <span data-ttu-id="aed22-220">Se un metodo asincrono non usa un `Await` operatore per contrassegnare un punto di sospensione, il metodo viene eseguito come metodo sincrono, nonostante il `Async` modificatore.</span><span class="sxs-lookup"><span data-stu-id="aed22-220">If an async method doesn't use an `Await` operator to mark a suspension point, the method executes as a synchronous method does, despite the `Async` modifier.</span></span> <span data-ttu-id="aed22-221">Il compilatore genera un avviso per tali metodi.</span><span class="sxs-lookup"><span data-stu-id="aed22-221">The compiler issues a warning for such methods.</span></span>

<span data-ttu-id="aed22-222">`Async` e `Await` sono parole chiave contestuali.</span><span class="sxs-lookup"><span data-stu-id="aed22-222">`Async` and `Await` are contextual keywords.</span></span> <span data-ttu-id="aed22-223">Per ulteriori informazioni ed esempi, vedere gli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="aed22-223">For more information and examples, see the following topics:</span></span>

- [<span data-ttu-id="aed22-224">Async</span><span class="sxs-lookup"><span data-stu-id="aed22-224">Async</span></span>](../../../language-reference/modifiers/async.md)
- [<span data-ttu-id="aed22-225">Operatore await</span><span class="sxs-lookup"><span data-stu-id="aed22-225">Await Operator</span></span>](../../../language-reference/operators/await-operator.md)

## <a name="return-types-and-parameters"></a><a name="BKMK_ReturnTypesandParameters"></a><span data-ttu-id="aed22-226">Tipi restituiti e parametri</span><span class="sxs-lookup"><span data-stu-id="aed22-226">Return types and parameters</span></span>

<span data-ttu-id="aed22-227">Nella programmazione .NET Framework un metodo asincrono restituisce in genere un oggetto <xref:System.Threading.Tasks.Task> o un' [attività (Of TResult)](xref:System.Threading.Tasks.Task%601).</span><span class="sxs-lookup"><span data-stu-id="aed22-227">In .NET Framework programming, an async method typically returns a <xref:System.Threading.Tasks.Task> or a [Task(Of TResult)](xref:System.Threading.Tasks.Task%601).</span></span> <span data-ttu-id="aed22-228">In un metodo asincrono un operatore `Await` viene applicato a un'attività restituita da una chiamata a un altro metodo asincrono.</span><span class="sxs-lookup"><span data-stu-id="aed22-228">Inside an async method, an `Await` operator is applied to a task that's returned from a call to another async method.</span></span>

<span data-ttu-id="aed22-229">Specificare [Task (Of TResult)](xref:System.Threading.Tasks.Task%601) come tipo restituito se il metodo contiene un'istruzione [Return](../../../language-reference/statements/return-statement.md) che specifica un operando di tipo `TResult` .</span><span class="sxs-lookup"><span data-stu-id="aed22-229">You specify [Task(Of TResult)](xref:System.Threading.Tasks.Task%601) as the return type if the method contains a [Return](../../../language-reference/statements/return-statement.md) statement that specifies an operand of type `TResult`.</span></span>

<span data-ttu-id="aed22-230">Utilizzare `Task` come tipo restituito se il metodo non include un'istruzione return o contiene un'istruzione return che non restituisce un operando.</span><span class="sxs-lookup"><span data-stu-id="aed22-230">You use `Task` as the return type if the method has no return statement or has a return statement that doesn't return an operand.</span></span>

<span data-ttu-id="aed22-231">Nell'esempio seguente viene illustrato come dichiarare e chiamare un metodo che restituisce un' [attività (Of TResult)](xref:System.Threading.Tasks.Task%601) o un oggetto <xref:System.Threading.Tasks.Task> :</span><span class="sxs-lookup"><span data-stu-id="aed22-231">The following example shows how you declare and call a method that returns a [Task(Of TResult)](xref:System.Threading.Tasks.Task%601) or a <xref:System.Threading.Tasks.Task>:</span></span>

```vb
' Signature specifies Task(Of Integer)
Async Function TaskOfTResult_MethodAsync() As Task(Of Integer)

    Dim hours As Integer
    ' . . .
    ' Return statement specifies an integer result.
    Return hours
End Function

' Calls to TaskOfTResult_MethodAsync
Dim returnedTaskTResult As Task(Of Integer) = TaskOfTResult_MethodAsync()
Dim intResult As Integer = Await returnedTaskTResult
' or, in a single statement
Dim intResult As Integer = Await TaskOfTResult_MethodAsync()

' Signature specifies Task
Async Function Task_MethodAsync() As Task

    ' . . .
    ' The method has no return statement.
End Function

' Calls to Task_MethodAsync
Task returnedTask = Task_MethodAsync()
Await returnedTask
' or, in a single statement
Await Task_MethodAsync()
```

<span data-ttu-id="aed22-232">Ogni attività restituita rappresenta il lavoro attualmente in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="aed22-232">Each returned task represents ongoing work.</span></span> <span data-ttu-id="aed22-233">Un'attività include le informazioni sullo stato del processo asincrono e, infine, il risultato finale del processo o l'eccezione che il processo genera se non viene completato.</span><span class="sxs-lookup"><span data-stu-id="aed22-233">A task encapsulates information about the state of the asynchronous process and, eventually, either the final result from the process or the exception that the process raises if it doesn't succeed.</span></span>

<span data-ttu-id="aed22-234">Un metodo asincrono può essere anche un metodo `Sub`.</span><span class="sxs-lookup"><span data-stu-id="aed22-234">An async method can also be a `Sub` method.</span></span> <span data-ttu-id="aed22-235">Il tipo restituito viene usato principalmente per definire i gestori eventi, dove è necessario un tipo restituito.</span><span class="sxs-lookup"><span data-stu-id="aed22-235">This return type is used primarily to define event handlers, where a return type is required.</span></span> <span data-ttu-id="aed22-236">I gestori eventi asincroni fungono spesso da punto di partenza per i programmi asincroni.</span><span class="sxs-lookup"><span data-stu-id="aed22-236">Async event handlers often serve as the starting point for async programs.</span></span>

<span data-ttu-id="aed22-237">Un metodo asincrono che è una `Sub` routine non può essere atteso e il chiamante non può intercettare le eccezioni generate dal metodo.</span><span class="sxs-lookup"><span data-stu-id="aed22-237">An async method that's a `Sub` procedure can't be awaited, and the caller can't catch any exceptions that the method throws.</span></span>

<span data-ttu-id="aed22-238">Un metodo asincrono non può dichiarare parametri [ByRef](../../../language-reference/modifiers/byref.md), ma può chiamare metodi che hanno tali parametri.</span><span class="sxs-lookup"><span data-stu-id="aed22-238">An async method can't declare [ByRef](../../../language-reference/modifiers/byref.md) parameters, but the method can call methods that have such parameters.</span></span>

<span data-ttu-id="aed22-239">Per altre informazioni ed esempi, vedere [Tipi restituiti asincroni (Visual Basic)](async-return-types.md).</span><span class="sxs-lookup"><span data-stu-id="aed22-239">For more information and examples, see [Async Return Types (Visual Basic)](async-return-types.md).</span></span> <span data-ttu-id="aed22-240">Per altre informazioni su come intercettare eccezioni nei metodi asincroni, vedere [Istruzione Try...Catch...Finally](../../../language-reference/statements/try-catch-finally-statement.md).</span><span class="sxs-lookup"><span data-stu-id="aed22-240">For more information about how to catch exceptions in async methods, see [Try...Catch...Finally Statement](../../../language-reference/statements/try-catch-finally-statement.md).</span></span>

<span data-ttu-id="aed22-241">Nella programmazione Windows Runtime le API asincrone hanno uno dei tipi restituiti seguenti, che sono simili alle attività:</span><span class="sxs-lookup"><span data-stu-id="aed22-241">Asynchronous APIs in Windows Runtime programming have one of the following return types, which are similar to tasks:</span></span>

- <span data-ttu-id="aed22-242">[IAsyncOperation (Of TResult)](xref:Windows.Foundation.IAsyncOperation%601), che corrisponde a [Task (Of TResult)](xref:System.Threading.Tasks.Task%601)</span><span class="sxs-lookup"><span data-stu-id="aed22-242">[IAsyncOperation(Of TResult)](xref:Windows.Foundation.IAsyncOperation%601), which corresponds to [Task(Of TResult)](xref:System.Threading.Tasks.Task%601)</span></span>
- <span data-ttu-id="aed22-243"><xref:Windows.Foundation.IAsyncAction>, che corrisponde a <xref:System.Threading.Tasks.Task></span><span class="sxs-lookup"><span data-stu-id="aed22-243"><xref:Windows.Foundation.IAsyncAction>, which corresponds to <xref:System.Threading.Tasks.Task></span></span>
- [<span data-ttu-id="aed22-244">IAsyncActionWithProgress (di TProgress)</span><span class="sxs-lookup"><span data-stu-id="aed22-244">IAsyncActionWithProgress(Of TProgress)</span></span>](xref:Windows.Foundation.IAsyncActionWithProgress%601)
- [<span data-ttu-id="aed22-245">IAsyncOperationWithProgress (Of TResult, TProgress)</span><span class="sxs-lookup"><span data-stu-id="aed22-245">IAsyncOperationWithProgress(Of TResult, TProgress)</span></span>](xref:Windows.Foundation.IAsyncOperationWithProgress%602)

<span data-ttu-id="aed22-246">Per altre informazioni e per un esempio, vedere [chiamare le API asincrone in C# o Visual Basic](/windows/uwp/threading-async/call-asynchronous-apis-in-csharp-or-visual-basic).</span><span class="sxs-lookup"><span data-stu-id="aed22-246">For more information and an example, see [Call asynchronous APIs in C# or Visual Basic](/windows/uwp/threading-async/call-asynchronous-apis-in-csharp-or-visual-basic).</span></span>

## <a name="naming-convention"></a><a name="BKMK_NamingConvention"></a><span data-ttu-id="aed22-247">Convenzione di denominazione</span><span class="sxs-lookup"><span data-stu-id="aed22-247">Naming convention</span></span>

<span data-ttu-id="aed22-248">Per convenzione, il suffisso "Async" viene aggiunto ai nomi dei metodi che presentano un modificatore `Async`.</span><span class="sxs-lookup"><span data-stu-id="aed22-248">By convention, you append "Async" to the names of methods that have an `Async` modifier.</span></span>

<span data-ttu-id="aed22-249">È possibile ignorare la convenzione se un evento, una classe base o un contratto di interfaccia suggerisce un nome diverso.</span><span class="sxs-lookup"><span data-stu-id="aed22-249">You can ignore the convention where an event, base class, or interface contract suggests a different name.</span></span> <span data-ttu-id="aed22-250">Ad esempio, non è necessario rinominare i gestori eventi comuni, ad esempio `Button1_Click` .</span><span class="sxs-lookup"><span data-stu-id="aed22-250">For example, you shouldn't rename common event handlers, such as `Button1_Click`.</span></span>

## <a name="related-topics-and-samples-visual-studio"></a><a name="BKMK_RelatedTopics"></a><span data-ttu-id="aed22-251">Argomenti correlati ed esempi (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="aed22-251">Related topics and samples (Visual Studio)</span></span>

|<span data-ttu-id="aed22-252">Titolo</span><span class="sxs-lookup"><span data-stu-id="aed22-252">Title</span></span>|<span data-ttu-id="aed22-253">Descrizione</span><span class="sxs-lookup"><span data-stu-id="aed22-253">Description</span></span>|<span data-ttu-id="aed22-254">Esempio</span><span class="sxs-lookup"><span data-stu-id="aed22-254">Sample</span></span>|
|-----------|-----------------|------------|
|[<span data-ttu-id="aed22-255">Procedura dettagliata: accesso al Web con Async e Await (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="aed22-255">Walkthrough: Accessing the Web by Using Async and Await (Visual Basic)</span></span>](walkthrough-accessing-the-web-by-using-async-and-await.md)|<span data-ttu-id="aed22-256">Mostra come convertire una soluzione WPF sincrona in una soluzione WPF asincrona.</span><span class="sxs-lookup"><span data-stu-id="aed22-256">Shows how to convert a synchronous WPF solution to an asynchronous WPF solution.</span></span> <span data-ttu-id="aed22-257">L'applicazione scarica una serie di siti Web.</span><span class="sxs-lookup"><span data-stu-id="aed22-257">The application downloads a series of websites.</span></span>|<span data-ttu-id="aed22-258">[Async Sample: Accessing the Web Walkthrough](https://code.msdn.microsoft.com/Async-Sample-Accessing-the-9c10497f) (Esempio di attività asincrona: Accesso alla procedura dettagliata Web)</span><span class="sxs-lookup"><span data-stu-id="aed22-258">[Async Sample: Accessing the Web Walkthrough](https://code.msdn.microsoft.com/Async-Sample-Accessing-the-9c10497f)</span></span>|
|[<span data-ttu-id="aed22-259">Procedura: Estendere la procedura dettagliata asincrona tramite Task.WhenAll (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="aed22-259">How to: Extend the Async Walkthrough by Using Task.WhenAll (Visual Basic)</span></span>](how-to-extend-the-async-walkthrough-by-using-task-whenall.md)|<span data-ttu-id="aed22-260">Aggiunge <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> alla procedura dettagliata precedente.</span><span class="sxs-lookup"><span data-stu-id="aed22-260">Adds <xref:System.Threading.Tasks.Task.WhenAll%2A?displayProperty=nameWithType> to the previous walkthrough.</span></span> <span data-ttu-id="aed22-261">L'utilizzo di `WhenAll` consente di avviare tutti i download contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="aed22-261">The use of `WhenAll` starts all the downloads at the same time.</span></span>||
|[<span data-ttu-id="aed22-262">Procedura: Eseguire più richieste Web in parallelo tramite async e await (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="aed22-262">How to: Make Multiple Web Requests in Parallel by Using Async and Await (Visual Basic)</span></span>](how-to-make-multiple-web-requests-in-parallel-by-using-async-and-await.md)|<span data-ttu-id="aed22-263">Viene illustrato come avviare contemporaneamente diverse attività.</span><span class="sxs-lookup"><span data-stu-id="aed22-263">Demonstrates how to start several tasks at the same time.</span></span>|<span data-ttu-id="aed22-264">[Async Sample: Make Multiple Web Requests in Parallel](https://code.msdn.microsoft.com/Async-Make-Multiple-Web-49adb82e) (Esempio di attività asincrona: Esecuzione di più richieste Web in parallelo)</span><span class="sxs-lookup"><span data-stu-id="aed22-264">[Async Sample: Make Multiple Web Requests in Parallel](https://code.msdn.microsoft.com/Async-Make-Multiple-Web-49adb82e)</span></span>|
|[<span data-ttu-id="aed22-265">Tipi restituiti asincroni (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="aed22-265">Async Return Types (Visual Basic)</span></span>](async-return-types.md)|<span data-ttu-id="aed22-266">Vengono illustrati i tipi che i metodi asincroni possono restituire e viene spiegato quando ogni tipo è appropriato.</span><span class="sxs-lookup"><span data-stu-id="aed22-266">Illustrates the types that async methods can return and explains when each type is appropriate.</span></span>||
|[<span data-ttu-id="aed22-267">Flusso di controllo in programmi asincroni (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="aed22-267">Control Flow in Async Programs (Visual Basic)</span></span>](control-flow-in-async-programs.md)|<span data-ttu-id="aed22-268">Traccia in dettaglio il flusso di controllo con una successione di espressioni await in un programma asincrono.</span><span class="sxs-lookup"><span data-stu-id="aed22-268">Traces in detail the flow of control through a succession of await expressions in an asynchronous program.</span></span>|<span data-ttu-id="aed22-269">[Async Sample: Control Flow in Async Programs](https://code.msdn.microsoft.com/Async-Sample-Control-Flow-5c804fc0) (Esempio di attività asincrona: Flusso di controllo in programmi asincroni)</span><span class="sxs-lookup"><span data-stu-id="aed22-269">[Async Sample: Control Flow in Async Programs](https://code.msdn.microsoft.com/Async-Sample-Control-Flow-5c804fc0)</span></span>|
|[<span data-ttu-id="aed22-270">Ottimizzazione dell'applicazione Async (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="aed22-270">Fine-Tuning Your Async Application (Visual Basic)</span></span>](fine-tuning-your-async-application.md)|<span data-ttu-id="aed22-271">Mostra come aggiungere la seguente funzionalità alla soluzione asincrono:</span><span class="sxs-lookup"><span data-stu-id="aed22-271">Shows how to add the following functionality to your async solution:</span></span><br /><br /> <span data-ttu-id="aed22-272">- [Annullare un'attività asincrona o un elenco di attività (Visual Basic)](cancel-an-async-task-or-a-list-of-tasks.md)</span><span class="sxs-lookup"><span data-stu-id="aed22-272">- [Cancel an Async Task or a List of Tasks (Visual Basic)](cancel-an-async-task-or-a-list-of-tasks.md)</span></span><br /><span data-ttu-id="aed22-273">- [Annullare attività asincrone dopo un periodo di tempo (Visual Basic)](cancel-async-tasks-after-a-period-of-time.md)</span><span class="sxs-lookup"><span data-stu-id="aed22-273">- [Cancel Async Tasks after a Period of Time (Visual Basic)](cancel-async-tasks-after-a-period-of-time.md)</span></span><br /><span data-ttu-id="aed22-274">- [Annullare le attività asincrone rimanenti dopo che ne è stata completata una(Visual Basic)](cancel-remaining-async-tasks-after-one-is-complete.md)</span><span class="sxs-lookup"><span data-stu-id="aed22-274">- [Cancel Remaining Async Tasks after One Is Complete (Visual Basic)](cancel-remaining-async-tasks-after-one-is-complete.md)</span></span><br /><span data-ttu-id="aed22-275">- [Avviare più attività asincrone ed elaborarle quando vengono completate (Visual Basic)](start-multiple-async-tasks-and-process-them-as-they-complete.md)</span><span class="sxs-lookup"><span data-stu-id="aed22-275">- [Start Multiple Async Tasks and Process Them As They Complete (Visual Basic)](start-multiple-async-tasks-and-process-them-as-they-complete.md)</span></span>|<span data-ttu-id="aed22-276">[Async Sample: Fine Tuning Your Application](https://code.msdn.microsoft.com/Async-Fine-Tuning-Your-a676abea) (Esempio di attività asincrona: Ottimizzazione dell'applicazione)</span><span class="sxs-lookup"><span data-stu-id="aed22-276">[Async Sample: Fine Tuning Your Application](https://code.msdn.microsoft.com/Async-Fine-Tuning-Your-a676abea)</span></span>|
|[<span data-ttu-id="aed22-277">Gestione della reentrancy nelle applicazioni asincrone (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="aed22-277">Handling Reentrancy in Async Apps (Visual Basic)</span></span>](handling-reentrancy-in-async-apps.md)|<span data-ttu-id="aed22-278">Viene illustrato come gestire i casi in cui un'operazione asincrona attiva viene riavviata mentre è in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="aed22-278">Shows how to handle cases in which an active asynchronous operation is restarted while it's running.</span></span>||
|<span data-ttu-id="aed22-279">[WhenAny: bridging tra .NET Framework e Windows Runtime](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/jj635140(v=vs.120))</span><span class="sxs-lookup"><span data-stu-id="aed22-279">[WhenAny: Bridging between the .NET Framework and the Windows Runtime](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/jj635140(v=vs.120))</span></span>|<span data-ttu-id="aed22-280">Descrive come integrare i tipi di attività in .NET Framework e IAsyncOperations in Windows Runtime per usare <xref:System.Threading.Tasks.Task.WhenAny%2A> con un metodo di Windows Runtime.</span><span class="sxs-lookup"><span data-stu-id="aed22-280">Shows how to bridge between Task types in the .NET Framework and IAsyncOperations in the Windows Runtime so that you can use <xref:System.Threading.Tasks.Task.WhenAny%2A> with a Windows Runtime method.</span></span>|<span data-ttu-id="aed22-281">[Async Sample: Bridging between .NET and Windows Runtime (AsTask and WhenAny)](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/jj635140(v=vs.120)) (Esempio di attività asincrona: Bridging tra .NET e Windows Runtime (AsTask e WhenAny))</span><span class="sxs-lookup"><span data-stu-id="aed22-281">[Async Sample: Bridging between .NET and Windows Runtime (AsTask and WhenAny)](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/jj635140(v=vs.120))</span></span>|
|<span data-ttu-id="aed22-282">Annullamento asincrono: bridging tra .NET Framework e Windows Runtime</span><span class="sxs-lookup"><span data-stu-id="aed22-282">Async Cancellation: Bridging between the .NET Framework and the Windows Runtime</span></span>|<span data-ttu-id="aed22-283">Descrive come integrare i tipi di attività in .NET Framework e IAsyncOperations in Windows Runtime per usare <xref:System.Threading.CancellationTokenSource> con un metodo di Windows Runtime.</span><span class="sxs-lookup"><span data-stu-id="aed22-283">Shows how to bridge between Task types in the .NET Framework and IAsyncOperations in the Windows Runtime so that you can use <xref:System.Threading.CancellationTokenSource> with a Windows Runtime method.</span></span>|<span data-ttu-id="aed22-284">[Async Sample: Bridging between .NET and Windows Runtime (AsTask & Cancellation)](https://code.msdn.microsoft.com/Async-Sample-Bridging-9479eca3) (Esempio di attività asincrona: Bridging tra .NET e Windows Runtime (AsTask e Cancellation))</span><span class="sxs-lookup"><span data-stu-id="aed22-284">[Async Sample: Bridging between .NET and Windows Runtime (AsTask & Cancellation)](https://code.msdn.microsoft.com/Async-Sample-Bridging-9479eca3)</span></span>|
|[<span data-ttu-id="aed22-285">Uso della funzionalità Async per l'accesso ai file (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="aed22-285">Using Async for File Access (Visual Basic)</span></span>](using-async-for-file-access.md)|<span data-ttu-id="aed22-286">Vengono elencati e illustrati i vantaggi dell'utilizzo di async e await per accedere ai file.</span><span class="sxs-lookup"><span data-stu-id="aed22-286">Lists and demonstrates the benefits of using async and await to access files.</span></span>||
|[<span data-ttu-id="aed22-287">Modello asincrono basato su attività (TAP)</span><span class="sxs-lookup"><span data-stu-id="aed22-287">Task-based Asynchronous Pattern (TAP)</span></span>](../../../../standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap.md)|<span data-ttu-id="aed22-288">Descrive un nuovo modello per la modalità asincrona in .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="aed22-288">Describes a new pattern for asynchrony in the .NET Framework.</span></span> <span data-ttu-id="aed22-289">Il modello è basato sui <xref:System.Threading.Tasks.Task> tipi e [dell'attività (Of TResult)](xref:System.Threading.Tasks.Task%601) .</span><span class="sxs-lookup"><span data-stu-id="aed22-289">The pattern is based on the <xref:System.Threading.Tasks.Task> and [Task(Of TResult)](xref:System.Threading.Tasks.Task%601) types.</span></span>||
|[<span data-ttu-id="aed22-290">Video sulla modalità asincrona su Channel 9</span><span class="sxs-lookup"><span data-stu-id="aed22-290">Async Videos on Channel 9</span></span>](https://channel9.msdn.com/search?term=async+&type=All)|<span data-ttu-id="aed22-291">Vengono forniti collegamenti a una serie di video sulla programmazione asincrona.</span><span class="sxs-lookup"><span data-stu-id="aed22-291">Provides links to a variety of videos about async programming.</span></span>||

## <a name="complete-example"></a><a name="BKMK_CompleteExample"></a><span data-ttu-id="aed22-292">Esempio completo</span><span class="sxs-lookup"><span data-stu-id="aed22-292">Complete Example</span></span>

<span data-ttu-id="aed22-293">Il codice seguente rappresenta il file MainWindow.xaml.vb dell'applicazione Windows Presentation Foundation (WPF) discussa in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="aed22-293">The following code is the MainWindow.xaml.vb file from the Windows Presentation Foundation (WPF) application that this topic discusses.</span></span> <span data-ttu-id="aed22-294">È possibile scaricare l'esempio dalla pagina [Async Sample: Example from "Asynchronous Programming with Async and Await"](https://docs.microsoft.com/samples/dotnet/samples/async-and-await-vb/) (Esempio di attività asincrona: Programmazione asincrona con async e await).</span><span class="sxs-lookup"><span data-stu-id="aed22-294">You can download the sample from [Async Sample: Example from "Asynchronous Programming with Async and Await"](https://docs.microsoft.com/samples/dotnet/samples/async-and-await-vb/).</span></span>

[!code-vb[async](~/samples/snippets/standard/async/async-and-await/vb/MainWindow.xaml.vb)]

## <a name="see-also"></a><span data-ttu-id="aed22-295">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="aed22-295">See also</span></span>

- [<span data-ttu-id="aed22-296">Operatore await</span><span class="sxs-lookup"><span data-stu-id="aed22-296">Await Operator</span></span>](../../../language-reference/operators/await-operator.md)
- [<span data-ttu-id="aed22-297">Async</span><span class="sxs-lookup"><span data-stu-id="aed22-297">Async</span></span>](../../../language-reference/modifiers/async.md)
